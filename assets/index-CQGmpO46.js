var P5=Object.defineProperty;var T5=(n,e,t)=>e in n?P5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var E5=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var Ae=(n,e,t)=>T5(n,typeof e!="symbol"?e+"":e,t);var wee=E5((Yi,Xi)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function ge(){}const KC=n=>n;function Ht(n,e){for(const t in e)n[t]=e[t];return n}function YC(n){return n()}function zb(){return Object.create(null)}function Et(n){n.forEach(YC)}function Kn(n){return typeof n=="function"}function Qt(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function ft(n,e){return n!=n?e==e:n!==e}function R5(n){return Object.keys(n).length===0}function D5(n,...e){if(n==null){for(const i of e)i(void 0);return ge}const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function gl(n,e,t){n.$$.on_destroy.push(D5(e,t))}function jt(n,e,t,i){if(n){const s=XC(n,e,t,i);return n[0](s)}}function XC(n,e,t,i){return n[1]&&i?Ht(t.ctx.slice(),n[1](i(e))):t.ctx}function Ft(n,e,t,i){if(n[2]&&i){const s=n[2](i(t));if(e.dirty===void 0)return s;if(typeof s=="object"){const o=[],r=Math.max(e.dirty.length,s.length);for(let l=0;l<r;l+=1)o[l]=e.dirty[l]|s[l];return o}return e.dirty|s}return e.dirty}function zt(n,e,t,i,s,o){if(s){const r=XC(e,t,i,o);n.p(r,s)}}function Vt(n){if(n.ctx.length>32){const e=[],t=n.ctx.length/32;for(let i=0;i<t;i++)e[i]=-1;return e}return-1}function co(n){const e={};for(const t in n)t[0]!=="$"&&(e[t]=n[t]);return e}function Li(n,e){const t={};e=new Set(e);for(const i in n)!e.has(i)&&i[0]!=="$"&&(t[i]=n[i]);return t}function GC(n){const e={};for(const t in n)e[t]=!0;return e}function pn(n){return n??""}function Ql(n,e,t){return n.set(t),e}function En(n){return n&&Kn(n.destroy)?n.destroy:ge}const QC=typeof window<"u";let L5=QC?()=>window.performance.now():()=>Date.now(),q1=QC?n=>requestAnimationFrame(n):ge;const wa=new Set;function ZC(n){wa.forEach(e=>{e.c(n)||(wa.delete(e),e.f())}),wa.size!==0&&q1(ZC)}function I5(n){let e;return wa.size===0&&q1(ZC),{promise:new Promise(t=>{wa.add(e={c:n,f:t})}),abort(){wa.delete(e)}}}const U1=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function A(n,e){n.appendChild(e)}function $C(n){if(!n)return document;const e=n.getRootNode?n.getRootNode():n.ownerDocument;return e&&e.host?e:n.ownerDocument}function N5(n){const e=R("style");return e.textContent="/* empty */",B5($C(n),e),e.sheet}function B5(n,e){return A(n.head||n,e),e.sheet}function j(n,e,t){n.insertBefore(e,t||null)}function B(n){n.parentNode&&n.parentNode.removeChild(n)}function xn(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function R(n){return document.createElement(n)}function gi(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function Se(n){return document.createTextNode(n)}function G(){return Se(" ")}function bt(){return Se("")}function he(n,e,t,i){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t,i)}function _l(n){return function(e){return e.preventDefault(),n.call(this,e)}}function Ps(n){return function(e){return e.stopPropagation(),n.call(this,e)}}function w(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}const j5=["width","height"];function Cr(n,e){const t=Object.getOwnPropertyDescriptors(n.__proto__);for(const i in e)e[i]==null?n.removeAttribute(i):i==="style"?n.style.cssText=e[i]:i==="__value"?n.value=n[i]=e[i]:t[i]&&t[i].set&&j5.indexOf(i)===-1?n[i]=e[i]:w(n,i,e[i])}function fo(n,e){for(const t in e)w(n,t,e[t])}function F5(n){return Array.from(n.childNodes)}function Xe(n,e){e=""+e,n.data!==e&&(n.data=e)}function Mr(n,e){n.value=e??""}function fi(n,e,t,i){t==null?n.style.removeProperty(e):n.style.setProperty(e,t,"")}function te(n,e,t){n.classList.toggle(e,!!t)}function e3(n,e,{bubbles:t=!1,cancelable:i=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:i})}function us(n,e){return new n(e)}const Vh=new Map;let Hh=0;function z5(n){let e=5381,t=n.length;for(;t--;)e=(e<<5)-e^n.charCodeAt(t);return e>>>0}function V5(n,e){const t={stylesheet:N5(e),rules:{}};return Vh.set(n,t),t}function Vb(n,e,t,i,s,o,r,l=0){const a=16.666/i;let c=`{
`;for(let p=0;p<=1;p+=a){const b=e+(t-e)*o(p);c+=p*100+`%{${r(b,1-b)}}
`}const f=c+`100% {${r(t,1-t)}}
}`,u=`__svelte_${z5(f)}_${l}`,h=$C(n),{stylesheet:d,rules:g}=Vh.get(h)||V5(h,n);g[u]||(g[u]=!0,d.insertRule(`@keyframes ${u} ${f}`,d.cssRules.length));const m=n.style.animation||"";return n.style.animation=`${m?`${m}, `:""}${u} ${i}ms linear ${s}ms 1 both`,Hh+=1,u}function H5(n,e){const t=(n.style.animation||"").split(", "),i=t.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),s=t.length-i.length;s&&(n.style.animation=i.join(", "),Hh-=s,Hh||W5())}function W5(){q1(()=>{Hh||(Vh.forEach(n=>{const{ownerNode:e}=n.stylesheet;e&&B(e)}),Vh.clear())})}let lf;function Uc(n){lf=n}function jl(){if(!lf)throw new Error("Function called outside component initialization");return lf}function q5(n){jl().$$.before_update.push(n)}function Ai(n){jl().$$.on_mount.push(n)}function U5(n){jl().$$.after_update.push(n)}function Ci(n){jl().$$.on_destroy.push(n)}function J1(){const n=jl();return(e,t,{cancelable:i=!1}={})=>{const s=n.$$.callbacks[e];if(s){const o=e3(e,t,{cancelable:i});return s.slice().forEach(r=>{r.call(n,o)}),!o.defaultPrevented}return!0}}function K1(n,e){return jl().$$.context.set(n,e),e}function jn(n){return jl().$$.context.get(n)}function al(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(i=>i.call(this,e))}const ra=[],it=[];let va=[];const Xm=[],t3=Promise.resolve();let Gm=!1;function n3(){Gm||(Gm=!0,t3.then(i3))}function wn(){return n3(),t3}function wl(n){va.push(n)}function Un(n){Xm.push(n)}const Hg=new Set;let Zl=0;function i3(){if(Zl!==0)return;const n=lf;do{try{for(;Zl<ra.length;){const e=ra[Zl];Zl++,Uc(e),J5(e.$$)}}catch(e){throw ra.length=0,Zl=0,e}for(Uc(null),ra.length=0,Zl=0;it.length;)it.pop()();for(let e=0;e<va.length;e+=1){const t=va[e];Hg.has(t)||(Hg.add(t),t())}va.length=0}while(ra.length);for(;Xm.length;)Xm.pop()();Gm=!1,Hg.clear(),Uc(n)}function J5(n){if(n.fragment!==null){n.update(),Et(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(wl)}}function K5(n){const e=[],t=[];va.forEach(i=>n.indexOf(i)===-1?e.push(i):t.push(i)),t.forEach(i=>i()),va=e}let pc;function Y5(){return pc||(pc=Promise.resolve(),pc.then(()=>{pc=null})),pc}function Wg(n,e,t){n.dispatchEvent(e3(`${e?"intro":"outro"}${t}`))}const ph=new Set;let Po;function me(){Po={r:0,c:[],p:Po}}function pe(){Po.r||Et(Po.c),Po=Po.p}function k(n,e){n&&n.i&&(ph.delete(n),n.i(e))}function M(n,e,t,i){if(n&&n.o){if(ph.has(n))return;ph.add(n),Po.c.push(()=>{ph.delete(n),i&&(t&&n.d(1),i())}),n.o(e)}else i&&i()}const X5={duration:0};function hu(n,e,t,i){let o=e(n,t,{direction:"both"}),r=i?0:1,l=null,a=null,c=null,f;function u(){c&&H5(n,c)}function h(g,m){const p=g.b-r;return m*=Math.abs(p),{a:r,b:g.b,d:p,duration:m,start:g.start,end:g.start+m,group:g.group}}function d(g){const{delay:m=0,duration:p=300,easing:b=KC,tick:y=ge,css:v}=o||X5,C={start:L5()+m,b:g};g||(C.group=Po,Po.r+=1),"inert"in n&&(g?f!==void 0&&(n.inert=f):(f=n.inert,n.inert=!0)),l||a?a=C:(v&&(u(),c=Vb(n,r,g,p,m,b,v)),g&&y(0,1),l=h(C,p),wl(()=>Wg(n,g,"start")),I5(_=>{if(a&&_>a.start&&(l=h(a,p),a=null,Wg(n,l.b,"start"),v&&(u(),c=Vb(n,r,l.b,l.duration,0,b,o.css))),l){if(_>=l.end)y(r=l.b,1-r),Wg(n,l.b,"end"),a||(l.b?u():--l.group.r||Et(l.group.c)),l=null;else if(_>=l.start){const S=_-l.start;r=l.a+l.d*b(S/l.duration),y(r,1-r)}}return!!(l||a)}))}return{run(g){Kn(o)?Y5().then(()=>{o=o({direction:g?"in":"out"}),d(g)}):d(g)},end(){u(),l=a=null}}}function at(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function G5(n,e){n.d(1),e.delete(n.key)}function Y1(n,e){M(n,1,1,()=>{e.delete(n.key)})}function Jd(n,e,t,i,s,o,r,l,a,c,f,u){let h=n.length,d=o.length,g=h;const m={};for(;g--;)m[n[g].key]=g;const p=[],b=new Map,y=new Map,v=[];for(g=d;g--;){const x=u(s,o,g),D=t(x);let P=r.get(D);P?v.push(()=>P.p(x,e)):(P=c(D,x),P.c()),b.set(D,p[g]=P),D in m&&y.set(D,Math.abs(g-m[D]))}const C=new Set,_=new Set;function S(x){k(x,1),x.m(l,f),r.set(x.key,x),f=x.first,d--}for(;h&&d;){const x=p[d-1],D=n[h-1],P=x.key,E=D.key;x===D?(f=x.first,h--,d--):b.has(E)?!r.has(P)||C.has(P)?S(x):_.has(E)?h--:y.get(P)>y.get(E)?(_.add(P),S(x)):(C.add(E),h--):(a(D,r),h--)}for(;h--;){const x=n[h];b.has(x.key)||a(x,r)}for(;d;)S(p[d-1]);return Et(v),p}function ni(n,e){const t={},i={},s={$$scope:1};let o=n.length;for(;o--;){const r=n[o],l=e[o];if(l){for(const a in r)a in l||(i[a]=1);for(const a in l)s[a]||(t[a]=l[a],s[a]=1);n[o]=l}else for(const a in r)s[a]=1}for(const r in i)r in t||(t[r]=void 0);return t}function vl(n){return typeof n=="object"&&n!==null?n:{}}function Jn(n,e,t){const i=n.$$.props[e];i!==void 0&&(n.$$.bound[i]=t,t(n.$$.ctx[i]))}function se(n){n&&n.c()}function ne(n,e,t){const{fragment:i,after_update:s}=n.$$;i&&i.m(e,t),wl(()=>{const o=n.$$.on_mount.map(YC).filter(Kn);n.$$.on_destroy?n.$$.on_destroy.push(...o):Et(o),n.$$.on_mount=[]}),s.forEach(wl)}function ie(n,e){const t=n.$$;t.fragment!==null&&(K5(t.after_update),Et(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Q5(n,e){n.$$.dirty[0]===-1&&(ra.push(n),n3(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function Fe(n,e,t,i,s,o,r=null,l=[-1]){const a=lf;Uc(n);const c=n.$$={fragment:null,ctx:[],props:o,update:ge,not_equal:s,bound:zb(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:zb(),dirty:l,skip_bound:!1,root:e.target||a.$$.root};r&&r(c.root);let f=!1;if(c.ctx=t?t(n,e.props||{},(u,h,...d)=>{const g=d.length?d[0]:h;return c.ctx&&s(c.ctx[u],c.ctx[u]=g)&&(!c.skip_bound&&c.bound[u]&&c.bound[u](g),f&&Q5(n,u)),h}):[],c.update(),f=!0,Et(c.before_update),c.fragment=i?i(c.ctx):!1,e.target){if(e.hydrate){const u=F5(e.target);c.fragment&&c.fragment.l(u),u.forEach(B)}else c.fragment&&c.fragment.c();e.intro&&k(n.$$.fragment),ne(n,e.target,e.anchor),i3()}Uc(a)}class ze{constructor(){Ae(this,"$$");Ae(this,"$$set")}$destroy(){ie(this,1),this.$destroy=ge}$on(e,t){if(!Kn(t))return ge;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}$set(e){this.$$set&&!R5(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Z5="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Z5);const $l=[];function bh(n,e=ge){let t;const i=new Set;function s(l){if(Qt(n,l)&&(n=l,t)){const a=!$l.length;for(const c of i)c[1](),$l.push(c,n);if(a){for(let c=0;c<$l.length;c+=2)$l[c][0]($l[c+1]);$l.length=0}}}function o(l){s(l(n))}function r(l,a=ge){const c=[l,a];return i.add(c),i.size===1&&(t=e(s,o)||ge),l(n),()=>{i.delete(c),i.size===0&&t&&(t(),t=null)}}return{set:s,update:o,subscribe:r}}function Hb(n){let e,t;return{c(){e=gi("title"),t=Se(n[1])},m(i,s){j(i,e,s),A(e,t)},p(i,s){s&2&&Xe(t,i[1])},d(i){i&&B(e)}}}function $5(n){let e,t,i=n[1]&&Hb(n),s=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],o={};for(let r=0;r<s.length;r+=1)o=Ht(o,s[r]);return{c(){e=gi("svg"),i&&i.c(),t=gi("path"),w(t,"d","M24 9.4L22.6 8 16 14.6 9.4 8 8 9.4 14.6 16 8 22.6 9.4 24 16 17.4 22.6 24 24 22.6 17.4 16 24 9.4z"),fo(e,o)},m(r,l){j(r,e,l),i&&i.m(e,null),A(e,t)},p(r,[l]){r[1]?i?i.p(r,l):(i=Hb(r),i.c(),i.m(e,t)):i&&(i.d(1),i=null),fo(e,o=ni(s,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},l&1&&{width:r[0]},l&1&&{height:r[0]},l&4&&r[2],l&8&&r[3]]))},i:ge,o:ge,d(r){r&&B(e),i&&i.d()}}}function eO(n,e,t){let i,s;const o=["size","title"];let r=Li(e,o),{size:l=16}=e,{title:a=void 0}=e;return n.$$set=c=>{t(5,e=Ht(Ht({},e),co(c))),t(3,r=Li(e,o)),"size"in c&&t(0,l=c.size),"title"in c&&t(1,a=c.title)},n.$$.update=()=>{t(4,i=e["aria-label"]||e["aria-labelledby"]||a),t(2,s={"aria-hidden":i?void 0:!0,role:i?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=co(e),[l,a,s,r,i]}class s3 extends ze{constructor(e){super(),Fe(this,e,eO,$5,Qt,{size:0,title:1})}}const tO="modulepreload",nO=function(n){return"/"+n},Wb={},iO=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),r=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.all(t.map(l=>{if(l=nO(l),l in Wb)return;Wb[l]=!0;const a=l.endsWith(".css"),c=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const f=document.createElement("link");if(f.rel=a?"stylesheet":tO,a||(f.as="script"),f.crossOrigin="",f.href=l,r&&f.setAttribute("nonce",r),document.head.appendChild(f),a)return new Promise((u,h)=>{f.addEventListener("load",u),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${l}`)))})}))}return s.then(()=>e()).catch(o=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=o,window.dispatchEvent(r),!r.defaultPrevented)throw o})};function sO(n,{delay:e=0,duration:t=400,easing:i=KC}={}){const s=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:i,css:o=>`opacity: ${o*s}`}}function qb(n){let e,t;return{c(){e=gi("title"),t=Se(n[1])},m(i,s){j(i,e,s),A(e,t)},p(i,s){s&2&&Xe(t,i[1])},d(i){i&&B(e)}}}function oO(n){let e,t,i=n[1]&&qb(n),s=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],o={};for(let r=0;r<s.length;r+=1)o=Ht(o,s[r]);return{c(){e=gi("svg"),i&&i.c(),t=gi("path"),w(t,"d","M4 6H28V8H4zM4 24H28V26H4zM4 12H28V14H4zM4 18H28V20H4z"),fo(e,o)},m(r,l){j(r,e,l),i&&i.m(e,null),A(e,t)},p(r,[l]){r[1]?i?i.p(r,l):(i=qb(r),i.c(),i.m(e,t)):i&&(i.d(1),i=null),fo(e,o=ni(s,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},l&1&&{width:r[0]},l&1&&{height:r[0]},l&4&&r[2],l&8&&r[3]]))},i:ge,o:ge,d(r){r&&B(e),i&&i.d()}}}function rO(n,e,t){let i,s;const o=["size","title"];let r=Li(e,o),{size:l=16}=e,{title:a=void 0}=e;return n.$$set=c=>{t(5,e=Ht(Ht({},e),co(c))),t(3,r=Li(e,o)),"size"in c&&t(0,l=c.size),"title"in c&&t(1,a=c.title)},n.$$.update=()=>{t(4,i=e["aria-label"]||e["aria-labelledby"]||a),t(2,s={"aria-hidden":i?void 0:!0,role:i?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=co(e),[l,a,s,r,i]}let o3=class extends ze{constructor(e){super(),Fe(this,e,rO,oO,Qt,{size:0,title:1})}};const lO=bh(!1);function aO(n){let e,t,i,s,o;var r=n[0]?n[4]:n[3];function l(f,u){return{props:{size:20}}}r&&(t=us(r,l()));let a=[{type:"button"},{title:n[2]},{"aria-label":n[2]},n[5]],c={};for(let f=0;f<a.length;f+=1)c=Ht(c,a[f]);return{c(){e=R("button"),t&&se(t.$$.fragment),Cr(e,c),te(e,"bx--header__action",!0),te(e,"bx--header__menu-trigger",!0),te(e,"bx--header__menu-toggle",!0)},m(f,u){j(f,e,u),t&&ne(t,e,null),e.autofocus&&e.focus(),n[7](e),i=!0,s||(o=[he(e,"click",n[6]),he(e,"click",n[8])],s=!0)},p(f,[u]){if(u&25&&r!==(r=f[0]?f[4]:f[3])){if(t){me();const h=t;M(h.$$.fragment,1,0,()=>{ie(h,1)}),pe()}r?(t=us(r,l()),se(t.$$.fragment),k(t.$$.fragment,1),ne(t,e,null)):t=null}Cr(e,c=ni(a,[{type:"button"},(!i||u&4)&&{title:f[2]},(!i||u&4)&&{"aria-label":f[2]},u&32&&f[5]])),te(e,"bx--header__action",!0),te(e,"bx--header__menu-trigger",!0),te(e,"bx--header__menu-toggle",!0)},i(f){i||(t&&k(t.$$.fragment,f),i=!0)},o(f){t&&M(t.$$.fragment,f),i=!1},d(f){f&&B(e),t&&ie(t),n[7](null),s=!1,Et(o)}}}function cO(n,e,t){const i=["ariaLabel","isOpen","iconMenu","iconClose","ref"];let s=Li(e,i),{ariaLabel:o=void 0}=e,{isOpen:r=!1}=e,{iconMenu:l=o3}=e,{iconClose:a=s3}=e,{ref:c=null}=e;function f(d){al.call(this,n,d)}function u(d){it[d?"unshift":"push"](()=>{c=d,t(1,c)})}const h=()=>t(0,r=!r);return n.$$set=d=>{e=Ht(Ht({},e),co(d)),t(5,s=Li(e,i)),"ariaLabel"in d&&t(2,o=d.ariaLabel),"isOpen"in d&&t(0,r=d.isOpen),"iconMenu"in d&&t(3,l=d.iconMenu),"iconClose"in d&&t(4,a=d.iconClose),"ref"in d&&t(1,c=d.ref)},[r,c,o,l,a,s,f,u,h]}class fO extends ze{constructor(e){super(),Fe(this,e,cO,aO,Qt,{ariaLabel:2,isOpen:0,iconMenu:3,iconClose:4,ref:1})}}const uO=n=>({}),Ub=n=>({}),hO=n=>({}),Jb=n=>({}),dO=n=>({}),Kb=n=>({});function Yb(n){let e,t,i;function s(r){n[20](r)}let o={iconClose:n[8],iconMenu:n[7]};return n[0]!==void 0&&(o.isOpen=n[0]),e=new fO({props:o}),it.push(()=>Jn(e,"isOpen",s)),{c(){se(e.$$.fragment)},m(r,l){ne(e,r,l),i=!0},p(r,l){const a={};l&256&&(a.iconClose=r[8]),l&128&&(a.iconMenu=r[7]),!t&&l&1&&(t=!0,a.isOpen=r[0],Un(()=>t=!1)),e.$set(a)},i(r){i||(k(e.$$.fragment,r),i=!0)},o(r){M(e.$$.fragment,r),i=!1},d(r){ie(e,r)}}}function Xb(n){let e,t;const i=n[17].company,s=jt(i,n,n[16],Jb),o=s||gO(n);return{c(){e=R("span"),o&&o.c(),te(e,"bx--header__name--prefix",!0)},m(r,l){j(r,e,l),o&&o.m(e,null),t=!0},p(r,l){s?s.p&&(!t||l&65536)&&zt(s,i,r,r[16],t?Ft(i,r[16],l,hO):Vt(r[16]),Jb):o&&o.p&&(!t||l&8)&&o.p(r,t?l:-1)},i(r){t||(k(o,r),t=!0)},o(r){M(o,r),t=!1},d(r){r&&B(e),o&&o.d(r)}}}function gO(n){let e,t;return{c(){e=Se(n[3]),t=Se("Â ")},m(i,s){j(i,e,s),j(i,t,s)},p(i,s){s&8&&Xe(e,i[3])},d(i){i&&(B(e),B(t))}}}function mO(n){let e;return{c(){e=Se(n[4])},m(t,i){j(t,e,i)},p(t,i){i&16&&Xe(e,t[4])},d(t){t&&B(e)}}}function pO(n){let e,t,i,s,o,r,l,a,c;wl(n[19]);const f=n[17]["skip-to-content"],u=jt(f,n,n[16],Kb);let h=(n[11]&&n[9]<n[6]||n[5])&&Yb(n),d=(n[3]||n[13].company)&&Xb(n);const g=n[17].platform,m=jt(g,n,n[16],Ub),p=m||mO(n);let b=[{href:n[2]},n[12]],y={};for(let _=0;_<b.length;_+=1)y=Ht(y,b[_]);const v=n[17].default,C=jt(v,n,n[16],null);return{c(){e=R("header"),u&&u.c(),t=G(),h&&h.c(),i=G(),s=R("a"),d&&d.c(),o=G(),p&&p.c(),r=G(),C&&C.c(),Cr(s,y),te(s,"bx--header__name",!0),w(e,"aria-label",n[10]),te(e,"bx--header",!0)},m(_,S){j(_,e,S),u&&u.m(e,null),A(e,t),h&&h.m(e,null),A(e,i),A(e,s),d&&d.m(s,null),A(s,o),p&&p.m(s,null),n[21](s),A(e,r),C&&C.m(e,null),l=!0,a||(c=[he(window,"resize",n[19]),he(s,"click",n[18])],a=!0)},p(_,[S]){u&&u.p&&(!l||S&65536)&&zt(u,f,_,_[16],l?Ft(f,_[16],S,dO):Vt(_[16]),Kb),_[11]&&_[9]<_[6]||_[5]?h?(h.p(_,S),S&2656&&k(h,1)):(h=Yb(_),h.c(),k(h,1),h.m(e,i)):h&&(me(),M(h,1,1,()=>{h=null}),pe()),_[3]||_[13].company?d?(d.p(_,S),S&8200&&k(d,1)):(d=Xb(_),d.c(),k(d,1),d.m(s,o)):d&&(me(),M(d,1,1,()=>{d=null}),pe()),m?m.p&&(!l||S&65536)&&zt(m,g,_,_[16],l?Ft(g,_[16],S,uO):Vt(_[16]),Ub):p&&p.p&&(!l||S&16)&&p.p(_,l?S:-1),Cr(s,y=ni(b,[(!l||S&4)&&{href:_[2]},S&4096&&_[12]])),te(s,"bx--header__name",!0),C&&C.p&&(!l||S&65536)&&zt(C,v,_,_[16],l?Ft(v,_[16],S,null):Vt(_[16]),null),(!l||S&1024)&&w(e,"aria-label",_[10])},i(_){l||(k(u,_),k(h),k(d),k(p,_),k(C,_),l=!0)},o(_){M(u,_),M(h),M(d),M(p,_),M(C,_),l=!1},d(_){_&&B(e),u&&u.d(_),h&&h.d(),d&&d.d(),p&&p.d(_),n[21](null),C&&C.d(_),a=!1,Et(c)}}}function bO(n,e,t){let i;const s=["expandedByDefault","isSideNavOpen","uiShellAriaLabel","href","company","platformName","persistentHamburgerMenu","expansionBreakpoint","ref","iconMenu","iconClose"];let o=Li(e,s),r;gl(n,lO,E=>t(11,r=E));let{$$slots:l={},$$scope:a}=e;const c=GC(l);let{expandedByDefault:f=!0}=e,{isSideNavOpen:u=!1}=e,{uiShellAriaLabel:h=void 0}=e,{href:d=void 0}=e,{company:g=void 0}=e,{platformName:m=""}=e,{persistentHamburgerMenu:p=!1}=e,{expansionBreakpoint:b=1056}=e,{ref:y=null}=e,{iconMenu:v=o3}=e,{iconClose:C=s3}=e,_;function S(E){al.call(this,n,E)}function x(){t(9,_=window.innerWidth)}function D(E){u=E,t(0,u),t(14,f),t(9,_),t(6,b),t(5,p)}function P(E){it[E?"unshift":"push"](()=>{y=E,t(1,y)})}return n.$$set=E=>{t(22,e=Ht(Ht({},e),co(E))),t(12,o=Li(e,s)),"expandedByDefault"in E&&t(14,f=E.expandedByDefault),"isSideNavOpen"in E&&t(0,u=E.isSideNavOpen),"uiShellAriaLabel"in E&&t(15,h=E.uiShellAriaLabel),"href"in E&&t(2,d=E.href),"company"in E&&t(3,g=E.company),"platformName"in E&&t(4,m=E.platformName),"persistentHamburgerMenu"in E&&t(5,p=E.persistentHamburgerMenu),"expansionBreakpoint"in E&&t(6,b=E.expansionBreakpoint),"ref"in E&&t(1,y=E.ref),"iconMenu"in E&&t(7,v=E.iconMenu),"iconClose"in E&&t(8,C=E.iconClose),"$$scope"in E&&t(16,a=E.$$scope)},n.$$.update=()=>{n.$$.dirty&16992&&t(0,u=f&&_>=b&&!p),t(10,i=g?`${g} `:""+(h||e["aria-label"]||m))},e=co(e),[u,y,d,g,m,p,b,v,C,_,i,r,o,c,f,h,a,l,S,x,D,P]}let yO=class extends ze{constructor(e){super(),Fe(this,e,bO,pO,Qt,{expandedByDefault:14,isSideNavOpen:0,uiShellAriaLabel:15,href:2,company:3,platformName:4,persistentHamburgerMenu:5,expansionBreakpoint:6,ref:1,iconMenu:7,iconClose:8})}};function _O(n){let e;return{c(){e=Se("Skip to main content")},m(t,i){j(t,e,i)},d(t){t&&B(e)}}}function wO(n){let e,t,i,s;const o=n[4].default,r=jt(o,n,n[3],null),l=r||_O();let a=[{href:n[0]},{tabindex:n[1]},n[2]],c={};for(let f=0;f<a.length;f+=1)c=Ht(c,a[f]);return{c(){e=R("a"),l&&l.c(),Cr(e,c),te(e,"bx--skip-to-content",!0)},m(f,u){j(f,e,u),l&&l.m(e,null),t=!0,i||(s=he(e,"click",n[5]),i=!0)},p(f,[u]){r&&r.p&&(!t||u&8)&&zt(r,o,f,f[3],t?Ft(o,f[3],u,null):Vt(f[3]),null),Cr(e,c=ni(a,[(!t||u&1)&&{href:f[0]},(!t||u&2)&&{tabindex:f[1]},u&4&&f[2]])),te(e,"bx--skip-to-content",!0)},i(f){t||(k(l,f),t=!0)},o(f){M(l,f),t=!1},d(f){f&&B(e),l&&l.d(f),i=!1,s()}}}function vO(n,e,t){const i=["href","tabindex"];let s=Li(e,i),{$$slots:o={},$$scope:r}=e,{href:l="#main-content"}=e,{tabindex:a="0"}=e;function c(f){al.call(this,n,f)}return n.$$set=f=>{e=Ht(Ht({},e),co(f)),t(2,s=Li(e,i)),"href"in f&&t(0,l=f.href),"tabindex"in f&&t(1,a=f.tabindex),"$$scope"in f&&t(3,r=f.$$scope)},[l,a,s,r,o,c]}class kO extends ze{constructor(e){super(),Fe(this,e,vO,wO,Qt,{href:0,tabindex:1})}}function Fn(n,e=SO(n)){if(!e)return CO;const t=xO(n);return function(...s){console.log(`%c${n}`,`color:${t}`,...s)}}function SO(n){const e=MO("debug");return e!=null&&e.endsWith("*")?n.startsWith(e.slice(0,-1)):n===e}function CO(){}function MO(n){try{if(typeof window<"u"&&typeof window.localStorage<"u")return window.localStorage[n]}catch{}}function xO(n){let e=0;for(let t=0;t<n.length;t++)e=(e<<5)-e+n.charCodeAt(t),e|=0;return Gb[Math.abs(e)%Gb.length]}const Gb=["#0000CC","#0099FF","#009400","#8dd200","#CCCC00","#CC9933","#ae04e7","#ff35d7","#FF3333","#FF6600","#FF9933","#FFCC33"],{window:AO}=U1;function Qb(n){let e,t,i,s,o,r,l,a,c,f,u,h,d,g,m,p,b,y,v=n[1].closeButton&&Zb(n);var C=n[2];function _(S,x){return{}}return C&&(r=us(C,_())),{c(){e=R("div"),t=R("div"),i=R("div"),v&&v.c(),s=G(),o=R("div"),r&&se(r.$$.fragment),w(o,"class",l=pn(n[1].classContent)+" svelte-n7cvum"),w(o,"style",n[9]),te(o,"content",!n[0]),w(i,"class",a=pn(n[1].classWindow)+" svelte-n7cvum"),w(i,"role","dialog"),w(i,"aria-modal","true"),w(i,"aria-label",c=n[1].ariaLabelledBy?null:n[1].ariaLabel||null),w(i,"aria-labelledby",f=n[1].ariaLabelledBy||null),w(i,"style",n[8]),te(i,"window",!n[0]),w(t,"class",h=pn(n[1].classWindowWrap)+" svelte-n7cvum"),w(t,"style",n[7]),te(t,"wrap",!n[0]),w(e,"aria-hidden","true"),w(e,"id",d=n[1].id),w(e,"class",g=pn(n[1].classBg)+" svelte-n7cvum"),w(e,"style",n[6]),te(e,"bg",!n[0])},m(S,x){j(S,e,x),A(e,t),A(t,i),v&&v.m(i,null),A(i,s),A(i,o),r&&ne(r,o,null),n[50](i),n[51](t),n[52](e),p=!0,b||(y=[he(i,"introstart",function(){Kn(n[13])&&n[13].apply(this,arguments)}),he(i,"outrostart",function(){Kn(n[14])&&n[14].apply(this,arguments)}),he(i,"introend",function(){Kn(n[15])&&n[15].apply(this,arguments)}),he(i,"outroend",function(){Kn(n[16])&&n[16].apply(this,arguments)}),he(e,"mousedown",n[20]),he(e,"mouseup",n[21])],b=!0)},p(S,x){if(n=S,n[1].closeButton?v?(v.p(n,x),x[0]&2&&k(v,1)):(v=Zb(n),v.c(),k(v,1),v.m(i,s)):v&&(me(),M(v,1,1,()=>{v=null}),pe()),x[0]&4&&C!==(C=n[2])){if(r){me();const D=r;M(D.$$.fragment,1,0,()=>{ie(D,1)}),pe()}C?(r=us(C,_()),se(r.$$.fragment),k(r.$$.fragment,1),ne(r,o,null)):r=null}(!p||x[0]&2&&l!==(l=pn(n[1].classContent)+" svelte-n7cvum"))&&w(o,"class",l),(!p||x[0]&512)&&w(o,"style",n[9]),(!p||x[0]&3)&&te(o,"content",!n[0]),(!p||x[0]&2&&a!==(a=pn(n[1].classWindow)+" svelte-n7cvum"))&&w(i,"class",a),(!p||x[0]&2&&c!==(c=n[1].ariaLabelledBy?null:n[1].ariaLabel||null))&&w(i,"aria-label",c),(!p||x[0]&2&&f!==(f=n[1].ariaLabelledBy||null))&&w(i,"aria-labelledby",f),(!p||x[0]&256)&&w(i,"style",n[8]),(!p||x[0]&3)&&te(i,"window",!n[0]),(!p||x[0]&2&&h!==(h=pn(n[1].classWindowWrap)+" svelte-n7cvum"))&&w(t,"class",h),(!p||x[0]&128)&&w(t,"style",n[7]),(!p||x[0]&3)&&te(t,"wrap",!n[0]),(!p||x[0]&2&&d!==(d=n[1].id))&&w(e,"id",d),(!p||x[0]&2&&g!==(g=pn(n[1].classBg)+" svelte-n7cvum"))&&w(e,"class",g),(!p||x[0]&64)&&w(e,"style",n[6]),(!p||x[0]&3)&&te(e,"bg",!n[0])},i(S){p||(k(v),r&&k(r.$$.fragment,S),S&&wl(()=>{p&&(u||(u=hu(i,n[12],n[1].transitionWindowProps,!0)),u.run(1))}),S&&wl(()=>{p&&(m||(m=hu(e,n[11],n[1].transitionBgProps,!0)),m.run(1))}),p=!0)},o(S){M(v),r&&M(r.$$.fragment,S),S&&(u||(u=hu(i,n[12],n[1].transitionWindowProps,!1)),u.run(0)),S&&(m||(m=hu(e,n[11],n[1].transitionBgProps,!1)),m.run(0)),p=!1},d(S){S&&B(e),v&&v.d(),r&&ie(r),n[50](null),S&&u&&u.end(),n[51](null),n[52](null),S&&m&&m.end(),b=!1,Et(y)}}}function Zb(n){let e,t,i,s,o;const r=[PO,OO],l=[];function a(c,f){return f[0]&2&&(e=null),e==null&&(e=!!c[17](c[1].closeButton)),e?0:1}return t=a(n,[-1,-1,-1]),i=l[t]=r[t](n),{c(){i.c(),s=bt()},m(c,f){l[t].m(c,f),j(c,s,f),o=!0},p(c,f){let u=t;t=a(c,f),t===u?l[t].p(c,f):(me(),M(l[u],1,1,()=>{l[u]=null}),pe(),i=l[t],i?i.p(c,f):(i=l[t]=r[t](c),i.c()),k(i,1),i.m(s.parentNode,s))},i(c){o||(k(i),o=!0)},o(c){M(i),o=!1},d(c){c&&B(s),l[t].d(c)}}}function OO(n){let e,t,i,s;return{c(){e=R("button"),w(e,"class",t=pn(n[1].classCloseButton)+" svelte-n7cvum"),w(e,"aria-label","Close modal"),w(e,"style",n[10]),w(e,"type","button"),te(e,"close",!n[0])},m(o,r){j(o,e,r),i||(s=he(e,"click",n[18]),i=!0)},p(o,r){r[0]&2&&t!==(t=pn(o[1].classCloseButton)+" svelte-n7cvum")&&w(e,"class",t),r[0]&1024&&w(e,"style",o[10]),r[0]&3&&te(e,"close",!o[0])},i:ge,o:ge,d(o){o&&B(e),i=!1,s()}}}function PO(n){let e,t,i;var s=n[1].closeButton;function o(r,l){return{props:{onClose:r[18]}}}return s&&(e=us(s,o(n))),{c(){e&&se(e.$$.fragment),t=bt()},m(r,l){e&&ne(e,r,l),j(r,t,l),i=!0},p(r,l){if(l[0]&2&&s!==(s=r[1].closeButton)){if(e){me();const a=e;M(a.$$.fragment,1,0,()=>{ie(a,1)}),pe()}s?(e=us(s,o(r)),se(e.$$.fragment),k(e.$$.fragment,1),ne(e,t.parentNode,t)):e=null}},i(r){i||(e&&k(e.$$.fragment,r),i=!0)},o(r){e&&M(e.$$.fragment,r),i=!1},d(r){r&&B(t),e&&ie(e,r)}}}function TO(n){let e,t,i,s,o=n[2]&&Qb(n);const r=n[49].default,l=jt(r,n,n[48],null);return{c(){o&&o.c(),e=G(),l&&l.c()},m(a,c){o&&o.m(a,c),j(a,e,c),l&&l.m(a,c),t=!0,i||(s=he(AO,"keydown",n[19]),i=!0)},p(a,c){a[2]?o?(o.p(a,c),c[0]&4&&k(o,1)):(o=Qb(a),o.c(),k(o,1),o.m(e.parentNode,e)):o&&(me(),M(o,1,1,()=>{o=null}),pe()),l&&l.p&&(!t||c[1]&131072)&&zt(l,r,a,a[48],t?Ft(r,a[48],c,null):Vt(a[48]),null)},i(a){t||(k(o),k(l,a),t=!0)},o(a){M(o),M(l,a),t=!1},d(a){a&&B(e),o&&o.d(a),l&&l.d(a),i=!1,s()}}}function r3(n,e={}){return function(i){return new n({...i,props:{...e,...i.props}})}}function EO(n,e,t){let{$$slots:i={},$$scope:s}=e;const o=J1(),r=K1,l=fe=>fe.tabIndex>=0&&!fe.hidden&&!fe.disabled&&fe.style.display!=="none"&&fe.type!=="hidden"&&!!(fe.offsetWidth||fe.offsetHeight||fe.getClientRects().length);let{isTabbable:a=l}=e,{show:c=null}=e,{id:f=null}=e,{key:u="simple-modal"}=e,{ariaLabel:h=null}=e,{ariaLabelledBy:d=null}=e,{closeButton:g=!0}=e,{closeOnEsc:m=!0}=e,{closeOnOuterClick:p=!0}=e,{styleBg:b={}}=e,{styleWindowWrap:y={}}=e,{styleWindow:v={}}=e,{styleContent:C={}}=e,{styleCloseButton:_={}}=e,{classBg:S=null}=e,{classWindowWrap:x=null}=e,{classWindow:D=null}=e,{classContent:P=null}=e,{classCloseButton:E=null}=e,{unstyled:O=!1}=e,{setContext:I=r}=e,{transitionBg:N=sO}=e,{transitionBgProps:F={duration:250}}=e,{transitionWindow:z=N}=e,{transitionWindowProps:q=F}=e,{disableFocusTrap:Q=!1}=e;const X={id:f,ariaLabel:h,ariaLabelledBy:d,closeButton:g,closeOnEsc:m,closeOnOuterClick:p,styleBg:b,styleWindowWrap:y,styleWindow:v,styleContent:C,styleCloseButton:_,classBg:S,classWindowWrap:x,classWindow:D,classContent:P,classCloseButton:E,transitionBg:N,transitionBgProps:F,transitionWindow:z,transitionWindowProps:q,disableFocusTrap:Q,isTabbable:a,unstyled:O};let T={...X},U=null,Y,le,Z,ue,W,we,ee,be,tt,re,Qe,H,ae,De,Le;const Ie=fe=>fe.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase(),Te=fe=>fe?Object.keys(fe).reduce((Pt,At)=>`${Pt}; ${Ie(At)}: ${fe[At]}`,""):"",de=fe=>!!(fe&&fe.constructor&&fe.call&&fe.apply),lt=()=>{t(6,W=Te(Object.assign({},{width:window.innerWidth,height:window.innerHeight},T.styleBg))),t(7,we=Te(T.styleWindowWrap)),t(8,ee=Te(T.styleWindow)),t(9,be=Te(T.styleContent)),t(10,tt=Te(T.styleCloseButton)),t(11,re=T.transitionBg),t(12,Qe=T.transitionWindow)},wt=()=>{};let Ee=wt,st=wt,dt=wt,Ze=wt;const It=(fe,Pt={},At={},nt={})=>{t(2,U=r3(fe,Pt)),t(1,T={...X,...At}),lt(),qe(),t(13,Ee=Kt=>{nt.onOpen&&nt.onOpen(Kt),o("open"),o("opening")}),t(14,st=Kt=>{nt.onClose&&nt.onClose(Kt),o("close"),o("closing")}),t(15,dt=Kt=>{nt.onOpened&&nt.onOpened(Kt),o("opened")}),t(16,Ze=Kt=>{nt.onClosed&&nt.onClosed(Kt),o("closed")})},We=(fe={})=>{U&&(t(14,st=fe.onClose||st),t(16,Ze=fe.onClosed||Ze),t(2,U=null),Ce())},ct=fe=>{if(T.closeOnEsc&&U&&fe.key==="Escape"&&(fe.preventDefault(),We()),U&&fe.key==="Tab"&&!T.disableFocusTrap){const Pt=Z.querySelectorAll("*"),At=Array.from(Pt).filter(T.isTabbable).sort((Kt,Yt)=>Kt.tabIndex-Yt.tabIndex);let nt=At.indexOf(document.activeElement);nt===-1&&fe.shiftKey&&(nt=0),nt+=At.length+(fe.shiftKey?-1:1),nt%=At.length,At[nt].focus(),fe.preventDefault()}},K=fe=>{T.closeOnOuterClick&&(fe.target===Y||fe.target===le)&&(Le=fe.target)},ke=fe=>{T.closeOnOuterClick&&fe.target===Le&&(fe.preventDefault(),We())},qe=()=>{ue=window.scrollY,H=document.body.style.position,ae=document.body.style.overflow,De=document.body.style.width,document.body.style.position="fixed",document.body.style.top=`-${ue}px`,document.body.style.overflow="hidden",document.body.style.width="100%"},Ce=()=>{document.body.style.position=H||"",document.body.style.top="",document.body.style.overflow=ae||"",document.body.style.width=De||"",window.scrollTo({top:ue,left:0,behavior:"instant"})};I(u,{open:It,close:We});let xe=!1;Ci(()=>{xe&&We()}),Ai(()=>{t(47,xe=!0)});function Pe(fe){it[fe?"unshift":"push"](()=>{Z=fe,t(5,Z)})}function Ge(fe){it[fe?"unshift":"push"](()=>{le=fe,t(4,le)})}function ot(fe){it[fe?"unshift":"push"](()=>{Y=fe,t(3,Y)})}return n.$$set=fe=>{"isTabbable"in fe&&t(22,a=fe.isTabbable),"show"in fe&&t(23,c=fe.show),"id"in fe&&t(24,f=fe.id),"key"in fe&&t(25,u=fe.key),"ariaLabel"in fe&&t(26,h=fe.ariaLabel),"ariaLabelledBy"in fe&&t(27,d=fe.ariaLabelledBy),"closeButton"in fe&&t(28,g=fe.closeButton),"closeOnEsc"in fe&&t(29,m=fe.closeOnEsc),"closeOnOuterClick"in fe&&t(30,p=fe.closeOnOuterClick),"styleBg"in fe&&t(31,b=fe.styleBg),"styleWindowWrap"in fe&&t(32,y=fe.styleWindowWrap),"styleWindow"in fe&&t(33,v=fe.styleWindow),"styleContent"in fe&&t(34,C=fe.styleContent),"styleCloseButton"in fe&&t(35,_=fe.styleCloseButton),"classBg"in fe&&t(36,S=fe.classBg),"classWindowWrap"in fe&&t(37,x=fe.classWindowWrap),"classWindow"in fe&&t(38,D=fe.classWindow),"classContent"in fe&&t(39,P=fe.classContent),"classCloseButton"in fe&&t(40,E=fe.classCloseButton),"unstyled"in fe&&t(0,O=fe.unstyled),"setContext"in fe&&t(41,I=fe.setContext),"transitionBg"in fe&&t(42,N=fe.transitionBg),"transitionBgProps"in fe&&t(43,F=fe.transitionBgProps),"transitionWindow"in fe&&t(44,z=fe.transitionWindow),"transitionWindowProps"in fe&&t(45,q=fe.transitionWindowProps),"disableFocusTrap"in fe&&t(46,Q=fe.disableFocusTrap),"$$scope"in fe&&t(48,s=fe.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&8388608|n.$$.dirty[1]&65536&&xe&&(de(c)?It(c):We())},[O,T,U,Y,le,Z,W,we,ee,be,tt,re,Qe,Ee,st,dt,Ze,de,We,ct,K,ke,a,c,f,u,h,d,g,m,p,b,y,v,C,_,S,x,D,P,E,I,N,F,z,q,Q,xe,s,i,Pe,Ge,ot]}class l3 extends ze{constructor(e){super(),Fe(this,e,EO,TO,Qt,{isTabbable:22,show:23,id:24,key:25,ariaLabel:26,ariaLabelledBy:27,closeButton:28,closeOnEsc:29,closeOnOuterClick:30,styleBg:31,styleWindowWrap:32,styleWindow:33,styleContent:34,styleCloseButton:35,classBg:36,classWindowWrap:37,classWindow:38,classContent:39,classCloseButton:40,unstyled:0,setContext:41,transitionBg:42,transitionBgProps:43,transitionWindow:44,transitionWindowProps:45,disableFocusTrap:46},null,[-1,-1,-1])}}var Wn;(function(n){n.text="text",n.tree="tree",n.table="table"})(Wn||(Wn={}));var qt;(function(n){n.after="after",n.inside="inside",n.key="key",n.value="value",n.multi="multi",n.text="text"})(qt||(qt={}));var ks;(function(n){n.after="after",n.key="key",n.value="value",n.inside="inside"})(ks||(ks={}));var Ms;(function(n){n.info="info",n.warning="warning",n.error="error"})(Ms||(Ms={}));var xs;(function(n){n.key="key",n.value="value"})(xs||(xs={}));var rs;(function(n){n.asc="asc",n.desc="desc"})(rs||(rs={}));var _r;(function(n){n.no="no",n.self="self",n.nextInside="nextInside"})(_r||(_r={}));const Qm=300,Zm=300,$b=300,e2=50,RO=200,DO=400,LO=1200,qg=1e3,af=100,ha=100,$m=2e4,t2=50,n2=50,kl=[{start:0,end:af}],IO=100*1024*1024,NO=1024*1024,ep=10*1024*1024,a3=10*1024,Sl={closeButton:!1,classBg:"jse-modal-bg",classWindow:"jse-modal-window",classWindowWrap:"jse-modal-window-wrap",classContent:"jse-modal-container"},BO={...Sl,classWindow:"jse-modal-window jse-modal-window-sort"},jO={...Sl,classWindow:"jse-modal-window jse-modal-window-transform"},FO={...Sl,classWindow:"jse-modal-window jse-modal-window-jsoneditor"},X1="Insert or paste contents, enter [ insert a new array, enter { to insert a new object, or start typing to insert a new value",G1="Open context menu (Click here, right click on the selection, or use the context menu button or Ctrl+Q)",jo="hover-insert-inside",cf="hover-insert-after",tp="hover-collection",Ug="valid",i2="repairable",zO="invalid",To=42*8,Eo=260,cl=100,VO={[rs.asc]:"ascending",[rs.desc]:"descending"};let s2=0;function Jc(){return s2++,s2}function Jt(n){return Array.isArray(n)}function gn(n){return n!==null&&typeof n=="object"&&(n.constructor===void 0||n.constructor.name==="Object")}function c3(n){return n&&typeof n=="object"?n.op==="add":!1}function f3(n){return n&&typeof n=="object"?n.op==="remove":!1}function Q1(n){return n&&typeof n=="object"?n.op==="replace":!1}function np(n){return n&&typeof n=="object"?n.op==="copy":!1}function Ia(n){return n&&typeof n=="object"?n.op==="move":!1}function HO(n,e){return JSON.stringify(n)===JSON.stringify(e)}function WO(n,e){return n===e}function u3(n){return n.slice(0,n.length-1)}function qO(n){return n[n.length-1]}function UO(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:WO;if(n.length<e.length)return!1;for(let i=0;i<e.length;i++)if(!t(n[i],e[i]))return!1;return!0}function h3(n){return typeof n=="object"&&n!==null}function Z1(n){if(Jt(n)){const e=n.slice();return Object.getOwnPropertySymbols(n).forEach(t=>{e[t]=n[t]}),e}else if(gn(n)){const e={...n};return Object.getOwnPropertySymbols(n).forEach(t=>{e[t]=n[t]}),e}else return n}function $1(n,e,t){if(n[e]===t)return n;{const i=Z1(n);return i[e]=t,i}}function Be(n,e){let t=n,i=0;for(;i<e.length;)gn(t)?t=t[e[i]]:Jt(t)?t=t[parseInt(e[i])]:t=void 0,i++;return t}function ws(n,e,t){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e.length===0)return t;const s=e[0],o=ws(n?n[s]:void 0,e.slice(1),t,i);if(gn(n)||Jt(n))return $1(n,s,o);if(i){const r=JO.test(s)?[]:{};return r[s]=o,r}else throw new Error("Path does not exist")}const JO=/^\d+$/;function d3(n,e,t){if(e.length===0)return t(n);if(!h3(n))throw new Error("Path doesn't exist");const i=e[0],s=d3(n[i],e.slice(1),t);return $1(n,i,s)}function e0(n,e){if(e.length===0)return n;if(!h3(n))throw new Error("Path does not exist");if(e.length===1){const s=e[0];if(s in n){const o=Z1(n);return Jt(o)&&o.splice(parseInt(s),1),gn(o)&&delete o[s],o}else return n}const t=e[0],i=e0(n[t],e.slice(1));return $1(n,t,i)}function t0(n,e,t){const i=e.slice(0,e.length-1),s=e[e.length-1];return d3(n,i,o=>{if(!Array.isArray(o))throw new TypeError("Array expected at path "+JSON.stringify(i));const r=Z1(o);return r.splice(parseInt(s),0,t),r})}function ls(n,e){return n===void 0?!1:e.length===0?!0:n===null?!1:ls(n[e[0]],e.slice(1))}function Ts(n){const e=n.split("/");return e.shift(),e.map(t=>t.replace(/~1/g,"/").replace(/~0/g,"~"))}function Oe(n){return n.map(n0).join("")}function n0(n){return"/"+String(n).replace(/~/g,"~0").replace(/\//g,"~1")}function o2(n,e){return n+n0(e)}function Kd(n,e){return n.startsWith(e)&&(n.length===e.length||n[e.length]==="/")}function As(n,e,t){let i=n;for(let s=0;s<e.length;s++){e8(e[s]);let o=e[s];if(t&&t.before){const a=t.before(i,o);if(a!==void 0){if(a.document!==void 0&&(i=a.document),a.json!==void 0)throw new Error('Deprecation warning: returned object property ".json" has been renamed to ".document"');a.operation!==void 0&&(o=a.operation)}}const r=i,l=so(i,o.path);if(o.op==="add")i=XO(i,l,o.value);else if(o.op==="remove")i=YO(i,l);else if(o.op==="replace")i=KO(i,l,o.value);else if(o.op==="copy")i=GO(i,l,ip(o.from));else if(o.op==="move")i=QO(i,l,ip(o.from));else if(o.op==="test")ZO(i,l,o.value);else throw new Error("Unknown JSONPatch operation "+JSON.stringify(o));if(t&&t.after){const a=t.after(i,o,r);a!==void 0&&(i=a)}}return i}function KO(n,e,t){return ws(n,e,t)}function YO(n,e){return e0(n,e)}function XO(n,e,t){return Wf(n,e)?t0(n,e,t):ws(n,e,t)}function GO(n,e,t){const i=Be(n,t);if(Wf(n,e))return t0(n,e,i);{const s=Be(n,t);return ws(n,e,s)}}function QO(n,e,t){const i=Be(n,t),s=e0(n,t);return Wf(s,e)?t0(s,e,i):ws(s,e,i)}function ZO(n,e,t){if(t===void 0)throw new Error(`Test failed: no value provided (path: "${Oe(e)}")`);if(!ls(n,e))throw new Error(`Test failed: path not found (path: "${Oe(e)}")`);const i=Be(n,e);if(!HO(i,t))throw new Error(`Test failed, value differs (path: "${Oe(e)}")`)}function Wf(n,e){if(e.length===0)return!1;const t=Be(n,u3(e));return Array.isArray(t)}function $O(n,e){if(qO(e)!=="-")return e;const t=u3(e),i=Be(n,t);return t.concat(i.length)}function e8(n){if(!["add","remove","replace","copy","move","test"].includes(n.op))throw new Error("Unknown JSONPatch op "+JSON.stringify(n.op));if(typeof n.path!="string")throw new Error('Required property "path" missing or not a string in operation '+JSON.stringify(n));if((n.op==="copy"||n.op==="move")&&typeof n.from!="string")throw new Error('Required property "from" missing or not a string in operation '+JSON.stringify(n))}function so(n,e){return $O(n,Ts(e))}function ip(n){return Ts(n)}function g3(n,e,t){let i=[];return As(n,e,{before:(o,r)=>{let l;const a=so(o,r.path);if(r.op==="add")l=b3(o,a);else if(r.op==="remove")l=p3(o,a);else if(r.op==="replace")l=m3(o,a);else if(r.op==="copy")l=t8(o,a);else if(r.op==="move")l=n8(o,a,ip(r.from));else if(r.op==="test")l=[];else throw new Error("Unknown JSONPatch operation "+JSON.stringify(r));let c;if(t&&t.before){const f=t.before(o,r,l);if(f&&f.revertOperations&&(l=f.revertOperations),f&&f.document&&(c=f.document),f&&f.json)throw new Error('Deprecation warning: returned object property ".json" has been renamed to ".document"')}if(i=l.concat(i),c!==void 0)return{document:c}}}),i}function m3(n,e){return[{op:"replace",path:Oe(e),value:Be(n,e)}]}function p3(n,e){return[{op:"add",path:Oe(e),value:Be(n,e)}]}function b3(n,e){return Wf(n,e)||!ls(n,e)?[{op:"remove",path:Oe(e)}]:m3(n,e)}function t8(n,e){return b3(n,e)}function n8(n,e,t){if(e.length<t.length&&UO(t,e))return[{op:"replace",path:Oe(e),value:n}];const i={op:"move",from:Oe(e),path:Oe(t)};return!Wf(n,e)&&ls(n,e)?[i,...p3(n,e)]:[i]}function i8(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Yd={},r2={b:"\b",f:"\f",n:`
`,r:"\r",t:"	",'"':'"',"/":"/","\\":"\\"},s8=97;Yd.parse=function(n,e,t){var i={},s=0,o=0,r=0,l=t&&t.bigint&&typeof BigInt<"u";return{data:a("",!0),pointers:i};function a(P,E){c();var O;v(P,"value");var I=m();switch(I){case"t":g("rue"),O=!0;break;case"f":g("alse"),O=!1;break;case"n":g("ull"),O=null;break;case'"':O=f();break;case"[":O=h(P);break;case"{":O=d(P);break;default:p(),"-0123456789".indexOf(I)>=0?O=u():S()}return v(P,"valueEnd"),c(),E&&r<n.length&&S(),O}function c(){e:for(;r<n.length;){switch(n[r]){case" ":o++;break;case"	":o+=4;break;case"\r":o=0;break;case`
`:o=0,s++;break;default:break e}r++}}function f(){for(var P="",E;E=m(),E!='"';)E=="\\"?(E=m(),E in r2?P+=r2[E]:E=="u"?P+=b():x()):P+=E;return P}function u(){var P="",E=!0;n[r]=="-"&&(P+=m()),P+=n[r]=="0"?m():y(),n[r]=="."&&(P+=m()+y(),E=!1),(n[r]=="e"||n[r]=="E")&&(P+=m(),(n[r]=="+"||n[r]=="-")&&(P+=m()),P+=y(),E=!1);var O=+P;return l&&E&&(O>Number.MAX_SAFE_INTEGER||O<Number.MIN_SAFE_INTEGER)?BigInt(P):O}function h(P){c();var E=[],O=0;if(m()=="]")return E;for(p();;){var I=P+"/"+O;E.push(a(I)),c();var N=m();if(N=="]")break;N!=","&&x(),c(),O++}return E}function d(P){c();var E={};if(m()=="}")return E;for(p();;){var O=_();m()!='"'&&x();var I=f(),N=P+"/"+sp(I);C(N,"key",O),v(N,"keyEnd"),c(),m()!=":"&&x(),c(),E[I]=a(N),c();var F=m();if(F=="}")break;F!=","&&x(),c()}return E}function g(P){for(var E=0;E<P.length;E++)m()!==P[E]&&x()}function m(){D();var P=n[r];return r++,o++,P}function p(){r--,o--}function b(){for(var P=4,E=0;P--;){E<<=4;var O=m().toLowerCase();O>="a"&&O<="f"?E+=O.charCodeAt()-s8+10:O>="0"&&O<="9"?E+=+O:x()}return String.fromCharCode(E)}function y(){for(var P="";n[r]>="0"&&n[r]<="9";)P+=m();if(P.length)return P;D(),S()}function v(P,E){C(P,E,_())}function C(P,E,O){i[P]=i[P]||{},i[P][E]=O}function _(){return{line:s,column:o,pos:r}}function S(){throw new SyntaxError("Unexpected token "+n[r]+" in JSON at position "+r)}function x(){p(),S()}function D(){if(r>=n.length)throw new SyntaxError("Unexpected end of JSON input")}};Yd.stringify=function(n,e,t){if(!du(n))return;var i=0,s,o,r=typeof t=="object"?t.space:t;switch(typeof r){case"number":var l=r>10?10:r<0?0:Math.floor(r);r=l&&C(l," "),s=l,o=l;break;case"string":r=r.slice(0,10),s=0,o=0;for(var a=0;a<r.length;a++){var c=r[a];switch(c){case" ":o++;break;case"	":o+=4;break;case"\r":o=0;break;case`
`:o=0,i++;break;default:throw new Error("whitespace characters not allowed in JSON")}s++}break;default:r=void 0}var f="",u={},h=0,d=0,g=0,m=t&&t.es6&&typeof Map=="function";return p(n,0,""),{json:f,pointers:u};function p(_,S,x){switch(v(x,"value"),typeof _){case"number":case"bigint":case"boolean":b(""+_);break;case"string":b(gu(_));break;case"object":_===null?b("null"):typeof _.toJSON=="function"?b(gu(_.toJSON())):Array.isArray(_)?D():m?_.constructor.BYTES_PER_ELEMENT?D():_ instanceof Map?E():_ instanceof Set?E(!0):P():P()}v(x,"valueEnd");function D(){if(_.length){b("[");for(var O=S+1,I=0;I<_.length;I++){I&&b(","),y(O);var N=du(_[I])?_[I]:null,F=x+"/"+I;p(N,O,F)}y(S),b("]")}else b("[]")}function P(){var O=Object.keys(_);if(O.length){b("{");for(var I=S+1,N=0;N<O.length;N++){var F=O[N],z=_[F];if(du(z)){N&&b(",");var q=x+"/"+sp(F);y(I),v(q,"key"),b(gu(F)),v(q,"keyEnd"),b(":"),r&&b(" "),p(z,I,q)}}y(S),b("}")}else b("{}")}function E(O){if(_.size){b("{");for(var I=S+1,N=!0,F=_.entries(),z=F.next();!z.done;){var q=z.value,Q=q[0],X=O?!0:q[1];if(du(X)){N||b(","),N=!1;var T=x+"/"+sp(Q);y(I),v(T,"key"),b(gu(Q)),v(T,"keyEnd"),b(":"),r&&b(" "),p(X,I,T)}z=F.next()}y(S),b("}")}else b("{}")}}function b(_){d+=_.length,g+=_.length,f+=_}function y(_){if(r){for(f+=`
`+C(_,r),h++,d=0;_--;)i?(h+=i,d=o):d+=o,g+=s;g+=1}}function v(_,S){u[_]=u[_]||{},u[_][S]={line:h,column:d,pos:g}}function C(_,S){return Array(_+1).join(S)}};var o8=["number","bigint","boolean","string","object"];function du(n){return o8.indexOf(typeof n)>=0}var r8=/"|\\/g,l8=/[\b]/g,a8=/\f/g,c8=/\n/g,f8=/\r/g,u8=/\t/g;function gu(n){return n=n.replace(r8,"\\$&").replace(a8,"\\f").replace(l8,"\\b").replace(c8,"\\n").replace(f8,"\\r").replace(u8,"\\t"),'"'+n+'"'}var h8=/~/g,d8=/\//g;function sp(n){return n.replace(h8,"~0").replace(d8,"~1")}class ea extends Error{constructor(e,t){super(e+" at position "+t),this.position=t}}const mu=92,Jg=47,g8=42,l2=123,pu=125,a2=91,bu=93,m8=40,p8=41,b8=32,i0=10,y3=9,_3=13,y8=8,_8=12,Wh=34,c2=43,f2=45,w3=39,v3=48,k3=57,Yr=44,yu=46,w8=58,v8=59,k8=65,S8=97,C8=69,M8=101,x8=70,A8=102,O8=160,P8=8192,T8=8202,E8=8239,R8=8287,D8=12288,L8=8220,I8=8221,N8=8216,B8=8217,j8=96,F8=180;function z8(n){return n>=v3&&n<=k3||n>=k8&&n<=x8||n>=S8&&n<=A8}function Xr(n){return n>=v3&&n<=k3}function V8(n){return n>=32&&n<=1114111}function la(n){return H8.test(n)}const H8=/^[,:[\]/{}()\n+]$/;function W8(n){return la(n)&&n!=="/"}function u2(n){return q8.test(n)||n&&yh(n.charCodeAt(0))}const q8=/^[[{\w-]$/;function U8(n){return n===i0||n===_3||n===y3||n===y8||n===_8}function da(n){return n===b8||n===i0||n===y3||n===_3}function J8(n){return n===O8||n>=P8&&n<=T8||n===E8||n===R8||n===D8}function yh(n){return S3(n)||op(n)}function S3(n){return n===Wh||n===L8||n===I8}function h2(n){return n===Wh}function op(n){return n===w3||n===N8||n===B8||n===j8||n===F8}function d2(n){return n===w3}function bc(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=n.lastIndexOf(e);return i!==-1?n.substring(0,i)+(t?"":n.substring(i+1)):n}function Us(n,e){let t=n.length;if(!da(n.charCodeAt(t-1)))return n+e;for(;da(n.charCodeAt(t-1));)t--;return n.substring(0,t)+e+n.substring(t)}function K8(n,e,t){return n.substring(0,e)+n.substring(e+t)}function Y8(n){return/[,\n][ \t\r]*$/.test(n)}function X8(n){return/^\w+$/.test(n)}const G8={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},Q8={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function oo(n){let e=0,t="";o()||O();const s=c(Yr);for(s&&r(),u2(n[e])&&Y8(t)?(s||(t=Us(t,",")),m()):s&&(t=bc(t,","));n.charCodeAt(e)===pu||n.charCodeAt(e)===bu;)e++,r();if(e>=n.length)return t;E();function o(){r();const z=d()||g()||p()||y()||v()||_();return r(),z}function r(){const z=e;let q=l();do q=a(),q&&(q=l());while(q);return e>z}function l(){let z="",q;for(;(q=da(n.charCodeAt(e)))||J8(n.charCodeAt(e));)q?z+=n[e]:z+=" ",e++;return z.length>0?(t+=z,!0):!1}function a(){if(n.charCodeAt(e)===Jg&&n.charCodeAt(e+1)===g8){for(;e<n.length&&!Z8(n,e);)e++;return e+=2,!0}if(n.charCodeAt(e)===Jg&&n.charCodeAt(e+1)===Jg){for(;e<n.length&&n.charCodeAt(e)!==i0;)e++;return!0}return!1}function c(z){return n.charCodeAt(e)===z?(t+=n[e],e++,!0):!1}function f(z){return n.charCodeAt(e)===z?(e++,!0):!1}function u(){return f(mu)}function h(){return r(),n.charCodeAt(e)===yu&&n.charCodeAt(e+1)===yu&&n.charCodeAt(e+2)===yu?(e+=3,r(),f(Yr),!0):!1}function d(){if(n.charCodeAt(e)===l2){t+="{",e++,r(),f(Yr)&&r();let z=!0;for(;e<n.length&&n.charCodeAt(e)!==pu;){let q;if(z?(q=!0,z=!1):(q=c(Yr),q||(t=Us(t,",")),r()),h(),!(p()||_())){n.charCodeAt(e)===pu||n.charCodeAt(e)===l2||n.charCodeAt(e)===bu||n.charCodeAt(e)===a2||n[e]===void 0?t=bc(t,","):I();break}r();const X=c(w8),T=e>=n.length;X||(u2(n[e])||T?t=Us(t,":"):N()),o()||(X||T?t+="null":N())}return n.charCodeAt(e)===pu?(t+="}",e++):t=Us(t,"}"),!0}return!1}function g(){if(n.charCodeAt(e)===a2){t+="[",e++,r(),f(Yr)&&r();let z=!0;for(;e<n.length&&n.charCodeAt(e)!==bu;)if(z?z=!1:c(Yr)||(t=Us(t,",")),h(),!o()){t=bc(t,",");break}return n.charCodeAt(e)===bu?(t+="]",e++):t=Us(t,"]"),!0}return!1}function m(){let z=!0,q=!0;for(;q;)z?z=!1:c(Yr)||(t=Us(t,",")),q=o();q||(t=bc(t,",")),t=`[
`.concat(t,`
]`)}function p(){let z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,q=n.charCodeAt(e)===mu;if(q&&(e++,q=!0),yh(n.charCodeAt(e))){const Q=h2(n.charCodeAt(e))?h2:d2(n.charCodeAt(e))?d2:op(n.charCodeAt(e))?op:S3,X=e,T=t.length;let U='"';for(e++;;){if(e>=n.length){const Y=S(e-1);return!z&&la(n.charAt(Y))?(e=X,t=t.substring(0,T),p(!0)):(U=Us(U,'"'),t+=U,!0)}else if(Q(n.charCodeAt(e))){const Y=e,le=U.length;if(U+='"',e++,t+=U,r(),z||e>=n.length||la(n.charAt(e))||yh(n.charCodeAt(e))||Xr(n.charCodeAt(e)))return b(),!0;if(la(n.charAt(S(Y-1))))return e=X,t=t.substring(0,T),p(!0);t=t.substring(0,T),e=Y+1,U=U.substring(0,le)+"\\"+U.substring(le)}else{if(z&&la(n[e]))return U=Us(U,'"'),t+=U,b(),!0;if(n.charCodeAt(e)===mu){const Y=n.charAt(e+1);if(Q8[Y]!==void 0)U+=n.slice(e,e+2),e+=2;else if(Y==="u"){let Z=2;for(;Z<6&&z8(n.charCodeAt(e+Z));)Z++;Z===6?(U+=n.slice(e,e+6),e+=6):e+Z>=n.length?e=n.length:F()}else U+=Y,e+=2}else{const Y=n.charAt(e),le=n.charCodeAt(e);le===Wh&&n.charCodeAt(e-1)!==mu?(U+="\\"+Y,e++):U8(le)?(U+=G8[Y],e++):(V8(le)||P(Y),U+=Y,e++)}}q&&u()}}return!1}function b(){let z=!1;for(r();n.charCodeAt(e)===c2;){z=!0,e++,r(),t=bc(t,'"',!0);const q=t.length;p()?t=K8(t,q,1):t=Us(t,'"')}return z}function y(){const z=e;if(n.charCodeAt(e)===f2){if(e++,x())return D(z),!0;if(!Xr(n.charCodeAt(e)))return e=z,!1}for(;Xr(n.charCodeAt(e));)e++;if(n.charCodeAt(e)===yu){if(e++,x())return D(z),!0;if(!Xr(n.charCodeAt(e)))return e=z,!1;for(;Xr(n.charCodeAt(e));)e++}if(n.charCodeAt(e)===M8||n.charCodeAt(e)===C8){if(e++,(n.charCodeAt(e)===f2||n.charCodeAt(e)===c2)&&e++,x())return D(z),!0;if(!Xr(n.charCodeAt(e)))return e=z,!1;for(;Xr(n.charCodeAt(e));)e++}if(!x())return e=z,!1;if(e>z){const q=n.slice(z,e),Q=/^0\d/.test(q);return t+=Q?'"'.concat(q,'"'):q,!0}return!1}function v(){return C("true","true")||C("false","false")||C("null","null")||C("True","true")||C("False","false")||C("None","null")}function C(z,q){return n.slice(e,e+z.length)===z?(t+=q,e+=z.length,!0):!1}function _(){const z=e;for(;e<n.length&&!W8(n[e])&&!yh(n.charCodeAt(e));)e++;if(e>z){if(n.charCodeAt(e)===m8&&X8(n.slice(z,e).trim()))return e++,o(),n.charCodeAt(e)===p8&&(e++,n.charCodeAt(e)===v8&&e++),!0;{for(;da(n.charCodeAt(e-1))&&e>0;)e--;const q=n.slice(z,e);return t+=q==="undefined"?"null":JSON.stringify(q),n.charCodeAt(e)===Wh&&e++,!0}}}function S(z){let q=z;for(;q>0&&da(n.charCodeAt(q));)q--;return q}function x(){return e>=n.length||la(n[e])||da(n.charCodeAt(e))}function D(z){t+=n.slice(z,e)+"0"}function P(z){throw new ea("Invalid character "+JSON.stringify(z),e)}function E(){throw new ea("Unexpected character "+JSON.stringify(n[e]),e)}function O(){throw new ea("Unexpected end of json string",n.length)}function I(){throw new ea("Object key expected",e)}function N(){throw new ea("Colon expected",e)}function F(){const z=n.slice(e,e+6);throw new ea('Invalid unicode character "'.concat(z,'"'),e)}}function Z8(n,e){return n[e]==="*"&&n[e+1]==="/"}function ti(n){return parseInt(n,10)}function s0(n){return $8.test(n)}const $8=/^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?$/;function Ut(n){return typeof n=="object"&&n!==null&&(n.constructor===void 0||n.constructor.name==="Object")}function fn(n){return typeof n=="object"&&n!==null&&(n.constructor===void 0||n.constructor.name==="Object"||n.constructor.name==="Array")}function eP(n){return n===!0||n===!1}function rp(n){if(typeof n=="number")return n>9466848e5&&isFinite(n)&&Math.floor(n)===n&&!isNaN(new Date(n).valueOf());if(typeof n=="bigint")return rp(Number(n));try{const t=n&&n.valueOf();if(t!==n)return rp(t)}catch{return!1}return!1}function C3(n){yc=yc||window.document.createElement("div"),yc.style.color="",yc.style.color=n;const e=yc.style.color;return e!==""?e.replace(/\s+/g,"").toLowerCase():null}let yc=null;function tP(n){return typeof n=="string"&&n.length<99&&!!C3(n)}function o0(n,e){if(typeof n=="number"||typeof n=="string"||typeof n=="boolean"||typeof n>"u")return typeof n;if(typeof n=="bigint")return"number";if(n===null)return"null";if(Array.isArray(n))return"array";if(Ut(n))return"object";const t=e.stringify(n);return t&&s0(t)?"number":t==="true"||t==="false"?"boolean":t==="null"?"null":"unknown"}const nP=/^https?:\/\/\S+$/;function Xd(n){return typeof n=="string"&&nP.test(n)}function tc(n,e){if(n==="")return"";const t=n.trim();return t==="null"?null:t==="true"?!0:t==="false"?!1:s0(t)?e.parse(t):n}function iP(n,e){return typeof n=="string"&&typeof tc(n,e)!="string"}function sP(n){return oP.test(n)}const oP=/^-?[0-9]+$/;var M3=typeof global=="object"&&global&&global.Object===Object&&global,rP=typeof self=="object"&&self&&self.Object===Object&&self,Is=M3||rP||Function("return this")(),hs=Is.Symbol,x3=Object.prototype,lP=x3.hasOwnProperty,aP=x3.toString,_c=hs?hs.toStringTag:void 0;function cP(n){var e=lP.call(n,_c),t=n[_c];try{n[_c]=void 0;var i=!0}catch{}var s=aP.call(n);return i&&(e?n[_c]=t:delete n[_c]),s}var fP=Object.prototype,uP=fP.toString;function hP(n){return uP.call(n)}var dP="[object Null]",gP="[object Undefined]",g2=hs?hs.toStringTag:void 0;function nc(n){return n==null?n===void 0?gP:dP:g2&&g2 in Object(n)?cP(n):hP(n)}function xr(n){return n!=null&&typeof n=="object"}var mP="[object Symbol]";function Cl(n){return typeof n=="symbol"||xr(n)&&nc(n)==mP}function Kc(n,e){for(var t=-1,i=n==null?0:n.length,s=Array(i);++t<i;)s[t]=e(n[t],t,n);return s}var mi=Array.isArray,pP=1/0,m2=hs?hs.prototype:void 0,p2=m2?m2.toString:void 0;function A3(n){if(typeof n=="string")return n;if(mi(n))return Kc(n,A3)+"";if(Cl(n))return p2?p2.call(n):"";var e=n+"";return e=="0"&&1/n==-pP?"-0":e}var bP=/\s/;function yP(n){for(var e=n.length;e--&&bP.test(n.charAt(e)););return e}var _P=/^\s+/;function wP(n){return n&&n.slice(0,yP(n)+1).replace(_P,"")}function uo(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var b2=NaN,vP=/^[-+]0x[0-9a-f]+$/i,kP=/^0b[01]+$/i,SP=/^0o[0-7]+$/i,CP=parseInt;function lp(n){if(typeof n=="number")return n;if(Cl(n))return b2;if(uo(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=uo(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=wP(n);var t=kP.test(n);return t||SP.test(n)?CP(n.slice(2),t?2:8):vP.test(n)?b2:+n}var y2=1/0,MP=17976931348623157e292;function _h(n){if(!n)return n===0?n:0;if(n=lp(n),n===y2||n===-y2){var e=n<0?-1:1;return e*MP}return n===n?n:0}function xP(n){var e=_h(n),t=e%1;return e===e?t?e-t:e:0}function qf(n){return n}var AP="[object AsyncFunction]",OP="[object Function]",PP="[object GeneratorFunction]",TP="[object Proxy]";function O3(n){if(!uo(n))return!1;var e=nc(n);return e==OP||e==PP||e==AP||e==TP}var Kg=Is["__core-js_shared__"],_2=function(){var n=/[^.]+$/.exec(Kg&&Kg.keys&&Kg.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function EP(n){return!!_2&&_2 in n}var RP=Function.prototype,DP=RP.toString;function Fl(n){if(n!=null){try{return DP.call(n)}catch{}try{return n+""}catch{}}return""}var LP=/[\\^$.*+?()[\]{}|]/g,IP=/^\[object .+?Constructor\]$/,NP=Function.prototype,BP=Object.prototype,jP=NP.toString,FP=BP.hasOwnProperty,zP=RegExp("^"+jP.call(FP).replace(LP,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function VP(n){if(!uo(n)||EP(n))return!1;var e=O3(n)?zP:IP;return e.test(Fl(n))}function HP(n,e){return n==null?void 0:n[e]}function zl(n,e){var t=HP(n,e);return VP(t)?t:void 0}var ap=zl(Is,"WeakMap"),w2=Object.create,WP=function(){function n(){}return function(e){if(!uo(e))return{};if(w2)return w2(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();function qP(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function Hn(){}function UP(n,e){var t=-1,i=n.length;for(e||(e=Array(i));++t<i;)e[t]=n[t];return e}var JP=800,KP=16,YP=Date.now;function XP(n){var e=0,t=0;return function(){var i=YP(),s=KP-(i-t);if(t=i,s>0){if(++e>=JP)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}function GP(n){return function(){return n}}var qh=function(){try{var n=zl(Object,"defineProperty");return n({},"",{}),n}catch{}}(),QP=qh?function(n,e){return qh(n,"toString",{configurable:!0,enumerable:!1,value:GP(e),writable:!0})}:qf,ZP=XP(QP);function $P(n,e){for(var t=-1,i=n==null?0:n.length;++t<i&&e(n[t],t,n)!==!1;);return n}var eT=9007199254740991,tT=/^(?:0|[1-9]\d*)$/;function r0(n,e){var t=typeof n;return e=e??eT,!!e&&(t=="number"||t!="symbol"&&tT.test(n))&&n>-1&&n%1==0&&n<e}function Gd(n,e,t){e=="__proto__"&&qh?qh(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function Qd(n,e){return n===e||n!==n&&e!==e}var nT=Object.prototype,iT=nT.hasOwnProperty;function P3(n,e,t){var i=n[e];(!(iT.call(n,e)&&Qd(i,t))||t===void 0&&!(e in n))&&Gd(n,e,t)}function Zd(n,e,t,i){var s=!t;t||(t={});for(var o=-1,r=e.length;++o<r;){var l=e[o],a=void 0;a===void 0&&(a=n[l]),s?Gd(t,l,a):P3(t,l,a)}return t}var v2=Math.max;function sT(n,e,t){return e=v2(e===void 0?n.length-1:e,0),function(){for(var i=arguments,s=-1,o=v2(i.length-e,0),r=Array(o);++s<o;)r[s]=i[e+s];s=-1;for(var l=Array(e+1);++s<e;)l[s]=i[s];return l[e]=t(r),qP(n,this,l)}}function oT(n,e){return ZP(sT(n,e,qf),n+"")}var rT=9007199254740991;function l0(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=rT}function ic(n){return n!=null&&l0(n.length)&&!O3(n)}function cp(n,e,t){if(!uo(t))return!1;var i=typeof e;return(i=="number"?ic(t)&&r0(e,t.length):i=="string"&&e in t)?Qd(t[e],n):!1}var lT=Object.prototype;function $d(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||lT;return n===t}function T3(n,e){for(var t=-1,i=Array(n);++t<n;)i[t]=e(t);return i}var aT="[object Arguments]";function k2(n){return xr(n)&&nc(n)==aT}var E3=Object.prototype,cT=E3.hasOwnProperty,fT=E3.propertyIsEnumerable,eg=k2(function(){return arguments}())?k2:function(n){return xr(n)&&cT.call(n,"callee")&&!fT.call(n,"callee")};function uT(){return!1}var R3=typeof Yi=="object"&&Yi&&!Yi.nodeType&&Yi,S2=R3&&typeof Xi=="object"&&Xi&&!Xi.nodeType&&Xi,hT=S2&&S2.exports===R3,C2=hT?Is.Buffer:void 0,dT=C2?C2.isBuffer:void 0,ff=dT||uT,gT="[object Arguments]",mT="[object Array]",pT="[object Boolean]",bT="[object Date]",yT="[object Error]",_T="[object Function]",wT="[object Map]",vT="[object Number]",kT="[object Object]",ST="[object RegExp]",CT="[object Set]",MT="[object String]",xT="[object WeakMap]",AT="[object ArrayBuffer]",OT="[object DataView]",PT="[object Float32Array]",TT="[object Float64Array]",ET="[object Int8Array]",RT="[object Int16Array]",DT="[object Int32Array]",LT="[object Uint8Array]",IT="[object Uint8ClampedArray]",NT="[object Uint16Array]",BT="[object Uint32Array]",an={};an[PT]=an[TT]=an[ET]=an[RT]=an[DT]=an[LT]=an[IT]=an[NT]=an[BT]=!0;an[gT]=an[mT]=an[AT]=an[pT]=an[OT]=an[bT]=an[yT]=an[_T]=an[wT]=an[vT]=an[kT]=an[ST]=an[CT]=an[MT]=an[xT]=!1;function jT(n){return xr(n)&&l0(n.length)&&!!an[nc(n)]}function tg(n){return function(e){return n(e)}}var D3=typeof Yi=="object"&&Yi&&!Yi.nodeType&&Yi,Yc=D3&&typeof Xi=="object"&&Xi&&!Xi.nodeType&&Xi,FT=Yc&&Yc.exports===D3,Yg=FT&&M3.process,Na=function(){try{var n=Yc&&Yc.require&&Yc.require("util").types;return n||Yg&&Yg.binding&&Yg.binding("util")}catch{}}(),M2=Na&&Na.isTypedArray,a0=M2?tg(M2):jT,zT=Object.prototype,VT=zT.hasOwnProperty;function L3(n,e){var t=mi(n),i=!t&&eg(n),s=!t&&!i&&ff(n),o=!t&&!i&&!s&&a0(n),r=t||i||s||o,l=r?T3(n.length,String):[],a=l.length;for(var c in n)(e||VT.call(n,c))&&!(r&&(c=="length"||s&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||r0(c,a)))&&l.push(c);return l}function I3(n,e){return function(t){return n(e(t))}}var HT=I3(Object.keys,Object),WT=Object.prototype,qT=WT.hasOwnProperty;function N3(n){if(!$d(n))return HT(n);var e=[];for(var t in Object(n))qT.call(n,t)&&t!="constructor"&&e.push(t);return e}function sc(n){return ic(n)?L3(n):N3(n)}function UT(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var JT=Object.prototype,KT=JT.hasOwnProperty;function YT(n){if(!uo(n))return UT(n);var e=$d(n),t=[];for(var i in n)i=="constructor"&&(e||!KT.call(n,i))||t.push(i);return t}function c0(n){return ic(n)?L3(n,!0):YT(n)}var XT=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,GT=/^\w*$/;function f0(n,e){if(mi(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||Cl(n)?!0:GT.test(n)||!XT.test(n)||e!=null&&n in Object(e)}var uf=zl(Object,"create");function QT(){this.__data__=uf?uf(null):{},this.size=0}function ZT(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var $T="__lodash_hash_undefined__",eE=Object.prototype,tE=eE.hasOwnProperty;function nE(n){var e=this.__data__;if(uf){var t=e[n];return t===$T?void 0:t}return tE.call(e,n)?e[n]:void 0}var iE=Object.prototype,sE=iE.hasOwnProperty;function oE(n){var e=this.__data__;return uf?e[n]!==void 0:sE.call(e,n)}var rE="__lodash_hash_undefined__";function lE(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=uf&&e===void 0?rE:e,this}function Ml(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Ml.prototype.clear=QT;Ml.prototype.delete=ZT;Ml.prototype.get=nE;Ml.prototype.has=oE;Ml.prototype.set=lE;function aE(){this.__data__=[],this.size=0}function ng(n,e){for(var t=n.length;t--;)if(Qd(n[t][0],e))return t;return-1}var cE=Array.prototype,fE=cE.splice;function uE(n){var e=this.__data__,t=ng(e,n);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():fE.call(e,t,1),--this.size,!0}function hE(n){var e=this.__data__,t=ng(e,n);return t<0?void 0:e[t][1]}function dE(n){return ng(this.__data__,n)>-1}function gE(n,e){var t=this.__data__,i=ng(t,n);return i<0?(++this.size,t.push([n,e])):t[i][1]=e,this}function Yo(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Yo.prototype.clear=aE;Yo.prototype.delete=uE;Yo.prototype.get=hE;Yo.prototype.has=dE;Yo.prototype.set=gE;var hf=zl(Is,"Map");function mE(){this.size=0,this.__data__={hash:new Ml,map:new(hf||Yo),string:new Ml}}function pE(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function ig(n,e){var t=n.__data__;return pE(e)?t[typeof e=="string"?"string":"hash"]:t.map}function bE(n){var e=ig(this,n).delete(n);return this.size-=e?1:0,e}function yE(n){return ig(this,n).get(n)}function _E(n){return ig(this,n).has(n)}function wE(n,e){var t=ig(this,n),i=t.size;return t.set(n,e),this.size+=t.size==i?0:1,this}function Xo(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Xo.prototype.clear=mE;Xo.prototype.delete=bE;Xo.prototype.get=yE;Xo.prototype.has=_E;Xo.prototype.set=wE;var vE="Expected a function";function sg(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(vE);var t=function(){var i=arguments,s=e?e.apply(this,i):i[0],o=t.cache;if(o.has(s))return o.get(s);var r=n.apply(this,i);return t.cache=o.set(s,r)||o,r};return t.cache=new(sg.Cache||Xo),t}sg.Cache=Xo;var kE=500;function SE(n){var e=sg(n,function(i){return t.size===kE&&t.clear(),i}),t=e.cache;return e}var CE=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ME=/\\(\\)?/g,xE=SE(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(CE,function(t,i,s,o){e.push(s?o.replace(ME,"$1"):i||t)}),e});function B3(n){return n==null?"":A3(n)}function j3(n,e){return mi(n)?n:f0(n,e)?[n]:xE(B3(n))}var AE=1/0;function og(n){if(typeof n=="string"||Cl(n))return n;var e=n+"";return e=="0"&&1/n==-AE?"-0":e}function u0(n,e){e=j3(e,n);for(var t=0,i=e.length;n!=null&&t<i;)n=n[og(e[t++])];return t&&t==i?n:void 0}function OE(n,e,t){var i=n==null?void 0:u0(n,e);return i===void 0?t:i}function h0(n,e){for(var t=-1,i=e.length,s=n.length;++t<i;)n[s+t]=e[t];return n}var x2=hs?hs.isConcatSpreadable:void 0;function PE(n){return mi(n)||eg(n)||!!(x2&&n&&n[x2])}function TE(n,e,t,i,s){var o=-1,r=n.length;for(t||(t=PE),s||(s=[]);++o<r;){var l=n[o];t(l)?h0(s,l):s[s.length]=l}return s}var F3=I3(Object.getPrototypeOf,Object);function EE(n,e,t){var i=-1,s=n.length;e<0&&(e=-e>s?0:s+e),t=t>s?s:t,t<0&&(t+=s),s=e>t?0:t-e>>>0,e>>>=0;for(var o=Array(s);++i<s;)o[i]=n[i+e];return o}function RE(){this.__data__=new Yo,this.size=0}function DE(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function LE(n){return this.__data__.get(n)}function IE(n){return this.__data__.has(n)}var NE=200;function BE(n,e){var t=this.__data__;if(t instanceof Yo){var i=t.__data__;if(!hf||i.length<NE-1)return i.push([n,e]),this.size=++t.size,this;t=this.__data__=new Xo(i)}return t.set(n,e),this.size=t.size,this}function ro(n){var e=this.__data__=new Yo(n);this.size=e.size}ro.prototype.clear=RE;ro.prototype.delete=DE;ro.prototype.get=LE;ro.prototype.has=IE;ro.prototype.set=BE;function jE(n,e){return n&&Zd(e,sc(e),n)}function FE(n,e){return n&&Zd(e,c0(e),n)}var z3=typeof Yi=="object"&&Yi&&!Yi.nodeType&&Yi,A2=z3&&typeof Xi=="object"&&Xi&&!Xi.nodeType&&Xi,zE=A2&&A2.exports===z3,O2=zE?Is.Buffer:void 0,P2=O2?O2.allocUnsafe:void 0;function VE(n,e){if(e)return n.slice();var t=n.length,i=P2?P2(t):new n.constructor(t);return n.copy(i),i}function HE(n,e){for(var t=-1,i=n==null?0:n.length,s=0,o=[];++t<i;){var r=n[t];e(r,t,n)&&(o[s++]=r)}return o}function V3(){return[]}var WE=Object.prototype,qE=WE.propertyIsEnumerable,T2=Object.getOwnPropertySymbols,d0=T2?function(n){return n==null?[]:(n=Object(n),HE(T2(n),function(e){return qE.call(n,e)}))}:V3;function UE(n,e){return Zd(n,d0(n),e)}var JE=Object.getOwnPropertySymbols,H3=JE?function(n){for(var e=[];n;)h0(e,d0(n)),n=F3(n);return e}:V3;function KE(n,e){return Zd(n,H3(n),e)}function W3(n,e,t){var i=e(n);return mi(n)?i:h0(i,t(n))}function fp(n){return W3(n,sc,d0)}function YE(n){return W3(n,c0,H3)}var up=zl(Is,"DataView"),hp=zl(Is,"Promise"),dp=zl(Is,"Set"),E2="[object Map]",XE="[object Object]",R2="[object Promise]",D2="[object Set]",L2="[object WeakMap]",I2="[object DataView]",GE=Fl(up),QE=Fl(hf),ZE=Fl(hp),$E=Fl(dp),eR=Fl(ap),es=nc;(up&&es(new up(new ArrayBuffer(1)))!=I2||hf&&es(new hf)!=E2||hp&&es(hp.resolve())!=R2||dp&&es(new dp)!=D2||ap&&es(new ap)!=L2)&&(es=function(n){var e=nc(n),t=e==XE?n.constructor:void 0,i=t?Fl(t):"";if(i)switch(i){case GE:return I2;case QE:return E2;case ZE:return R2;case $E:return D2;case eR:return L2}return e});var tR=Object.prototype,nR=tR.hasOwnProperty;function iR(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&nR.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var Uh=Is.Uint8Array;function g0(n){var e=new n.constructor(n.byteLength);return new Uh(e).set(new Uh(n)),e}function sR(n,e){var t=e?g0(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var oR=/\w*$/;function rR(n){var e=new n.constructor(n.source,oR.exec(n));return e.lastIndex=n.lastIndex,e}var N2=hs?hs.prototype:void 0,B2=N2?N2.valueOf:void 0;function lR(n){return B2?Object(B2.call(n)):{}}function aR(n,e){var t=e?g0(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var cR="[object Boolean]",fR="[object Date]",uR="[object Map]",hR="[object Number]",dR="[object RegExp]",gR="[object Set]",mR="[object String]",pR="[object Symbol]",bR="[object ArrayBuffer]",yR="[object DataView]",_R="[object Float32Array]",wR="[object Float64Array]",vR="[object Int8Array]",kR="[object Int16Array]",SR="[object Int32Array]",CR="[object Uint8Array]",MR="[object Uint8ClampedArray]",xR="[object Uint16Array]",AR="[object Uint32Array]";function OR(n,e,t){var i=n.constructor;switch(e){case bR:return g0(n);case cR:case fR:return new i(+n);case yR:return sR(n,t);case _R:case wR:case vR:case kR:case SR:case CR:case MR:case xR:case AR:return aR(n,t);case uR:return new i;case hR:case mR:return new i(n);case dR:return rR(n);case gR:return new i;case pR:return lR(n)}}function PR(n){return typeof n.constructor=="function"&&!$d(n)?WP(F3(n)):{}}var TR="[object Map]";function ER(n){return xr(n)&&es(n)==TR}var j2=Na&&Na.isMap,RR=j2?tg(j2):ER,DR="[object Set]";function LR(n){return xr(n)&&es(n)==DR}var F2=Na&&Na.isSet,IR=F2?tg(F2):LR,NR=1,BR=2,jR=4,q3="[object Arguments]",FR="[object Array]",zR="[object Boolean]",VR="[object Date]",HR="[object Error]",U3="[object Function]",WR="[object GeneratorFunction]",qR="[object Map]",UR="[object Number]",J3="[object Object]",JR="[object RegExp]",KR="[object Set]",YR="[object String]",XR="[object Symbol]",GR="[object WeakMap]",QR="[object ArrayBuffer]",ZR="[object DataView]",$R="[object Float32Array]",eD="[object Float64Array]",tD="[object Int8Array]",nD="[object Int16Array]",iD="[object Int32Array]",sD="[object Uint8Array]",oD="[object Uint8ClampedArray]",rD="[object Uint16Array]",lD="[object Uint32Array]",sn={};sn[q3]=sn[FR]=sn[QR]=sn[ZR]=sn[zR]=sn[VR]=sn[$R]=sn[eD]=sn[tD]=sn[nD]=sn[iD]=sn[qR]=sn[UR]=sn[J3]=sn[JR]=sn[KR]=sn[YR]=sn[XR]=sn[sD]=sn[oD]=sn[rD]=sn[lD]=!0;sn[HR]=sn[U3]=sn[GR]=!1;function Xc(n,e,t,i,s,o){var r,l=e&NR,a=e&BR,c=e&jR;if(t&&(r=s?t(n,i,s,o):t(n)),r!==void 0)return r;if(!uo(n))return n;var f=mi(n);if(f){if(r=iR(n),!l)return UP(n,r)}else{var u=es(n),h=u==U3||u==WR;if(ff(n))return VE(n,l);if(u==J3||u==q3||h&&!s){if(r=a||h?{}:PR(n),!l)return a?KE(n,FE(r,n)):UE(n,jE(r,n))}else{if(!sn[u])return s?n:{};r=OR(n,u,l)}}o||(o=new ro);var d=o.get(n);if(d)return d;o.set(n,r),IR(n)?n.forEach(function(p){r.add(Xc(p,e,t,p,n,o))}):RR(n)&&n.forEach(function(p,b){r.set(b,Xc(p,e,t,b,n,o))});var g=c?a?YE:fp:a?c0:sc,m=f?void 0:g(n);return $P(m||n,function(p,b){m&&(b=p,p=n[b]),P3(r,b,Xc(p,e,t,b,n,o))}),r}var aD=1,cD=4;function gp(n){return Xc(n,aD|cD)}var fD=1,uD=4;function hD(n,e){return e=typeof e=="function"?e:void 0,Xc(n,fD|uD,e)}var dD="__lodash_hash_undefined__";function gD(n){return this.__data__.set(n,dD),this}function mD(n){return this.__data__.has(n)}function Jh(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new Xo;++e<t;)this.add(n[e])}Jh.prototype.add=Jh.prototype.push=gD;Jh.prototype.has=mD;function pD(n,e){for(var t=-1,i=n==null?0:n.length;++t<i;)if(e(n[t],t,n))return!0;return!1}function bD(n,e){return n.has(e)}var yD=1,_D=2;function K3(n,e,t,i,s,o){var r=t&yD,l=n.length,a=e.length;if(l!=a&&!(r&&a>l))return!1;var c=o.get(n),f=o.get(e);if(c&&f)return c==e&&f==n;var u=-1,h=!0,d=t&_D?new Jh:void 0;for(o.set(n,e),o.set(e,n);++u<l;){var g=n[u],m=e[u];if(i)var p=r?i(m,g,u,e,n,o):i(g,m,u,n,e,o);if(p!==void 0){if(p)continue;h=!1;break}if(d){if(!pD(e,function(b,y){if(!bD(d,y)&&(g===b||s(g,b,t,i,o)))return d.push(y)})){h=!1;break}}else if(!(g===m||s(g,m,t,i,o))){h=!1;break}}return o.delete(n),o.delete(e),h}function wD(n){var e=-1,t=Array(n.size);return n.forEach(function(i,s){t[++e]=[s,i]}),t}function vD(n){var e=-1,t=Array(n.size);return n.forEach(function(i){t[++e]=i}),t}var kD=1,SD=2,CD="[object Boolean]",MD="[object Date]",xD="[object Error]",AD="[object Map]",OD="[object Number]",PD="[object RegExp]",TD="[object Set]",ED="[object String]",RD="[object Symbol]",DD="[object ArrayBuffer]",LD="[object DataView]",z2=hs?hs.prototype:void 0,Xg=z2?z2.valueOf:void 0;function ID(n,e,t,i,s,o,r){switch(t){case LD:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case DD:return!(n.byteLength!=e.byteLength||!o(new Uh(n),new Uh(e)));case CD:case MD:case OD:return Qd(+n,+e);case xD:return n.name==e.name&&n.message==e.message;case PD:case ED:return n==e+"";case AD:var l=wD;case TD:var a=i&kD;if(l||(l=vD),n.size!=e.size&&!a)return!1;var c=r.get(n);if(c)return c==e;i|=SD,r.set(n,e);var f=K3(l(n),l(e),i,s,o,r);return r.delete(n),f;case RD:if(Xg)return Xg.call(n)==Xg.call(e)}return!1}var ND=1,BD=Object.prototype,jD=BD.hasOwnProperty;function FD(n,e,t,i,s,o){var r=t&ND,l=fp(n),a=l.length,c=fp(e),f=c.length;if(a!=f&&!r)return!1;for(var u=a;u--;){var h=l[u];if(!(r?h in e:jD.call(e,h)))return!1}var d=o.get(n),g=o.get(e);if(d&&g)return d==e&&g==n;var m=!0;o.set(n,e),o.set(e,n);for(var p=r;++u<a;){h=l[u];var b=n[h],y=e[h];if(i)var v=r?i(y,b,h,e,n,o):i(b,y,h,n,e,o);if(!(v===void 0?b===y||s(b,y,t,i,o):v)){m=!1;break}p||(p=h=="constructor")}if(m&&!p){var C=n.constructor,_=e.constructor;C!=_&&"constructor"in n&&"constructor"in e&&!(typeof C=="function"&&C instanceof C&&typeof _=="function"&&_ instanceof _)&&(m=!1)}return o.delete(n),o.delete(e),m}var zD=1,V2="[object Arguments]",H2="[object Array]",_u="[object Object]",VD=Object.prototype,W2=VD.hasOwnProperty;function HD(n,e,t,i,s,o){var r=mi(n),l=mi(e),a=r?H2:es(n),c=l?H2:es(e);a=a==V2?_u:a,c=c==V2?_u:c;var f=a==_u,u=c==_u,h=a==c;if(h&&ff(n)){if(!ff(e))return!1;r=!0,f=!1}if(h&&!f)return o||(o=new ro),r||a0(n)?K3(n,e,t,i,s,o):ID(n,e,a,t,i,s,o);if(!(t&zD)){var d=f&&W2.call(n,"__wrapped__"),g=u&&W2.call(e,"__wrapped__");if(d||g){var m=d?n.value():n,p=g?e.value():e;return o||(o=new ro),s(m,p,t,i,o)}}return h?(o||(o=new ro),FD(n,e,t,i,s,o)):!1}function rg(n,e,t,i,s){return n===e?!0:n==null||e==null||!xr(n)&&!xr(e)?n!==n&&e!==e:HD(n,e,t,i,rg,s)}var WD=1,qD=2;function UD(n,e,t,i){var s=t.length,o=s;if(n==null)return!o;for(n=Object(n);s--;){var r=t[s];if(r[2]?r[1]!==n[r[0]]:!(r[0]in n))return!1}for(;++s<o;){r=t[s];var l=r[0],a=n[l],c=r[1];if(r[2]){if(a===void 0&&!(l in n))return!1}else{var f=new ro,u;if(!(u===void 0?rg(c,a,WD|qD,i,f):u))return!1}}return!0}function Y3(n){return n===n&&!uo(n)}function JD(n){for(var e=sc(n),t=e.length;t--;){var i=e[t],s=n[i];e[t]=[i,s,Y3(s)]}return e}function X3(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}function KD(n){var e=JD(n);return e.length==1&&e[0][2]?X3(e[0][0],e[0][1]):function(t){return t===n||UD(t,n,e)}}function YD(n,e){return n!=null&&e in Object(n)}function XD(n,e,t){e=j3(e,n);for(var i=-1,s=e.length,o=!1;++i<s;){var r=og(e[i]);if(!(o=n!=null&&t(n,r)))break;n=n[r]}return o||++i!=s?o:(s=n==null?0:n.length,!!s&&l0(s)&&r0(r,s)&&(mi(n)||eg(n)))}function GD(n,e){return n!=null&&XD(n,e,YD)}var QD=1,ZD=2;function $D(n,e){return f0(n)&&Y3(e)?X3(og(n),e):function(t){var i=OE(t,n);return i===void 0&&i===e?GD(t,n):rg(e,i,QD|ZD)}}function e7(n){return function(e){return e==null?void 0:e[n]}}function t7(n){return function(e){return u0(e,n)}}function n7(n){return f0(n)?e7(og(n)):t7(n)}function Uf(n){return typeof n=="function"?n:n==null?qf:typeof n=="object"?mi(n)?$D(n[0],n[1]):KD(n):n7(n)}function i7(n,e,t,i){for(var s=-1,o=n==null?0:n.length;++s<o;){var r=n[s];e(i,r,t(r),n)}return i}function G3(n){return function(e,t,i){for(var s=-1,o=Object(e),r=i(e),l=r.length;l--;){var a=r[n?l:++s];if(t(o[a],a,o)===!1)break}return e}}var s7=G3();function Q3(n,e){return n&&s7(n,e,sc)}function Z3(n,e){return function(t,i){if(t==null)return t;if(!ic(t))return n(t,i);for(var s=t.length,o=e?s:-1,r=Object(t);(e?o--:++o<s)&&i(r[o],o,r)!==!1;);return t}}var $3=Z3(Q3);function o7(n,e,t,i){return $3(n,function(s,o,r){e(i,s,t(s),r)}),i}function e4(n,e){return function(t,i){var s=mi(t)?i7:o7,o=e?e():{};return s(t,n,Uf(i),o)}}var Gg=function(){return Is.Date.now()},r7="Expected a function",l7=Math.max,a7=Math.min;function Kh(n,e,t){var i,s,o,r,l,a,c=0,f=!1,u=!1,h=!0;if(typeof n!="function")throw new TypeError(r7);e=lp(e)||0,uo(t)&&(f=!!t.leading,u="maxWait"in t,o=u?l7(lp(t.maxWait)||0,e):o,h="trailing"in t?!!t.trailing:h);function d(S){var x=i,D=s;return i=s=void 0,c=S,r=n.apply(D,x),r}function g(S){return c=S,l=setTimeout(b,e),f?d(S):r}function m(S){var x=S-a,D=S-c,P=e-x;return u?a7(P,o-D):P}function p(S){var x=S-a,D=S-c;return a===void 0||x>=e||x<0||u&&D>=o}function b(){var S=Gg();if(p(S))return y(S);l=setTimeout(b,m(S))}function y(S){return l=void 0,h&&i?d(S):(i=s=void 0,r)}function v(){l!==void 0&&clearTimeout(l),c=0,i=a=s=l=void 0}function C(){return l===void 0?r:y(Gg())}function _(){var S=Gg(),x=p(S);if(i=arguments,s=this,a=S,x){if(l===void 0)return g(a);if(u)return clearTimeout(l),l=setTimeout(b,e),d(a)}return l===void 0&&(l=setTimeout(b,e)),r}return _.cancel=v,_.flush=C,_}function mt(n){var e=n==null?0:n.length;return e?n[e-1]:void 0}function t4(n){return typeof n=="function"?n:qf}function c7(n,e){for(var t=n==null?0:n.length;t--&&e(n[t],t,n)!==!1;);return n}var f7=G3(!0);function u7(n,e){return n&&f7(n,e,sc)}var h7=Z3(u7,!0);function d7(n,e){var t=mi(n)?c7:h7;return t(n,t4(e))}function Io(n){return n&&n.length?n[0]:void 0}function n4(n,e){var t=-1,i=ic(n)?Array(n.length):[];return $3(n,function(s,o,r){i[++t]=e(s,o,r)}),i}function g7(n,e){var t=mi(n)?Kc:n4;return t(n,Uf(e))}var m7=Object.prototype,p7=m7.hasOwnProperty,lg=e4(function(n,e,t){p7.call(n,t)?n[t].push(e):Gd(n,t,[e])});function _t(n){var e=n==null?0:n.length;return e?EE(n,0,-1):[]}var b7="[object Map]",y7="[object Set]",_7=Object.prototype,w7=_7.hasOwnProperty;function Ct(n){if(n==null)return!0;if(ic(n)&&(mi(n)||typeof n=="string"||typeof n.splice=="function"||ff(n)||a0(n)||eg(n)))return!n.length;var e=es(n);if(e==b7||e==y7)return!n.size;if($d(n))return!N3(n).length;for(var t in n)if(w7.call(n,t))return!1;return!0}function yt(n,e){return rg(n,e)}function v7(n,e){return n<e}function k7(n,e){var t={};return e=Uf(e),Q3(n,function(i,s,o){Gd(t,s,e(i,s,o))}),t}function S7(n,e,t){for(var i=-1,s=n.length;++i<s;){var o=n[i],r=e(o);if(r!=null&&(l===void 0?r===r&&!Cl(r):t(r,l)))var l=r,a=o}return a}function wu(n,e){return n&&n.length?S7(n,Uf(e),v7):void 0}function C7(n,e){var t=n.length;for(n.sort(e);t--;)n[t]=n[t].value;return n}function M7(n,e){if(n!==e){var t=n!==void 0,i=n===null,s=n===n,o=Cl(n),r=e!==void 0,l=e===null,a=e===e,c=Cl(e);if(!l&&!c&&!o&&n>e||o&&r&&a&&!l&&!c||i&&r&&a||!t&&a||!s)return 1;if(!i&&!o&&!c&&n<e||c&&t&&s&&!i&&!o||l&&t&&s||!r&&s||!a)return-1}return 0}function x7(n,e,t){for(var i=-1,s=n.criteria,o=e.criteria,r=s.length,l=t.length;++i<r;){var a=M7(s[i],o[i]);if(a){if(i>=l)return a;var c=t[i];return a*(c=="desc"?-1:1)}}return n.index-e.index}function A7(n,e,t){e.length?e=Kc(e,function(o){return mi(o)?function(r){return u0(r,o.length===1?o[0]:o)}:o}):e=[qf];var i=-1;e=Kc(e,tg(Uf));var s=n4(n,function(o,r,l){var a=Kc(e,function(c){return c(o)});return{criteria:a,index:++i,value:o}});return C7(s,function(o,r){return x7(o,r,t)})}var O7=e4(function(n,e,t){n[t?0:1].push(e)},function(){return[[],[]]}),P7=Math.ceil,T7=Math.max;function E7(n,e,t,i){for(var s=-1,o=T7(P7((e-n)/(t||1)),0),r=Array(o);o--;)r[++s]=n,n+=t;return r}function R7(n){return function(e,t,i){return i&&typeof i!="number"&&cp(e,t,i)&&(t=i=void 0),e=_h(e),t===void 0?(t=e,e=0):t=_h(t),i=i===void 0?e<t?1:-1:_h(i),E7(e,t,i)}}var D7=R7(),L7=oT(function(n,e){if(n==null)return[];var t=e.length;return t>1&&cp(n,e[0],e[1])?e=[]:t>2&&cp(e[0],e[1],e[2])&&(e=[e[0]]),A7(n,TE(e),[])}),I7=9007199254740991,Qg=4294967295,N7=Math.min;function q2(n,e){if(n=xP(n),n<1||n>I7)return[];var t=Qg,i=N7(n,Qg);e=t4(e),n-=Qg;for(var s=T3(i,e);++t<n;)e(t);return s}var B7=0;function Ba(n){var e=++B7;return B3(n)+e}const j7=1e4,F7=[];function mp(n,e=!1){const t={};if(!Array.isArray(n))throw new TypeError("Array expected");function i(r,l){(!Array.isArray(r)&&!Ut(r)||e&&l.length>0)&&(t[Oe(l)]=!0),Ut(r)&&Object.keys(r).forEach(c=>{i(r[c],l.concat(c))})}const s=Math.min(n.length,j7);for(let r=0;r<s;r++){const l=n[r];i(l,F7)}return Object.keys(t).sort().map(Ts)}function i4(n,e,t){if(!(e<=n))for(let i=n;i<e;i++)t(i)}function Yh(n,e){return n.length>e?n.slice(0,e):n}function U2(n){return{...n}}function J2(n){return Object.values(n)}function K2(n,e,t,i){const s=n.slice(0),o=s.splice(e,t);return s.splice.apply(s,[e+i,0,...o]),s}function z7(n,e,t){if(n.length<e)n.forEach(t);else{const i=e>1?(n.length-1)/(e-1):n.length;for(let s=0;s<e;s++){const o=Math.floor(s*i);t(n[o],o,n)}}}function Jf(n,e){try{return e.parse(n)}catch{return e.parse(oo(n))}}function s4(n,e){try{return Jf(n,e)}catch{return}}function ag(n,e){n=n.replace(r4,"");try{return e(n)}catch{}try{return e("["+n+"]")}catch{}try{return e("{"+n+"}")}catch{}throw new Error("Failed to parse partial JSON")}function o4(n){n=n.replace(r4,"");try{return oo(n)}catch{}try{const e=oo("["+n+"]");return e.substring(1,e.length-1)}catch{}try{const e=oo("{"+n+"}");return e.substring(1,e.length-1)}catch{}throw new Error("Failed to repair partial JSON")}const r4=/,\s*$/;function ja(n,e){const t=X2.exec(e);if(t){const i=ti(t[2]),s=H7(n,`
`,0,i),o=n.lastIndexOf(`
`,i),r=i-o-1;return{position:i,line:s,column:r,message:e.replace(X2,()=>`line ${s+1} column ${r+1}`)}}else{const i=K7.exec(e),s=i?ti(i[1]):null,o=s!==null?s-1:null,r=Y7.exec(e),l=r?ti(r[1]):null,a=l!==null?l-1:null;return{position:o!==null&&a!==null?V7(n,o,a):null,line:o,column:a,message:e.replace(/^JSON.parse: /,"").replace(/ of the JSON data$/,"")}}}function V7(n,e,t){let i=n.indexOf(`
`),s=1;for(;s<e&&i!==-1;)i=n.indexOf(`
`,i+1),s++;return i!==-1?i+t+1:null}function H7(n,e,t=0,i=n.length){let s=0;for(let o=t;o<i;o++)n.charAt(o)===e&&s++;return s}function W7(n,e){try{const t=Yd.parse(n),i=Oe(e),s=t.pointers[i];if(s)return{path:e,line:s.key?s.key.line:s.value?s.value.line:0,column:s.key?s.key.column:s.value?s.value.column:0,from:s.key?s.key.pos:s.value?s.value.pos:0,to:s.keyEnd?s.keyEnd.pos:s.valueEnd?s.valueEnd.pos:0}}catch(t){console.error(t)}return{path:e,line:0,column:0,from:0,to:0}}function q7(n,e,t){if(e==="array"){if(Array.isArray(n))return n;if(Ut(n))return J2(n);if(typeof n=="string")try{const i=t.parse(n);if(Array.isArray(i))return i;if(Ut(i))return J2(i)}catch{return[n]}return[n]}if(e==="object"){if(Array.isArray(n))return U2(n);if(Ut(n))return n;if(typeof n=="string")try{const i=t.parse(n);if(Ut(i))return i;if(Array.isArray(i))return U2(i)}catch{return{value:n}}return{value:n}}if(e==="value")return fn(n)?t.stringify(n):n;throw new Error(`Cannot convert ${o0(n,t)} to ${e}`)}function Zg(n){return Ut(n)?n.json!==void 0?n.text!==void 0?'Content must contain either a property "json" or a property "text" but not both':null:n.text===void 0?'Content must contain either a property "json" or a property "text"':typeof n.text!="string"?'Content "text" property must be a string containing a JSON document. Did you mean to use the "json" property instead?':null:"Content must be an object"}function Fa(n){return Ut(n)&&typeof n.text=="string"}function df(n){return Ut(n)&&typeof n.json<"u"}function U7(n,e=void 0,t=JSON){return Fa(n)?n:{text:t.stringify(n.json,null,e)}}function Y2(n,e=JSON){return df(n)?n:{json:e.parse(n.text)}}function pp(n,e,t){return U7(n,e,t).text}function l4(n,e){return J7(n,e)>e}function J7(n,e=1/0){if(Fa(n))return n.text.length;const t=n.json;let i=0;function s(o){if(Array.isArray(o)){if(i+=2+(o.length-1),i>e)return i;for(let r=0;r<o.length;r++){const l=o[r];if(s(l),i>e)return i}}else if(Ut(o)){const r=Object.keys(o);i+=2+r.length+(r.length-1);for(let l=0;l<r.length;l++){const a=r[l],c=o[a];i+=a.length+2,s(c)}}else typeof o=="string"?i+=o.length+2:i+=String(o).length}return s(t),i}const X2=/(position|char) (\d+)/,K7=/line (\d+)/,Y7=/column (\d+)/;function X7(n,e){return n.parse===e.parse&&n.stringify===e.stringify}function G2(n){const t=n.substring(0,999).trim();return!t.includes(`
`)&&G7.test(t)}const G7=/[,:]\S/;function m0({escapeControlCharacters:n,escapeUnicodeCharacters:e}){return n?e?Q7:Z7:e?$7:eL}const Q7={escapeValue:n=>a4(u4(String(n))),unescapeValue:n=>h4(c4(n))},Z7={escapeValue:n=>u4(String(n)),unescapeValue:n=>h4(n)},$7={escapeValue:n=>a4(String(n)),unescapeValue:n=>c4(n)},eL={escapeValue:n=>String(n),unescapeValue:n=>n};function a4(n){return n.replace(/[^\x20-\x7F]/g,e=>{var t;return e==="\b"||e==="\f"||e===`
`||e==="\r"||e==="	"?e:"\\u"+("000"+((t=e.codePointAt(0))==null?void 0:t.toString(16))).slice(-4)})}function c4(n){return n.replace(/\\u[a-fA-F0-9]{4}/g,e=>{try{const t=JSON.parse('"'+e+'"');return f4[t]||t}catch{return e}})}const f4={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},tL={'\\"':'"',"\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"	"};function u4(n){return n.replace(/["\b\f\n\r\t\\]/g,e=>f4[e]||e)}function h4(n){return n.replace(/\\["bfnrt\\]/g,e=>tL[e]||e)}function xl(n){return typeof n!="string"?String(n):n.endsWith(`
`)?n+`
`:n}function nL(n){return n.replace(/\n$/,"")}function d4(n,e){return Kf(n,t=>t.nodeName.toUpperCase()===e.toUpperCase())}function fl(n,e,t){return Kf(n,i=>sL(i,e,t))}function iL(n){return n.nodeName==="DIV"&&n.contentEditable==="true"}function sL(n,e,t){return typeof n.getAttribute=="function"&&n.getAttribute(e)===t}function Kf(n,e){return!!p0(n,e)}function p0(n,e){let t=n;for(;t&&!e(t);)t=t.parentNode;return t||void 0}function g4(n){if(n.firstChild==null){n.focus();return}const e=document.createRange(),t=window.getSelection();e.setStart(n,1),e.collapse(!0),t==null||t.removeAllRanges(),t==null||t.addRange(e)}function Xh(n,e,t,i){const s=oc(n);if(!s)return;const o=s.document.activeElement?s.document.activeElement:null;o&&o.isContentEditable&&(o.textContent=t?e:o.textContent+e,g4(o),i&&i(o))}function oc(n){return n&&n.ownerDocument?n.ownerDocument.defaultView:null}function b0(n){const e=oc(n),t=e==null?void 0:e.document.activeElement;return t?Kf(t,i=>i===n):!1}function m4(n,e){return p0(n,t=>t.nodeName===e)}function $g(n){return fl(n,"data-type","selectable-key")?qt.key:fl(n,"data-type","selectable-value")?qt.value:fl(n,"data-type","insert-selection-area-inside")?qt.inside:fl(n,"data-type","insert-selection-area-after")?qt.after:qt.multi}function za(n){return encodeURIComponent(Oe(n))}function oL(n){return Ts(decodeURIComponent(n))}function p4(n){const e=p0(n,i=>i!=null&&i.hasAttribute?i.hasAttribute("data-path"):!1),t=e==null?void 0:e.getAttribute("data-path");return t?oL(t):null}function rL({allElements:n,currentElement:e,direction:t,hasPrio:i=()=>!0,margin:s=10}){const o=g7(n.filter(l),a),r=a(e);function l(b){const y=b.getBoundingClientRect();return y.width>0&&y.height>0}function a(b){const y=b.getBoundingClientRect();return{x:y.left+y.width/2,y:y.top+y.height/2,rect:y,element:b}}const c=(b,y)=>Math.abs(b.y-y.y)<s,f=(b,y)=>b.rect.left+s<y.rect.left,u=(b,y)=>b.rect.right>y.rect.right+s,h=(b,y)=>b.y+s<y.y,d=(b,y)=>b.y>y.y+s;function g(b,y,v=1){const C=b.x-y.x,_=(b.y-y.y)*v;return Math.sqrt(C*C+_*_)}const m=b=>g(b,r),p=b=>g(b,r,10);if(t==="Left"||t==="Right"){const b=t==="Left"?o.filter(C=>f(C,r)):o.filter(C=>u(C,r)),y=b.filter(C=>c(C,r)),v=wu(y,m)||wu(b,p);return v==null?void 0:v.element}if(t==="Up"||t==="Down"){const b=t==="Up"?o.filter(C=>h(C,r)):o.filter(C=>d(C,r)),y=b.filter(C=>i(C.element)),v=wu(y,m)||wu(b,m);return v==null?void 0:v.element}}function b4(n){return!!n&&n.nodeName==="DIV"&&typeof n.refresh=="function"&&typeof n.cancel=="function"}function y0(){var n,e,t;return((n=navigator==null?void 0:navigator.platform)==null?void 0:n.toUpperCase().includes("MAC"))??((t=(e=navigator==null?void 0:navigator.userAgentData)==null?void 0:e.platform)==null?void 0:t.toUpperCase().includes("MAC"))??!1}function Fo(n,e="+",t=y0){const i=[];_0(n,t)&&i.push("Ctrl"),n.altKey&&i.push("Alt"),n.shiftKey&&i.push("Shift");const s=n.key.length===1?n.key.toUpperCase():n.key;return s in lL||i.push(s),i.join(e)}function _0(n,e=y0){return n.ctrlKey||n.metaKey&&e()}const lL={Ctrl:!0,Command:!0,Control:!0,Alt:!0,Option:!0,Shift:!0},{window:em}=U1;function Q2(n){let e,t,i,s,o,r;const l=[n[0].props];var a=n[0].component;function c(f,u){let h={};for(let d=0;d<l.length;d+=1)h=Ht(h,l[d]);return u!==void 0&&u&1&&(h=Ht(h,ni(l,[vl(f[0].props)]))),{props:h}}return a&&(s=us(a,c(n))),{c(){e=R("div"),t=R("input"),i=G(),s&&se(s.$$.fragment),w(t,"type","text"),t.readOnly=!0,w(t,"tabindex","-1"),w(t,"class","jse-hidden-input svelte-1r8q3m8"),w(e,"class","jse-absolute-popup-content svelte-1r8q3m8"),w(e,"style",o=Z2(n[1],n[0].options))},m(f,u){j(f,e,u),A(e,t),n[7](t),A(e,i),s&&ne(s,e,null),r=!0},p(f,u){if(u&1&&a!==(a=f[0].component)){if(s){me();const h=s;M(h.$$.fragment,1,0,()=>{ie(h,1)}),pe()}a?(s=us(a,c(f,u)),se(s.$$.fragment),k(s.$$.fragment,1),ne(s,e,null)):s=null}else if(a){const h=u&1?ni(l,[vl(f[0].props)]):{};s.$set(h)}(!r||u&3&&o!==(o=Z2(f[1],f[0].options)))&&w(e,"style",o)},i(f){r||(s&&k(s.$$.fragment,f),r=!0)},o(f){s&&M(s.$$.fragment,f),r=!1},d(f){f&&B(e),n[7](null),s&&ie(s)}}}function aL(n){let e,t,i,s,o=n[1]&&Q2(n);return{c(){e=R("div"),o&&o.c(),w(e,"role","none"),w(e,"class","jse-absolute-popup svelte-1r8q3m8")},m(r,l){j(r,e,l),o&&o.m(e,null),n[8](e),t=!0,i||(s=[he(em,"mousedown",n[3],!0),he(em,"keydown",n[4],!0),he(em,"wheel",n[5],!0),he(e,"mousedown",cL),he(e,"keydown",n[4])],i=!0)},p(r,[l]){r[1]?o?(o.p(r,l),l&2&&k(o,1)):(o=Q2(r),o.c(),k(o,1),o.m(e,null)):o&&(me(),M(o,1,1,()=>{o=null}),pe())},i(r){t||(k(o),t=!0)},o(r){M(o),t=!1},d(r){r&&B(e),o&&o.d(),n[8](null),i=!1,Et(s)}}}function cL(n){n.stopPropagation()}function Z2(n,e){function t(){if(e.anchor){const{anchor:f,width:u=0,height:h=0,offsetTop:d=0,offsetLeft:g=0,position:m}=e,{left:p,top:b,bottom:y,right:v}=f.getBoundingClientRect(),C=m==="top"||b+h>window.innerHeight&&b>h,_=m==="left"||p+u>window.innerWidth&&p>u;return{left:_?v-g:p+g,top:C?b-d:y+d,positionAbove:C,positionLeft:_}}else if(typeof e.left=="number"&&typeof e.top=="number"){const{left:f,top:u,width:h=0,height:d=0}=e,g=u+d>window.innerHeight&&u>d,m=f+h>window.innerWidth&&f>h;return{left:f,top:u,positionAbove:g,positionLeft:m}}else throw new Error('Invalid config: pass either "left" and "top", or pass "anchor"')}const i=n.getBoundingClientRect(),{left:s,top:o,positionAbove:r,positionLeft:l}=t(),a=r?`bottom: ${i.top-o}px;`:`top: ${o-i.top}px;`,c=l?`right: ${i.left-s}px;`:`left: ${s-i.left}px;`;return a+c}function fL(n,e,t){let{popup:i}=e,{closeAbsolutePopup:s}=e,o,r;Ai(u);function l(g){i.options&&i.options.closeOnOuterClick&&!Kf(g.target,m=>m===o)&&s(i.id)}function a(g){l(g)}function c(g){Fo(g)==="Escape"&&s(i.id)}function f(g){l(g)}function u(){r&&r.focus()}function h(g){it[g?"unshift":"push"](()=>{r=g,t(2,r)})}function d(g){it[g?"unshift":"push"](()=>{o=g,t(1,o)})}return n.$$set=g=>{"popup"in g&&t(0,i=g.popup),"closeAbsolutePopup"in g&&t(6,s=g.closeAbsolutePopup)},[i,o,r,a,c,f,s,h,d]}class uL extends ze{constructor(e){super(),Fe(this,e,fL,aL,Qt,{popup:0,closeAbsolutePopup:6})}}function $2(n,e,t){const i=n.slice();return i[6]=e[t],i}function ey(n){let e,t;return e=new uL({props:{popup:n[6],closeAbsolutePopup:n[1]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s&1&&(o.popup=i[6]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function hL(n){let e,t,i=at(n[0]),s=[];for(let a=0;a<i.length;a+=1)s[a]=ey($2(n,i,a));const o=a=>M(s[a],1,1,()=>{s[a]=null}),r=n[3].default,l=jt(r,n,n[2],null);return{c(){for(let a=0;a<s.length;a+=1)s[a].c();e=G(),l&&l.c()},m(a,c){for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(a,c);j(a,e,c),l&&l.m(a,c),t=!0},p(a,[c]){if(c&3){i=at(a[0]);let f;for(f=0;f<i.length;f+=1){const u=$2(a,i,f);s[f]?(s[f].p(u,c),k(s[f],1)):(s[f]=ey(u),s[f].c(),k(s[f],1),s[f].m(e.parentNode,e))}for(me(),f=i.length;f<s.length;f+=1)o(f);pe()}l&&l.p&&(!t||c&4)&&zt(l,r,a,a[2],t?Ft(r,a[2],c,null):Vt(a[2]),null)},i(a){if(!t){for(let c=0;c<i.length;c+=1)k(s[c]);k(l,a),t=!0}},o(a){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)M(s[c]);M(l,a),t=!1},d(a){a&&B(e),xn(s,a),l&&l.d(a)}}}function dL(n,e,t){let{$$slots:i={},$$scope:s}=e;const o=Fn("jsoneditor:AbsolutePopup");let r=[];function l(c,f,u){o("open...",f,u);const h={id:Jc(),component:c,props:f||{},options:u||{}};return t(0,r=[...r,h]),h.id}function a(c){const f=r.findIndex(u=>u.id===c);if(f!==-1){const u=r[f];u.options.onClose&&u.options.onClose(),t(0,r=r.filter(h=>h.id!==c))}}return K1("absolute-popup",{openAbsolutePopup:l,closeAbsolutePopup:a}),n.$$set=c=>{"$$scope"in c&&t(2,s=c.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&o("popups",r)},[r,a,s,i]}class y4 extends ze{constructor(e){super(),Fe(this,e,dL,hL,ft,{})}}function Ii(n){return n.map((e,t)=>_4.test(e)?"["+e+"]":/[.[\]]/.test(e)||e===""?'["'+gL(e)+'"]':(t>0?".":"")+e).join("")}function gL(n){return n.replace(/"/g,'\\"')}function mL(n){const e=[];let t=0;for(;t<n.length;)n[t]==="."&&t++,n[t]==="["?(t++,n[t]==='"'?(t++,e.push(i(o=>o==='"',!0)),s('"')):e.push(i(o=>o==="]")),s("]")):e.push(i(o=>o==="."||o==="["));function i(o,r=!1){let l="";for(;t<n.length&&!o(n[t]);)r&&n[t]==="\\"&&n[t+1]==='"'?(l+='"',t+=2):(l+=n[t],t++);return l}function s(o){if(n[t]!==o)throw new SyntaxError(`Invalid JSON path: ${o} expected at position ${t}`);t++}return e}function Rc(n){return{value:n,label:Ct(n)?"(item root)":Ii(n)}}function Gr(n){return n.map(e=>_4.test(e)?`?.[${e}]`:pL.test(e)?`?.${e}`:`?.[${JSON.stringify(e)}]`).join("")}const pL=/^[a-zA-Z$_][a-zA-Z$_\d]*$/,_4=/^\d+$/;function bL(){return sg(n=>n,Ii)}function Yf(n,e){const t=new Set(e),i=n.replace(/ \(copy( \d+)?\)$/,"");let s=n,o=1;for(;t.has(s);){const r="copy"+(o>1?" "+o:"");s=`${i} (${r})`,o++}return s}function zo(n,e){const t="...",i=e-t.length;return n.length>e?n.substring(0,i)+t:n}function yL(n){if(n==="")return"";const e=n.toLowerCase();if(e==="null")return null;if(e==="true")return!0;if(e==="false")return!1;if(e==="undefined")return;const t=Number(n),i=parseFloat(n);return!isNaN(t)&&!isNaN(i)?t:n}const _L=`
<p>
  Enter a JavaScript function to filter, sort, or transform the data.
</p>
`,wL={id:"javascript",name:"JavaScript",description:_L,createQuery:vL,executeQuery:kL};function vL(n,e){const{filter:t,sort:i,projection:s}=e,o=[`  return data
`];if(t&&t.path&&t.relation&&t.value){const r=`item => item${Gr(t.path)}`,l=yL(t.value),a=typeof l=="string"?`'${t.value}'`:sP(t.value)&&!Number.isSafeInteger(l)?`${t.value}n`:t.value;o.push(`    .filter(${r} ${t.relation} ${a})
`)}if(i&&i.path&&i.direction&&(i.direction==="desc"?o.push(`    .slice()
    .sort((a, b) => {
      // sort descending
      const valueA = a${Gr(i.path)}
      const valueB = b${Gr(i.path)}
      return valueA > valueB ? -1 : valueA < valueB ? 1 : 0
    })
`):o.push(`    .slice()
    .sort((a, b) => {
      // sort ascending
      const valueA = a${Gr(i.path)}
      const valueB = b${Gr(i.path)}
      return valueA > valueB ? 1 : valueA < valueB ? -1 : 0
    })
`)),s&&s.paths)if(s.paths.length>1){const r=s.paths.map(l=>{const a=l[l.length-1]||"item",c=`item${Gr(l)}`;return`      ${JSON.stringify(a)}: ${c}`});o.push(`    .map(item => ({
${r.join(`,
`)}})
    )
`)}else{const r=`item${Gr(s.paths[0])}`;o.push(`    .map(item => ${r})
`)}return`function query (data) {
${o.join("")}}`}function kL(n,e){const i=new Function(`"use strict";

`+e+`

if (typeof query !== "function") {
  throw new Error("Cannot execute query: expecting a function named 'query' but is undefined")
}

return query;
`)()(n);return i!==void 0?i:null}const SL={prefix:"far",iconName:"lightbulb",icon:[384,512,[128161],"f0eb","M297.2 248.9C311.6 228.3 320 203.2 320 176c0-70.7-57.3-128-128-128S64 105.3 64 176c0 27.2 8.4 52.3 22.8 72.9c3.7 5.3 8.1 11.3 12.8 17.7c0 0 0 0 0 0c12.9 17.7 28.3 38.9 39.8 59.8c10.4 19 15.7 38.8 18.3 57.5L109 384c-2.2-12-5.9-23.7-11.8-34.5c-9.9-18-22.2-34.9-34.5-51.8c0 0 0 0 0 0s0 0 0 0c-5.2-7.1-10.4-14.2-15.4-21.4C27.6 247.9 16 213.3 16 176C16 78.8 94.8 0 192 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3c-5 7.2-10.2 14.3-15.4 21.4c0 0 0 0 0 0s0 0 0 0c-12.3 16.8-24.6 33.7-34.5 51.8c-5.9 10.8-9.6 22.5-11.8 34.5l-48.6 0c2.6-18.7 7.9-38.6 18.3-57.5c11.5-20.9 26.9-42.1 39.8-59.8c0 0 0 0 0 0s0 0 0 0s0 0 0 0c4.7-6.4 9-12.4 12.7-17.7zM192 128c-26.5 0-48 21.5-48 48c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-44.2 35.8-80 80-80c8.8 0 16 7.2 16 16s-7.2 16-16 16zm0 384c-44.2 0-80-35.8-80-80l0-16 160 0 0 16c0 44.2-35.8 80-80 80z"]},CL={prefix:"far",iconName:"square-check",icon:[448,512,[9745,9989,61510,"check-square"],"f14a","M64 80c-8.8 0-16 7.2-16 16l0 320c0 8.8 7.2 16 16 16l320 0c8.8 0 16-7.2 16-16l0-320c0-8.8-7.2-16-16-16L64 80zM0 96C0 60.7 28.7 32 64 32l320 0c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96zM337 209L209 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L303 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"]},bp=CL,yp={prefix:"far",iconName:"square",icon:[448,512,[9632,9723,9724,61590],"f0c8","M384 80c8.8 0 16 7.2 16 16l0 320c0 8.8-7.2 16-16 16L64 432c-8.8 0-16-7.2-16-16L48 96c0-8.8 7.2-16 16-16l320 0zM64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32z"]},ML={prefix:"far",iconName:"clock",icon:[512,512,[128339,"clock-four"],"f017","M464 256A208 208 0 1 1 48 256a208 208 0 1 1 416 0zM0 256a256 256 0 1 0 512 0A256 256 0 1 0 0 256zM232 120l0 136c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2 280 120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"]};function xL(n){let e;return{c(){e=gi("g")},m(t,i){j(t,e,i),e.innerHTML=n[0]},p(t,[i]){i&1&&(e.innerHTML=t[0])},i:ge,o:ge,d(t){t&&B(e)}}}function AL(n,e,t){let i=870711;function s(){return i+=1,`fa-${i.toString(16)}`}let o="",{data:r}=e;function l(a){if(!a||!a.raw)return"";let c=a.raw;const f={};return c=c.replace(/\s(?:xml:)?id=["']?([^"')\s]+)/g,(u,h)=>{const d=s();return f[h]=d,` id="${d}"`}),c=c.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,(u,h,d,g)=>{const m=h||g;return!m||!f[m]?u:`#${f[m]}`}),c}return n.$$set=a=>{"data"in a&&t(1,r=a.data)},n.$$.update=()=>{n.$$.dirty&2&&t(0,o=l(r))},[o,r]}class OL extends ze{constructor(e){super(),Fe(this,e,AL,xL,Qt,{data:1})}}function PL(n){let e,t,i,s;const o=n[12].default,r=jt(o,n,n[11],null);let l=[{version:"1.1"},{class:t="fa-icon "+n[0]},{width:n[1]},{height:n[2]},{"aria-label":n[9]},{role:i=n[9]?"img":"presentation"},{viewBox:n[3]},{style:n[8]},n[10]],a={};for(let c=0;c<l.length;c+=1)a=Ht(a,l[c]);return{c(){e=gi("svg"),r&&r.c(),fo(e,a),te(e,"fa-spin",n[4]),te(e,"fa-pulse",n[6]),te(e,"fa-inverse",n[5]),te(e,"fa-flip-horizontal",n[7]==="horizontal"),te(e,"fa-flip-vertical",n[7]==="vertical"),te(e,"svelte-1mc5hvj",!0)},m(c,f){j(c,e,f),r&&r.m(e,null),s=!0},p(c,[f]){r&&r.p&&(!s||f&2048)&&zt(r,o,c,c[11],s?Ft(o,c[11],f,null):Vt(c[11]),null),fo(e,a=ni(l,[{version:"1.1"},(!s||f&1&&t!==(t="fa-icon "+c[0]))&&{class:t},(!s||f&2)&&{width:c[1]},(!s||f&4)&&{height:c[2]},(!s||f&512)&&{"aria-label":c[9]},(!s||f&512&&i!==(i=c[9]?"img":"presentation"))&&{role:i},(!s||f&8)&&{viewBox:c[3]},(!s||f&256)&&{style:c[8]},f&1024&&c[10]])),te(e,"fa-spin",c[4]),te(e,"fa-pulse",c[6]),te(e,"fa-inverse",c[5]),te(e,"fa-flip-horizontal",c[7]==="horizontal"),te(e,"fa-flip-vertical",c[7]==="vertical"),te(e,"svelte-1mc5hvj",!0)},i(c){s||(k(r,c),s=!0)},o(c){M(r,c),s=!1},d(c){c&&B(e),r&&r.d(c)}}}function TL(n,e,t){const i=["class","width","height","box","spin","inverse","pulse","flip","style","label"];let s=Li(e,i),{$$slots:o={},$$scope:r}=e,{class:l=""}=e,{width:a}=e,{height:c}=e,{box:f="0 0 0 0"}=e,{spin:u=!1}=e,{inverse:h=!1}=e,{pulse:d=!1}=e,{flip:g="none"}=e,{style:m=""}=e,{label:p=""}=e;return n.$$set=b=>{e=Ht(Ht({},e),co(b)),t(10,s=Li(e,i)),"class"in b&&t(0,l=b.class),"width"in b&&t(1,a=b.width),"height"in b&&t(2,c=b.height),"box"in b&&t(3,f=b.box),"spin"in b&&t(4,u=b.spin),"inverse"in b&&t(5,h=b.inverse),"pulse"in b&&t(6,d=b.pulse),"flip"in b&&t(7,g=b.flip),"style"in b&&t(8,m=b.style),"label"in b&&t(9,p=b.label),"$$scope"in b&&t(11,r=b.$$scope)},[l,a,c,f,u,h,d,g,m,p,s,r,o]}class EL extends ze{constructor(e){super(),Fe(this,e,TL,PL,Qt,{class:0,width:1,height:2,box:3,spin:4,inverse:5,pulse:6,flip:7,style:8,label:9})}}function ty(n,e,t){const i=n.slice();return i[24]=e[t],i}function ny(n,e,t){const i=n.slice();return i[27]=e[t],i}function iy(n){let e,t=[n[27]],i={};for(let s=0;s<t.length;s+=1)i=Ht(i,t[s]);return{c(){e=gi("path"),fo(e,i)},m(s,o){j(s,e,o)},p(s,o){fo(e,i=ni(t,[o&64&&s[27]]))},d(s){s&&B(e)}}}function sy(n){let e,t=[n[24]],i={};for(let s=0;s<t.length;s+=1)i=Ht(i,t[s]);return{c(){e=gi("polygon"),fo(e,i)},m(s,o){j(s,e,o)},p(s,o){fo(e,i=ni(t,[o&64&&s[24]]))},d(s){s&&B(e)}}}function oy(n){let e,t,i;function s(r){n[16](r)}let o={};return n[6]!==void 0&&(o.data=n[6]),e=new OL({props:o}),it.push(()=>Jn(e,"data",s)),{c(){se(e.$$.fragment)},m(r,l){ne(e,r,l),i=!0},p(r,l){const a={};!t&&l&64&&(t=!0,a.data=r[6],Un(()=>t=!1)),e.$set(a)},i(r){i||(k(e.$$.fragment,r),i=!0)},o(r){M(e.$$.fragment,r),i=!1},d(r){ie(e,r)}}}function RL(n){var f,u,h;let e,t,i,s,o=at(((f=n[6])==null?void 0:f.paths)||[]),r=[];for(let d=0;d<o.length;d+=1)r[d]=iy(ny(n,o,d));let l=at(((u=n[6])==null?void 0:u.polygons)||[]),a=[];for(let d=0;d<l.length;d+=1)a[d]=sy(ty(n,l,d));let c=((h=n[6])==null?void 0:h.raw)&&oy(n);return{c(){for(let d=0;d<r.length;d+=1)r[d].c();e=G();for(let d=0;d<a.length;d+=1)a[d].c();t=G(),c&&c.c(),i=bt()},m(d,g){for(let m=0;m<r.length;m+=1)r[m]&&r[m].m(d,g);j(d,e,g);for(let m=0;m<a.length;m+=1)a[m]&&a[m].m(d,g);j(d,t,g),c&&c.m(d,g),j(d,i,g),s=!0},p(d,g){var m,p,b;if(g&64){o=at(((m=d[6])==null?void 0:m.paths)||[]);let y;for(y=0;y<o.length;y+=1){const v=ny(d,o,y);r[y]?r[y].p(v,g):(r[y]=iy(v),r[y].c(),r[y].m(e.parentNode,e))}for(;y<r.length;y+=1)r[y].d(1);r.length=o.length}if(g&64){l=at(((p=d[6])==null?void 0:p.polygons)||[]);let y;for(y=0;y<l.length;y+=1){const v=ty(d,l,y);a[y]?a[y].p(v,g):(a[y]=sy(v),a[y].c(),a[y].m(t.parentNode,t))}for(;y<a.length;y+=1)a[y].d(1);a.length=l.length}(b=d[6])!=null&&b.raw?c?(c.p(d,g),g&64&&k(c,1)):(c=oy(d),c.c(),k(c,1),c.m(i.parentNode,i)):c&&(me(),M(c,1,1,()=>{c=null}),pe())},i(d){s||(k(c),s=!0)},o(d){M(c),s=!1},d(d){d&&(B(e),B(t),B(i)),xn(r,d),xn(a,d),c&&c.d(d)}}}function DL(n){let e;const t=n[15].default,i=jt(t,n,n[17],null),s=i||RL(n);return{c(){s&&s.c()},m(o,r){s&&s.m(o,r),e=!0},p(o,r){i?i.p&&(!e||r&131072)&&zt(i,t,o,o[17],e?Ft(t,o[17],r,null):Vt(o[17]),null):s&&s.p&&(!e||r&64)&&s.p(o,e?r:-1)},i(o){e||(k(s,o),e=!0)},o(o){M(s,o),e=!1},d(o){s&&s.d(o)}}}function LL(n){let e,t;const i=[{label:n[5]},{width:n[7]},{height:n[8]},{box:n[10]},{style:n[9]},{spin:n[1]},{flip:n[4]},{inverse:n[2]},{pulse:n[3]},{class:n[0]},n[11]];let s={$$slots:{default:[DL]},$$scope:{ctx:n}};for(let o=0;o<i.length;o+=1)s=Ht(s,i[o]);return e=new EL({props:s}),{c(){se(e.$$.fragment)},m(o,r){ne(e,o,r),t=!0},p(o,[r]){const l=r&4031?ni(i,[r&32&&{label:o[5]},r&128&&{width:o[7]},r&256&&{height:o[8]},r&1024&&{box:o[10]},r&512&&{style:o[9]},r&2&&{spin:o[1]},r&16&&{flip:o[4]},r&4&&{inverse:o[2]},r&8&&{pulse:o[3]},r&1&&{class:o[0]},r&2048&&vl(o[11])]):{};r&131136&&(l.$$scope={dirty:r,ctx:o}),e.$set(l)},i(o){t||(k(e.$$.fragment,o),t=!0)},o(o){M(e.$$.fragment,o),t=!1},d(o){ie(e,o)}}}let ry=1;function IL(n){let e,t;if(n)if("definition"in n){console.error("`import faIconName from '@fortawesome/package-name/faIconName` not supported - Please use `import { faIconName } from '@fortawesome/package-name/faIconName'` instead");return}else if("iconName"in n&&"icon"in n){e=n.iconName;const[i,s,,,o]=n.icon,r=Array.isArray(o)?o:[o];t={width:i,height:s,paths:r.map(l=>({d:l}))}}else e=Object.keys(n)[0],t=n[e];else return;return t}function NL(n,e,t){const i=["class","data","scale","spin","inverse","pulse","flip","label","style"];let s=Li(e,i),{$$slots:o={},$$scope:r}=e,{class:l=""}=e,{data:a}=e,c,{scale:f=1}=e,{spin:u=!1}=e,{inverse:h=!1}=e,{pulse:d=!1}=e,{flip:g=void 0}=e,{label:m=""}=e,{style:p=""}=e,b=10,y=10,v,C;function _(){let I=1;return typeof f<"u"&&(I=Number(f)),isNaN(I)||I<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.'),ry):I*ry}function S(){return c?`0 0 ${c.width} ${c.height}`:`0 0 ${b} ${y}`}function x(){return c?Math.max(c.width,c.height)/16:1}function D(){return c?c.width/x()*_():0}function P(){return c?c.height/x()*_():0}function E(){let I="";p!==null&&(I+=p);let N=_();return N===1?I.length===0?"":I:(I!==""&&!I.endsWith(";")&&(I+="; "),`${I}font-size: ${N}em`)}function O(I){c=I,t(6,c),t(12,a),t(14,p),t(13,f)}return n.$$set=I=>{e=Ht(Ht({},e),co(I)),t(11,s=Li(e,i)),"class"in I&&t(0,l=I.class),"data"in I&&t(12,a=I.data),"scale"in I&&t(13,f=I.scale),"spin"in I&&t(1,u=I.spin),"inverse"in I&&t(2,h=I.inverse),"pulse"in I&&t(3,d=I.pulse),"flip"in I&&t(4,g=I.flip),"label"in I&&t(5,m=I.label),"style"in I&&t(14,p=I.style),"$$scope"in I&&t(17,r=I.$$scope)},n.$$.update=()=>{n.$$.dirty&28672&&(t(6,c=IL(a)),t(7,b=D()),t(8,y=P()),t(9,v=E()),t(10,C=S()))},[l,u,h,d,g,m,c,b,y,v,C,s,a,f,p,o,O,r]}class vt extends ze{constructor(e){super(),Fe(this,e,NL,LL,Qt,{class:0,data:12,scale:13,spin:1,inverse:2,pulse:3,flip:4,label:5,style:14})}}function BL(n){let e,t,i,s,o,r,l;return t=new vt({props:{data:n[0]===!0?bp:yp}}),{c(){e=R("div"),se(t.$$.fragment),w(e,"role","checkbox"),w(e,"tabindex","-1"),w(e,"aria-checked",i=n[0]===!0),w(e,"class","jse-boolean-toggle svelte-68vtq4"),w(e,"title",s=n[1]?`Boolean value ${n[0]}`:"Click to toggle this boolean value"),te(e,"jse-readonly",n[1])},m(a,c){j(a,e,c),ne(t,e,null),o=!0,r||(l=he(e,"mousedown",n[2]),r=!0)},p(a,[c]){const f={};c&1&&(f.data=a[0]===!0?bp:yp),t.$set(f),(!o||c&1&&i!==(i=a[0]===!0))&&w(e,"aria-checked",i),(!o||c&3&&s!==(s=a[1]?`Boolean value ${a[0]}`:"Click to toggle this boolean value"))&&w(e,"title",s),(!o||c&2)&&te(e,"jse-readonly",a[1])},i(a){o||(k(t.$$.fragment,a),o=!0)},o(a){M(t.$$.fragment,a),o=!1},d(a){a&&B(e),ie(t),r=!1,l()}}}function jL(n,e,t){let{path:i}=e,{value:s}=e,{readOnly:o}=e,{onPatch:r}=e,{focus:l}=e;function a(c){c.stopPropagation(),!o&&(r([{op:"replace",path:Oe(i),value:!s}]),l())}return n.$$set=c=>{"path"in c&&t(3,i=c.path),"value"in c&&t(0,s=c.value),"readOnly"in c&&t(1,o=c.readOnly),"onPatch"in c&&t(4,r=c.onPatch),"focus"in c&&t(5,l=c.focus)},[s,o,a,i,r,l]}class FL extends ze{constructor(e){super(),Fe(this,e,jL,BL,ft,{path:3,value:0,readOnly:1,onPatch:4,focus:5})}}function zL(n){let e;return{c(){e=R("div"),w(e,"class","jse-color-picker-popup svelte-1f4ayrt")},m(t,i){j(t,e,i),n[4](e)},p:ge,i:ge,o:ge,d(t){t&&B(e),n[4](null)}}}function VL(n,e,t){let{color:i}=e,{onChange:s}=e,{showOnTop:o}=e,r,l=()=>{};Ai(async()=>{var u;const c=(u=await iO(async()=>{const{default:h}=await import("./vanilla-picker-B6E6ObS_.js");return{default:h}},[]))==null?void 0:u.default,f=new c({parent:r,color:i,popup:o?"top":"bottom",onDone(h){const g=h.rgba[3]===1?h.hex.substring(0,7):h.hex;s(g)}});f.show(),l=()=>{f.destroy()}}),Ci(()=>{l()});function a(c){it[c?"unshift":"push"](()=>{r=c,t(0,r)})}return n.$$set=c=>{"color"in c&&t(1,i=c.color),"onChange"in c&&t(2,s=c.onChange),"showOnTop"in c&&t(3,o=c.showOnTop)},[r,i,s,o,a]}class HL extends ze{constructor(e){super(),Fe(this,e,VL,zL,Qt,{color:1,onChange:2,showOnTop:3})}}function WL(n){let e,t,i,s;return{c(){e=R("button"),w(e,"type","button"),w(e,"class","jse-color-picker-button svelte-1zzxwe"),fi(e,"background",n[2]),w(e,"title",t=n[1]?`Color ${n[0]}`:"Click to open a color picker"),te(e,"jse-readonly",n[1])},m(o,r){j(o,e,r),i||(s=he(e,"click",n[3]),i=!0)},p(o,[r]){r&4&&fi(e,"background",o[2]),r&3&&t!==(t=o[1]?`Color ${o[0]}`:"Click to open a color picker")&&w(e,"title",t),r&2&&te(e,"jse-readonly",o[1])},i:ge,o:ge,d(o){o&&B(e),i=!1,s()}}}function qL(n,e,t){let i;const{openAbsolutePopup:s}=jn("absolute-popup");let{path:o}=e,{value:r}=e,{readOnly:l}=e,{onPatch:a}=e,{focus:c}=e;function f(d){a([{op:"replace",path:Oe(o),value:d}]),u()}function u(){c()}function h(d){var C;if(l)return;const g=300,m=d.target,p=m.getBoundingClientRect().top,y=(((C=oc(m))==null?void 0:C.innerHeight)??0)-p<g&&p>g;s(HL,{color:r,onChange:f,showOnTop:y},{anchor:m,closeOnOuterClick:!0,onClose:u,offsetTop:18,offsetLeft:-8,height:g})}return n.$$set=d=>{"path"in d&&t(4,o=d.path),"value"in d&&t(0,r=d.value),"readOnly"in d&&t(1,l=d.readOnly),"onPatch"in d&&t(5,a=d.onPatch),"focus"in d&&t(6,c=d.focus)},n.$$.update=()=>{n.$$.dirty&1&&t(2,i=C3(r))},[r,l,i,h,o,a,c]}class UL extends ze{constructor(e){super(),Fe(this,e,qL,WL,ft,{path:4,value:0,readOnly:1,onPatch:5,focus:6})}}function JL(n,e){const t={start:n,end:Math.min(_p(n),e)},i=Math.max(Gh((n+e)/2),n),s={start:i,end:Math.min(_p(i),e)},o=Gh(e),r=o===e?o-af:o,l={start:Math.max(r,n),end:e},a=[t],c=s.start>=t.end&&s.end<=l.start;return c&&a.push(s),l.start>=(c?s.end:t.end)&&a.push(l),a}function w4(n){const e=L7(n,i=>i.start),t=[e[0]];for(let i=0;i<e.length;i++){const s=t.length-1,o=t[s],r=e[i];r.start<=o.end?t[s]={start:Math.min(o.start,r.start),end:Math.max(o.end,r.end)}:t.push(r)}return t}function KL(n,e){return n.some(t=>e>=t.start&&e<t.end)}function _p(n){return Gh(n)+af}function Gh(n){return Math.floor(n/af)*af}function Qh(n){let e={expandedMap:{},enforceStringMap:{},visibleSectionsMap:{},selection:null,sortedColumn:null};return n!=null&&n.select&&n.json!==void 0&&(e={...e,selection:n.select(n.json,e)}),n!=null&&n.expand&&(e=ts(n.json,e,[],n.expand)),e}function cg(n,e){return n.visibleSectionsMap[e]||kl}function w0(n,e,t){e.forEach(({start:i,end:s})=>{i4(i,Math.min(n.length,s),t)})}function wp(n,e,t){const i={...e.expandedMap},s={...e.visibleSectionsMap};for(let o=0;o<t.length;o++){const r=t.slice(0,o),l=Oe(r),a=Be(n,r);if(fn(a)&&(i[l]=!0),Array.isArray(a)&&o<t.length){const c=s[l]||kl,f=ti(t[o]);if(!KL(c,f)){const u=Gh(f),h=_p(u),d={start:u,end:h};s[l]=w4(c.concat(d))}}}return{...e,expandedMap:i,visibleSectionsMap:s}}function ts(n,e,t,i){const s={...e.expandedMap};function o(a){const c=r.length;if(Array.isArray(a)){if(i(r)){const f=Oe(r);if(s[f]=!0,a.length>0){const u=cg(e,f);w0(a,u,h=>{r[c]=String(h),o(a[h])}),r.pop()}}}else if(Ut(a)&&i(r)){s[Oe(r)]=!0;const f=Object.keys(a);if(f.length>0){for(const u of f)r[c]=u,o(a[u]);r.pop()}}}const r=t.slice(),l=n!==void 0?Be(n,t):n;return l!==void 0&&o(l),{...e,expandedMap:s}}function YL(n,e){return{...n,expandedMap:{...n.expandedMap,[Oe(e)]:!0}}}function v4(n,e){const t=ka(n.expandedMap,e),i=ka(n.enforceStringMap,e),s=ka(n.visibleSectionsMap,e);return{...n,expandedMap:t,enforceStringMap:i,visibleSectionsMap:s}}function k4(n,e,t){if(t){const i={...n.enforceStringMap};return i[e]=t,{...n,enforceStringMap:i}}else if(typeof n.enforceStringMap[e]=="boolean"){const i={...n.enforceStringMap};return delete i[e],{...n,enforceStringMap:i}}else return n}function XL(n,e,t,i){return{...e,visibleSectionsMap:{...e.visibleSectionsMap,[t]:w4(cg(e,t).concat(i))}}}function S4(n,e,t){const i=As(n,t),s=t.reduce((o,r)=>c3(r)?C4(i,o,r):f3(r)?M4(i,o,r):Q1(r)?GL(i,o,r):np(r)||Ia(r)?QL(i,o,r):o,e);return{json:i,documentState:s}}function C4(n,e,t){const i=so(n,t.path),s=_t(i),o=Oe(s),r=Be(n,s);if(Jt(r)){const l=ti(mt(i)),a=Sa(e.expandedMap,s,l,1),c=Sa(e.enforceStringMap,s,l,1);let f=Sa(e.visibleSectionsMap,s,l,1);return f=x4(f,o,u=>A4(u,l,1)),{...e,expandedMap:a,enforceStringMap:c,visibleSectionsMap:f}}return e}function M4(n,e,t){const i=so(n,t.path),s=_t(i),o=Oe(s),r=Be(n,s);let{expandedMap:l,enforceStringMap:a,visibleSectionsMap:c}=e;if(l=ka(l,i),a=ka(a,i),c=ka(c,i),Jt(r)){const f=ti(mt(i));l=Sa(l,s,f,-1),a=Sa(a,s,f,-1),c=Sa(c,s,f,-1),c=x4(c,o,u=>A4(u,f,-1))}return{...e,expandedMap:l,enforceStringMap:a,visibleSectionsMap:c}}function GL(n,e,t){const i=t.path,s=sm(n,e.expandedMap),o=sm(n,e.enforceStringMap),r=sm(n,e.visibleSectionsMap);return!gn(t.value)&&!Jt(t.value)&&delete s[i],Jt(t.value)||delete r[i],(gn(t.value)||Jt(t.value))&&delete o[i],{...e,expandedMap:s,enforceStringMap:o,visibleSectionsMap:r}}function QL(n,e,t){if(Ia(t)&&t.from===t.path)return e;const i=u=>t.path+u.substring(t.from.length),s=im(tm(e.expandedMap,t.from),i),o=im(tm(e.enforceStringMap,t.from),i),r=im(tm(e.visibleSectionsMap,t.from),i);let l=e;Ia(t)&&(l=M4(n,l,{op:"remove",path:t.from})),l=C4(n,l,{op:"add",path:t.path,value:null});const a=nm(l.expandedMap,s),c=nm(l.enforceStringMap,o),f=nm(l.visibleSectionsMap,r);return{...e,expandedMap:a,enforceStringMap:c,visibleSectionsMap:f}}function ka(n,e){const t={},i=Oe(e);return Object.keys(n).forEach(s=>{Kd(s,i)||(t[s]=n[s])}),t}function tm(n,e){const t={};return Object.keys(n).forEach(i=>{Kd(i,e)&&(t[i]=n[i])}),t}function nm(n,e){return{...n,...e}}function im(n,e){const t={};return Object.keys(n).forEach(i=>{const s=e(i);t[s]=n[i]}),t}function Sa(n,e,t,i){const s=e.length,o=Oe(e),r=[];for(const a of Object.keys(n))if(Kd(a,o)){const c=Ts(a),f=ti(c[s]);f>=t&&(c[s]=String(f+i),r.push({oldPointer:a,newPointer:Oe(c),value:n[a]}))}if(r.length===0)return n;const l={...n};return r.forEach(a=>{delete l[a.oldPointer]}),r.forEach(a=>{l[a.newPointer]=a.value}),l}function sm(n,e){const t={};return Object.keys(e).filter(i=>ls(n,so(n,i))).forEach(i=>{t[i]=e[i]}),t}function x4(n,e,t){const i=n[e];if(e in n){const s=t(i);if(!yt(i,s)){const o={...n};return s===void 0?delete o[e]:o[e]=s,o}}return n}function A4(n,e,t){const i=n.map(s=>({start:s.start>e?s.start+t:s.start,end:s.end>e?s.end+t:s.end}));return ZL(i)}function ZL(n){const e=n.slice(0);let t=1;for(;t<e.length;)e[t-1].end===e[t].start&&(e[t-1]={start:e[t-1].start,end:e[t].end},e.splice(t)),t++;return e}function Vo(n,e,t,i){const s=e?e[t]:void 0;return typeof s=="boolean"?s:iP(n,i)}function Xf(n,e,t=!1){const i=n.indexOf(e);return i!==-1?t?n.slice(i):n.slice(i+1):[]}function v0(n,e){const t=[];function i(s,o){t.push(o);const r=Oe(o);if(s&&e.expandedMap[r]===!0){if(Jt(s)){const l=cg(e,r);w0(s,l,a=>{i(s[a],o.concat(String(a)))})}gn(s)&&Object.keys(s).forEach(l=>{i(s[l],o.concat(l))})}}return i(n,[]),t}function O4(n,e,t=!0){const i=[];function s(o,r){i.push({path:r,type:ks.value});const l=Oe(r);if(o&&e.expandedMap[l]===!0){if(t&&i.push({path:r,type:ks.inside}),Jt(o)){const a=cg(e,l);w0(o,a,c=>{const f=r.concat(String(c));s(o[c],f),t&&i.push({path:f,type:ks.after})})}gn(o)&&Object.keys(o).forEach(c=>{const f=r.concat(c);i.push({path:f,type:ks.key}),s(o[c],f),t&&i.push({path:f,type:ks.after})})}}return s(n,[]),i}function $L(n,e,t){const i=v0(n,e),s=i.map(Oe),o=Oe(t),r=s.indexOf(o);return r!==-1&&r>0?i[r-1]:null}function vp(n,e,t){const i=v0(n,e),o=i.map(Oe).indexOf(Oe(t));return o!==-1&&o<i.length-1?i[o+1]:null}function lr(n,e,t){const i=Be(n,t);if(i===void 0)return e;const o=!l4({json:i},a3)?gf:eo;return ts(n,e,t,o)}function eo(n){return n.length===0?!0:n.length===1&&n[0]==="0"}function gf(){return!0}function eI(n){return l4({json:n},a3)?eo:gf}function Ri(n){return n&&n.type===qt.after||!1}function Sn(n){return n&&n.type===qt.inside||!1}function vn(n){return n&&n.type===qt.key||!1}function St(n){return n&&n.type===qt.value||!1}function Wt(n){return n&&n.type===qt.multi||!1}function fg(n){return Wt(n)&&yt(n.focusPath,n.anchorPath)}function k0(n){return Wt(n)||Ri(n)||Sn(n)||vn(n)||St(n)}function om(n){return n&&n.type===qt.text||!1}function Ar(n,e){const t=[];return tI(n,e,i=>{t.push(i)}),t}function tI(n,e,t){if(!e)return;const i=Al(e),s=Ye(e);if(yt(i,s))return t(i);{if(n===void 0)return;const o=E4(i,s);if(i.length===o.length||s.length===o.length)return t(o);const r=hi(i,s),l=Ho(n,r),a=Fr(n,r),c=No(n,r,l),f=No(n,r,a);if(c===-1||f===-1)return;const u=Be(n,o);if(gn(u)){const h=Object.keys(u);for(let d=c;d<=f;d++){const g=t(o.concat(h[d]));if(g!==void 0)return g}return}if(Jt(u)){for(let h=c;h<=f;h++){const d=t(o.concat(String(h)));if(d!==void 0)return d}return}}throw new Error("Failed to create selection")}function P4(n){return Sn(n)?n.path:_t(Ye(n))}function Ho(n,e){if(!Wt(e))return e.path;const t=No(n,e,e.anchorPath);return No(n,e,e.focusPath)<t?e.focusPath:e.anchorPath}function Fr(n,e){if(!Wt(e))return e.path;const t=No(n,e,e.anchorPath);return No(n,e,e.focusPath)>t?e.focusPath:e.anchorPath}function nI(n,e){return Wo(Ye(n),e)&&(Ye(n).length>e.length||Sn(n))}function ly(n,e,t=!1){const i=e.selection;if(!i)return null;const s=t?Ye(i):Ho(n,i),o=$L(n,e,s);if(t)return Sn(i)||Ri(i)?o!==null?hi(s,s):null:o!==null?hi(Al(i),o):null;if(Ri(i)||Sn(i))return ut(s,!1);if(vn(i)){if(o==null||o.length===0)return null;const r=_t(o),l=Be(n,r);return Array.isArray(l)||Ct(o)?ut(o,!1):as(o,!1)}return St(i),o!==null?ut(o,!1):null}function iI(n,e,t=!1){const i=e.selection;if(!i)return null;const s=t?Ye(i):Fr(n,i),o=fn(Be(n,s))?v4(e,s):e,r=vp(n,e,s),l=vp(n,o,s);if(t)return Sn(i)?r!==null?hi(r,r):null:Ri(i)?l!==null?hi(l,l):null:l!==null?hi(Al(i),l):null;if(Ri(i))return l!==null?ut(l,!1):null;if(Sn(i)||St(i))return r!==null?ut(r,!1):null;if(vn(i)){if(r===null||r.length===0)return null;const a=_t(r),c=Be(n,a);return Array.isArray(c)?ut(r,!1):as(r,!1)}return Wt(i)?l!==null?ut(l,!1):r!==null?ut(r,!1):null:null}function sI(n,e,t){const i=_t(t),s=[mt(t)],o=Be(n,i),r=o?vp(o,e,s):void 0;return r?ut(i.concat(r),!1):Uo(t)}function T4(n,e,t){const i=e.selection;if(!i)return{caret:null,previous:null,next:null};const s=O4(n,e,t),o=s.findIndex(r=>yt(r.path,Ye(i))&&String(r.type)===String(i.type));return{caret:o!==-1?s[o]:null,previous:o!==-1&&o>0?s[o-1]:null,next:o!==-1&&o<s.length-1?s[o+1]:null}}function oI(n,e,t=!1,i=!0){const s=e.selection;if(!s)return null;const{caret:o,previous:r}=T4(n,e,i);if(t)return Wt(s)?null:hi(s.path,s.path);if(o&&r)return S0(r);const l=_t(Ye(s)),a=Be(n,l);return St(s)&&Array.isArray(a)?hi(s.path,s.path):Wt(s)&&!Array.isArray(a)?as(s.focusPath,!1):null}function rI(n,e,t=!1,i=!0){const s=e.selection;if(!s)return null;const{caret:o,next:r}=T4(n,e,i);return t?Wt(s)?null:hi(s.path,s.path):o&&r?S0(r):Wt(s)?ut(s.focusPath,!1):null}function ta(n,e){const t=v0(n,e);let i=0;for(;i<t.length-1&&t[i+1].length>t[i].length;)i++;const s=t[i];return s===void 0||s.length===0||Array.isArray(Be(n,_t(s)))?ut(s,!1):as(s,!1)}function Va(n,e){if(e.length===1){const i=Io(e);if(i.op==="replace"){const s=so(n,i.path);return ut(s,!1)}}if(!Ct(e)&&e.every(i=>i.op==="move")){const i=Io(e),s=e.slice(1);if((np(i)||Ia(i))&&i.from!==i.path&&s.every(o=>(np(o)||Ia(o))&&o.from===o.path)){const o=so(n,i.path);return as(o,!1)}}const t=e.filter(i=>i.op!=="test"&&i.op!=="remove"&&(i.op!=="move"||i.from!==i.path)&&typeof i.path=="string").map(i=>so(n,i.path));return Ct(t)?null:{type:qt.multi,anchorPath:Io(t),focusPath:mt(t)}}function E4(n,e){let t=0;for(;t<n.length&&t<e.length&&n[t]===e[t];)t++;return n.slice(0,t)}function Zh(n){return vn(n)||St(n)||fg(n)}function ay(n,e){return Zh(e)&&fn(Be(n,Ye(e)))?Ye(e):_t(Ye(e))}function Wo(n,e){if(n.length<e.length)return!1;for(let t=0;t<e.length;t++)if(n[t]!==e[t])return!1;return!0}function li(n){const e=n.selection;return(vn(e)||St(e))&&e.edit?{...n,selection:{...e,edit:!1}}:n}function as(n,e){return{type:qt.key,path:n,edit:e}}function ut(n,e){return{type:qt.value,path:n,edit:e}}function qo(n){return{type:qt.inside,path:n}}function Uo(n){return{type:qt.after,path:n}}function hi(n,e){const t=E4(n,e),i=n.length>t.length&&e.length>t.length;return{type:qt.multi,anchorPath:i?t.concat(n[t.length]):t,focusPath:i?t.concat(e[t.length]):t}}function R4(n,e,t,i){if(vn(e))return String(mt(e.path));if(St(e)){const s=Be(n,e.path);return typeof s=="string"?s:i.stringify(s,null,t)??null}if(Wt(e)){if(Ct(e.focusPath))return i.stringify(n,null,t)??null;const s=P4(e),o=Be(n,s);if(Array.isArray(o))if(fg(e)){const r=Be(n,e.focusPath);return i.stringify(r,null,t)??null}else return Ar(n,e).map(r=>{const l=Be(n,r);return`${i.stringify(l,null,t)},`}).join(`
`);else return Ar(n,e).map(r=>{const l=mt(r),a=Be(n,r);return`${i.stringify(l)}: ${i.stringify(a,null,t)},`}).join(`
`)}return null}function pi(n){return(vn(n)||St(n))&&n.edit===!0}function lI(n,e,t=!0){return!e&&!t?n:{...n,selection:e}}function aI(){return ut([],!1)}function rc(n){return vn(n)||St(n)||Wt(n)}function wh(n){return vn(n)||St(n)||fg(n)}function S0(n){switch(n.type){case ks.key:return as(n.path,!1);case ks.value:return ut(n.path,!1);case ks.after:return Uo(n.path);case ks.inside:return qo(n.path)}}function cy(n,e,t){switch(e){case qt.key:return as(t,!1);case qt.value:return ut(t,!1);case qt.after:return Uo(t);case qt.inside:return qo(t);case qt.multi:case qt.text:return hi(t,t)}}function fy(n,e,t){if(!e)return null;if(mf(n,e,t))return e;const i=Wt(e)?_t(e.focusPath):e.path;return Wo(i,t)?e:null}function mf(n,e,t){if(n===void 0||!e)return!1;if(vn(e)||Sn(e)||Ri(e))return yt(e.path,t);if(St(e))return Wo(t,e.path);if(Wt(e)){const i=Ho(n,e),s=Fr(n,e),o=_t(e.focusPath);if(!Wo(t,o)||t.length<=o.length)return!1;const r=No(n,e,i),l=No(n,e,s),a=No(n,e,t);return a!==-1&&a>=r&&a<=l}return!1}function No(n,e,t){const i=_t(e.focusPath);if(!Wo(t,i)||t.length<=i.length)return-1;const s=t[i.length],o=Be(n,i);if(gn(o))return Object.keys(o).indexOf(s);if(Jt(o)){const r=ti(s);if(r<o.length)return r}return-1}function Ye(n){return Wt(n)?n.focusPath:n.path}function Al(n){return Wt(n)?n.anchorPath:n.path}function ho(...n){const e=[];for(const t of n)if(typeof t=="string"&&e.push(t),t&&typeof t=="object")for(const i in t)Object.hasOwnProperty.call(t,i)&&t[i]&&e.push(i);return e.join(" ")}function kp(n,e){const t=o0(n,e);return ho("jse-value","jse-"+t,{"jse-url":Xd(n),"jse-empty":typeof n=="string"&&n.length===0})}function cI(n){let e,t,i,s;return{c(){e=R("div"),w(e,"role","textbox"),w(e,"tabindex","0"),w(e,"class",t=pn(ho("jse-editable-div",n[2],{"jse-short-text":n[0]}))+" svelte-zwlnit"),w(e,"contenteditable","true"),w(e,"spellcheck","false")},m(o,r){j(o,e,r),n[13](e),i||(s=[he(e,"input",n[3]),he(e,"keydown",n[4]),he(e,"paste",n[5]),he(e,"blur",n[6])],i=!0)},p(o,[r]){r&5&&t!==(t=pn(ho("jse-editable-div",o[2],{"jse-short-text":o[0]}))+" svelte-zwlnit")&&w(e,"class",t)},i:ge,o:ge,d(o){o&&B(e),n[13](null),i=!1,Et(s)}}}function fI(n,e,t){const i=Fn("jsoneditor:EditableDiv");let{value:s}=e,{shortText:o=!1}=e,{onChange:r}=e,{onCancel:l}=e,{onFind:a}=e,{onPaste:c=Hn}=e,{onValueClass:f=()=>""}=e,u,h,d=!1;Ai(()=>{i("onMount",{value:s}),m(s),u&&(g4(u),t(1,u.refresh=p,u),t(1,u.cancel=b,u))}),Ci(()=>{const S=g();i("onDestroy",{closed:d,value:s,newValue:S}),!d&&S!==s&&r(S,_r.no)});function g(){return u?nL(u.innerText):""}function m(S){u&&t(1,u.innerText=xl(S),u)}function p(){const S=g();S===""&&m(""),t(2,h=f(S))}function b(){d=!0,l()}function y(S){S.stopPropagation();const x=Fo(S);if(x==="Escape"&&b(),x==="Enter"||x==="Tab"){d=!0;const D=g();r(D,_r.nextInside)}x==="Ctrl+F"&&(S.preventDefault(),a(!1)),x==="Ctrl+H"&&(S.preventDefault(),a(!0))}function v(S){if(S.stopPropagation(),!c||!S.clipboardData)return;const x=S.clipboardData.getData("text/plain");c(x)}function C(){const S=document.hasFocus(),x=g();i("handleBlur",{hasFocus:S,closed:d,value:s,newValue:x}),document.hasFocus()&&!d&&(d=!0,x!==s&&r(x,_r.self))}function _(S){it[S?"unshift":"push"](()=>{u=S,t(1,u)})}return n.$$set=S=>{"value"in S&&t(7,s=S.value),"shortText"in S&&t(0,o=S.shortText),"onChange"in S&&t(8,r=S.onChange),"onCancel"in S&&t(9,l=S.onCancel),"onFind"in S&&t(10,a=S.onFind),"onPaste"in S&&t(11,c=S.onPaste),"onValueClass"in S&&t(12,f=S.onValueClass)},n.$$.update=()=>{n.$$.dirty&4224&&t(2,h=f(s))},[o,u,h,p,y,v,C,s,r,l,a,c,f,_]}class D4 extends ze{constructor(e){super(),Fe(this,e,fI,cI,ft,{value:7,shortText:0,onChange:8,onCancel:9,onFind:10,onPaste:11,onValueClass:12})}}function uI(n){let e,t;return e=new D4({props:{value:n[1].escapeValue(n[0]),onChange:n[3],onCancel:n[4],onPaste:n[5],onFind:n[2],onValueClass:n[6]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,[s]){const o={};s&3&&(o.value=i[1].escapeValue(i[0])),s&4&&(o.onFind=i[2]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function hI(n,e,t){let{path:i}=e,{value:s}=e,{parser:o}=e,{normalization:r}=e,{enforceString:l}=e,{onPatch:a}=e,{onPasteJson:c}=e,{onSelect:f}=e,{onFind:u}=e,{focus:h}=e,{findNextInside:d}=e;function g(v){return l?v:tc(v,o)}function m(v,C){a([{op:"replace",path:Oe(i),value:g(r.unescapeValue(v))}],(_,S)=>{if(S.selection&&!yt(i,Ye(S.selection)))return;const x=C===_r.nextInside?d(i):ut(i,!1);return{state:{...S,selection:x}}}),h()}function p(){f(ut(i,!1)),h()}function b(v){try{const C=o.parse(v);fn(C)&&c({path:i,contents:C})}catch{}}function y(v){return kp(g(r.unescapeValue(v)),o)}return n.$$set=v=>{"path"in v&&t(7,i=v.path),"value"in v&&t(0,s=v.value),"parser"in v&&t(8,o=v.parser),"normalization"in v&&t(1,r=v.normalization),"enforceString"in v&&t(9,l=v.enforceString),"onPatch"in v&&t(10,a=v.onPatch),"onPasteJson"in v&&t(11,c=v.onPasteJson),"onSelect"in v&&t(12,f=v.onSelect),"onFind"in v&&t(2,u=v.onFind),"focus"in v&&t(13,h=v.focus),"findNextInside"in v&&t(14,d=v.findNextInside)},[s,r,u,m,p,b,y,i,o,l,a,c,f,h,d]}class dI extends ze{constructor(e){super(),Fe(this,e,hI,uI,ft,{path:7,value:0,parser:8,normalization:1,enforceString:9,onPatch:10,onPasteJson:11,onSelect:12,onFind:2,focus:13,findNextInside:14})}}function ga(n,e,t){const i=_t(e),s=Be(n,i);if(Jt(s)){const o=ti(mt(e));return t.map((r,l)=>({op:"add",path:Oe(i.concat(String(o+l))),value:r.value}))}else if(gn(s)){const o=mt(e),r=Object.keys(s),l=o!==void 0?Xf(r,o,!0):[];return[...t.map(a=>{const c=Yf(a.key,r);return{op:"add",path:Oe(i.concat(c)),value:a.value}}),...l.map(a=>Ol(i,a))]}else throw new Error("Cannot create insert operations: parent must be an Object or Array")}function Sp(n,e,t){const i=Be(n,e);if(Array.isArray(i)){const s=i.length;return t.map((o,r)=>({op:"add",path:Oe(e.concat(String(s+r))),value:o.value}))}else return t.map(s=>{const o=Yf(s.key,Object.keys(i));return{op:"add",path:Oe(e.concat(o)),value:s.value}})}function Gf(n,e,t,i){const s=e.filter(l=>l!==t),o=Yf(i,s),r=Xf(e,t,!1);return[{op:"move",from:Oe(n.concat(t)),path:Oe(n.concat(o))},...r.map(l=>Ol(n,l))]}function gI(n,e,t){const i=Io(e),s=_t(i),o=Be(n,s);if(Jt(o)){const r=Io(e),l=r?ti(mt(r)):0;return[...$h(e),...t.map((a,c)=>({op:"add",path:Oe(s.concat(String(c+l))),value:a.value}))]}else if(gn(o)){const r=mt(e),l=_t(r),a=mt(r),c=Object.keys(o),f=a!==void 0?Xf(c,a,!1):[],u=new Set(e.map(d=>mt(d))),h=c.filter(d=>!u.has(d));return[...$h(e),...t.map(d=>{const g=Yf(d.key,h);return{op:"add",path:Oe(l.concat(g)),value:d.value}}),...f.map(d=>Ol(l,d))]}else throw new Error("Cannot create replace operations: parent must be an Object or Array")}function L4(n,e){const t=mt(e);if(Ct(t))throw new Error("Cannot duplicate root object");const i=_t(t),s=mt(t),o=Be(n,i);if(Jt(o)){const r=mt(e),l=r?ti(mt(r))+1:0;return[...e.map((a,c)=>({op:"copy",from:Oe(a),path:Oe(i.concat(String(c+l)))}))]}else if(gn(o)){const r=Object.keys(o),l=s!==void 0?Xf(r,s,!1):[];return[...e.map(a=>{const c=mt(a),f=Yf(c,r);return{op:"copy",from:Oe(a),path:Oe(i.concat(f))}}),...l.map(a=>Ol(i,a))]}else throw new Error("Cannot create duplicate operations: parent must be an Object or Array")}function mI(n,e){if(St(e))return[{op:"move",from:Oe(e.path),path:""}];if(Wt(e)){const t=_t(e.focusPath),i=Be(n,t);if(Jt(i))return[{op:"replace",path:"",value:Ar(n,e).map(o=>{const r=ti(mt(o));return i[r]})}];if(gn(i)){const s={};return Ar(n,e).forEach(o=>{const r=String(mt(o));s[r]=i[r]}),[{op:"replace",path:"",value:s}]}}else throw new Error("Cannot create extract operations: parent must be an Object or Array");throw new Error("Cannot extract: unsupported type of selection "+JSON.stringify(e))}function I4(n,e,t,i){if(vn(e)){const s=s4(t,i),o=_t(e.path),r=Be(n,o),l=Object.keys(r),a=mt(e.path);return Gf(o,l,a,typeof s=="string"?s:t)}if(St(e)||Wt(e)&&Ct(e.focusPath))try{return[{op:"replace",path:Oe(Ye(e)),value:ag(t,s=>Jf(s,i))}]}catch{return[{op:"replace",path:Oe(Ye(e)),value:t}]}if(Wt(e)){const s=rm(t,i);return gI(n,Ar(n,e),s)}if(Ri(e)){const s=rm(t,i),o=e.path,r=_t(o),l=Be(n,r);if(Jt(l)){const a=ti(mt(o)),c=r.concat(String(a+1));return ga(n,c,s)}else if(gn(l)){const a=String(mt(o)),c=Object.keys(l);if(Ct(c)||mt(c)===a)return Sp(n,r,s);{const f=c.indexOf(a),u=c[f+1],h=r.concat(u);return ga(n,h,s)}}else throw new Error("Cannot create insert operations: parent must be an Object or Array")}if(Sn(e)){const s=rm(t,i),o=e.path,r=Be(n,o);if(Jt(r)){const l=o.concat("0");return ga(n,l,s)}else if(gn(r)){const l=Object.keys(r);if(Ct(l))return Sp(n,o,s);{const a=Io(l),c=o.concat(a);return ga(n,c,s)}}else throw new Error("Cannot create insert operations: parent must be an Object or Array")}throw new Error("Cannot insert: unsupported type of selection "+JSON.stringify(e))}function pI(n,e,t){if(!e)return[];const i="beforePath"in t?t.beforePath:void 0,s="append"in t?t.append:void 0,o=_t(Ye(e)),r=Be(n,o);if(!s&&!(i&&Wo(i,o)&&i.length>o.length))return[];const l=Ho(n,e),a=Fr(n,e),c=mt(l),f=mt(a),u=i?i[o.length]:void 0;if(gn(r)){const h=Object.keys(r),d=h.indexOf(c),g=h.indexOf(f),m=s?h.length:u!==void 0?h.indexOf(u):-1;if(d!==-1&&g!==-1&&m!==-1)return m>d?[...h.slice(d,g+1),...h.slice(m,h.length)].map(p=>Ol(o,p)):[...h.slice(m,d),...h.slice(g+1,h.length)].map(p=>Ol(o,p))}else if(Jt(r)){const h=ti(c),d=ti(f),g=u!==void 0?ti(u):r.length,m=d-h+1;return g<h?q2(m,p=>({op:"move",from:Oe(o.concat(String(h+p))),path:Oe(o.concat(String(g+p)))})):q2(m,()=>({op:"move",from:Oe(o.concat(String(h))),path:Oe(o.concat(String(g)))}))}else throw new Error("Cannot create move operations: parent must be an Object or Array");return[]}function bI(n,e,t){if(t==="object")return{};if(t==="array")return[];if(t==="structure"&&n!==void 0){const i=e?P4(e):[],s=Be(n,i);if(Array.isArray(s)&&!Ct(s)){const o=Io(s);return fn(o)?hD(o,r=>Array.isArray(r)?[]:Ut(r)?void 0:""):""}}return""}function $h(n){return n.map(e=>({op:"remove",path:Oe(e)})).reverse()}function Ol(n,e){return{op:"move",from:Oe(n.concat(e)),path:Oe(n.concat(e))}}function rm(n,e){const t=/^\s*{/.test(n),i=/^\s*\[/.test(n),s=s4(n,e),o=s!==void 0?s:ag(n,r=>Jf(r,e));return t&&Ut(o)||i&&Array.isArray(o)?[{key:"New item",value:o}]:Array.isArray(o)?o.map((r,l)=>({key:"New item "+l,value:r})):Ut(o)?Object.keys(o).map(r=>({key:r,value:o[r]})):[{key:"New item",value:o}]}function N4(n,e){if(vn(e)){const t=_t(e.path),i=Be(n,t),s=Object.keys(i),o=mt(e.path),l=Gf(t,s,o,""),a=Va(n,l);return{operations:l,newSelection:a}}if(St(e))return{operations:[{op:"replace",path:Oe(e.path),value:""}],newSelection:e};if(Wt(e)){const t=Ar(n,e),i=$h(t),s=mt(t);if(Ct(s)){const l=[{op:"replace",path:"",value:""}],a=ut([],!1);return{operations:l,newSelection:a}}const o=_t(s),r=Be(n,o);if(Jt(r)){const l=Io(t),a=ti(mt(l)),c=a===0?qo(o):Uo(o.concat(String(a-1)));return{operations:i,newSelection:c}}else if(gn(r)){const l=Object.keys(r),a=Io(t),c=mt(a),f=l.indexOf(c),u=l[f-1],h=f===0?qo(o):Uo(o.concat(u));return{operations:i,newSelection:h}}else throw new Error("Cannot create remove operations: parent must be an Object or Array")}throw new Error("Cannot remove: unsupported type of selection "+JSON.stringify(e))}function B4(n,e){return g3(n,e,{before:(t,i,s)=>{if(f3(i)){const o=Ts(i.path);return{revertOperations:[...s,...uy(t,o)]}}if(Ia(i)){const o=Ts(i.from);return{revertOperations:[...s,...uy(t,o)]}}return{document:t}}})}function uy(n,e){const t=_t(e),i=mt(e),s=Be(n,t);if(gn(s)){const o=Object.keys(s);return Xf(o,i,!1).map(l=>Ol(t,l))}return[]}function yI(n,e){return n.flatMap(t=>{if(Q1(t)){const i=Ts(t.path);if(i.length>0){const s=[t];let o=_t(i);for(;o.length>0&&!ls(e,o);)s.unshift({op:"add",path:Oe(o),value:{}}),o=_t(o);return s}}return t})}function _I(n,e,t){const i=t!=null&&t.activeItem?my(t.activeItem):void 0,s=e.findIndex(a=>yt(i,my(a))),o=s!==-1?s:(t==null?void 0:t.activeIndex)!==void 0&&(t==null?void 0:t.activeIndex)<e.length?t==null?void 0:t.activeIndex:e.length>0?0:-1,r=e.map((a,c)=>({...a,active:c===o})),l=r[o];return{items:r,itemsMap:lg(r,a=>Oe(a.path)),activeItem:l,activeIndex:o}}function hy(n){const e=n.activeIndex<n.items.length-1?n.activeIndex+1:n.items.length>0?0:-1,t=n.items[e],i=n.items.map((s,o)=>({...s,active:o===e}));return{...n,items:i,itemsMap:lg(i,s=>Oe(s.path)),activeItem:t,activeIndex:e}}function wI(n){const e=n.activeIndex>0?n.activeIndex-1:n.items.length-1,t=n.items[e],i=n.items.map((s,o)=>({...s,active:o===e}));return{...n,items:i,itemsMap:lg(i,s=>Oe(s.path)),activeItem:t,activeIndex:e}}function j4(n,e,t={}){const i=n.toLowerCase(),s=(t==null?void 0:t.maxResults)??1/0,o=t==null?void 0:t.columns,r=[],l=[];function a(f){r.length>=s||r.push(f)}function c(f,u){if(Jt(u)){const h=l.length;l.push("0");for(let d=0;d<u.length;d++)if(l[h]=String(d),c(f,u[d]),r.length>=s)return;l.pop()}else if(gn(u)){const h=Object.keys(u),d=l.length;l.push("");for(const g of h)if(l[d]=g,dy(g,f,l,xs.key,a),c(f,u[g]),r.length>=s)return;l.pop()}else dy(String(u),f,l,xs.value,a)}if(n==="")return[];if(o){if(!Array.isArray(e))throw new Error("json must be an Array when option columns is defined");for(let f=0;f<e.length;f++){l[0]=String(f);const u=e[f];for(let h=0;h<o.length;h++){const d=o[h];if(d.length===1)l[1]=d[0];else for(let m=0;m<d.length;m++)l[m+1]=d[m];for(;l.length>d.length+1;)l.pop();const g=Be(u,d);c(i,g)}if(r.length>=s)break}return r}else return c(i,e),r}function dy(n,e,t,i,s){const o=n.toLowerCase();let r=0,l=-1,a=-1;do a=o.indexOf(e,l),a!==-1&&(l=a+e.length,s({path:t.slice(0),field:i,fieldIndex:r,start:a,end:l}),r++);while(a!==-1)}function Cp(n,e,t,i){return n.substring(0,t)+e+n.substring(i)}function gy(n,e,t){let i=n;return d7(t,s=>{i=Cp(i,e,s.start,s.end)}),i}function vI(n,e,t,i,s){const{field:o,path:r,start:l,end:a}=i;if(o===xs.key){const c=_t(r),f=Be(n,c),u=mt(r),h=Object.keys(f),d=Cp(u,t,l,a),g=Gf(c,h,u,d);return{newSelection:Va(n,g),operations:g}}else if(o===xs.value){const c=Be(n,r);if(c===void 0)throw new Error(`Cannot replace: path not found ${Oe(r)}`);const f=typeof c=="string"?c:String(c),u=Oe(r),h=Vo(c,e.enforceStringMap,u,s),d=Cp(f,t,l,a),g=[{op:"replace",path:Oe(r),value:h?d:tc(d,s)}];return{newSelection:Va(n,g),operations:g}}else throw new Error(`Cannot replace: unknown type of search result field ${o}`)}function kI(n,e,t,i,s){const o=j4(t,n,{maxResults:1/0}),r=[];for(let c=0;c<o.length;c++){const f=o[c-1],u=o[c];c===0||u.field!==f.field||!yt(u.path,f.path)?r.push({path:u.path,field:u.field,items:[u]}):mt(r).items.push(u)}r.sort((c,f)=>c.field!==f.field?c.field===xs.key?1:-1:f.path.length-c.path.length);let l=[],a=null;return r.forEach(c=>{const{field:f,path:u,items:h}=c;if(f===xs.key){const d=_t(u),g=Be(n,d),m=mt(u),p=Object.keys(g),b=gy(m,i,h),y=Gf(d,p,m,b);l=l.concat(y),a=Va(n,y)}else if(f===xs.value){const d=Be(n,u);if(d===void 0)throw new Error(`Cannot replace: path not found ${Oe(u)}`);const g=typeof d=="string"?d:String(d),m=Oe(u),p=Vo(d,e.enforceStringMap,m,s),b=gy(g,i,h),y=[{op:"replace",path:Oe(u),value:p?b:tc(b,s)}];l=l.concat(y),a=Va(n,y)}else throw new Error(`Cannot replace: unknown type of search result field ${f}`)}),{operations:l,newSelection:a}}function SI(n,e){const t=[];let i=0;for(const o of e){const r=n.slice(i,o.start);r!==""&&t.push({type:"normal",text:r,active:!1});const l=n.slice(o.start,o.end);t.push({type:"highlight",text:l,active:o.active}),i=o.end}const s=mt(e);return s&&s.end<n.length&&t.push({type:"normal",text:n.slice(s.end),active:!1}),t}function my(n){return n.path.concat(n.field,String(n.fieldIndex))}function CI(n,e){var i;const t=(i=n==null?void 0:n[e])==null?void 0:i.filter(s=>s.field===xs.key);if(!(!t||t.length===0))return t}function Mp(n,e){var i;const t=(i=n==null?void 0:n[e])==null?void 0:i.filter(s=>s.field===xs.value);if(!(!t||t.length===0))return t}function py(n,e,t){const i=n.slice();return i[3]=e[t],i}function MI(n){let e,t=xl(n[3].text)+"",i;return{c(){e=R("span"),i=Se(t),w(e,"class","jse-highlight svelte-1n1l5ny"),te(e,"jse-active",n[3].active)},m(s,o){j(s,e,o),A(e,i)},p(s,o){o&1&&t!==(t=xl(s[3].text)+"")&&Xe(i,t),o&1&&te(e,"jse-active",s[3].active)},d(s){s&&B(e)}}}function xI(n){let e=n[3].text+"",t;return{c(){t=Se(e)},m(i,s){j(i,t,s)},p(i,s){s&1&&e!==(e=i[3].text+"")&&Xe(t,e)},d(i){i&&B(t)}}}function by(n){let e;function t(o,r){return o[3].type==="normal"?xI:MI}let i=t(n),s=i(n);return{c(){s.c(),e=bt()},m(o,r){s.m(o,r),j(o,e,r)},p(o,r){i===(i=t(o))&&s?s.p(o,r):(s.d(1),s=i(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){o&&B(e),s.d(o)}}}function AI(n){let e,t=at(n[0]),i=[];for(let s=0;s<t.length;s+=1)i[s]=by(py(n,t,s));return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=bt()},m(s,o){for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(s,o);j(s,e,o)},p(s,[o]){if(o&1){t=at(s[0]);let r;for(r=0;r<t.length;r+=1){const l=py(s,t,r);i[r]?i[r].p(l,o):(i[r]=by(l),i[r].c(),i[r].m(e.parentNode,e))}for(;r<i.length;r+=1)i[r].d(1);i.length=t.length}},i:ge,o:ge,d(s){s&&B(e),xn(i,s)}}}function OI(n,e,t){let i,{text:s}=e,{searchResultItems:o}=e;return n.$$set=r=>{"text"in r&&t(1,s=r.text),"searchResultItems"in r&&t(2,o=r.searchResultItems)},n.$$.update=()=>{n.$$.dirty&6&&t(0,i=SI(String(s),o))},[i,s,o]}class F4 extends ze{constructor(e){super(),Fe(this,e,OI,AI,Qt,{text:1,searchResultItems:2})}}function PI(n){let e=xl(n[1].escapeValue(n[0]))+"",t;return{c(){t=Se(e)},m(i,s){j(i,t,s)},p(i,s){s&3&&e!==(e=xl(i[1].escapeValue(i[0]))+"")&&Xe(t,e)},i:ge,o:ge,d(i){i&&B(t)}}}function TI(n){let e,t;return e=new F4({props:{text:n[1].escapeValue(n[0]),searchResultItems:n[3]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s&3&&(o.text=i[1].escapeValue(i[0])),s&8&&(o.searchResultItems=i[3]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function EI(n){let e,t,i,s,o,r,l,a;const c=[TI,PI],f=[];function u(h,d){return h[3]?0:1}return t=u(n),i=f[t]=c[t](n),{c(){e=R("div"),i.c(),w(e,"role","button"),w(e,"tabindex","-1"),w(e,"data-type","selectable-value"),w(e,"class",s=pn(kp(n[0],n[2]))+" svelte-1v88515"),w(e,"title",o=n[4]?"Ctrl+Click or Ctrl+Enter to open url in new window":null)},m(h,d){j(h,e,d),f[t].m(e,null),r=!0,l||(a=[he(e,"click",n[5]),he(e,"dblclick",n[6])],l=!0)},p(h,[d]){let g=t;t=u(h),t===g?f[t].p(h,d):(me(),M(f[g],1,1,()=>{f[g]=null}),pe(),i=f[t],i?i.p(h,d):(i=f[t]=c[t](h),i.c()),k(i,1),i.m(e,null)),(!r||d&5&&s!==(s=pn(kp(h[0],h[2]))+" svelte-1v88515"))&&w(e,"class",s),(!r||d&16&&o!==(o=h[4]?"Ctrl+Click or Ctrl+Enter to open url in new window":null))&&w(e,"title",o)},i(h){r||(k(i),r=!0)},o(h){M(i),r=!1},d(h){h&&B(e),f[t].d(),l=!1,Et(a)}}}function RI(n,e,t){let i,{path:s}=e,{value:o}=e,{readOnly:r}=e,{normalization:l}=e,{parser:a}=e,{onSelect:c}=e,{searchResultItems:f}=e;function u(d){typeof o=="string"&&i&&_0(d)&&(d.preventDefault(),d.stopPropagation(),window.open(o,"_blank"))}function h(d){r||(d.preventDefault(),c(ut(s,!0)))}return n.$$set=d=>{"path"in d&&t(7,s=d.path),"value"in d&&t(0,o=d.value),"readOnly"in d&&t(8,r=d.readOnly),"normalization"in d&&t(1,l=d.normalization),"parser"in d&&t(2,a=d.parser),"onSelect"in d&&t(9,c=d.onSelect),"searchResultItems"in d&&t(3,f=d.searchResultItems)},n.$$.update=()=>{n.$$.dirty&1&&t(4,i=Xd(o))},[o,l,a,f,i,u,h,s,r,c]}class DI extends ze{constructor(e){super(),Fe(this,e,RI,EI,ft,{path:7,value:0,readOnly:8,normalization:1,parser:2,onSelect:9,searchResultItems:3})}}function LI(n){let e,t;return{c(){e=R("div"),t=Se(n[0]),w(e,"class","jse-tooltip svelte-1sftg37")},m(i,s){j(i,e,s),A(e,t)},p(i,[s]){s&1&&Xe(t,i[0])},i:ge,o:ge,d(i){i&&B(e)}}}function II(n,e,t){let{text:i}=e;return n.$$set=s=>{"text"in s&&t(0,i=s.text)},[i]}let NI=class extends ze{constructor(e){super(),Fe(this,e,II,LI,Qt,{text:0})}};function C0(n,{text:e,openAbsolutePopup:t,closeAbsolutePopup:i}){let s;function o(){s=t(NI,{text:e},{position:"top",width:10*e.length,offsetTop:3,anchor:n,closeOnOuterClick:!0})}function r(){i(s)}return n.addEventListener("mouseenter",o),n.addEventListener("mouseleave",r),{destroy(){n.removeEventListener("mouseenter",o),n.removeEventListener("mouseleave",r)}}}function BI(n){let e,t,i,s,o,r;return t=new vt({props:{data:ML}}),{c(){e=R("div"),se(t.$$.fragment),w(e,"class","jse-timestamp svelte-1sqrs1u")},m(l,a){j(l,e,a),ne(t,e,null),s=!0,o||(r=En(i=C0.call(null,e,{text:n[0],...n[1]})),o=!0)},p(l,[a]){i&&Kn(i.update)&&a&1&&i.update.call(null,{text:l[0],...l[1]})},i(l){s||(k(t.$$.fragment,l),s=!0)},o(l){M(t.$$.fragment,l),s=!1},d(l){l&&B(e),ie(t),o=!1,r()}}}function jI(n,e,t){let i;const s=jn("absolute-popup");let{value:o}=e;return n.$$set=r=>{"value"in r&&t(2,o=r.value)},n.$$.update=()=>{n.$$.dirty&4&&t(0,i=`Time: ${new Date(o).toString()}`)},[i,s,o]}class FI extends ze{constructor(e){super(),Fe(this,e,jI,BI,ft,{value:2})}}function zI({path:n,value:e,readOnly:t,enforceString:i,searchResultItems:s,isEditing:o,parser:r,normalization:l,onPatch:a,onPasteJson:c,onSelect:f,onFind:u,findNextInside:h,focus:d}){const g=[];return!o&&eP(e)&&g.push({component:FL,props:{path:n,value:e,readOnly:t,onPatch:a,focus:d}}),!o&&tP(e)&&g.push({component:UL,props:{path:n,value:e,readOnly:t,onPatch:a,focus:d}}),o&&g.push({component:dI,props:{path:n,value:e,enforceString:i,parser:r,normalization:l,onPatch:a,onPasteJson:c,onSelect:f,onFind:u,findNextInside:h,focus:d}}),o||g.push({component:DI,props:{path:n,value:e,readOnly:t,parser:r,normalization:l,searchResultItems:s,onSelect:f}}),!o&&rp(e)&&g.push({component:FI,props:{value:e}}),g}const xp={prefix:"fas",iconName:"trash-can",icon:[448,512,[61460,"trash-alt"],"f2ed","M135.2 17.7C140.6 6.8 151.7 0 163.8 0L284.2 0c12.1 0 23.2 6.8 28.6 17.7L320 32l96 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 96C14.3 96 0 81.7 0 64S14.3 32 32 32l96 0 7.2-14.3zM32 128l384 0 0 320c0 35.3-28.7 64-64 64L96 512c-35.3 0-64-28.7-64-64l0-320zm96 64c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16z"]},yy={prefix:"fas",iconName:"down-left-and-up-right-to-center",icon:[512,512,["compress-alt"],"f422","M439 7c9.4-9.4 24.6-9.4 33.9 0l32 32c9.4 9.4 9.4 24.6 0 33.9l-87 87 39 39c6.9 6.9 8.9 17.2 5.2 26.2s-12.5 14.8-22.2 14.8l-144 0c-13.3 0-24-10.7-24-24l0-144c0-9.7 5.8-18.5 14.8-22.2s19.3-1.7 26.2 5.2l39 39L439 7zM72 272l144 0c13.3 0 24 10.7 24 24l0 144c0 9.7-5.8 18.5-14.8 22.2s-19.3 1.7-26.2-5.2l-39-39L73 505c-9.4 9.4-24.6 9.4-33.9 0L7 473c-9.4-9.4-9.4-24.6 0-33.9l87-87L55 313c-6.9-6.9-8.9-17.2-5.2-26.2s12.5-14.8 22.2-14.8z"]},fr={prefix:"fas",iconName:"caret-right",icon:[256,512,[],"f0da","M246.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-9.2-9.2-22.9-11.9-34.9-6.9s-19.8 16.6-19.8 29.6l0 256c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l128-128z"]},z4={prefix:"fas",iconName:"paste",icon:[512,512,["file-clipboard"],"f0ea","M160 0c-23.7 0-44.4 12.9-55.4 32L48 32C21.5 32 0 53.5 0 80L0 400c0 26.5 21.5 48 48 48l144 0 0-272c0-44.2 35.8-80 80-80l48 0 0-16c0-26.5-21.5-48-48-48l-56.6 0C204.4 12.9 183.7 0 160 0zM272 128c-26.5 0-48 21.5-48 48l0 272 0 16c0 26.5 21.5 48 48 48l192 0c26.5 0 48-21.5 48-48l0-220.1c0-12.7-5.1-24.9-14.1-33.9l-67.9-67.9c-9-9-21.2-14.1-33.9-14.1L320 128l-48 0zM160 40a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},VI={prefix:"fas",iconName:"circle-notch",icon:[512,512,[],"f1ce","M222.7 32.1c5 16.9-4.6 34.8-21.5 39.8C121.8 95.6 64 169.1 64 256c0 106 86 192 192 192s192-86 192-192c0-86.9-57.8-160.4-137.1-184.1c-16.9-5-26.6-22.9-21.5-39.8s22.9-26.6 39.8-21.5C434.9 42.1 512 140 512 256c0 141.4-114.6 256-256 256S0 397.4 0 256C0 140 77.1 42.1 182.9 10.6c16.9-5 34.8 4.6 39.8 21.5z"]},HI={prefix:"fas",iconName:"scissors",icon:[512,512,[9984,9986,9988,"cut"],"f0c4","M256 192l-39.5-39.5c4.9-12.6 7.5-26.2 7.5-40.5C224 50.1 173.9 0 112 0S0 50.1 0 112s50.1 112 112 112c14.3 0 27.9-2.7 40.5-7.5L192 256l-39.5 39.5c-12.6-4.9-26.2-7.5-40.5-7.5C50.1 288 0 338.1 0 400s50.1 112 112 112s112-50.1 112-112c0-14.3-2.7-27.9-7.5-40.5L499.2 76.8c7.1-7.1 7.1-18.5 0-25.6c-28.3-28.3-74.1-28.3-102.4 0L256 192zm22.6 150.6L396.8 460.8c28.3 28.3 74.1 28.3 102.4 0c7.1-7.1 7.1-18.5 0-25.6L342.6 278.6l-64 64zM64 112a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm48 240a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"]},Ca=HI,WI={prefix:"fas",iconName:"square-caret-down",icon:[448,512,["caret-square-down"],"f150","M384 480c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0zM224 352c-6.7 0-13-2.8-17.6-7.7l-104-112c-6.5-7-8.2-17.2-4.4-25.9s12.5-14.4 22-14.4l208 0c9.5 0 18.2 5.7 22 14.4s2.1 18.9-4.4 25.9l-104 112c-4.5 4.9-10.9 7.7-17.6 7.7z"]},qI=WI,UI={prefix:"fas",iconName:"caret-left",icon:[256,512,[],"f0d9","M9.4 278.6c-12.5-12.5-12.5-32.8 0-45.3l128-128c9.2-9.2 22.9-11.9 34.9-6.9s19.8 16.6 19.8 29.6l0 256c0 12.9-7.8 24.6-19.8 29.6s-25.7 2.2-34.9-6.9l-128-128z"]},JI={prefix:"fas",iconName:"square-check",icon:[448,512,[9745,9989,61510,"check-square"],"f14a","M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zM337 209L209 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L303 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"]},V4=JI,KI={prefix:"fas",iconName:"pen-to-square",icon:[512,512,["edit"],"f044","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160L0 416c0 53 43 96 96 96l256 0c53 0 96-43 96-96l0-96c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7-14.3 32-32 32L96 448c-17.7 0-32-14.3-32-32l0-256c0-17.7 14.3-32 32-32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L96 64z"]},_y=KI,YI={prefix:"fas",iconName:"chevron-up",icon:[512,512,[],"f077","M233.4 105.4c12.5-12.5 32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L256 173.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l192-192z"]},H4={prefix:"fas",iconName:"angle-right",icon:[320,512,[8250],"f105","M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"]},XI={prefix:"fas",iconName:"square-caret-up",icon:[448,512,["caret-square-up"],"f151","M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zM224 160c6.7 0 13 2.8 17.6 7.7l104 112c6.5 7 8.2 17.2 4.4 25.9s-12.5 14.4-22 14.4l-208 0c-9.5 0-18.2-5.7-22-14.4s-2.1-18.9 4.4-25.9l104-112c4.5-4.9 10.9-7.7 17.6-7.7z"]},GI=XI,wy={prefix:"fas",iconName:"caret-up",icon:[320,512,[],"f0d8","M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8l256 0c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"]},W4={prefix:"fas",iconName:"square",icon:[448,512,[9632,9723,9724,61590],"f0c8","M0 96C0 60.7 28.7 32 64 32H384c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96z"]},ug={prefix:"fas",iconName:"filter",icon:[512,512,[],"f0b0","M3.9 54.9C10.5 40.9 24.5 32 40 32l432 0c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9 320 448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6l0-79.1L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z"]},Or={prefix:"fas",iconName:"code",icon:[640,512,[],"f121","M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3L562.7 256l-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z"]},hg={prefix:"fas",iconName:"wrench",icon:[512,512,[128295],"f0ad","M352 320c88.4 0 160-71.6 160-160c0-15.3-2.2-30.1-6.2-44.2c-3.1-10.8-16.4-13.2-24.3-5.3l-76.8 76.8c-3 3-7.1 4.7-11.3 4.7L336 192c-8.8 0-16-7.2-16-16l0-57.4c0-4.2 1.7-8.3 4.7-11.3l76.8-76.8c7.9-7.9 5.4-21.2-5.3-24.3C382.1 2.2 367.3 0 352 0C263.6 0 192 71.6 192 160c0 19.1 3.4 37.5 9.5 54.5L19.9 396.1C7.2 408.8 0 426.1 0 444.1C0 481.6 30.4 512 67.9 512c18 0 35.3-7.2 48-19.9L297.5 310.5c17 6.2 35.4 9.5 54.5 9.5zM80 408a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},QI={prefix:"fas",iconName:"eye",icon:[576,512,[128065],"f06e","M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"]},Ma={prefix:"fas",iconName:"pen",icon:[512,512,[128394],"f304","M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z"]},ZI={prefix:"fas",iconName:"arrow-rotate-right",icon:[512,512,[8635,"arrow-right-rotate","arrow-rotate-forward","redo"],"f01e","M386.3 160L336 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l128 0c17.7 0 32-14.3 32-32l0-128c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 51.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0s-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3s163.8-62.5 226.3 0L386.3 160z"]},M0=ZI,$I={prefix:"fas",iconName:"arrow-rotate-left",icon:[512,512,[8634,"arrow-left-rotate","arrow-rotate-back","arrow-rotate-backward","undo"],"f0e2","M125.7 160l50.3 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L48 224c-17.7 0-32-14.3-32-32L16 64c0-17.7 14.3-32 32-32s32 14.3 32 32l0 51.2L97.6 97.6c87.5-87.5 229.3-87.5 316.8 0s87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3s-163.8-62.5-226.3 0L125.7 160z"]},x0=$I,e9={prefix:"fas",iconName:"crop-simple",icon:[512,512,["crop-alt"],"f565","M128 32c0-17.7-14.3-32-32-32S64 14.3 64 32l0 32L32 64C14.3 64 0 78.3 0 96s14.3 32 32 32l32 0 0 256c0 35.3 28.7 64 64 64l224 0 0-64-224 0 0-352zM384 480c0 17.7 14.3 32 32 32s32-14.3 32-32l0-32 32 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-32 0 0-256c0-35.3-28.7-64-64-64L160 64l0 64 224 0 0 352z"]},t9=e9,n9={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"]},i9=n9,ss={prefix:"fas",iconName:"caret-down",icon:[320,512,[],"f0d7","M137.4 374.6c12.5 12.5 32.8 12.5 45.3 0l128-128c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8L32 192c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l128 128z"]},s9={prefix:"fas",iconName:"ellipsis-vertical",icon:[128,512,["ellipsis-v"],"f142","M64 360a56 56 0 1 0 0 112 56 56 0 1 0 0-112zm0-160a56 56 0 1 0 0 112 56 56 0 1 0 0-112zM120 96A56 56 0 1 0 8 96a56 56 0 1 0 112 0z"]},q4=s9,vu={prefix:"fas",iconName:"arrow-right-arrow-left",icon:[448,512,[8644,"exchange"],"f0ec","M438.6 150.6c12.5-12.5 12.5-32.8 0-45.3l-96-96c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.7 96 32 96C14.3 96 0 110.3 0 128s14.3 32 32 32l306.7 0-41.4 41.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l96-96zm-333.3 352c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 416 416 416c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0 41.4-41.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3l96 96z"]},o9={prefix:"fas",iconName:"arrow-down-short-wide",icon:[576,512,["sort-amount-desc","sort-amount-down-alt"],"f884","M151.6 469.6C145.5 476.2 137 480 128 480s-17.5-3.8-23.6-10.4l-88-96c-11.9-13-11.1-33.3 2-45.2s33.3-11.1 45.2 2L96 365.7 96 64c0-17.7 14.3-32 32-32s32 14.3 32 32l0 301.7 32.4-35.4c11.9-13 32.2-13.9 45.2-2s13.9 32.2 2 45.2l-88 96zM320 32l32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-32 0c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 128l96 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-96 0c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 128l160 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-160 0c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 128l224 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-224 0c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},dg=o9,r9={prefix:"fas",iconName:"angle-down",icon:[448,512,[8964],"f107","M201.4 374.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 306.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"]},l9={prefix:"fas",iconName:"arrow-down",icon:[384,512,[8595],"f063","M169.4 470.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 370.8 224 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 306.7L54.6 265.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"]},a9={prefix:"fas",iconName:"magnifying-glass",icon:[512,512,[128269,"search"],"f002","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"]},gg=a9,c9={prefix:"fas",iconName:"chevron-down",icon:[512,512,[],"f078","M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"]},wr={prefix:"fas",iconName:"copy",icon:[448,512,[],"f0c5","M208 0L332.1 0c12.7 0 24.9 5.1 33.9 14.1l67.9 67.9c9 9 14.1 21.2 14.1 33.9L448 336c0 26.5-21.5 48-48 48l-192 0c-26.5 0-48-21.5-48-48l0-288c0-26.5 21.5-48 48-48zM48 128l80 0 0 64-64 0 0 256 192 0 0-32 64 0 0 48c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 176c0-26.5 21.5-48 48-48z"]},ma={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"]},U4={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},vy=U4,pf=U4,f9={prefix:"fas",iconName:"rotate",icon:[512,512,[128260,"sync-alt"],"f2f1","M142.9 142.9c-17.5 17.5-30.1 38-37.8 59.8c-5.9 16.7-24.2 25.4-40.8 19.5s-25.4-24.2-19.5-40.8C55.6 150.7 73.2 122 97.6 97.6c87.2-87.2 228.3-87.5 315.8-1L455 55c6.9-6.9 17.2-8.9 26.2-5.2s14.8 12.5 14.8 22.2l0 128c0 13.3-10.7 24-24 24l-8.4 0c0 0 0 0 0 0L344 224c-9.7 0-18.5-5.8-22.2-14.8s-1.7-19.3 5.2-26.2l41.1-41.1c-62.6-61.5-163.1-61.2-225.3 1zM16 312c0-13.3 10.7-24 24-24l7.6 0 .7 0L168 288c9.7 0 18.5 5.8 22.2 14.8s1.7 19.3-5.2 26.2l-41.1 41.1c62.6 61.5 163.1 61.2 225.3-1c17.5-17.5 30.1-38 37.8-59.8c5.9-16.7 24.2-25.4 40.8-19.5s25.4 24.2 19.5 40.8c-10.8 30.6-28.4 59.3-52.9 83.8c-87.2 87.2-228.3 87.5-315.8 1L57 457c-6.9 6.9-17.2 8.9-26.2 5.2S16 449.7 16 440l0-119.6 0-.7 0-7.6z"]},ky={prefix:"fas",iconName:"up-right-and-down-left-from-center",icon:[512,512,["expand-alt"],"f424","M344 0L488 0c13.3 0 24 10.7 24 24l0 144c0 9.7-5.8 18.5-14.8 22.2s-19.3 1.7-26.2-5.2l-39-39-87 87c-9.4 9.4-24.6 9.4-33.9 0l-32-32c-9.4-9.4-9.4-24.6 0-33.9l87-87L327 41c-6.9-6.9-8.9-17.2-5.2-26.2S334.3 0 344 0zM168 512L24 512c-13.3 0-24-10.7-24-24L0 344c0-9.7 5.8-18.5 14.8-22.2s19.3-1.7 26.2 5.2l39 39 87-87c9.4-9.4 24.6-9.4 33.9 0l32 32c9.4 9.4 9.4 24.6 0 33.9l-87 87 39 39c6.9 6.9 8.9 17.2 5.2 26.2s-12.5 14.8-22.2 14.8z"]},J4={prefix:"fas",iconName:"clone",icon:[512,512,[],"f24d","M288 448L64 448l0-224 64 0 0-64-64 0c-35.3 0-64 28.7-64 64L0 448c0 35.3 28.7 64 64 64l224 0c35.3 0 64-28.7 64-64l0-64-64 0 0 64zm-64-96l224 0c35.3 0 64-28.7 64-64l0-224c0-35.3-28.7-64-64-64L224 0c-35.3 0-64 28.7-64 64l0 224c0 35.3 28.7 64 64 64z"]},bf={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]},u9={prefix:"fas",iconName:"triangle-exclamation",icon:[512,512,[9888,"exclamation-triangle","warning"],"f071","M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},Vl=u9,wc={},ku={showWizard:!0,showOriginal:!0},ed=Math.min,ml=Math.max,td=Math.round,Su=Math.floor,Pr=n=>({x:n,y:n}),h9={left:"right",right:"left",bottom:"top",top:"bottom"},d9={start:"end",end:"start"};function Sy(n,e,t){return ml(n,ed(e,t))}function mg(n,e){return typeof n=="function"?n(e):n}function Pl(n){return n.split("-")[0]}function pg(n){return n.split("-")[1]}function K4(n){return n==="x"?"y":"x"}function Y4(n){return n==="y"?"height":"width"}function Ha(n){return["top","bottom"].includes(Pl(n))?"y":"x"}function X4(n){return K4(Ha(n))}function g9(n,e,t){t===void 0&&(t=!1);const i=pg(n),s=X4(n),o=Y4(s);let r=s==="x"?i===(t?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(r=nd(r)),[r,nd(r)]}function m9(n){const e=nd(n);return[Ap(n),e,Ap(e)]}function Ap(n){return n.replace(/start|end/g,e=>d9[e])}function p9(n,e,t){const i=["left","right"],s=["right","left"],o=["top","bottom"],r=["bottom","top"];switch(n){case"top":case"bottom":return t?e?s:i:e?i:s;case"left":case"right":return e?o:r;default:return[]}}function b9(n,e,t,i){const s=pg(n);let o=p9(Pl(n),t==="start",i);return s&&(o=o.map(r=>r+"-"+s),e&&(o=o.concat(o.map(Ap)))),o}function nd(n){return n.replace(/left|right|bottom|top/g,e=>h9[e])}function y9(n){return{top:0,right:0,bottom:0,left:0,...n}}function _9(n){return typeof n!="number"?y9(n):{top:n,right:n,bottom:n,left:n}}function id(n){const{x:e,y:t,width:i,height:s}=n;return{width:i,height:s,top:t,left:e,right:e+i,bottom:t+s,x:e,y:t}}function Cy(n,e,t){let{reference:i,floating:s}=n;const o=Ha(e),r=X4(e),l=Y4(r),a=Pl(e),c=o==="y",f=i.x+i.width/2-s.width/2,u=i.y+i.height/2-s.height/2,h=i[l]/2-s[l]/2;let d;switch(a){case"top":d={x:f,y:i.y-s.height};break;case"bottom":d={x:f,y:i.y+i.height};break;case"right":d={x:i.x+i.width,y:u};break;case"left":d={x:i.x-s.width,y:u};break;default:d={x:i.x,y:i.y}}switch(pg(e)){case"start":d[r]-=h*(t&&c?-1:1);break;case"end":d[r]+=h*(t&&c?-1:1);break}return d}const w9=async(n,e,t)=>{const{placement:i="bottom",strategy:s="absolute",middleware:o=[],platform:r}=t,l=o.filter(Boolean),a=await(r.isRTL==null?void 0:r.isRTL(e));let c=await r.getElementRects({reference:n,floating:e,strategy:s}),{x:f,y:u}=Cy(c,i,a),h=i,d={},g=0;for(let m=0;m<l.length;m++){const{name:p,fn:b}=l[m],{x:y,y:v,data:C,reset:_}=await b({x:f,y:u,initialPlacement:i,placement:h,strategy:s,middlewareData:d,rects:c,platform:r,elements:{reference:n,floating:e}});f=y??f,u=v??u,d={...d,[p]:{...d[p],...C}},_&&g<=50&&(g++,typeof _=="object"&&(_.placement&&(h=_.placement),_.rects&&(c=_.rects===!0?await r.getElementRects({reference:n,floating:e,strategy:s}):_.rects),{x:f,y:u}=Cy(c,h,a)),m=-1)}return{x:f,y:u,placement:h,strategy:s,middlewareData:d}};async function G4(n,e){var t;e===void 0&&(e={});const{x:i,y:s,platform:o,rects:r,elements:l,strategy:a}=n,{boundary:c="clippingAncestors",rootBoundary:f="viewport",elementContext:u="floating",altBoundary:h=!1,padding:d=0}=mg(e,n),g=_9(d),p=l[h?u==="floating"?"reference":"floating":u],b=id(await o.getClippingRect({element:(t=await(o.isElement==null?void 0:o.isElement(p)))==null||t?p:p.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:c,rootBoundary:f,strategy:a})),y=u==="floating"?{x:i,y:s,width:r.floating.width,height:r.floating.height}:r.reference,v=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),C=await(o.isElement==null?void 0:o.isElement(v))?await(o.getScale==null?void 0:o.getScale(v))||{x:1,y:1}:{x:1,y:1},_=id(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:v,strategy:a}):y);return{top:(b.top-_.top+g.top)/C.y,bottom:(_.bottom-b.bottom+g.bottom)/C.y,left:(b.left-_.left+g.left)/C.x,right:(_.right-b.right+g.right)/C.x}}const v9=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,i;const{placement:s,middlewareData:o,rects:r,initialPlacement:l,platform:a,elements:c}=e,{mainAxis:f=!0,crossAxis:u=!0,fallbackPlacements:h,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:m=!0,...p}=mg(n,e);if((t=o.arrow)!=null&&t.alignmentOffset)return{};const b=Pl(s),y=Ha(l),v=Pl(l)===l,C=await(a.isRTL==null?void 0:a.isRTL(c.floating)),_=h||(v||!m?[nd(l)]:m9(l)),S=g!=="none";!h&&S&&_.push(...b9(l,m,g,C));const x=[l,..._],D=await G4(e,p),P=[];let E=((i=o.flip)==null?void 0:i.overflows)||[];if(f&&P.push(D[b]),u){const F=g9(s,r,C);P.push(D[F[0]],D[F[1]])}if(E=[...E,{placement:s,overflows:P}],!P.every(F=>F<=0)){var O,I;const F=(((O=o.flip)==null?void 0:O.index)||0)+1,z=x[F];if(z)return{data:{index:F,overflows:E},reset:{placement:z}};let q=(I=E.filter(Q=>Q.overflows[0]<=0).sort((Q,X)=>Q.overflows[1]-X.overflows[1])[0])==null?void 0:I.placement;if(!q)switch(d){case"bestFit":{var N;const Q=(N=E.filter(X=>{if(S){const T=Ha(X.placement);return T===y||T==="y"}return!0}).map(X=>[X.placement,X.overflows.filter(T=>T>0).reduce((T,U)=>T+U,0)]).sort((X,T)=>X[1]-T[1])[0])==null?void 0:N[0];Q&&(q=Q);break}case"initialPlacement":q=l;break}if(s!==q)return{reset:{placement:q}}}return{}}}};async function k9(n,e){const{placement:t,platform:i,elements:s}=n,o=await(i.isRTL==null?void 0:i.isRTL(s.floating)),r=Pl(t),l=pg(t),a=Ha(t)==="y",c=["left","top"].includes(r)?-1:1,f=o&&a?-1:1,u=mg(e,n);let{mainAxis:h,crossAxis:d,alignmentAxis:g}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...u};return l&&typeof g=="number"&&(d=l==="end"?g*-1:g),a?{x:d*f,y:h*c}:{x:h*c,y:d*f}}const S9=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,i;const{x:s,y:o,placement:r,middlewareData:l}=e,a=await k9(e,n);return r===((t=l.offset)==null?void 0:t.placement)&&(i=l.arrow)!=null&&i.alignmentOffset?{}:{x:s+a.x,y:o+a.y,data:{...a,placement:r}}}}},C9=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:i,placement:s}=e,{mainAxis:o=!0,crossAxis:r=!1,limiter:l={fn:p=>{let{x:b,y}=p;return{x:b,y}}},...a}=mg(n,e),c={x:t,y:i},f=await G4(e,a),u=Ha(Pl(s)),h=K4(u);let d=c[h],g=c[u];if(o){const p=h==="y"?"top":"left",b=h==="y"?"bottom":"right",y=d+f[p],v=d-f[b];d=Sy(y,d,v)}if(r){const p=u==="y"?"top":"left",b=u==="y"?"bottom":"right",y=g+f[p],v=g-f[b];g=Sy(y,g,v)}const m=l.fn({...e,[h]:d,[u]:g});return{...m,data:{x:m.x-t,y:m.y-i}}}}};function lc(n){return Q4(n)?(n.nodeName||"").toLowerCase():"#document"}function Gi(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Go(n){var e;return(e=(Q4(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function Q4(n){return n instanceof Node||n instanceof Gi(n).Node}function Es(n){return n instanceof Element||n instanceof Gi(n).Element}function go(n){return n instanceof HTMLElement||n instanceof Gi(n).HTMLElement}function My(n){return typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Gi(n).ShadowRoot}function Qf(n){const{overflow:e,overflowX:t,overflowY:i,display:s}=Rs(n);return/auto|scroll|overlay|hidden|clip/.test(e+i+t)&&!["inline","contents"].includes(s)}function M9(n){return["table","td","th"].includes(lc(n))}function bg(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function A0(n){const e=O0(),t=Es(n)?Rs(n):n;return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(i=>(t.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(t.contain||"").includes(i))}function x9(n){let e=Tr(n);for(;go(e)&&!Wa(e);){if(A0(e))return e;if(bg(e))return null;e=Tr(e)}return null}function O0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Wa(n){return["html","body","#document"].includes(lc(n))}function Rs(n){return Gi(n).getComputedStyle(n)}function yg(n){return Es(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Tr(n){if(lc(n)==="html")return n;const e=n.assignedSlot||n.parentNode||My(n)&&n.host||Go(n);return My(e)?e.host:e}function Z4(n){const e=Tr(n);return Wa(e)?n.ownerDocument?n.ownerDocument.body:n.body:go(e)&&Qf(e)?e:Z4(e)}function yf(n,e,t){var i;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=Z4(n),o=s===((i=n.ownerDocument)==null?void 0:i.body),r=Gi(s);if(o){const l=Op(r);return e.concat(r,r.visualViewport||[],Qf(s)?s:[],l&&t?yf(l):[])}return e.concat(s,yf(s,[],t))}function Op(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function $4(n){const e=Rs(n);let t=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const s=go(n),o=s?n.offsetWidth:t,r=s?n.offsetHeight:i,l=td(t)!==o||td(i)!==r;return l&&(t=o,i=r),{width:t,height:i,$:l}}function P0(n){return Es(n)?n:n.contextElement}function xa(n){const e=P0(n);if(!go(e))return Pr(1);const t=e.getBoundingClientRect(),{width:i,height:s,$:o}=$4(e);let r=(o?td(t.width):t.width)/i,l=(o?td(t.height):t.height)/s;return(!r||!Number.isFinite(r))&&(r=1),(!l||!Number.isFinite(l))&&(l=1),{x:r,y:l}}const A9=Pr(0);function eM(n){const e=Gi(n);return!O0()||!e.visualViewport?A9:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function O9(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Gi(n)?!1:e}function Tl(n,e,t,i){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),o=P0(n);let r=Pr(1);e&&(i?Es(i)&&(r=xa(i)):r=xa(n));const l=O9(o,t,i)?eM(o):Pr(0);let a=(s.left+l.x)/r.x,c=(s.top+l.y)/r.y,f=s.width/r.x,u=s.height/r.y;if(o){const h=Gi(o),d=i&&Es(i)?Gi(i):i;let g=h,m=Op(g);for(;m&&i&&d!==g;){const p=xa(m),b=m.getBoundingClientRect(),y=Rs(m),v=b.left+(m.clientLeft+parseFloat(y.paddingLeft))*p.x,C=b.top+(m.clientTop+parseFloat(y.paddingTop))*p.y;a*=p.x,c*=p.y,f*=p.x,u*=p.y,a+=v,c+=C,g=Gi(m),m=Op(g)}}return id({width:f,height:u,x:a,y:c})}function P9(n){let{elements:e,rect:t,offsetParent:i,strategy:s}=n;const o=s==="fixed",r=Go(i),l=e?bg(e.floating):!1;if(i===r||l&&o)return t;let a={scrollLeft:0,scrollTop:0},c=Pr(1);const f=Pr(0),u=go(i);if((u||!u&&!o)&&((lc(i)!=="body"||Qf(r))&&(a=yg(i)),go(i))){const h=Tl(i);c=xa(i),f.x=h.x+i.clientLeft,f.y=h.y+i.clientTop}return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-a.scrollLeft*c.x+f.x,y:t.y*c.y-a.scrollTop*c.y+f.y}}function T9(n){return Array.from(n.getClientRects())}function tM(n){return Tl(Go(n)).left+yg(n).scrollLeft}function E9(n){const e=Go(n),t=yg(n),i=n.ownerDocument.body,s=ml(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),o=ml(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let r=-t.scrollLeft+tM(n);const l=-t.scrollTop;return Rs(i).direction==="rtl"&&(r+=ml(e.clientWidth,i.clientWidth)-s),{width:s,height:o,x:r,y:l}}function R9(n,e){const t=Gi(n),i=Go(n),s=t.visualViewport;let o=i.clientWidth,r=i.clientHeight,l=0,a=0;if(s){o=s.width,r=s.height;const c=O0();(!c||c&&e==="fixed")&&(l=s.offsetLeft,a=s.offsetTop)}return{width:o,height:r,x:l,y:a}}function D9(n,e){const t=Tl(n,!0,e==="fixed"),i=t.top+n.clientTop,s=t.left+n.clientLeft,o=go(n)?xa(n):Pr(1),r=n.clientWidth*o.x,l=n.clientHeight*o.y,a=s*o.x,c=i*o.y;return{width:r,height:l,x:a,y:c}}function xy(n,e,t){let i;if(e==="viewport")i=R9(n,t);else if(e==="document")i=E9(Go(n));else if(Es(e))i=D9(e,t);else{const s=eM(n);i={...e,x:e.x-s.x,y:e.y-s.y}}return id(i)}function nM(n,e){const t=Tr(n);return t===e||!Es(t)||Wa(t)?!1:Rs(t).position==="fixed"||nM(t,e)}function L9(n,e){const t=e.get(n);if(t)return t;let i=yf(n,[],!1).filter(l=>Es(l)&&lc(l)!=="body"),s=null;const o=Rs(n).position==="fixed";let r=o?Tr(n):n;for(;Es(r)&&!Wa(r);){const l=Rs(r),a=A0(r);!a&&l.position==="fixed"&&(s=null),(o?!a&&!s:!a&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Qf(r)&&!a&&nM(n,r))?i=i.filter(f=>f!==r):s=l,r=Tr(r)}return e.set(n,i),i}function I9(n){let{element:e,boundary:t,rootBoundary:i,strategy:s}=n;const r=[...t==="clippingAncestors"?bg(e)?[]:L9(e,this._c):[].concat(t),i],l=r[0],a=r.reduce((c,f)=>{const u=xy(e,f,s);return c.top=ml(u.top,c.top),c.right=ed(u.right,c.right),c.bottom=ed(u.bottom,c.bottom),c.left=ml(u.left,c.left),c},xy(e,l,s));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function N9(n){const{width:e,height:t}=$4(n);return{width:e,height:t}}function B9(n,e,t){const i=go(e),s=Go(e),o=t==="fixed",r=Tl(n,!0,o,e);let l={scrollLeft:0,scrollTop:0};const a=Pr(0);if(i||!i&&!o)if((lc(e)!=="body"||Qf(s))&&(l=yg(e)),i){const u=Tl(e,!0,o,e);a.x=u.x+e.clientLeft,a.y=u.y+e.clientTop}else s&&(a.x=tM(s));const c=r.left+l.scrollLeft-a.x,f=r.top+l.scrollTop-a.y;return{x:c,y:f,width:r.width,height:r.height}}function lm(n){return Rs(n).position==="static"}function Ay(n,e){return!go(n)||Rs(n).position==="fixed"?null:e?e(n):n.offsetParent}function iM(n,e){const t=Gi(n);if(bg(n))return t;if(!go(n)){let s=Tr(n);for(;s&&!Wa(s);){if(Es(s)&&!lm(s))return s;s=Tr(s)}return t}let i=Ay(n,e);for(;i&&M9(i)&&lm(i);)i=Ay(i,e);return i&&Wa(i)&&lm(i)&&!A0(i)?t:i||x9(n)||t}const j9=async function(n){const e=this.getOffsetParent||iM,t=this.getDimensions,i=await t(n.floating);return{reference:B9(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function F9(n){return Rs(n).direction==="rtl"}const z9={convertOffsetParentRelativeRectToViewportRelativeRect:P9,getDocumentElement:Go,getClippingRect:I9,getOffsetParent:iM,getElementRects:j9,getClientRects:T9,getDimensions:N9,getScale:xa,isElement:Es,isRTL:F9};function V9(n,e){let t=null,i;const s=Go(n);function o(){var l;clearTimeout(i),(l=t)==null||l.disconnect(),t=null}function r(l,a){l===void 0&&(l=!1),a===void 0&&(a=1),o();const{left:c,top:f,width:u,height:h}=n.getBoundingClientRect();if(l||e(),!u||!h)return;const d=Su(f),g=Su(s.clientWidth-(c+u)),m=Su(s.clientHeight-(f+h)),p=Su(c),y={rootMargin:-d+"px "+-g+"px "+-m+"px "+-p+"px",threshold:ml(0,ed(1,a))||1};let v=!0;function C(_){const S=_[0].intersectionRatio;if(S!==a){if(!v)return r();S?r(!1,S):i=setTimeout(()=>{r(!1,1e-7)},1e3)}v=!1}try{t=new IntersectionObserver(C,{...y,root:s.ownerDocument})}catch{t=new IntersectionObserver(C,y)}t.observe(n)}return r(!0),o}function H9(n,e,t,i){i===void 0&&(i={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:r=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:a=!1}=i,c=P0(n),f=s||o?[...c?yf(c):[],...yf(e)]:[];f.forEach(b=>{s&&b.addEventListener("scroll",t,{passive:!0}),o&&b.addEventListener("resize",t)});const u=c&&l?V9(c,t):null;let h=-1,d=null;r&&(d=new ResizeObserver(b=>{let[y]=b;y&&y.target===c&&d&&(d.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var v;(v=d)==null||v.observe(e)})),t()}),c&&!a&&d.observe(c),d.observe(e));let g,m=a?Tl(n):null;a&&p();function p(){const b=Tl(n);m&&(b.x!==m.x||b.y!==m.y||b.width!==m.width||b.height!==m.height)&&t(),m=b,g=requestAnimationFrame(p)}return t(),()=>{var b;f.forEach(y=>{s&&y.removeEventListener("scroll",t),o&&y.removeEventListener("resize",t)}),u==null||u(),(b=d)==null||b.disconnect(),d=null,a&&cancelAnimationFrame(g)}}const W9=S9,q9=C9,U9=v9,J9=(n,e,t)=>{const i=new Map,s={platform:z9,...t},o={...s.platform,_c:i};return w9(n,e,{...s,platform:o})};function K9(n){let e,t;const i={autoUpdate:!0};let s=n;const o=f=>({...i,...n||{},...f||{}}),r=f=>{e&&t&&(s=o(f),J9(e,t,s).then(u=>{Object.assign(t.style,{position:u.strategy,left:`${u.x}px`,top:`${u.y}px`}),s!=null&&s.onComputed&&s.onComputed(u)}))},l=f=>{if("subscribe"in f)return c(f),{};e=f,r()},a=(f,u)=>{let h;t=f,s=o(u),setTimeout(()=>r(u),0),r(u);const d=()=>{h&&(h(),h=void 0)},g=({autoUpdate:m}=s||{})=>{d(),m!==!1&&wn().then(()=>H9(e,t,()=>r(s),m===!0?{}:m))};return h=g(),{update(m){r(m),h=g(m)},destroy(){d()}}},c=f=>{const u=f.subscribe(h=>{e===void 0?(e=h,r()):(Object.assign(e,h),r())});Ci(u)};return[l,a,r]}function Y9({loadOptions:n,filterText:e,items:t,multiple:i,value:s,itemId:o,groupBy:r,filterSelectedItems:l,itemFilter:a,convertStringItemsToObjects:c,filterGroupedItems:f,label:u}){if(t&&n)return t;if(!t)return[];t&&t.length>0&&typeof t[0]!="object"&&(t=c(t));let h=t.filter(d=>{let g=a(d[u],e,d);return g&&i&&(s!=null&&s.length)&&(g=!s.some(m=>l?m[o]===d[o]:!1)),g});return r&&(h=f(h)),h}async function X9({dispatch:n,loadOptions:e,convertStringItemsToObjects:t,filterText:i}){let s=await e(i).catch(o=>{console.warn("svelte-select loadOptions error :>> ",o),n("error",{type:"loadOptions",details:o})});if(s&&!s.cancelled)return s?(s&&s.length>0&&typeof s[0]!="object"&&(s=t(s)),n("loaded",{items:s})):s=[],{filteredItems:s,loading:!1,focused:!0,listOpen:!0}}function G9(n){let e,t;return{c(){e=gi("svg"),t=gi("path"),w(t,"fill","currentColor"),w(t,"d",`M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747
          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0
          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502
          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0
          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z`),w(e,"width","100%"),w(e,"height","100%"),w(e,"viewBox","0 0 20 20"),w(e,"focusable","false"),w(e,"aria-hidden","true"),w(e,"class","svelte-qbd276")},m(i,s){j(i,e,s),A(e,t)},p:ge,i:ge,o:ge,d(i){i&&B(e)}}}class Q9 extends ze{constructor(e){super(),Fe(this,e,null,G9,Qt,{})}}function Z9(n){let e,t;return{c(){e=gi("svg"),t=gi("path"),w(t,"fill","currentColor"),w(t,"d",`M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124
    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z`),w(e,"width","100%"),w(e,"height","100%"),w(e,"viewBox","-2 -2 50 50"),w(e,"focusable","false"),w(e,"aria-hidden","true"),w(e,"role","presentation"),w(e,"class","svelte-whdbu1")},m(i,s){j(i,e,s),A(e,t)},p:ge,i:ge,o:ge,d(i){i&&B(e)}}}class sd extends ze{constructor(e){super(),Fe(this,e,null,Z9,Qt,{})}}function $9(n){let e,t;return{c(){e=gi("svg"),t=gi("circle"),w(t,"class","circle_path svelte-1p3nqvd"),w(t,"cx","50"),w(t,"cy","50"),w(t,"r","20"),w(t,"fill","none"),w(t,"stroke","currentColor"),w(t,"stroke-width","5"),w(t,"stroke-miterlimit","10"),w(e,"class","loading svelte-1p3nqvd"),w(e,"viewBox","25 25 50 50")},m(i,s){j(i,e,s),A(e,t)},p:ge,i:ge,o:ge,d(i){i&&B(e)}}}class eN extends ze{constructor(e){super(),Fe(this,e,null,$9,Qt,{})}}const tN=n=>({value:n[0]&8}),Oy=n=>({value:n[3]}),nN=n=>({value:n[0]&8}),Py=n=>({value:n[3]}),iN=n=>({listOpen:n[0]&64}),Ty=n=>({listOpen:n[6]}),sN=n=>({}),Ey=n=>({}),oN=n=>({}),Ry=n=>({}),rN=n=>({selection:n[0]&8}),Dy=n=>({selection:n[3]});function Ly(n,e,t){const i=n.slice();return i[126]=e[t],i[128]=t,i}const lN=n=>({}),Iy=n=>({}),aN=n=>({selection:n[0]&8}),Ny=n=>({selection:n[126],index:n[128]}),cN=n=>({}),By=n=>({}),fN=n=>({}),jy=n=>({}),uN=n=>({}),Fy=n=>({});function zy(n,e,t){const i=n.slice();return i[126]=e[t],i[128]=t,i}const hN=n=>({item:n[0]&16777216}),Vy=n=>({item:n[126],index:n[128]}),dN=n=>({filteredItems:n[0]&16777216}),Hy=n=>({filteredItems:n[24]}),gN=n=>({}),Wy=n=>({});function qy(n){let e,t,i,s,o,r,l,a,c=n[50]["list-prepend"]&&Uy(n);const f=[bN,pN,mN],u=[];function h(g,m){return g[50].list?0:g[24].length>0?1:g[19]?-1:2}~(i=h(n))&&(s=u[i]=f[i](n));let d=n[50]["list-append"]&&Ky(n);return{c(){e=R("div"),c&&c.c(),t=G(),s&&s.c(),o=G(),d&&d.c(),w(e,"class","svelte-select-list svelte-82qwg8"),w(e,"role","none"),te(e,"prefloat",n[28])},m(g,m){j(g,e,m),c&&c.m(e,null),A(e,t),~i&&u[i].m(e,null),A(e,o),d&&d.m(e,null),n[91](e),r=!0,l||(a=[En(n[49].call(null,e)),he(e,"scroll",n[41]),he(e,"pointerup",Ps(_l(n[85]))),he(e,"mousedown",Ps(_l(n[86])))],l=!0)},p(g,m){g[50]["list-prepend"]?c?(c.p(g,m),m[1]&524288&&k(c,1)):(c=Uy(g),c.c(),k(c,1),c.m(e,t)):c&&(me(),M(c,1,1,()=>{c=null}),pe());let p=i;i=h(g),i===p?~i&&u[i].p(g,m):(s&&(me(),M(u[p],1,1,()=>{u[p]=null}),pe()),~i?(s=u[i],s?s.p(g,m):(s=u[i]=f[i](g),s.c()),k(s,1),s.m(e,o)):s=null),g[50]["list-append"]?d?(d.p(g,m),m[1]&524288&&k(d,1)):(d=Ky(g),d.c(),k(d,1),d.m(e,null)):d&&(me(),M(d,1,1,()=>{d=null}),pe()),(!r||m[0]&268435456)&&te(e,"prefloat",g[28])},i(g){r||(k(c),k(s),k(d),r=!0)},o(g){M(c),M(s),M(d),r=!1},d(g){g&&B(e),c&&c.d(),~i&&u[i].d(),d&&d.d(),n[91](null),l=!1,Et(a)}}}function Uy(n){let e;const t=n[83]["list-prepend"],i=jt(t,n,n[82],Wy);return{c(){i&&i.c()},m(s,o){i&&i.m(s,o),e=!0},p(s,o){i&&i.p&&(!e||o[2]&1048576)&&zt(i,t,s,s[82],e?Ft(t,s[82],o,gN):Vt(s[82]),Wy)},i(s){e||(k(i,s),e=!0)},o(s){M(i,s),e=!1},d(s){i&&i.d(s)}}}function mN(n){let e;const t=n[83].empty,i=jt(t,n,n[82],Fy),s=i||yN();return{c(){s&&s.c()},m(o,r){s&&s.m(o,r),e=!0},p(o,r){i&&i.p&&(!e||r[2]&1048576)&&zt(i,t,o,o[82],e?Ft(t,o[82],r,uN):Vt(o[82]),Fy)},i(o){e||(k(s,o),e=!0)},o(o){M(s,o),e=!1},d(o){s&&s.d(o)}}}function pN(n){let e,t,i=at(n[24]),s=[];for(let r=0;r<i.length;r+=1)s[r]=Jy(zy(n,i,r));const o=r=>M(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=bt()},m(r,l){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(r,l);j(r,e,l),t=!0},p(r,l){if(l[0]&1627402376|l[1]&28672|l[2]&1048576){i=at(r[24]);let a;for(a=0;a<i.length;a+=1){const c=zy(r,i,a);s[a]?(s[a].p(c,l),k(s[a],1)):(s[a]=Jy(c),s[a].c(),k(s[a],1),s[a].m(e.parentNode,e))}for(me(),a=i.length;a<s.length;a+=1)o(a);pe()}},i(r){if(!t){for(let l=0;l<i.length;l+=1)k(s[l]);t=!0}},o(r){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)M(s[l]);t=!1},d(r){r&&B(e),xn(s,r)}}}function bN(n){let e;const t=n[83].list,i=jt(t,n,n[82],Hy);return{c(){i&&i.c()},m(s,o){i&&i.m(s,o),e=!0},p(s,o){i&&i.p&&(!e||o[0]&16777216|o[2]&1048576)&&zt(i,t,s,s[82],e?Ft(t,s[82],o,dN):Vt(s[82]),Hy)},i(s){e||(k(i,s),e=!0)},o(s){M(i,s),e=!1},d(s){i&&i.d(s)}}}function yN(n){let e;return{c(){e=R("div"),e.textContent="No options",w(e,"class","empty svelte-82qwg8")},m(t,i){j(t,e,i)},p:ge,d(t){t&&B(e)}}}function _N(n){var i;let e=((i=n[126])==null?void 0:i[n[12]])+"",t;return{c(){t=Se(e)},m(s,o){j(s,t,o)},p(s,o){var r;o[0]&16781312&&e!==(e=((r=s[126])==null?void 0:r[s[12]])+"")&&Xe(t,e)},d(s){s&&B(t)}}}function Jy(n){let e,t,i,s,o,r,l,a;const c=n[83].item,f=jt(c,n,n[82],Vy),u=f||_N(n);function h(){return n[88](n[128])}function d(){return n[89](n[128])}function g(){return n[90](n[126],n[128])}return{c(){var m;e=R("div"),t=R("div"),u&&u.c(),o=G(),w(t,"class","item svelte-82qwg8"),te(t,"list-group-title",n[126].groupHeader),te(t,"active",n[45](n[126],n[3],n[13])),te(t,"first",EN(n[128])),te(t,"hover",n[7]===n[128]),te(t,"group-item",n[126].groupItem),te(t,"not-selectable",((m=n[126])==null?void 0:m.selectable)===!1),w(e,"class","list-item svelte-82qwg8"),w(e,"tabindex","-1"),w(e,"role","none")},m(m,p){j(m,e,p),A(e,t),u&&u.m(t,null),A(e,o),r=!0,l||(a=[En(i=n[46].call(null,t,{scroll:n[45](n[126],n[3],n[13]),listDom:n[30]})),En(s=n[47].call(null,t,{scroll:n[29]===n[128],listDom:n[30]})),he(e,"mouseover",h),he(e,"focus",d),he(e,"click",Ps(g)),he(e,"keydown",Ps(_l(n[87])))],l=!0)},p(m,p){var b;n=m,f?f.p&&(!r||p[0]&16777216|p[2]&1048576)&&zt(f,c,n,n[82],r?Ft(c,n[82],p,hN):Vt(n[82]),Vy):u&&u.p&&(!r||p[0]&16781312)&&u.p(n,r?p:[-1,-1,-1,-1,-1]),i&&Kn(i.update)&&p[0]&1090527240&&i.update.call(null,{scroll:n[45](n[126],n[3],n[13]),listDom:n[30]}),s&&Kn(s.update)&&p[0]&1610612736&&s.update.call(null,{scroll:n[29]===n[128],listDom:n[30]}),(!r||p[0]&16777216)&&te(t,"list-group-title",n[126].groupHeader),(!r||p[0]&16785416|p[1]&16384)&&te(t,"active",n[45](n[126],n[3],n[13])),(!r||p[0]&128)&&te(t,"hover",n[7]===n[128]),(!r||p[0]&16777216)&&te(t,"group-item",n[126].groupItem),(!r||p[0]&16777216)&&te(t,"not-selectable",((b=n[126])==null?void 0:b.selectable)===!1)},i(m){r||(k(u,m),r=!0)},o(m){M(u,m),r=!1},d(m){m&&B(e),u&&u.d(m),l=!1,Et(a)}}}function Ky(n){let e;const t=n[83]["list-append"],i=jt(t,n,n[82],jy);return{c(){i&&i.c()},m(s,o){i&&i.m(s,o),e=!0},p(s,o){i&&i.p&&(!e||o[2]&1048576)&&zt(i,t,s,s[82],e?Ft(t,s[82],o,fN):Vt(s[82]),jy)},i(s){e||(k(i,s),e=!0)},o(s){M(i,s),e=!1},d(s){i&&i.d(s)}}}function Yy(n){let e,t,i,s,o;return{c(){e=R("span"),t=Se(n[32]),i=G(),s=R("span"),o=Se(n[31]),w(e,"id","aria-selection"),w(e,"class","svelte-82qwg8"),w(s,"id","aria-context"),w(s,"class","svelte-82qwg8")},m(r,l){j(r,e,l),A(e,t),j(r,i,l),j(r,s,l),A(s,o)},p(r,l){l[1]&2&&Xe(t,r[32]),l[1]&1&&Xe(o,r[31])},d(r){r&&(B(e),B(i),B(s))}}}function Xy(n){let e,t,i,s;const o=[vN,wN],r=[];function l(a,c){return a[9]?0:1}return e=l(n),t=r[e]=o[e](n),{c(){t.c(),i=bt()},m(a,c){r[e].m(a,c),j(a,i,c),s=!0},p(a,c){let f=e;e=l(a),e===f?r[e].p(a,c):(me(),M(r[f],1,1,()=>{r[f]=null}),pe(),t=r[e],t?t.p(a,c):(t=r[e]=o[e](a),t.c()),k(t,1),t.m(i.parentNode,i))},i(a){s||(k(t),s=!0)},o(a){M(t),s=!1},d(a){a&&B(i),r[e].d(a)}}}function wN(n){let e,t;const i=n[83].selection,s=jt(i,n,n[82],Dy),o=s||kN(n);return{c(){e=R("div"),o&&o.c(),w(e,"class","selected-item svelte-82qwg8"),te(e,"hide-selected-item",n[35])},m(r,l){j(r,e,l),o&&o.m(e,null),t=!0},p(r,l){s?s.p&&(!t||l[0]&8|l[2]&1048576)&&zt(s,i,r,r[82],t?Ft(i,r[82],l,rN):Vt(r[82]),Dy):o&&o.p&&(!t||l[0]&4104)&&o.p(r,t?l:[-1,-1,-1,-1,-1]),(!t||l[1]&16)&&te(e,"hide-selected-item",r[35])},i(r){t||(k(o,r),t=!0)},o(r){M(o,r),t=!1},d(r){r&&B(e),o&&o.d(r)}}}function vN(n){let e,t,i=at(n[3]),s=[];for(let r=0;r<i.length;r+=1)s[r]=Qy(Ly(n,i,r));const o=r=>M(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=bt()},m(r,l){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(r,l);j(r,e,l),t=!0},p(r,l){if(l[0]&67116040|l[1]&32|l[2]&1048576){i=at(r[3]);let a;for(a=0;a<i.length;a+=1){const c=Ly(r,i,a);s[a]?(s[a].p(c,l),k(s[a],1)):(s[a]=Qy(c),s[a].c(),k(s[a],1),s[a].m(e.parentNode,e))}for(me(),a=i.length;a<s.length;a+=1)o(a);pe()}},i(r){if(!t){for(let l=0;l<i.length;l+=1)k(s[l]);t=!0}},o(r){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)M(s[l]);t=!1},d(r){r&&B(e),xn(s,r)}}}function kN(n){let e=n[3][n[12]]+"",t;return{c(){t=Se(e)},m(i,s){j(i,t,s)},p(i,s){s[0]&4104&&e!==(e=i[3][i[12]]+"")&&Xe(t,e)},d(i){i&&B(t)}}}function SN(n){let e=n[126][n[12]]+"",t;return{c(){t=Se(e)},m(i,s){j(i,t,s)},p(i,s){s[0]&4104&&e!==(e=i[126][i[12]]+"")&&Xe(t,e)},d(i){i&&B(t)}}}function Gy(n){let e,t,i,s;const o=n[83]["multi-clear-icon"],r=jt(o,n,n[82],Iy),l=r||CN();function a(){return n[92](n[128])}return{c(){e=R("div"),l&&l.c(),w(e,"class","multi-item-clear svelte-82qwg8")},m(c,f){j(c,e,f),l&&l.m(e,null),t=!0,i||(s=he(e,"pointerup",Ps(_l(a))),i=!0)},p(c,f){n=c,r&&r.p&&(!t||f[2]&1048576)&&zt(r,o,n,n[82],t?Ft(o,n[82],f,lN):Vt(n[82]),Iy)},i(c){t||(k(l,c),t=!0)},o(c){M(l,c),t=!1},d(c){c&&B(e),l&&l.d(c),i=!1,s()}}}function CN(n){let e,t;return e=new sd({}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Qy(n){let e,t,i,s,o,r,l;const a=n[83].selection,c=jt(a,n,n[82],Ny),f=c||SN(n);let u=!n[11]&&!n[10]&&sd&&Gy(n);function h(){return n[93](n[128])}return{c(){e=R("div"),t=R("span"),f&&f.c(),i=G(),u&&u.c(),s=G(),w(t,"class","multi-item-text svelte-82qwg8"),w(e,"class","multi-item svelte-82qwg8"),w(e,"role","none"),te(e,"active",n[26]===n[128]),te(e,"disabled",n[11])},m(d,g){j(d,e,g),A(e,t),f&&f.m(t,null),A(e,i),u&&u.m(e,null),A(e,s),o=!0,r||(l=[he(e,"click",_l(h)),he(e,"keydown",Ps(_l(n[84])))],r=!0)},p(d,g){n=d,c?c.p&&(!o||g[0]&8|g[2]&1048576)&&zt(c,a,n,n[82],o?Ft(a,n[82],g,aN):Vt(n[82]),Ny):f&&f.p&&(!o||g[0]&4104)&&f.p(n,o?g:[-1,-1,-1,-1,-1]),!n[11]&&!n[10]&&sd?u?(u.p(n,g),g[0]&3072&&k(u,1)):(u=Gy(n),u.c(),k(u,1),u.m(e,s)):u&&(me(),M(u,1,1,()=>{u=null}),pe()),(!o||g[0]&67108864)&&te(e,"active",n[26]===n[128]),(!o||g[0]&2048)&&te(e,"disabled",n[11])},i(d){o||(k(f,d),k(u),o=!0)},o(d){M(f,d),M(u),o=!1},d(d){d&&B(e),f&&f.d(d),u&&u.d(),r=!1,Et(l)}}}function Zy(n){let e,t;const i=n[83]["loading-icon"],s=jt(i,n,n[82],Ry),o=s||MN();return{c(){e=R("div"),o&&o.c(),w(e,"class","icon loading svelte-82qwg8"),w(e,"aria-hidden","true")},m(r,l){j(r,e,l),o&&o.m(e,null),t=!0},p(r,l){s&&s.p&&(!t||l[2]&1048576)&&zt(s,i,r,r[82],t?Ft(i,r[82],l,oN):Vt(r[82]),Ry)},i(r){t||(k(o,r),t=!0)},o(r){M(o,r),t=!1},d(r){r&&B(e),o&&o.d(r)}}}function MN(n){let e,t;return e=new eN({}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function $y(n){let e,t,i,s;const o=n[83]["clear-icon"],r=jt(o,n,n[82],Ey),l=r||xN();return{c(){e=R("button"),l&&l.c(),w(e,"type","button"),w(e,"class","icon clear-select svelte-82qwg8")},m(a,c){j(a,e,c),l&&l.m(e,null),t=!0,i||(s=he(e,"click",n[22]),i=!0)},p(a,c){r&&r.p&&(!t||c[2]&1048576)&&zt(r,o,a,a[82],t?Ft(o,a[82],c,sN):Vt(a[82]),Ey)},i(a){t||(k(l,a),t=!0)},o(a){M(l,a),t=!1},d(a){a&&B(e),l&&l.d(a),i=!1,s()}}}function xN(n){let e,t;return e=new sd({}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function e_(n){let e,t;const i=n[83]["chevron-icon"],s=jt(i,n,n[82],Ty),o=s||AN();return{c(){e=R("div"),o&&o.c(),w(e,"class","icon chevron svelte-82qwg8"),w(e,"aria-hidden","true")},m(r,l){j(r,e,l),o&&o.m(e,null),t=!0},p(r,l){s&&s.p&&(!t||l[0]&64|l[2]&1048576)&&zt(s,i,r,r[82],t?Ft(i,r[82],l,iN):Vt(r[82]),Ty)},i(r){t||(k(o,r),t=!0)},o(r){M(o,r),t=!1},d(r){r&&B(e),o&&o.d(r)}}}function AN(n){let e,t;return e=new Q9({}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function ON(n){let e,t;return{c(){e=R("input"),w(e,"name",n[8]),w(e,"type","hidden"),e.value=t=n[3]?JSON.stringify(n[3]):null,w(e,"class","svelte-82qwg8")},m(i,s){j(i,e,s)},p(i,s){s[0]&256&&w(e,"name",i[8]),s[0]&8&&t!==(t=i[3]?JSON.stringify(i[3]):null)&&(e.value=t)},d(i){i&&B(e)}}}function t_(n){let e;const t=n[83].required,i=jt(t,n,n[82],Oy),s=i||PN();return{c(){s&&s.c()},m(o,r){s&&s.m(o,r),e=!0},p(o,r){i&&i.p&&(!e||r[0]&8|r[2]&1048576)&&zt(i,t,o,o[82],e?Ft(t,o[82],r,tN):Vt(o[82]),Oy)},i(o){e||(k(s,o),e=!0)},o(o){M(s,o),e=!1},d(o){s&&s.d(o)}}}function PN(n){let e;return{c(){e=R("select"),w(e,"class","required svelte-82qwg8"),e.required=!0,w(e,"tabindex","-1"),w(e,"aria-hidden","true")},m(t,i){j(t,e,i)},p:ge,d(t){t&&B(e)}}}function TN(n){let e,t,i,s,o,r,l,a,c,f,u,h,d,g,m,p,b,y,v,C,_=n[6]&&qy(n),S=n[2]&&Yy(n);const x=n[83].prepend,D=jt(x,n,n[82],By);let P=n[25]&&Xy(n),E=[{readOnly:f=!n[17]},n[27],{placeholder:n[33]},{style:n[18]},{disabled:n[11]}],O={};for(let T=0;T<E.length;T+=1)O=Ht(O,E[T]);let I=n[5]&&Zy(n),N=n[34]&&$y(n),F=n[20]&&e_(n);const z=n[83]["input-hidden"],q=jt(z,n,n[82],Py),Q=q||ON(n);let X=n[16]&&(!n[3]||n[3].length===0)&&t_(n);return{c(){e=R("div"),_&&_.c(),t=G(),i=R("span"),S&&S.c(),s=G(),o=R("div"),D&&D.c(),r=G(),l=R("div"),P&&P.c(),a=G(),c=R("input"),u=G(),h=R("div"),I&&I.c(),d=G(),N&&N.c(),g=G(),F&&F.c(),m=G(),Q&&Q.c(),p=G(),X&&X.c(),w(i,"aria-live","polite"),w(i,"aria-atomic","false"),w(i,"aria-relevant","additions text"),w(i,"class","a11y-text svelte-82qwg8"),w(o,"class","prepend svelte-82qwg8"),Cr(c,O),te(c,"svelte-82qwg8",!0),w(l,"class","value-container svelte-82qwg8"),w(h,"class","indicators svelte-82qwg8"),w(e,"class",b="svelte-select "+n[21]+" svelte-82qwg8"),w(e,"style",n[14]),w(e,"role","none"),te(e,"multi",n[9]),te(e,"disabled",n[11]),te(e,"focused",n[2]),te(e,"list-open",n[6]),te(e,"show-chevron",n[20]),te(e,"error",n[15])},m(T,U){j(T,e,U),_&&_.m(e,null),A(e,t),A(e,i),S&&S.m(i,null),A(e,s),A(e,o),D&&D.m(o,null),A(e,r),A(e,l),P&&P.m(l,null),A(l,a),A(l,c),c.autofocus&&c.focus(),n[94](c),Mr(c,n[4]),A(e,u),A(e,h),I&&I.m(h,null),A(h,d),N&&N.m(h,null),A(h,g),F&&F.m(h,null),A(e,m),Q&&Q.m(e,null),A(e,p),X&&X.m(e,null),n[96](e),y=!0,v||(C=[he(window,"click",n[42]),he(window,"keydown",n[37]),he(c,"keydown",n[37]),he(c,"blur",n[39]),he(c,"focus",n[38]),he(c,"input",n[95]),he(e,"pointerup",_l(n[40])),En(n[48].call(null,e))],v=!0)},p(T,U){T[6]?_?(_.p(T,U),U[0]&64&&k(_,1)):(_=qy(T),_.c(),k(_,1),_.m(e,t)):_&&(me(),M(_,1,1,()=>{_=null}),pe()),T[2]?S?S.p(T,U):(S=Yy(T),S.c(),S.m(i,null)):S&&(S.d(1),S=null),D&&D.p&&(!y||U[2]&1048576)&&zt(D,x,T,T[82],y?Ft(x,T[82],U,cN):Vt(T[82]),By),T[25]?P?(P.p(T,U),U[0]&33554432&&k(P,1)):(P=Xy(T),P.c(),k(P,1),P.m(l,a)):P&&(me(),M(P,1,1,()=>{P=null}),pe()),Cr(c,O=ni(E,[(!y||U[0]&131072&&f!==(f=!T[17]))&&{readOnly:f},U[0]&134217728&&T[27],(!y||U[1]&4)&&{placeholder:T[33]},(!y||U[0]&262144)&&{style:T[18]},(!y||U[0]&2048)&&{disabled:T[11]}])),U[0]&16&&c.value!==T[4]&&Mr(c,T[4]),te(c,"svelte-82qwg8",!0),T[5]?I?(I.p(T,U),U[0]&32&&k(I,1)):(I=Zy(T),I.c(),k(I,1),I.m(h,d)):I&&(me(),M(I,1,1,()=>{I=null}),pe()),T[34]?N?(N.p(T,U),U[1]&8&&k(N,1)):(N=$y(T),N.c(),k(N,1),N.m(h,g)):N&&(me(),M(N,1,1,()=>{N=null}),pe()),T[20]?F?(F.p(T,U),U[0]&1048576&&k(F,1)):(F=e_(T),F.c(),k(F,1),F.m(h,null)):F&&(me(),M(F,1,1,()=>{F=null}),pe()),q?q.p&&(!y||U[0]&8|U[2]&1048576)&&zt(q,z,T,T[82],y?Ft(z,T[82],U,nN):Vt(T[82]),Py):Q&&Q.p&&(!y||U[0]&264)&&Q.p(T,y?U:[-1,-1,-1,-1,-1]),T[16]&&(!T[3]||T[3].length===0)?X?(X.p(T,U),U[0]&65544&&k(X,1)):(X=t_(T),X.c(),k(X,1),X.m(e,null)):X&&(me(),M(X,1,1,()=>{X=null}),pe()),(!y||U[0]&2097152&&b!==(b="svelte-select "+T[21]+" svelte-82qwg8"))&&w(e,"class",b),(!y||U[0]&16384)&&w(e,"style",T[14]),(!y||U[0]&2097664)&&te(e,"multi",T[9]),(!y||U[0]&2099200)&&te(e,"disabled",T[11]),(!y||U[0]&2097156)&&te(e,"focused",T[2]),(!y||U[0]&2097216)&&te(e,"list-open",T[6]),(!y||U[0]&3145728)&&te(e,"show-chevron",T[20]),(!y||U[0]&2129920)&&te(e,"error",T[15])},i(T){y||(k(_),k(D,T),k(P),k(I),k(N),k(F),k(Q,T),k(X),y=!0)},o(T){M(_),M(D,T),M(P),M(I),M(N),M(F),M(Q,T),M(X),y=!1},d(T){T&&B(e),_&&_.d(),S&&S.d(),D&&D.d(T),P&&P.d(),n[94](null),I&&I.d(),N&&N.d(),F&&F.d(),Q&&Q.d(T),X&&X.d(),n[96](null),v=!1,Et(C)}}}function n_(n){return n.map((e,t)=>({index:t,value:e,label:`${e}`}))}function EN(n){return n===0}function RN(n){return n.groupHeader&&n.selectable||n.selectable||!n.hasOwnProperty("selectable")}function DN(n,e,t){let i,s,o,r,l,a,c,f,u,{$$slots:h={},$$scope:d}=e;const g=GC(h),m=J1();let{justValue:p=null}=e,{filter:b=Y9}=e,{getItems:y=X9}=e,{id:v=null}=e,{name:C=null}=e,{container:_=void 0}=e,{input:S=void 0}=e,{multiple:x=!1}=e,{multiFullItemClearable:D=!1}=e,{disabled:P=!1}=e,{focused:E=!1}=e,{value:O=null}=e,{filterText:I=""}=e,{placeholder:N="Please select"}=e,{placeholderAlwaysShow:F=!1}=e,{items:z=null}=e,{label:q="label"}=e,{itemFilter:Q=(J,Ue,en)=>`${J}`.toLowerCase().includes(Ue.toLowerCase())}=e,{groupBy:X=void 0}=e,{groupFilter:T=J=>J}=e,{groupHeaderSelectable:U=!1}=e,{itemId:Y="value"}=e,{loadOptions:le=void 0}=e,{containerStyles:Z=""}=e,{hasError:ue=!1}=e,{filterSelectedItems:W=!0}=e,{required:we=!1}=e,{closeListOnChange:ee=!0}=e,{clearFilterTextOnBlur:be=!0}=e,{createGroupHeaderItem:tt=(J,Ue)=>({value:J,[q]:J})}=e;const re=()=>c;let{searchable:Qe=!0}=e,{inputStyles:H=""}=e,{clearable:ae=!0}=e,{loading:De=!1}=e,{listOpen:Le=!1}=e,Ie,{debounce:Te=(J,Ue=1)=>{clearTimeout(Ie),Ie=setTimeout(J,Ue)}}=e,{debounceWait:de=300}=e,{hideEmptyState:lt=!1}=e,{inputAttributes:wt={}}=e,{listAutoWidth:Ee=!0}=e,{showChevron:st=!1}=e,{listOffset:dt=5}=e,{hoverItemIndex:Ze=0}=e,{floatingConfig:It={}}=e,{class:We=""}=e,ct,K,ke,qe;function Ce(){if(typeof O=="string"){let J=(z||[]).find(Ue=>Ue[Y]===O);t(3,O=J||{[Y]:O,label:O})}else x&&Array.isArray(O)&&O.length>0&&t(3,O=O.map(J=>typeof J=="string"?{value:J,label:J}:J))}let $;function xe(){t(27,$=Object.assign({autocapitalize:"none",autocomplete:"off",autocorrect:"off",spellcheck:!1,tabindex:0,type:"text","aria-autocomplete":"list"},wt)),v&&t(27,$.id=v,$),Qe||t(27,$.readonly=!0,$)}function Pe(J){const Ue=[],en={};J.forEach(Fi=>{const zi=X(Fi);Ue.includes(zi)||(Ue.push(zi),en[zi]=[],zi&&en[zi].push(Object.assign(tt(zi,Fi),{id:zi,groupHeader:!0,selectable:U}))),en[zi].push(Object.assign({groupItem:!!zi},Fi))});const ji=[];return T(Ue).forEach(Fi=>{en[Fi]&&ji.push(...en[Fi])}),ji}function Ge(){if(x){JSON.stringify(O)!==JSON.stringify(K)&&bs()&&m("input",O);return}(!K||JSON.stringify(O[Y])!==JSON.stringify(K[Y]))&&m("input",O)}function ot(){O&&(Array.isArray(O)?t(3,O=[...O]):t(3,O=[O]))}function fe(){O&&t(3,O=null)}function Pt(){const J=c.findIndex(Ue=>Ue[Y]===O[Y]);nt(J,!0)}function At(J){m("hoverItem",J)}function nt(J=0,Ue){t(7,Ze=J<0?0:J),!Ue&&X&&c[Ze]&&!c[Ze].selectable&&ht(1)}function Kt(){!le&&I.length===0||(le?Te(async function(){t(5,De=!0);let J=await y({dispatch:m,loadOptions:le,convertStringItemsToObjects:n_,filterText:I});J?(t(5,De=J.loading),t(6,Le=Le?J.listOpen:I.length>0),t(2,E=Le&&J.focused),t(51,z=X?Pe(J.filteredItems):J.filteredItems)):(t(5,De=!1),t(2,E=!0),t(6,Le=!0))},de):(t(6,Le=!0),x&&t(26,ct=void 0)))}function Yt(J){Le&&m("filter",J)}q5(async()=>{t(78,K=O),t(79,ke=I),t(80,qe=x)});function wi(){return x?O?O.map(J=>J[Y]):null:O&&O[Y]}function bs(){let J=!0;if(O){const Ue=[],en=[];O.forEach(ji=>{Ue.includes(ji[Y])?J=!1:(Ue.push(ji[Y]),en.push(ji))}),J||t(3,O=en)}return J}function $o(J){let Ue=J?J[Y]:O[Y];return z.find(en=>en[Y]===Ue)}function qr(J){!J||J.length===0||J.some(Ue=>typeof Ue!="object")||!O||(x?O.some(Ue=>!Ue||!Ue[Y]):!O[Y])||(Array.isArray(O)?t(3,O=O.map(Ue=>$o(Ue)||Ue)):t(3,O=$o()||O))}async function Zt(J){const Ue=O[J];O.length===1?t(3,O=void 0):t(3,O=O.filter(en=>en!==Ue)),m("clear",Ue)}function js(J){if(E)switch(J.stopPropagation(),J.key){case"Escape":J.preventDefault(),ii();break;case"Enter":if(J.preventDefault(),Le){if(c.length===0)break;const Ue=c[Ze];if(O&&!x&&O[Y]===Ue[Y]){ii();break}else wo(c[Ze])}break;case"ArrowDown":J.preventDefault(),Le?ht(1):(t(6,Le=!0),t(26,ct=void 0));break;case"ArrowUp":J.preventDefault(),Le?ht(-1):(t(6,Le=!0),t(26,ct=void 0));break;case"Tab":if(Le&&E){if(c.length===0||O&&O[Y]===c[Ze][Y])return ii();J.preventDefault(),wo(c[Ze]),ii()}break;case"Backspace":if(!x||I.length>0)return;if(x&&O&&O.length>0){if(Zt(ct!==void 0?ct:O.length-1),ct===0||ct===void 0)break;t(26,ct=O.length>ct?ct-1:void 0)}break;case"ArrowLeft":if(!O||!x||I.length>0)return;ct===void 0?t(26,ct=O.length-1):O.length>ct&&ct!==0&&t(26,ct-=1);break;case"ArrowRight":if(!O||!x||I.length>0||ct===void 0)return;ct===O.length-1?t(26,ct=void 0):ct<O.length-1&&t(26,ct+=1);break}}function Fs(J){E&&S===(document==null?void 0:document.activeElement)||(J&&m("focus",J),S==null||S.focus(),t(2,E=!0))}async function yo(J){_o||(Le||E)&&(m("blur",J),ii(),t(2,E=!1),t(26,ct=void 0),S==null||S.blur())}function ys(){if(!P){if(I.length>0)return t(6,Le=!0);t(6,Le=!Le)}}function zs(){m("clear",O),t(3,O=void 0),ii(),Fs()}Ai(()=>{Le&&t(2,E=!0),E&&S&&S.focus()});function Bi(J){if(J){t(4,I="");const Ue=Object.assign({},J);if(Ue.groupHeader&&!Ue.selectable)return;t(3,O=x?O?O.concat([Ue]):[Ue]:t(3,O=Ue)),setTimeout(()=>{ee&&ii(),t(26,ct=void 0),m("change",O),m("select",J)})}}function ii(){be&&t(4,I=""),t(6,Le=!1)}let{ariaValues:si=J=>`Option ${J}, selected.`}=e,{ariaListOpen:oi=(J,Ue)=>`You are currently focused on option ${J}. There are ${Ue} results available.`}=e,{ariaFocused:Xn=()=>"Select is focused, type to refine list, press down to open the menu."}=e;function _s(J){let Ue;return J&&O.length>0?Ue=O.map(en=>en[q]).join(", "):Ue=O[q],si(Ue)}function Vs(){if(!c||c.length===0)return"";let J=c[Ze];if(Le&&J){let Ue=c?c.length:0;return oi(J[q],Ue)}else return Xn()}let mn=null,Hs;function Ws(){clearTimeout(Hs),Hs=setTimeout(()=>{_o=!1},100)}function er(J){!Le&&!E&&_&&!_.contains(J.target)&&!(mn!=null&&mn.contains(J.target))&&yo()}Ci(()=>{mn==null||mn.remove()});let _o=!1;function wo(J){!J||J.selectable===!1||Bi(J)}function oe(J){_o||t(7,Ze=J)}function $e(J){const{item:Ue,i:en}=J;if((Ue==null?void 0:Ue.selectable)!==!1){if(O&&!x&&O[Y]===Ue[Y])return ii();RN(Ue)&&(t(7,Ze=en),wo(Ue))}}function ht(J){if(c.filter(ji=>!Object.hasOwn(ji,"selectable")||ji.selectable===!0).length===0)return t(7,Ze=0);J>0&&Ze===c.length-1?t(7,Ze=0):J<0&&Ze===0?t(7,Ze=c.length-1):t(7,Ze=Ze+J);const en=c[Ze];if(en&&en.selectable===!1){(J===1||J===-1)&&ht(J);return}}function $t(J,Ue,en){if(!x)return Ue&&Ue[en]===J[en]}const Rt=Vn,Xt=Vn;function Vn(J){return{update(Ue){Ue.scroll&&(Ws(),J.scrollIntoView({behavior:"auto",block:"nearest"}))}}}function vi(){const{width:J}=_.getBoundingClientRect();t(23,mn.style.width=Ee?J+"px":"auto",mn)}let ln={strategy:"absolute",placement:"bottom-start",middleware:[W9(dt),U9(),q9()],autoUpdate:!1};const[qs,uc,tr]=K9(ln);let Ur=!0;function hc(J,Ue){if(!J||!Ue)return t(28,Ur=!0);setTimeout(()=>{t(28,Ur=!1)},0)}function Jr(J){al.call(this,n,J)}function dc(J){al.call(this,n,J)}function Jl(J){al.call(this,n,J)}function nr(J){al.call(this,n,J)}const gc=J=>oe(J),vo=J=>oe(J),ir=(J,Ue)=>$e({item:J,i:Ue});function Kl(J){it[J?"unshift":"push"](()=>{mn=J,t(23,mn)})}const Yl=J=>Zt(J),Xl=J=>D?Zt(J):{};function mc(J){it[J?"unshift":"push"](()=>{S=J,t(1,S)})}function Gl(){I=this.value,t(4,I)}function _n(J){it[J?"unshift":"push"](()=>{_=J,t(0,_)})}return n.$$set=J=>{"justValue"in J&&t(52,p=J.justValue),"filter"in J&&t(53,b=J.filter),"getItems"in J&&t(54,y=J.getItems),"id"in J&&t(55,v=J.id),"name"in J&&t(8,C=J.name),"container"in J&&t(0,_=J.container),"input"in J&&t(1,S=J.input),"multiple"in J&&t(9,x=J.multiple),"multiFullItemClearable"in J&&t(10,D=J.multiFullItemClearable),"disabled"in J&&t(11,P=J.disabled),"focused"in J&&t(2,E=J.focused),"value"in J&&t(3,O=J.value),"filterText"in J&&t(4,I=J.filterText),"placeholder"in J&&t(56,N=J.placeholder),"placeholderAlwaysShow"in J&&t(57,F=J.placeholderAlwaysShow),"items"in J&&t(51,z=J.items),"label"in J&&t(12,q=J.label),"itemFilter"in J&&t(58,Q=J.itemFilter),"groupBy"in J&&t(59,X=J.groupBy),"groupFilter"in J&&t(60,T=J.groupFilter),"groupHeaderSelectable"in J&&t(61,U=J.groupHeaderSelectable),"itemId"in J&&t(13,Y=J.itemId),"loadOptions"in J&&t(62,le=J.loadOptions),"containerStyles"in J&&t(14,Z=J.containerStyles),"hasError"in J&&t(15,ue=J.hasError),"filterSelectedItems"in J&&t(63,W=J.filterSelectedItems),"required"in J&&t(16,we=J.required),"closeListOnChange"in J&&t(64,ee=J.closeListOnChange),"clearFilterTextOnBlur"in J&&t(65,be=J.clearFilterTextOnBlur),"createGroupHeaderItem"in J&&t(66,tt=J.createGroupHeaderItem),"searchable"in J&&t(17,Qe=J.searchable),"inputStyles"in J&&t(18,H=J.inputStyles),"clearable"in J&&t(68,ae=J.clearable),"loading"in J&&t(5,De=J.loading),"listOpen"in J&&t(6,Le=J.listOpen),"debounce"in J&&t(69,Te=J.debounce),"debounceWait"in J&&t(70,de=J.debounceWait),"hideEmptyState"in J&&t(19,lt=J.hideEmptyState),"inputAttributes"in J&&t(71,wt=J.inputAttributes),"listAutoWidth"in J&&t(72,Ee=J.listAutoWidth),"showChevron"in J&&t(20,st=J.showChevron),"listOffset"in J&&t(73,dt=J.listOffset),"hoverItemIndex"in J&&t(7,Ze=J.hoverItemIndex),"floatingConfig"in J&&t(74,It=J.floatingConfig),"class"in J&&t(21,We=J.class),"ariaValues"in J&&t(75,si=J.ariaValues),"ariaListOpen"in J&&t(76,oi=J.ariaListOpen),"ariaFocused"in J&&t(77,Xn=J.ariaFocused),"$$scope"in J&&t(82,d=J.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&8|n.$$.dirty[1]&1048576&&O&&Ce(),n.$$.dirty[0]&131072|n.$$.dirty[2]&512&&(wt||!Qe)&&xe(),n.$$.dirty[0]&512&&x&&ot(),n.$$.dirty[0]&512|n.$$.dirty[2]&262144&&qe&&!x&&fe(),n.$$.dirty[0]&520&&x&&O&&O.length>1&&bs(),n.$$.dirty[0]&8&&O&&Ge(),n.$$.dirty[0]&520|n.$$.dirty[2]&65536&&!O&&x&&K&&m("input",O),n.$$.dirty[0]&6&&!E&&S&&ii(),n.$$.dirty[0]&16|n.$$.dirty[2]&131072&&I!==ke&&Kt(),n.$$.dirty[0]&12824|n.$$.dirty[1]&407896064|n.$$.dirty[2]&3&&t(24,c=b({loadOptions:le,filterText:I,items:z,multiple:x,value:O,itemId:Y,groupBy:X,label:q,filterSelectedItems:W,itemFilter:Q,convertStringItemsToObjects:n_,filterGroupedItems:Pe})),n.$$.dirty[0]&16777800&&!x&&Le&&O&&c&&Pt(),n.$$.dirty[0]&576&&Le&&x&&t(7,Ze=0),n.$$.dirty[0]&16&&I&&t(7,Ze=0),n.$$.dirty[0]&128&&At(Ze),n.$$.dirty[0]&520&&t(25,i=x?O&&O.length>0:O),n.$$.dirty[0]&33554448&&t(35,s=i&&I.length>0),n.$$.dirty[0]&33556512|n.$$.dirty[2]&64&&t(34,o=i&&ae&&!P&&!De),n.$$.dirty[0]&520|n.$$.dirty[1]&100663296&&t(33,r=F&&x||x&&(O==null?void 0:O.length)===0?N:O?"":N),n.$$.dirty[0]&520&&t(32,l=O?_s(x):""),n.$$.dirty[0]&16777412&&t(31,a=Vs()),n.$$.dirty[1]&1048576&&qr(z),n.$$.dirty[0]&8712&&t(52,p=wi()),n.$$.dirty[0]&520|n.$$.dirty[2]&65536&&!x&&K&&!O&&m("input",O),n.$$.dirty[0]&16777800&&Le&&c&&!x&&!O&&nt(),n.$$.dirty[0]&16777216&&Yt(c),n.$$.dirty[0]&1|n.$$.dirty[2]&4096&&_&&(It==null?void 0:It.autoUpdate)===void 0&&t(81,ln.autoUpdate=!0,ln),n.$$.dirty[0]&1|n.$$.dirty[2]&528384&&_&&It&&tr(Object.assign(ln,It)),n.$$.dirty[0]&8388608&&t(30,f=!!mn),n.$$.dirty[0]&8388672&&hc(mn,Le),n.$$.dirty[0]&8388673&&Le&&_&&mn&&vi(),n.$$.dirty[0]&128&&t(29,u=Ze),n.$$.dirty[0]&70&&S&&Le&&!E&&Fs()},[_,S,E,O,I,De,Le,Ze,C,x,D,P,q,Y,Z,ue,we,Qe,H,lt,st,We,zs,mn,c,i,ct,$,Ur,u,f,a,l,r,o,s,Zt,js,Fs,yo,ys,Ws,er,oe,$e,$t,Rt,Xt,qs,uc,g,z,p,b,y,v,N,F,Q,X,T,U,le,W,ee,be,tt,re,ae,Te,de,wt,Ee,dt,It,si,oi,Xn,K,ke,qe,ln,d,h,Jr,dc,Jl,nr,gc,vo,ir,Kl,Yl,Xl,mc,Gl,_n]}class ol extends ze{constructor(e){super(),Fe(this,e,DN,TN,Qt,{justValue:52,filter:53,getItems:54,id:55,name:8,container:0,input:1,multiple:9,multiFullItemClearable:10,disabled:11,focused:2,value:3,filterText:4,placeholder:56,placeholderAlwaysShow:57,items:51,label:12,itemFilter:58,groupBy:59,groupFilter:60,groupHeaderSelectable:61,itemId:13,loadOptions:62,containerStyles:14,hasError:15,filterSelectedItems:63,required:16,closeListOnChange:64,clearFilterTextOnBlur:65,createGroupHeaderItem:66,getFilteredItems:67,searchable:17,inputStyles:18,clearable:68,loading:5,listOpen:6,debounce:69,debounceWait:70,hideEmptyState:19,inputAttributes:71,listAutoWidth:72,showChevron:20,listOffset:73,hoverItemIndex:7,floatingConfig:74,class:21,handleClear:22,ariaValues:75,ariaListOpen:76,ariaFocused:77},null,[-1,-1,-1,-1,-1])}get getFilteredItems(){return this.$$.ctx[67]}get handleClear(){return this.$$.ctx[22]}}function LN(n){let e,t,i,s,o,r,l,a,c,f,u,h,d,g,m,p,b,y,v,C,_,S,x,D,P,E,O,I,N,F,z,q,Q,X,T;function U(re){n[16](re)}let Y={class:"jse-filter-path",showChevron:!0,items:n[7]};n[0]!==void 0&&(Y.value=n[0]),l=new ol({props:Y}),it.push(()=>Jn(l,"value",U));function le(re){n[17](re)}let Z={class:"jse-filter-relation",showChevron:!0,items:n[8]};n[1]!==void 0&&(Z.value=n[1]),f=new ol({props:Z}),it.push(()=>Jn(f,"value",le));function ue(re){n[19](re)}let W={class:"jse-sort-path",showChevron:!0,items:n[7]};n[3]!==void 0&&(W.value=n[3]),C=new ol({props:W}),it.push(()=>Jn(C,"value",ue));function we(re){n[20](re)}let ee={class:"jse-sort-direction",showChevron:!0,items:n[9]};n[4]!==void 0&&(ee.value=n[4]),x=new ol({props:ee}),it.push(()=>Jn(x,"value",we));function be(re){n[21](re)}let tt={class:"jse-projection-paths",multiple:!0,showChevron:!0,items:n[6]};return n[5]!==void 0&&(tt.value=n[5]),z=new ol({props:tt}),it.push(()=>Jn(z,"value",be)),{c(){e=R("table"),t=R("tr"),i=R("th"),i.textContent="Filter",s=G(),o=R("td"),r=R("div"),se(l.$$.fragment),c=G(),se(f.$$.fragment),h=G(),d=R("input"),g=G(),m=R("tr"),p=R("th"),p.textContent="Sort",b=G(),y=R("td"),v=R("div"),se(C.$$.fragment),S=G(),se(x.$$.fragment),P=G(),E=R("tr"),O=R("th"),O.textContent="Pick",I=G(),N=R("td"),F=R("div"),se(z.$$.fragment),w(i,"class","svelte-ijtq0l"),w(d,"class","jse-filter-value svelte-ijtq0l"),w(r,"class","jse-horizontal svelte-ijtq0l"),w(p,"class","svelte-ijtq0l"),w(v,"class","jse-horizontal svelte-ijtq0l"),w(O,"class","svelte-ijtq0l"),w(F,"class","jse-horizontal svelte-ijtq0l"),w(e,"class","jse-transform-wizard svelte-ijtq0l")},m(re,Qe){j(re,e,Qe),A(e,t),A(t,i),A(t,s),A(t,o),A(o,r),ne(l,r,null),A(r,c),ne(f,r,null),A(r,h),A(r,d),Mr(d,n[2]),A(e,g),A(e,m),A(m,p),A(m,b),A(m,y),A(y,v),ne(C,v,null),A(v,S),ne(x,v,null),A(e,P),A(e,E),A(E,O),A(E,I),A(E,N),A(N,F),ne(z,F,null),Q=!0,X||(T=he(d,"input",n[18]),X=!0)},p(re,[Qe]){const H={};Qe&128&&(H.items=re[7]),!a&&Qe&1&&(a=!0,H.value=re[0],Un(()=>a=!1)),l.$set(H);const ae={};!u&&Qe&2&&(u=!0,ae.value=re[1],Un(()=>u=!1)),f.$set(ae),Qe&4&&d.value!==re[2]&&Mr(d,re[2]);const De={};Qe&128&&(De.items=re[7]),!_&&Qe&8&&(_=!0,De.value=re[3],Un(()=>_=!1)),C.$set(De);const Le={};!D&&Qe&16&&(D=!0,Le.value=re[4],Un(()=>D=!1)),x.$set(Le);const Ie={};Qe&64&&(Ie.items=re[6]),!q&&Qe&32&&(q=!0,Ie.value=re[5],Un(()=>q=!1)),z.$set(Ie)},i(re){Q||(k(l.$$.fragment,re),k(f.$$.fragment,re),k(C.$$.fragment,re),k(x.$$.fragment,re),k(z.$$.fragment,re),Q=!0)},o(re){M(l.$$.fragment,re),M(f.$$.fragment,re),M(C.$$.fragment,re),M(x.$$.fragment,re),M(z.$$.fragment,re),Q=!1},d(re){re&&B(e),ie(l),ie(f),ie(C),ie(x),ie(z),X=!1,T()}}}function IN(n,e,t){var q,Q,X,T,U;let i,s,o,r,l,a;const c=Fn("jsoneditor:TransformWizard");let{json:f}=e,{queryOptions:u={}}=e,{onChange:h}=e;const d=["==","!=","<","<=",">",">="].map(Y=>({value:Y,label:Y})),g=[{value:"asc",label:"ascending"},{value:"desc",label:"descending"}];let m=(q=u==null?void 0:u.filter)!=null&&q.path?Rc(u.filter.path):null,p=(Q=u==null?void 0:u.filter)!=null&&Q.relation?d.find(Y=>{var le;return Y.value===((le=u.filter)==null?void 0:le.relation)}):null,b=((X=u==null?void 0:u.filter)==null?void 0:X.value)||"",y=(T=u==null?void 0:u.sort)!=null&&T.path?Rc(u.sort.path):null,v=(U=u==null?void 0:u.sort)!=null&&U.direction?g.find(Y=>{var le;return Y.value===((le=u.sort)==null?void 0:le.direction)}):null;function C(Y){var le;yt((le=u==null?void 0:u.filter)==null?void 0:le.path,Y)||(c("changeFilterPath",Y),t(10,u=ws(u,["filter","path"],Y,!0)),h(u))}function _(Y){var le;yt((le=u==null?void 0:u.filter)==null?void 0:le.relation,Y)||(c("changeFilterRelation",Y),t(10,u=ws(u,["filter","relation"],Y,!0)),h(u))}function S(Y){var le;yt((le=u==null?void 0:u.filter)==null?void 0:le.value,Y)||(c("changeFilterValue",Y),t(10,u=ws(u,["filter","value"],Y,!0)),h(u))}function x(Y){var le;yt((le=u==null?void 0:u.sort)==null?void 0:le.path,Y)||(c("changeSortPath",Y),t(10,u=ws(u,["sort","path"],Y,!0)),h(u))}function D(Y){var le;yt((le=u==null?void 0:u.sort)==null?void 0:le.direction,Y)||(c("changeSortDirection",Y),t(10,u=ws(u,["sort","direction"],Y,!0)),h(u))}function P(Y){var le;yt((le=u==null?void 0:u.projection)==null?void 0:le.paths,Y)||(c("changeProjectionPaths",Y),t(10,u=ws(u,["projection","paths"],Y,!0)),h(u))}function E(Y){m=Y,t(0,m)}function O(Y){p=Y,t(1,p)}function I(){b=this.value,t(2,b)}function N(Y){y=Y,t(3,y)}function F(Y){v=Y,t(4,v)}function z(Y){a=Y,t(5,a),t(10,u),t(6,l),t(13,o),t(15,i),t(11,f)}return n.$$set=Y=>{"json"in Y&&t(11,f=Y.json),"queryOptions"in Y&&t(10,u=Y.queryOptions),"onChange"in Y&&t(12,h=Y.onChange)},n.$$.update=()=>{var Y;n.$$.dirty&2048&&t(15,i=Array.isArray(f)),n.$$.dirty&34816&&t(14,s=i?mp(f):[]),n.$$.dirty&34816&&t(13,o=i?mp(f,!0):[]),n.$$.dirty&16384&&t(7,r=s.map(Rc)),n.$$.dirty&8192&&t(6,l=o?o.map(Rc):[]),n.$$.dirty&1088&&t(5,a=(Y=u==null?void 0:u.projection)!=null&&Y.paths&&l?u.projection.paths.map(le=>l.find(Z=>yt(Z.value,le))).filter(le=>!!le):null),n.$$.dirty&1&&C(m==null?void 0:m.value),n.$$.dirty&2&&_(p==null?void 0:p.value),n.$$.dirty&4&&S(b),n.$$.dirty&8&&x(y==null?void 0:y.value),n.$$.dirty&16&&D(v==null?void 0:v.value),n.$$.dirty&32&&P(a?a.map(le=>le.value):void 0)},[m,p,b,y,v,a,l,r,d,g,u,f,h,o,s,i,E,O,I,N,F,z]}class NN extends ze{constructor(e){super(),Fe(this,e,IN,LN,ft,{json:11,queryOptions:10,onChange:12})}}function i_(n,e,t){const i=n.slice();return i[5]=e[t],i}function BN(n){let e,t;return e=new vt({props:{data:yp}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function jN(n){let e,t;return e=new vt({props:{data:bp}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function s_(n){let e,t,i,s,o=n[5].name+"",r,l,a,c,f,u;const h=[jN,BN],d=[];function g(p,b){return p[5].id===p[0]?0:1}t=g(n),i=d[t]=h[t](n);function m(){return n[4](n[5])}return{c(){e=R("button"),i.c(),s=G(),r=Se(o),l=G(),w(e,"type","button"),w(e,"class","jse-query-language svelte-1wg043c"),w(e,"title",a=`Select ${n[5].name} as query language`),te(e,"selected",n[5].id===n[0])},m(p,b){j(p,e,b),d[t].m(e,null),A(e,s),A(e,r),A(e,l),c=!0,f||(u=he(e,"click",m),f=!0)},p(p,b){n=p;let y=t;t=g(n),t!==y&&(me(),M(d[y],1,1,()=>{d[y]=null}),pe(),i=d[t],i||(i=d[t]=h[t](n),i.c()),k(i,1),i.m(e,s)),(!c||b&2)&&o!==(o=n[5].name+"")&&Xe(r,o),(!c||b&2&&a!==(a=`Select ${n[5].name} as query language`))&&w(e,"title",a),(!c||b&3)&&te(e,"selected",n[5].id===n[0])},i(p){c||(k(i),c=!0)},o(p){M(i),c=!1},d(p){p&&B(e),d[t].d(),f=!1,u()}}}function FN(n){let e,t,i,s=at(n[1]),o=[];for(let l=0;l<s.length;l+=1)o[l]=s_(i_(n,s,l));const r=l=>M(o[l],1,1,()=>{o[l]=null});return{c(){e=R("div"),t=R("div");for(let l=0;l<o.length;l+=1)o[l].c();w(t,"class","jse-select-query-language-container svelte-1wg043c"),w(e,"class","jse-select-query-language svelte-1wg043c")},m(l,a){j(l,e,a),A(e,t);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(t,null);i=!0},p(l,[a]){if(a&7){s=at(l[1]);let c;for(c=0;c<s.length;c+=1){const f=i_(l,s,c);o[c]?(o[c].p(f,a),k(o[c],1)):(o[c]=s_(f),o[c].c(),k(o[c],1),o[c].m(t,null))}for(me(),c=s.length;c<o.length;c+=1)r(c);pe()}},i(l){if(!i){for(let a=0;a<s.length;a+=1)k(o[a]);i=!0}},o(l){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)M(o[a]);i=!1},d(l){l&&B(e),xn(o,l)}}}function zN(n,e,t){let{queryLanguages:i}=e,{queryLanguageId:s}=e,{onChangeQueryLanguage:o}=e;function r(a){t(0,s=a),o(a)}const l=a=>r(a.id);return n.$$set=a=>{"queryLanguages"in a&&t(1,i=a.queryLanguages),"queryLanguageId"in a&&t(0,s=a.queryLanguageId),"onChangeQueryLanguage"in a&&t(3,o=a.onChangeQueryLanguage)},[s,i,r,o,l]}class VN extends ze{constructor(e){super(),Fe(this,e,zN,FN,Qt,{queryLanguages:1,queryLanguageId:0,onChangeQueryLanguage:3})}}const HN=n=>({}),o_=n=>({});function r_(n){let e,t,i,s,o;return t=new vt({props:{data:n[0]?yy:ky}}),{c(){e=R("button"),se(t.$$.fragment),w(e,"type","button"),w(e,"class","jse-fullscreen svelte-1n68mbh"),w(e,"title","Toggle full screen")},m(r,l){j(r,e,l),ne(t,e,null),i=!0,s||(o=he(e,"click",n[7]),s=!0)},p(r,l){const a={};l&1&&(a.data=r[0]?yy:ky),t.$set(a)},i(r){i||(k(t.$$.fragment,r),i=!0)},o(r){M(t.$$.fragment,r),i=!1},d(r){r&&B(e),ie(t),s=!1,o()}}}function WN(n){let e,t,i,s,o,r,l,a,c,f,u;const h=n[6].actions,d=jt(h,n,n[5],o_);let g=n[2]&&r_(n);return a=new vt({props:{data:pf}}),{c(){e=R("div"),t=R("div"),i=Se(n[1]),s=G(),d&&d.c(),o=G(),g&&g.c(),r=G(),l=R("button"),se(a.$$.fragment),w(t,"class","jse-title svelte-1n68mbh"),w(l,"type","button"),w(l,"class","jse-close svelte-1n68mbh"),w(e,"class","jse-header svelte-1n68mbh")},m(m,p){j(m,e,p),A(e,t),A(t,i),A(e,s),d&&d.m(e,null),A(e,o),g&&g.m(e,null),A(e,r),A(e,l),ne(a,l,null),c=!0,f||(u=he(l,"click",n[8]),f=!0)},p(m,[p]){(!c||p&2)&&Xe(i,m[1]),d&&d.p&&(!c||p&32)&&zt(d,h,m,m[5],c?Ft(h,m[5],p,HN):Vt(m[5]),o_),m[2]?g?(g.p(m,p),p&4&&k(g,1)):(g=r_(m),g.c(),k(g,1),g.m(e,r)):g&&(me(),M(g,1,1,()=>{g=null}),pe())},i(m){c||(k(d,m),k(g),k(a.$$.fragment,m),c=!0)},o(m){M(d,m),M(g),M(a.$$.fragment,m),c=!1},d(m){m&&B(e),d&&d.d(m),g&&g.d(),ie(a),f=!1,u()}}}function qN(n,e,t){let{$$slots:i={},$$scope:s}=e,{title:o="Modal"}=e,{fullScreenButton:r=!1}=e,{fullscreen:l=!1}=e,{onClose:a=void 0}=e;const{close:c}=jn("simple-modal"),f=()=>t(0,l=!l),u=()=>{a?a():c()};return n.$$set=h=>{"title"in h&&t(1,o=h.title),"fullScreenButton"in h&&t(2,r=h.fullScreenButton),"fullscreen"in h&&t(0,l=h.fullscreen),"onClose"in h&&t(3,a=h.onClose),"$$scope"in h&&t(5,s=h.$$scope)},[l,o,r,a,c,s,i,f,u]}class _g extends ze{constructor(e){super(),Fe(this,e,qN,WN,ft,{title:1,fullScreenButton:2,fullscreen:0,onClose:3})}}function UN(n){let e,t,i,s,o;return t=new vt({props:{data:i9}}),{c(){e=R("button"),se(t.$$.fragment),w(e,"slot","actions"),w(e,"type","button"),w(e,"class","jse-config svelte-zdpca7"),w(e,"title","Select a query language"),te(e,"hide",n[1].length<=1)},m(r,l){j(r,e,l),ne(t,e,null),n[7](e),i=!0,s||(o=he(e,"click",n[4]),s=!0)},p(r,l){(!i||l&2)&&te(e,"hide",r[1].length<=1)},i(r){i||(k(t.$$.fragment,r),i=!0)},o(r){M(t.$$.fragment,r),i=!1},d(r){r&&B(e),ie(t),n[7](null),s=!1,o()}}}function JN(n){let e,t,i;function s(r){n[8](r)}let o={title:"Transform",fullScreenButton:!0,onClose:n[3],$$slots:{actions:[UN]},$$scope:{ctx:n}};return n[0]!==void 0&&(o.fullscreen=n[0]),e=new _g({props:o}),it.push(()=>Jn(e,"fullscreen",s)),{c(){se(e.$$.fragment)},m(r,l){ne(e,r,l),i=!0},p(r,[l]){const a={};l&4102&&(a.$$scope={dirty:l,ctx:r}),!t&&l&1&&(t=!0,a.fullscreen=r[0],Un(()=>t=!1)),e.$set(a)},i(r){i||(k(e.$$.fragment,r),i=!0)},o(r){M(e.$$.fragment,r),i=!1},d(r){ie(e,r)}}}function KN(n,e,t){let{queryLanguages:i}=e,{queryLanguageId:s}=e,{onChangeQueryLanguage:o}=e,{fullscreen:r}=e,l,a;const{close:c}=jn("simple-modal"),{openAbsolutePopup:f,closeAbsolutePopup:u}=jn("absolute-popup");function h(){a=f(VN,{queryLanguages:i,queryLanguageId:s,onChangeQueryLanguage:p=>{u(a),o(p)}},{offsetTop:-2,offsetLeft:0,anchor:l,closeOnOuterClick:!0})}function d(m){it[m?"unshift":"push"](()=>{l=m,t(2,l)})}function g(m){r=m,t(0,r)}return n.$$set=m=>{"queryLanguages"in m&&t(1,i=m.queryLanguages),"queryLanguageId"in m&&t(5,s=m.queryLanguageId),"onChangeQueryLanguage"in m&&t(6,o=m.onChangeQueryLanguage),"fullscreen"in m&&t(0,r=m.fullscreen)},[r,i,l,c,h,s,o,d,g]}class YN extends ze{constructor(e){super(),Fe(this,e,KN,JN,ft,{queryLanguages:1,queryLanguageId:5,onChangeQueryLanguage:6,fullscreen:0})}}const am=Fn("jsoneditor:AutoScrollHandler");function XN(n){am("createAutoScrollHandler",n);let e,t;function i(c){return c<20?RO:c<50?DO:LO}function s(){if(n){const c=(e||0)*(e2/1e3);n.scrollTop+=c}}function o(c){(!t||c!==e)&&(r(),am("startAutoScroll",c),e=c,t=setInterval(s,e2))}function r(){t&&(am("stopAutoScroll"),clearInterval(t),t=void 0,e=void 0)}function l(c){if(n){const f=c.clientY,{top:u,bottom:h}=n.getBoundingClientRect();if(f<u){const d=i(u-f);o(-d)}else if(f>h){const d=i(f-h);o(d)}else r()}}function a(){r()}return{onDrag:l,onDragEnd:a}}const GN=(n,e,t,i)=>(n/=i/2,n<1?t/2*n*n+e:(n--,-t/2*(n*(n-2)-1)+e)),sM=()=>{let n,e,t,i,s,o,r,l,a,c,f,u,h,d;function g(){return n.scrollTop}function m(C){const _=C.getBoundingClientRect().top,S=n.getBoundingClientRect?n.getBoundingClientRect().top:0;return _-S+t}function p(C){n.scrollTo?n.scrollTo(n.scrollLeft,C):n.scrollTop=C}function b(C){c||(c=C),f=C-c,u=o(f,t,l,a),p(u),d=!0,f<a?requestAnimationFrame(b):y()}function y(){p(t+l),e&&r&&(e.setAttribute("tabindex","-1"),e.focus()),typeof h=="function"&&h(),c=0,d=!1}function v(C,_={}){switch(a=1e3,s=_.offset||0,h=_.callback,o=_.easing||GN,r=_.a11y||!1,typeof _.container){case"object":n=_.container;break;case"string":n=document.querySelector(_.container);break;default:n=window.document.documentElement}switch(t=g(),typeof C){case"number":e=void 0,r=!1,i=t+C;break;case"object":e=C,i=m(e);break;case"string":e=document.querySelector(C),i=m(e);break}switch(l=i-t+s,typeof _.duration){case"number":a=_.duration;break;case"function":a=_.duration(l);break}d?c=0:requestAnimationFrame(b)}return v},QN=1e3,Cu=Fn("jsoneditor:History");function oM(n={}){const e=n.maxItems||QN;let t=[],i=0;function s(){return i<t.length}function o(){return i>0}function r(){return{canUndo:s(),canRedo:o(),length:t.length}}function l(){n.onChange&&n.onChange(r())}function a(h){Cu("add",h),t=[h].concat(t.slice(i)).slice(0,e),i=0,l()}function c(){Cu("clear"),t=[],i=0,l()}function f(){if(s()){const h=t[i];return i+=1,Cu("undo",h),l(),h}}function u(){if(o())return i-=1,Cu("redo",t[i]),l(),t[i]}return{add:a,clear:c,getState:r,undo:f,redo:u}}function pa(n,e){const t=Date.now(),i=n(),s=Date.now();return e(s-t),i}const aa=Fn("validation");function ZN(n){const e={};return n.forEach(t=>{e[Oe(t.path)]=t}),n.forEach(t=>{let i=t.path;for(;i.length>0;){i=_t(i);const s=Oe(i);s in e||(e[s]={isChildError:!0,path:i,message:"Contains invalid data",severity:Ms.warning})}}),e}function rM(n,e,t,i){if(aa("validateJSON"),!e)return[];if(t!==i){const s=t.stringify(n),o=s!==void 0?i.parse(s):void 0;return e(o)}else return e(n)}function $N(n,e,t,i){if(aa("validateText"),n.length>IO)return{validationErrors:[{path:[],message:"Validation turned off: the document is too large",severity:Ms.info}]};if(n.length===0)return null;try{const s=pa(()=>t.parse(n),l=>aa(`validate: parsed json in ${l} ms`));if(!e)return null;const o=t===i?s:pa(()=>i.parse(n),l=>aa(`validate: parsed json with the validationParser in ${l} ms`)),r=pa(()=>e(o),l=>aa(`validate: validated json in ${l} ms`));return Ct(r)?null:{validationErrors:r}}catch(s){const o=pa(()=>eB(n,t),l=>aa(`validate: checked whether repairable in ${l} ms`));return{parseError:ja(n,s.message||s.toString()),isRepairable:o}}}function eB(n,e){if(n.length>NO)return!1;try{return e.parse(oo(n)),!0}catch{return!1}}const Mu=Fn("jsoneditor:FocusTracker");function T0({onMount:n,onDestroy:e,getWindow:t,hasFocus:i,onFocus:s,onBlur:o}){let r,l=!1;function a(){const f=i();f&&(clearTimeout(r),l||(Mu("focus"),s(),l=f))}function c(){l&&(clearTimeout(r),r=setTimeout(()=>{i()||(Mu("blur"),l=!1,o())}))}n(()=>{Mu("mount FocusTracker");const f=t();f&&(f.addEventListener("focusin",a,!0),f.addEventListener("focusout",c,!0))}),e(()=>{Mu("destroy FocusTracker");const f=t();f&&(f.removeEventListener("focusin",a,!0),f.removeEventListener("focusout",c,!0))})}function l_(n,e,t){const i=n.slice();return i[9]=e[t],i}function a_(n){let e,t;return e=new vt({props:{data:n[1]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s&2&&(o.data=i[1]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function c_(n){let e,t;return e=new vt({props:{data:n[9].icon}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s&8&&(o.data=i[9].icon),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function f_(n){let e,t,i=n[9].text+"",s,o,r,l,a,c,f,u=n[9].icon&&c_(n);function h(){return n[7](n[9])}function d(){return n[8](n[9])}return{c(){e=R("button"),u&&u.c(),t=G(),s=Se(i),o=G(),w(e,"type","button"),w(e,"class","jse-button jse-action jse-primary svelte-p1zf9f"),w(e,"title",r=n[9].title),e.disabled=l=n[9].disabled},m(g,m){j(g,e,m),u&&u.m(e,null),A(e,t),A(e,s),A(e,o),a=!0,c||(f=[he(e,"click",h),he(e,"mousedown",d)],c=!0)},p(g,m){n=g,n[9].icon?u?(u.p(n,m),m&8&&k(u,1)):(u=c_(n),u.c(),k(u,1),u.m(e,t)):u&&(me(),M(u,1,1,()=>{u=null}),pe()),(!a||m&8)&&i!==(i=n[9].text+"")&&Xe(s,i),(!a||m&8&&r!==(r=n[9].title))&&w(e,"title",r),(!a||m&8&&l!==(l=n[9].disabled))&&(e.disabled=l)},i(g){a||(k(u),a=!0)},o(g){M(u),a=!1},d(g){g&&B(e),u&&u.d(),c=!1,Et(f)}}}function tB(n){let e,t,i,s,o,r,l,a,c,f,u,h=n[1]&&a_(n),d=at(n[3]),g=[];for(let p=0;p<d.length;p+=1)g[p]=f_(l_(n,d,p));const m=p=>M(g[p],1,1,()=>{g[p]=null});return{c(){e=R("div"),t=R("div"),i=R("div"),h&&h.c(),s=G(),o=Se(n[2]),r=G(),l=R("div");for(let p=0;p<g.length;p+=1)g[p].c();w(i,"class","jse-text-centered"),w(t,"role","button"),w(t,"tabindex","-1"),w(t,"class","jse-text svelte-p1zf9f"),te(t,"jse-clickable",!!n[4]),w(l,"class","jse-actions svelte-p1zf9f"),w(e,"class",a="jse-message jse-"+n[0]+" svelte-p1zf9f")},m(p,b){j(p,e,b),A(e,t),A(t,i),h&&h.m(i,null),A(i,s),A(i,o),A(e,r),A(e,l);for(let y=0;y<g.length;y+=1)g[y]&&g[y].m(l,null);c=!0,f||(u=he(t,"click",n[5]),f=!0)},p(p,[b]){if(p[1]?h?(h.p(p,b),b&2&&k(h,1)):(h=a_(p),h.c(),k(h,1),h.m(i,s)):h&&(me(),M(h,1,1,()=>{h=null}),pe()),(!c||b&4)&&Xe(o,p[2]),(!c||b&16)&&te(t,"jse-clickable",!!p[4]),b&8){d=at(p[3]);let y;for(y=0;y<d.length;y+=1){const v=l_(p,d,y);g[y]?(g[y].p(v,b),k(g[y],1)):(g[y]=f_(v),g[y].c(),k(g[y],1),g[y].m(l,null))}for(me(),y=d.length;y<g.length;y+=1)m(y);pe()}(!c||b&1&&a!==(a="jse-message jse-"+p[0]+" svelte-p1zf9f"))&&w(e,"class",a)},i(p){if(!c){k(h);for(let b=0;b<d.length;b+=1)k(g[b]);c=!0}},o(p){M(h),g=g.filter(Boolean);for(let b=0;b<g.length;b+=1)M(g[b]);c=!1},d(p){p&&B(e),h&&h.d(),xn(g,p),f=!1,u()}}}function nB(n,e,t){let{type:i="success"}=e,{icon:s=void 0}=e,{message:o=void 0}=e,{actions:r=[]}=e,{onClick:l=void 0}=e,{onClose:a=void 0}=e;a&&Ci(a);function c(){l&&l()}const f=h=>{h.onClick&&h.onClick()},u=h=>{h.onMouseDown&&h.onMouseDown()};return n.$$set=h=>{"type"in h&&t(0,i=h.type),"icon"in h&&t(1,s=h.icon),"message"in h&&t(2,o=h.message),"actions"in h&&t(3,r=h.actions),"onClick"in h&&t(4,l=h.onClick),"onClose"in h&&t(6,a=h.onClose)},[i,s,o,r,l,c,a,f,u]}class Ns extends ze{constructor(e){super(),Fe(this,e,nB,tB,ft,{type:0,icon:1,message:2,actions:3,onClick:4,onClose:6})}}function u_(n,e,t){const i=n.slice();return i[8]=e[t],i[10]=t,i}function h_(n){let e,t,i,s;const o=[sB,iB],r=[];function l(a,c){return a[2]||a[3]===1?0:1}return t=l(n),i=r[t]=o[t](n),{c(){e=R("div"),i.c(),w(e,"class","jse-validation-errors-overview svelte-1gq3gfv")},m(a,c){j(a,e,c),r[t].m(e,null),s=!0},p(a,c){let f=t;t=l(a),t===f?r[t].p(a,c):(me(),M(r[f],1,1,()=>{r[f]=null}),pe(),i=r[t],i?i.p(a,c):(i=r[t]=o[t](a),i.c()),k(i,1),i.m(e,null))},i(a){s||(k(i),s=!0)},o(a){M(i),s=!1},d(a){a&&B(e),r[t].d()}}}function iB(n){let e,t,i,s,o,r,l,a,c,f,u,h,d,g,m;return o=new vt({props:{data:Vl}}),u=new vt({props:{data:H4}}),{c(){e=R("table"),t=R("tbody"),i=R("tr"),s=R("td"),se(o.$$.fragment),r=G(),l=R("td"),a=Se(n[3]),c=Se(` validation errors
              `),f=R("div"),se(u.$$.fragment),w(s,"class","jse-validation-error-icon svelte-1gq3gfv"),w(f,"class","jse-validation-errors-expand svelte-1gq3gfv"),w(l,"class","jse-validation-error-count svelte-1gq3gfv"),w(i,"class",h="jse-validation-"+n[6](n[0])+" svelte-1gq3gfv"),w(e,"class","jse-validation-errors-overview-collapsed svelte-1gq3gfv")},m(p,b){j(p,e,b),A(e,t),A(t,i),A(i,s),ne(o,s,null),A(i,r),A(i,l),A(l,a),A(l,c),A(l,f),ne(u,f,null),d=!0,g||(m=he(i,"click",n[5]),g=!0)},p(p,b){(!d||b&8)&&Xe(a,p[3]),(!d||b&1&&h!==(h="jse-validation-"+p[6](p[0])+" svelte-1gq3gfv"))&&w(i,"class",h)},i(p){d||(k(o.$$.fragment,p),k(u.$$.fragment,p),d=!0)},o(p){M(o.$$.fragment,p),M(u.$$.fragment,p),d=!1},d(p){p&&B(e),ie(o),ie(u),g=!1,m()}}}function sB(n){let e,t,i,s,o=at(Yh(n[0],ha)),r=[];for(let c=0;c<o.length;c+=1)r[c]=g_(u_(n,o,c));const l=c=>M(r[c],1,1,()=>{r[c]=null});let a=n[3]>ha&&m_(n);return{c(){e=R("table"),t=R("tbody");for(let c=0;c<r.length;c+=1)r[c].c();i=G(),a&&a.c(),w(e,"class","jse-validation-errors-overview-expanded svelte-1gq3gfv")},m(c,f){j(c,e,f),A(e,t);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(t,null);A(t,i),a&&a.m(t,null),s=!0},p(c,f){if(f&19){o=at(Yh(c[0],ha));let u;for(u=0;u<o.length;u+=1){const h=u_(c,o,u);r[u]?(r[u].p(h,f),k(r[u],1)):(r[u]=g_(h),r[u].c(),k(r[u],1),r[u].m(t,i))}for(me(),u=o.length;u<r.length;u+=1)l(u);pe()}c[3]>ha?a?a.p(c,f):(a=m_(c),a.c(),a.m(t,null)):a&&(a.d(1),a=null)},i(c){if(!s){for(let f=0;f<o.length;f+=1)k(r[f]);s=!0}},o(c){r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)M(r[f]);s=!1},d(c){c&&B(e),xn(r,c),a&&a.d()}}}function d_(n){let e,t,i,s,o;return t=new vt({props:{data:r9}}),{c(){e=R("button"),se(t.$$.fragment),w(e,"type","button"),w(e,"class","jse-validation-errors-collapse svelte-1gq3gfv"),w(e,"title","Collapse validation errors")},m(r,l){j(r,e,l),ne(t,e,null),i=!0,s||(o=he(e,"click",Ps(n[4])),s=!0)},p:ge,i(r){i||(k(t.$$.fragment,r),i=!0)},o(r){M(t.$$.fragment,r),i=!1},d(r){r&&B(e),ie(t),s=!1,o()}}}function g_(n){let e,t,i,s,o,r=Ii(n[8].path)+"",l,a,c,f=n[8].message+"",u,h,d,g,m,p,b;i=new vt({props:{data:Vl}});let y=n[10]===0&&n[0].length>1&&d_(n);function v(){return n[7](n[8])}return{c(){e=R("tr"),t=R("td"),se(i.$$.fragment),s=G(),o=R("td"),l=Se(r),a=G(),c=R("td"),u=Se(f),h=G(),d=R("td"),y&&y.c(),w(t,"class","jse-validation-error-icon svelte-1gq3gfv"),w(o,"class","jse-validation-error-path svelte-1gq3gfv"),w(c,"class","jse-validation-error-message svelte-1gq3gfv"),w(d,"class","jse-validation-error-action svelte-1gq3gfv"),w(e,"class",g="jse-validation-"+n[8].severity+" svelte-1gq3gfv")},m(C,_){j(C,e,_),A(e,t),ne(i,t,null),A(e,s),A(e,o),A(o,l),A(e,a),A(e,c),A(c,u),A(e,h),A(e,d),y&&y.m(d,null),m=!0,p||(b=he(e,"click",v),p=!0)},p(C,_){n=C,(!m||_&1)&&r!==(r=Ii(n[8].path)+"")&&Xe(l,r),(!m||_&1)&&f!==(f=n[8].message+"")&&Xe(u,f),n[10]===0&&n[0].length>1?y?(y.p(n,_),_&1&&k(y,1)):(y=d_(n),y.c(),k(y,1),y.m(d,null)):y&&(me(),M(y,1,1,()=>{y=null}),pe()),(!m||_&1&&g!==(g="jse-validation-"+n[8].severity+" svelte-1gq3gfv"))&&w(e,"class",g)},i(C){m||(k(i.$$.fragment,C),k(y),m=!0)},o(C){M(i.$$.fragment,C),M(y),m=!1},d(C){C&&B(e),ie(i),y&&y.d(),p=!1,b()}}}function m_(n){let e,t,i,s,o,r,l,a=n[3]-ha+"",c,f,u,h;return{c(){e=R("tr"),t=R("td"),i=G(),s=R("td"),o=G(),r=R("td"),l=Se("(and "),c=Se(a),f=Se(" more errors)"),u=G(),h=R("td"),w(t,"class","svelte-1gq3gfv"),w(s,"class","svelte-1gq3gfv"),w(r,"class","svelte-1gq3gfv"),w(h,"class","svelte-1gq3gfv"),w(e,"class","jse-validation-error svelte-1gq3gfv")},m(d,g){j(d,e,g),A(e,t),A(e,i),A(e,s),A(e,o),A(e,r),A(r,l),A(r,c),A(r,f),A(e,u),A(e,h)},p(d,g){g&8&&a!==(a=d[3]-ha+"")&&Xe(c,a)},d(d){d&&B(e)}}}function oB(n){let e=!Ct(n[0]),t,i,s=e&&h_(n);return{c(){s&&s.c(),t=bt()},m(o,r){s&&s.m(o,r),j(o,t,r),i=!0},p(o,[r]){r&1&&(e=!Ct(o[0])),e?s?(s.p(o,r),r&1&&k(s,1)):(s=h_(o),s.c(),k(s,1),s.m(t.parentNode,t)):s&&(me(),M(s,1,1,()=>{s=null}),pe())},i(o){i||(k(s),i=!0)},o(o){M(s),i=!1},d(o){o&&B(t),s&&s.d(o)}}}function rB(n,e,t){let i,{validationErrors:s}=e,{selectError:o}=e,r=!0;function l(){t(2,r=!1)}function a(){t(2,r=!0)}function c(u){return[Ms.error,Ms.warning,Ms.info].find(d=>u.some(g=>g.severity===d))}const f=u=>{setTimeout(()=>o(u))};return n.$$set=u=>{"validationErrors"in u&&t(0,s=u.validationErrors),"selectError"in u&&t(1,o=u.selectError)},n.$$.update=()=>{n.$$.dirty&1&&t(3,i=s.length)},[s,o,r,i,l,a,c,f]}class E0 extends ze{constructor(e){super(),Fe(this,e,rB,oB,ft,{validationErrors:0,selectError:1})}}let ca=[];function p_(n){if(n.key==="Escape"){const e=mt(ca);e&&e()}}function Zf(n,e){return Ct(ca)&&window.addEventListener("keydown",p_),ca.push(e),{destroy:()=>{ca=ca.filter(t=>t!==e),Ct(ca)&&window.removeEventListener("keydown",p_)}}}function lB(n){let e,t,i,s,o,r,l,a,c,f,u,h,d,g,m,p,b,y,v,C,_,S,x,D;return t=new _g({props:{title:"Copying and pasting"}}),{c(){e=R("div"),se(t.$$.fragment),i=G(),s=R("div"),o=R("div"),o.textContent="These actions are unavailable via the menu. Please use:",r=G(),l=R("div"),a=R("div"),c=R("div"),c.textContent=`${n[1]}+C`,f=Se(`
        for copy`),u=G(),h=R("div"),d=R("div"),d.textContent=`${n[1]}+X`,g=Se(`
        for cut`),m=G(),p=R("div"),b=R("div"),b.textContent=`${n[1]}+V`,y=Se(`
        for paste`),v=G(),C=R("div"),_=R("button"),_.textContent="Close",w(c,"class","jse-key svelte-1nm0t3v"),w(a,"class","jse-shortcut"),w(d,"class","jse-key svelte-1nm0t3v"),w(h,"class","jse-shortcut"),w(b,"class","jse-key svelte-1nm0t3v"),w(p,"class","jse-shortcut"),w(l,"class","jse-shortcuts svelte-1nm0t3v"),w(_,"type","button"),w(_,"class","jse-primary svelte-1nm0t3v"),w(C,"class","jse-actions svelte-1nm0t3v"),w(s,"class","jse-modal-contents svelte-1nm0t3v"),w(e,"class","jse-modal jse-copy-paste svelte-1nm0t3v")},m(P,E){j(P,e,E),ne(t,e,null),A(e,i),A(e,s),A(s,o),A(s,r),A(s,l),A(l,a),A(a,c),A(a,f),A(l,u),A(l,h),A(h,d),A(h,g),A(l,m),A(l,p),A(p,b),A(p,y),A(s,v),A(s,C),A(C,_),S=!0,x||(D=[he(_,"click",n[2]),En(Zf.call(null,e,n[3]))],x=!0)},p:ge,i(P){S||(k(t.$$.fragment,P),S=!0)},o(P){M(t.$$.fragment,P),S=!1},d(P){P&&B(e),ie(t),x=!1,Et(D)}}}function aB(n){const{close:e}=jn("simple-modal"),t=y0()?"â":"Ctrl";return[e,t,()=>e(),()=>e()]}class lM extends ze{constructor(e){super(),Fe(this,e,aB,lB,ft,{})}}function aM(n){return n?n.type==="space"||n.space===!0:!1}function wg(n){return n?n.type==="separator"||n.separator===!0:!1}function cB(n){return n?n.type==="label"&&typeof n.text=="string":!1}function $f(n){return n?typeof n.onClick=="function":!1}function R0(n){return n?n.type==="dropdown-button"&&$f(n.main)&&Array.isArray(n.items):!1}function fB(n){return n?n.type==="row"&&Array.isArray(n.items):!1}function uB(n){return n?n.type==="column"&&Array.isArray(n.items):!1}function b_(n){return Ut(n)&&Ut(n.parseError)}function hB(n){return Ut(n)&&Array.isArray(n.validationErrors)}function dB(n){return Ut(n)&&Array.isArray(n.path)&&typeof n.message=="string"&&"severity"in n}function gB(n){return Ut(n)&&dB(n)&&typeof n.isChildError=="boolean"}function cM(n){return Ut(n)&&typeof n.action=="function"&&Ut(n.props)}const mB=n=>({}),y_=n=>({});function __(n,e,t){const i=n.slice();return i[3]=e[t],i}const pB=n=>({}),w_=n=>({});function bB(n){let e=C_(n[3])+"",t;return{c(){t=Se(e)},m(i,s){j(i,t,s)},p(i,s){s&1&&e!==(e=C_(i[3])+"")&&Xe(t,e)},i:ge,o:ge,d(i){i&&B(t)}}}function yB(n){let e,t,i,s,o,r,l,a,c=n[3].icon&&v_(n),f=n[3].text&&k_(n);return{c(){e=R("button"),c&&c.c(),t=G(),f&&f.c(),w(e,"type","button"),w(e,"class",i="jse-button "+n[3].className+" svelte-7deygj"),w(e,"title",s=n[3].title),e.disabled=o=n[3].disabled||!1},m(u,h){j(u,e,h),c&&c.m(e,null),A(e,t),f&&f.m(e,null),r=!0,l||(a=he(e,"click",function(){Kn(n[3].onClick)&&n[3].onClick.apply(this,arguments)}),l=!0)},p(u,h){n=u,n[3].icon?c?(c.p(n,h),h&1&&k(c,1)):(c=v_(n),c.c(),k(c,1),c.m(e,t)):c&&(me(),M(c,1,1,()=>{c=null}),pe()),n[3].text?f?f.p(n,h):(f=k_(n),f.c(),f.m(e,null)):f&&(f.d(1),f=null),(!r||h&1&&i!==(i="jse-button "+n[3].className+" svelte-7deygj"))&&w(e,"class",i),(!r||h&1&&s!==(s=n[3].title))&&w(e,"title",s),(!r||h&1&&o!==(o=n[3].disabled||!1))&&(e.disabled=o)},i(u){r||(k(c),r=!0)},o(u){M(c),r=!1},d(u){u&&B(e),c&&c.d(),f&&f.d(),l=!1,a()}}}function _B(n){let e;return{c(){e=R("div"),w(e,"class","jse-space svelte-7deygj")},m(t,i){j(t,e,i)},p:ge,i:ge,o:ge,d(t){t&&B(e)}}}function wB(n){let e;return{c(){e=R("div"),w(e,"class","jse-separator svelte-7deygj")},m(t,i){j(t,e,i)},p:ge,i:ge,o:ge,d(t){t&&B(e)}}}function v_(n){let e,t;return e=new vt({props:{data:n[3].icon}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s&1&&(o.data=i[3].icon),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function k_(n){let e=n[3].text+"",t;return{c(){t=Se(e)},m(i,s){j(i,t,s)},p(i,s){s&1&&e!==(e=i[3].text+"")&&Xe(t,e)},d(i){i&&B(t)}}}function S_(n){let e,t,i,s,o,r,l;const a=[wB,_B,yB,bB],c=[];function f(u,h){return h&1&&(e=null),h&1&&(t=null),h&1&&(i=null),e==null&&(e=!!wg(u[3])),e?0:(t==null&&(t=!!aM(u[3])),t?1:(i==null&&(i=!!$f(u[3])),i?2:3))}return s=f(n,-1),o=c[s]=a[s](n),{c(){o.c(),r=bt()},m(u,h){c[s].m(u,h),j(u,r,h),l=!0},p(u,h){let d=s;s=f(u,h),s===d?c[s].p(u,h):(me(),M(c[d],1,1,()=>{c[d]=null}),pe(),o=c[s],o?o.p(u,h):(o=c[s]=a[s](u),o.c()),k(o,1),o.m(r.parentNode,r))},i(u){l||(k(o),l=!0)},o(u){M(o),l=!1},d(u){u&&B(r),c[s].d(u)}}}function vB(n){let e,t,i,s;const o=n[2].left,r=jt(o,n,n[1],w_);let l=at(n[0]),a=[];for(let h=0;h<l.length;h+=1)a[h]=S_(__(n,l,h));const c=h=>M(a[h],1,1,()=>{a[h]=null}),f=n[2].right,u=jt(f,n,n[1],y_);return{c(){e=R("div"),r&&r.c(),t=G();for(let h=0;h<a.length;h+=1)a[h].c();i=G(),u&&u.c(),w(e,"class","jse-menu svelte-7deygj")},m(h,d){j(h,e,d),r&&r.m(e,null),A(e,t);for(let g=0;g<a.length;g+=1)a[g]&&a[g].m(e,null);A(e,i),u&&u.m(e,null),s=!0},p(h,[d]){if(r&&r.p&&(!s||d&2)&&zt(r,o,h,h[1],s?Ft(o,h[1],d,pB):Vt(h[1]),w_),d&1){l=at(h[0]);let g;for(g=0;g<l.length;g+=1){const m=__(h,l,g);a[g]?(a[g].p(m,d),k(a[g],1)):(a[g]=S_(m),a[g].c(),k(a[g],1),a[g].m(e,i))}for(me(),g=l.length;g<a.length;g+=1)c(g);pe()}u&&u.p&&(!s||d&2)&&zt(u,f,h,h[1],s?Ft(f,h[1],d,mB):Vt(h[1]),y_)},i(h){if(!s){k(r,h);for(let d=0;d<l.length;d+=1)k(a[d]);k(u,h),s=!0}},o(h){M(r,h),a=a.filter(Boolean);for(let d=0;d<a.length;d+=1)M(a[d]);M(u,h),s=!1},d(h){h&&B(e),r&&r.d(h),xn(a,h),u&&u.d(h)}}}function C_(n){return console.error("Unknown type of menu item",n),"???"}function kB(n,e,t){let{$$slots:i={},$$scope:s}=e,{items:o=[]}=e;return n.$$set=r=>{"items"in r&&t(0,o=r.items),"$$scope"in r&&t(1,s=r.$$scope)},[o,s,i]}class vg extends ze{constructor(e){super(),Fe(this,e,kB,vB,ft,{items:0})}}function SB(n){let e;return{c(){e=R("div"),e.textContent="Repair invalid JSON, then click apply",w(e,"slot","left"),w(e,"class","jse-info svelte-1d84pok")},m(t,i){j(t,e,i)},p:ge,d(t){t&&B(e)}}}function CB(n){let e,t;return e=new Ns({props:{type:"success",message:"JSON is valid now and can be parsed.",actions:n[5]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s&32&&(o.actions=i[5]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function MB(n){let e,t;return e=new Ns({props:{type:"error",icon:Vl,message:`Cannot parse JSON: ${n[2].message}`,actions:n[6]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s&4&&(o.message=`Cannot parse JSON: ${i[2].message}`),s&64&&(o.actions=i[6]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function xB(n){let e,t,i,s,o,r,l,a,c,f;t=new vg({props:{items:n[4],$$slots:{left:[SB]},$$scope:{ctx:n}}});const u=[MB,CB],h=[];function d(g,m){return g[2]?0:1}return s=d(n),o=h[s]=u[s](n),{c(){e=R("div"),se(t.$$.fragment),i=G(),o.c(),r=G(),l=R("textarea"),l.readOnly=n[1],w(l,"class","jse-json-text svelte-1d84pok"),w(l,"autocomplete","off"),w(l,"autocapitalize","off"),w(l,"spellcheck","false"),l.value=n[0],w(e,"class","jse-json-repair-component svelte-1d84pok")},m(g,m){j(g,e,m),ne(t,e,null),A(e,i),h[s].m(e,null),A(e,r),A(e,l),n[16](l),a=!0,c||(f=he(l,"input",n[7]),c=!0)},p(g,[m]){const p={};m&16&&(p.items=g[4]),m&8388608&&(p.$$scope={dirty:m,ctx:g}),t.$set(p);let b=s;s=d(g),s===b?h[s].p(g,m):(me(),M(h[b],1,1,()=>{h[b]=null}),pe(),o=h[s],o?o.p(g,m):(o=h[s]=u[s](g),o.c()),k(o,1),o.m(e,r)),(!a||m&2)&&(l.readOnly=g[1]),(!a||m&1)&&(l.value=g[0])},i(g){a||(k(t.$$.fragment,g),k(o),a=!0)},o(g){M(t.$$.fragment,g),M(o),a=!1},d(g){g&&B(e),ie(t),h[s].d(),n[16](null),c=!1,f()}}}function AB(n,e,t){let i,s,o,r,l,a,{text:c=""}=e,{readOnly:f=!1}=e,{onParse:u}=e,{onRepair:h}=e,{onChange:d=null}=e,{onApply:g}=e,{onCancel:m}=e;const p=Fn("jsoneditor:JSONRepair");let b;function y(E){try{return u(E),null}catch(O){return ja(E,O.message)}}function v(E){try{return h(E),!0}catch{return!1}}function C(){if(b&&i){const E=i.position!=null?i.position:0;b.setSelectionRange(E,E),b.focus()}}function _(E){p("handleChange");const O=E.target.value;c!==O&&(t(0,c=O),d&&d(c))}function S(){g(c)}function x(){try{t(0,c=h(c)),d&&d(c)}catch{}}let D;function P(E){it[E?"unshift":"push"](()=>{b=E,t(3,b)})}return n.$$set=E=>{"text"in E&&t(0,c=E.text),"readOnly"in E&&t(1,f=E.readOnly),"onParse"in E&&t(8,u=E.onParse),"onRepair"in E&&t(9,h=E.onRepair),"onChange"in E&&t(10,d=E.onChange),"onApply"in E&&t(11,g=E.onApply),"onCancel"in E&&t(12,m=E.onCancel)},n.$$.update=()=>{n.$$.dirty&1&&t(2,i=y(c)),n.$$.dirty&1&&t(15,s=v(c)),n.$$.dirty&4&&p("error",i),n.$$.dirty&4096&&t(4,D=[{type:"space"},{type:"button",icon:pf,title:"Cancel repair",className:"jse-cancel",onClick:m}]),n.$$.dirty&57344&&t(6,l=s?[o,r]:[o]),n.$$.dirty&2&&t(5,a=[{icon:bf,text:"Apply",title:"Apply fixed JSON",disabled:f,onClick:S}])},t(13,o={icon:l9,text:"Show me",title:"Scroll to the error location",onClick:C}),t(14,r={icon:hg,text:"Auto repair",title:"Automatically repair JSON",onClick:x}),[c,f,i,b,D,a,l,_,u,h,d,g,m,o,r,s,P]}class OB extends ze{constructor(e){super(),Fe(this,e,AB,xB,ft,{text:0,readOnly:1,onParse:8,onRepair:9,onChange:10,onApply:11,onCancel:12})}}function PB(n){let e,t,i,s,o,r;function l(c){n[7](c)}let a={onParse:n[1],onRepair:n[2],onApply:n[4],onCancel:n[5]};return n[0]!==void 0&&(a.text=n[0]),t=new OB({props:a}),it.push(()=>Jn(t,"text",l)),{c(){e=R("div"),se(t.$$.fragment),w(e,"class","jse-modal jse-repair svelte-rn18r0")},m(c,f){j(c,e,f),ne(t,e,null),s=!0,o||(r=En(Zf.call(null,e,n[3])),o=!0)},p(c,[f]){const u={};f&2&&(u.onParse=c[1]),f&4&&(u.onRepair=c[2]),!i&&f&1&&(i=!0,u.text=c[0],Un(()=>i=!1)),t.$set(u)},i(c){s||(k(t.$$.fragment,c),s=!0)},o(c){M(t.$$.fragment,c),s=!1},d(c){c&&B(e),ie(t),o=!1,r()}}}function TB(n,e,t){let{text:i}=e,{onParse:s}=e,{onRepair:o}=e,{onApply:r}=e;const{close:l}=jn("simple-modal");function a(u){l(),r(u)}function c(){l()}function f(u){i=u,t(0,i)}return n.$$set=u=>{"text"in u&&t(0,i=u.text),"onParse"in u&&t(1,s=u.onParse),"onRepair"in u&&t(2,o=u.onRepair),"onApply"in u&&t(6,r=u.onApply)},[i,s,o,l,a,c,r,f]}class fM extends ze{constructor(e){super(),Fe(this,e,TB,PB,ft,{text:0,onParse:1,onRepair:2,onApply:6})}}function M_(n,e,t){const i=n.slice();return i[13]=e[t],i}function x_(n){let e,t,i=n[13].start+"",s,o,r=n[13].end+"",l,a,c,f;function u(){return n[12](n[13])}return{c(){e=R("button"),t=Se("show "),s=Se(i),o=Se("-"),l=Se(r),a=G(),w(e,"type","button"),w(e,"class","jse-expand-items svelte-lajpxi")},m(h,d){j(h,e,d),A(e,t),A(e,s),A(e,o),A(e,l),A(e,a),c||(f=he(e,"click",u),c=!0)},p(h,d){n=h,d&16&&i!==(i=n[13].start+"")&&Xe(s,i),d&16&&r!==(r=n[13].end+"")&&Xe(l,r)},d(h){h&&B(e),c=!1,f()}}}function EB(n){let e,t,i,s,o,r,l,a,c,f,u=at(n[4]),h=[];for(let d=0;d<u.length;d+=1)h[d]=x_(M_(n,u,d));return{c(){e=R("div"),t=R("div"),i=R("div"),s=Se("Items "),o=Se(n[3]),r=Se("-"),l=Se(n[2]),a=G();for(let d=0;d<h.length;d+=1)h[d].c();w(i,"class","jse-text svelte-lajpxi"),w(e,"role","none"),w(e,"class","jse-collapsed-items svelte-lajpxi"),te(e,"jse-selected",n[5]),fi(e,"--level",n[0].length+2)},m(d,g){j(d,e,g),A(e,t),A(t,i),A(i,s),A(i,o),A(i,r),A(i,l),A(t,a);for(let m=0;m<h.length;m+=1)h[m]&&h[m].m(t,null);c||(f=he(e,"mousemove",RB),c=!0)},p(d,[g]){if(g&8&&Xe(o,d[3]),g&4&&Xe(l,d[2]),g&19){u=at(d[4]);let m;for(m=0;m<u.length;m+=1){const p=M_(d,u,m);h[m]?h[m].p(p,g):(h[m]=x_(p),h[m].c(),h[m].m(t,null))}for(;m<h.length;m+=1)h[m].d(1);h.length=u.length}g&32&&te(e,"jse-selected",d[5]),g&1&&fi(e,"--level",d[0].length+2)},i:ge,o:ge,d(d){d&&B(e),xn(h,d),c=!1,f()}}}function RB(n){n.stopPropagation()}function DB(n,e,t){let i,s,o,r,l,{visibleSections:a}=e,{sectionIndex:c}=e,{total:f}=e,{path:u}=e,{selection:h}=e,{onExpandSection:d}=e,{context:g}=e;const m=p=>d(u,p);return n.$$set=p=>{"visibleSections"in p&&t(6,a=p.visibleSections),"sectionIndex"in p&&t(7,c=p.sectionIndex),"total"in p&&t(8,f=p.total),"path"in p&&t(0,u=p.path),"selection"in p&&t(9,h=p.selection),"onExpandSection"in p&&t(1,d=p.onExpandSection),"context"in p&&t(10,g=p.context)},n.$$.update=()=>{n.$$.dirty&192&&t(11,i=a[c]),n.$$.dirty&2048&&t(3,s=i.end),n.$$.dirty&448&&t(2,o=a[c+1]?a[c+1].start:f),n.$$.dirty&1545&&t(5,r=mf(g.getJson(),h,u.concat(String(s)))),n.$$.dirty&12&&t(4,l=JL(s,o))},[u,d,o,s,l,r,a,c,f,h,g,i,m]}class LB extends ze{constructor(e){super(),Fe(this,e,DB,EB,ft,{visibleSections:6,sectionIndex:7,total:8,path:0,selection:9,onExpandSection:1,context:10})}}function IB(n){let e,t,i,s,o;return t=new vt({props:{data:ss}}),{c(){e=R("button"),se(t.$$.fragment),w(e,"type","button"),w(e,"class","jse-context-menu-pointer svelte-6k6355"),w(e,"title",G1),te(e,"jse-selected",n[0])},m(r,l){j(r,e,l),ne(t,e,null),i=!0,s||(o=he(e,"click",n[1]),s=!0)},p(r,[l]){(!i||l&1)&&te(e,"jse-selected",r[0])},i(r){i||(k(t.$$.fragment,r),i=!0)},o(r){M(t.$$.fragment,r),i=!1},d(r){r&&B(e),ie(t),s=!1,o()}}}function NB(n,e,t){let{selected:i}=e,{onContextMenu:s}=e;function o(r){let l=r.target;for(;l&&l.nodeName!=="BUTTON";)l=l.parentNode;l&&s({anchor:l,left:0,top:0,width:Eo,height:To,offsetTop:2,offsetLeft:0,showTip:!0})}return n.$$set=r=>{"selected"in r&&t(0,i=r.selected),"onContextMenu"in r&&t(2,s=r.onContextMenu)},[i,o,s]}class zr extends ze{constructor(e){super(),Fe(this,e,NB,IB,ft,{selected:0,onContextMenu:2})}}function BB(n){let e,t,i,s,o,r,l;const a=[zB,FB],c=[];function f(u,h){return u[1]?0:1}return t=f(n),i=c[t]=a[t](n),{c(){e=R("div"),i.c(),w(e,"role","none"),w(e,"data-type","selectable-key"),w(e,"class",s=pn(n[6](n[0]))+" svelte-10xe8tv")},m(u,h){j(u,e,h),c[t].m(e,null),o=!0,r||(l=he(e,"dblclick",n[5]),r=!0)},p(u,h){let d=t;t=f(u),t===d?c[t].p(u,h):(me(),M(c[d],1,1,()=>{c[d]=null}),pe(),i=c[t],i?i.p(u,h):(i=c[t]=a[t](u),i.c()),k(i,1),i.m(e,null)),(!o||h&1&&s!==(s=pn(u[6](u[0]))+" svelte-10xe8tv"))&&w(e,"class",s)},i(u){o||(k(i),o=!0)},o(u){M(i),o=!1},d(u){u&&B(e),c[t].d(),r=!1,l()}}}function jB(n){let e,t;return e=new D4({props:{value:n[2].normalization.escapeValue(n[0]),shortText:!0,onChange:n[7],onCancel:n[8],onFind:n[2].onFind}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s&5&&(o.value=i[2].normalization.escapeValue(i[0])),s&4&&(o.onFind=i[2].onFind),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function FB(n){let e=xl(n[2].normalization.escapeValue(n[0]))+"",t;return{c(){t=Se(e)},m(i,s){j(i,t,s)},p(i,s){s&5&&e!==(e=xl(i[2].normalization.escapeValue(i[0]))+"")&&Xe(t,e)},i:ge,o:ge,d(i){i&&B(t)}}}function zB(n){let e,t;return e=new F4({props:{text:n[2].normalization.escapeValue(n[0]),searchResultItems:n[1]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s&5&&(o.text=i[2].normalization.escapeValue(i[0])),s&2&&(o.searchResultItems=i[1]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function A_(n){let e,t;return e=new zr({props:{selected:!0,onContextMenu:n[2].onContextMenu}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s&4&&(o.onContextMenu=i[2].onContextMenu),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function VB(n){let e,t,i,s,o;const r=[jB,BB],l=[];function a(f,u){return!f[2].readOnly&&f[4]?0:1}e=a(n),t=l[e]=r[e](n);let c=!n[2].readOnly&&n[3]&&!n[4]&&A_(n);return{c(){t.c(),i=G(),c&&c.c(),s=bt()},m(f,u){l[e].m(f,u),j(f,i,u),c&&c.m(f,u),j(f,s,u),o=!0},p(f,[u]){let h=e;e=a(f),e===h?l[e].p(f,u):(me(),M(l[h],1,1,()=>{l[h]=null}),pe(),t=l[e],t?t.p(f,u):(t=l[e]=r[e](f),t.c()),k(t,1),t.m(i.parentNode,i)),!f[2].readOnly&&f[3]&&!f[4]?c?(c.p(f,u),u&28&&k(c,1)):(c=A_(f),c.c(),k(c,1),c.m(s.parentNode,s)):c&&(me(),M(c,1,1,()=>{c=null}),pe())},i(f){o||(k(t),k(c),o=!0)},o(f){M(t),M(c),o=!1},d(f){f&&(B(i),B(s)),l[e].d(f),c&&c.d(f)}}}function HB(n,e,t){let i,s,{path:o}=e,{key:r}=e,{selection:l}=e,{searchResultItems:a}=e,{onUpdateKey:c}=e,{context:f}=e;function u(m){!s&&!f.readOnly&&(m.preventDefault(),f.onSelect(as(o,!0)))}function h(m){return ho("jse-key",{"jse-empty":m===""})}function d(m,p){const b=c(r,f.normalization.unescapeValue(m)),y=_t(o).concat(b);f.onSelect(p===_r.nextInside?ut(y,!1):as(y,!1)),p!==_r.self&&f.focus()}function g(){f.onSelect(as(o,!1)),f.focus()}return n.$$set=m=>{"path"in m&&t(9,o=m.path),"key"in m&&t(0,r=m.key),"selection"in m&&t(10,l=m.selection),"searchResultItems"in m&&t(1,a=m.searchResultItems),"onUpdateKey"in m&&t(11,c=m.onUpdateKey),"context"in m&&t(2,f=m.context)},n.$$.update=()=>{n.$$.dirty&1536&&t(3,i=l?vn(l)&&yt(l.path,o):!1),n.$$.dirty&1032&&t(4,s=i&&pi(l))},[r,a,f,i,s,u,h,d,g,o,l,c]}class WB extends ze{constructor(e){super(),Fe(this,e,HB,VB,ft,{path:9,key:0,selection:10,searchResultItems:1,onUpdateKey:11,context:2})}}function O_(n,e,t){const i=n.slice();return i[8]=e[t],i}function qB(n){const e=n.slice(),t=e[8].action;return e[11]=t,e}function UB(n){let e=n[8].component,t,i,s=P_(n);return{c(){s.c(),t=bt()},m(o,r){s.m(o,r),j(o,t,r),i=!0},p(o,r){r&1&&ft(e,e=o[8].component)?(me(),M(s,1,1,ge),pe(),s=P_(o),s.c(),k(s,1),s.m(t.parentNode,t)):s.p(o,r)},i(o){i||(k(s),i=!0)},o(o){M(s),i=!1},d(o){o&&B(t),s.d(o)}}}function JB(n){let e=n[8].action,t,i=T_(n);return{c(){i.c(),t=bt()},m(s,o){i.m(s,o),j(s,t,o)},p(s,o){o&1&&ft(e,e=s[8].action)?(i.d(1),i=T_(s),i.c(),i.m(t.parentNode,t)):i.p(s,o)},i:ge,o:ge,d(s){s&&B(t),i.d(s)}}}function P_(n){let e,t,i;const s=[n[8].props];var o=n[8].component;function r(l,a){let c={};for(let f=0;f<s.length;f+=1)c=Ht(c,s[f]);return a!==void 0&&a&1&&(c=Ht(c,ni(s,[vl(l[8].props)]))),{props:c}}return o&&(e=us(o,r(n))),{c(){e&&se(e.$$.fragment),t=bt()},m(l,a){e&&ne(e,l,a),j(l,t,a),i=!0},p(l,a){if(a&1&&o!==(o=l[8].component)){if(e){me();const c=e;M(c.$$.fragment,1,0,()=>{ie(c,1)}),pe()}o?(e=us(o,r(l,a)),se(e.$$.fragment),k(e.$$.fragment,1),ne(e,t.parentNode,t)):e=null}else if(o){const c=a&1?ni(s,[vl(l[8].props)]):{};e.$set(c)}},i(l){i||(e&&k(e.$$.fragment,l),i=!0)},o(l){e&&M(e.$$.fragment,l),i=!1},d(l){l&&B(t),e&&ie(e,l)}}}function T_(n){let e,t,i,s;return{c(){e=R("div"),w(e,"role","button"),w(e,"tabindex","-1"),w(e,"class","jse-value"),w(e,"data-type","selectable-value")},m(o,r){j(o,e,r),i||(s=En(t=n[11].call(null,e,n[8].props)),i=!0)},p(o,r){n=o,t&&Kn(t.update)&&r&1&&t.update.call(null,n[8].props)},d(o){o&&B(e),i=!1,s()}}}function E_(n){let e,t,i,s,o;const r=[JB,UB],l=[];function a(f,u){return u&1&&(e=null),e==null&&(e=!!cM(f[8])),e?0:1}function c(f,u){return u===0?qB(f):f}return t=a(n,-1),i=l[t]=r[t](c(n,t)),{c(){i.c(),s=bt()},m(f,u){l[t].m(f,u),j(f,s,u),o=!0},p(f,u){let h=t;t=a(f,u),t===h?l[t].p(c(f,t),u):(me(),M(l[h],1,1,()=>{l[h]=null}),pe(),i=l[t],i?i.p(c(f,t),u):(i=l[t]=r[t](c(f,t)),i.c()),k(i,1),i.m(s.parentNode,s))},i(f){o||(k(i),o=!0)},o(f){M(i),o=!1},d(f){f&&B(s),l[t].d(f)}}}function KB(n){let e,t,i=at(n[0]),s=[];for(let r=0;r<i.length;r+=1)s[r]=E_(O_(n,i,r));const o=r=>M(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=bt()},m(r,l){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(r,l);j(r,e,l),t=!0},p(r,[l]){if(l&1){i=at(r[0]);let a;for(a=0;a<i.length;a+=1){const c=O_(r,i,a);s[a]?(s[a].p(c,l),k(s[a],1)):(s[a]=E_(c),s[a].c(),k(s[a],1),s[a].m(e.parentNode,e))}for(me(),a=i.length;a<s.length;a+=1)o(a);pe()}},i(r){if(!t){for(let l=0;l<i.length;l+=1)k(s[l]);t=!0}},o(r){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)M(s[l]);t=!1},d(r){r&&B(e),xn(s,r)}}}function YB(n,e,t){let i,s,{path:o}=e,{value:r}=e,{context:l}=e,{enforceString:a}=e,{selection:c}=e,{searchResultItems:f}=e;return n.$$set=u=>{"path"in u&&t(1,o=u.path),"value"in u&&t(2,r=u.value),"context"in u&&t(3,l=u.context),"enforceString"in u&&t(4,a=u.enforceString),"selection"in u&&t(5,c=u.selection),"searchResultItems"in u&&t(6,f=u.searchResultItems)},n.$$.update=()=>{n.$$.dirty&32&&t(7,i=St(c)&&pi(c)),n.$$.dirty&254&&t(0,s=l.onRenderValue({path:o,value:r,readOnly:l.readOnly,enforceString:a,isEditing:i,parser:l.parser,normalization:l.normalization,selection:c,searchResultItems:f,onPatch:l.onPatch,onPasteJson:l.onPasteJson,onSelect:l.onSelect,onFind:l.onFind,findNextInside:l.findNextInside,focus:l.focus}))},[s,o,r,l,a,c,f,i]}let XB=class extends ze{constructor(e){super(),Fe(this,e,YB,KB,ft,{path:1,value:2,context:3,enforceString:4,selection:5,searchResultItems:6})}};const Ln={selecting:!1,selectionAnchor:null,selectionAnchorType:null,selectionFocus:null,dragging:!1};function cm({json:n,documentState:e,deltaY:t,items:i}){if(!e.selection)return{operations:void 0,updatedSelection:null,offset:0};const s=e.selection,o=t<0?GB({json:n,selection:s,deltaY:t,items:i}):QB({json:n,selection:s,deltaY:t,items:i});if(!o||o.offset===0)return{operations:void 0,updatedSelection:null,offset:0};const r=pI(n,s,o),l=_t(Ho(n,s)),a=Be(n,l);if(Array.isArray(a)){const c=ZB({items:i,json:n,selection:s,offset:o.offset});return{operations:r,updatedSelection:c,offset:o.offset}}else return{operations:r,updatedSelection:null,offset:o.offset}}function GB({json:n,items:e,selection:t,deltaY:i}){const s=Ho(n,t),o=e.findIndex(u=>yt(u.path,s)),r=()=>{var u;return(u=e[l-1])==null?void 0:u.height};let l=o,a=0;for(;r()!==void 0&&Math.abs(i)>a+r()/2;)a+=r(),l-=1;const c=e[l].path,f=l-o;return l!==o&&e[l]!==void 0?{beforePath:c,offset:f}:void 0}function QB({json:n,items:e,selection:t,deltaY:i}){var m;const s=Fr(n,t),o=e.findIndex(p=>yt(p.path,s));let r=0,l=o;const a=()=>{var p;return(p=e[l+1])==null?void 0:p.height};for(;a()!==void 0&&Math.abs(i)>r+a()/2;)r+=a(),l+=1;const c=_t(s),f=Be(n,c),h=Array.isArray(f)?l:l+1,d=(m=e[h])==null?void 0:m.path,g=l-o;return d?{beforePath:d,offset:g}:{append:!0,offset:g}}function ZB({items:n,json:e,selection:t,offset:i}){var f,u;const s=Ho(e,t),o=Fr(e,t),r=n.findIndex(h=>yt(h.path,s)),l=n.findIndex(h=>yt(h.path,o)),a=(f=n[r+i])==null?void 0:f.path,c=(u=n[l+i])==null?void 0:u.path;return hi(a,c)}function $B(n,e){if(!n)return;const t={};for(const i of Object.keys(n))e(i,n[i])&&(t[i]=n[i]);return Object.keys(t).length>0?t:void 0}function $i(n,e){return $B(n,t=>Kd(t,e))}function ej(n){let e,t,i,s,o,r,l;return t=new vt({props:{data:Vl}}),{c(){e=R("button"),se(t.$$.fragment),w(e,"type","button"),w(e,"class",i="jse-validation-"+n[0].severity+" svelte-1yy7qpj")},m(a,c){j(a,e,c),ne(t,e,null),o=!0,r||(l=[he(e,"click",function(){Kn(n[1])&&n[1].apply(this,arguments)}),En(s=C0.call(null,e,{text:n[2],...n[3]}))],r=!0)},p(a,[c]){n=a,(!o||c&1&&i!==(i="jse-validation-"+n[0].severity+" svelte-1yy7qpj"))&&w(e,"class",i),s&&Kn(s.update)&&c&4&&s.update.call(null,{text:n[2],...n[3]})},i(a){o||(k(t.$$.fragment,a),o=!0)},o(a){M(t.$$.fragment,a),o=!1},d(a){a&&B(e),ie(t),r=!1,Et(l)}}}function tj(n,e,t){let i;const s=jn("absolute-popup");let{validationError:o}=e,{onExpand:r}=e;return n.$$set=l=>{"validationError"in l&&t(0,o=l.validationError),"onExpand"in l&&t(1,r=l.onExpand)},n.$$.update=()=>{n.$$.dirty&1&&t(2,i=gB(o)&&o.isChildError?"Contains invalid data":o.message)},[o,r,i,s]}class ac extends ze{constructor(e){super(),Fe(this,e,tj,ej,Qt,{validationError:0,onExpand:1})}}const nj=n=>({}),R_=n=>({});function D_(n,e,t){const i=n.slice();return i[52]=e[t],i}const ij=n=>({}),L_=n=>({});function I_(n,e,t){const i=n.slice();return i[46]=e[t],i[48]=t,i}function N_(n,e,t){const i=n.slice();return i[49]=e[t],i}const sj=n=>({}),B_=n=>({});function oj(n){let e,t,i,s,o,r,l=!n[8].readOnly&&n[16]&&n[7]&&(St(n[7])||Wt(n[7]))&&!pi(n[7])&&yt(Ye(n[7]),n[1]),a,c,f;const u=n[33].identifier,h=jt(u,n,n[34],R_);let d=!n[17]&&j_();o=new XB({props:{path:n[1],value:n[0],enforceString:n[13]||!1,selection:n[16]?n[7]:null,searchResultItems:Mp(n[6],n[9]),context:n[8]}});let g=l&&F_(n),m=n[15]&&z_(n),p=!n[17]&&V_(n);return{c(){e=R("div"),t=R("div"),h&&h.c(),i=G(),d&&d.c(),s=G(),se(o.$$.fragment),r=G(),g&&g.c(),a=G(),m&&m.c(),c=G(),p&&p.c(),w(t,"class","jse-contents svelte-6mjnsm"),w(e,"class","jse-contents-outer svelte-6mjnsm")},m(b,y){j(b,e,y),A(e,t),h&&h.m(t,null),A(t,i),d&&d.m(t,null),A(t,s),ne(o,t,null),A(t,r),g&&g.m(t,null),A(e,a),m&&m.m(e,null),A(e,c),p&&p.m(e,null),f=!0},p(b,y){h&&h.p&&(!f||y[1]&8)&&zt(h,u,b,b[34],f?Ft(u,b[34],y,nj):Vt(b[34]),R_),b[17]?d&&(d.d(1),d=null):d||(d=j_(),d.c(),d.m(t,s));const v={};y[0]&2&&(v.path=b[1]),y[0]&1&&(v.value=b[0]),y[0]&8192&&(v.enforceString=b[13]||!1),y[0]&65664&&(v.selection=b[16]?b[7]:null),y[0]&576&&(v.searchResultItems=Mp(b[6],b[9])),y[0]&256&&(v.context=b[8]),o.$set(v),y[0]&65922&&(l=!b[8].readOnly&&b[16]&&b[7]&&(St(b[7])||Wt(b[7]))&&!pi(b[7])&&yt(Ye(b[7]),b[1])),l?g?(g.p(b,y),y[0]&65922&&k(g,1)):(g=F_(b),g.c(),k(g,1),g.m(t,null)):g&&(me(),M(g,1,1,()=>{g=null}),pe()),b[15]?m?(m.p(b,y),y[0]&32768&&k(m,1)):(m=z_(b),m.c(),k(m,1),m.m(e,c)):m&&(me(),M(m,1,1,()=>{m=null}),pe()),b[17]?p&&(p.d(1),p=null):p?p.p(b,y):(p=V_(b),p.c(),p.m(e,null))},i(b){f||(k(h,b),k(o.$$.fragment,b),k(g),k(m),f=!0)},o(b){M(h,b),M(o.$$.fragment,b),M(g),M(m),f=!1},d(b){b&&B(e),h&&h.d(b),d&&d.d(),ie(o),g&&g.d(),m&&m.d(),p&&p.d()}}}function rj(n){let e,t,i,s,o,r,l,a,c,f,u,h=!n[8].readOnly&&n[16]&&n[7]&&(St(n[7])||Wt(n[7]))&&!pi(n[7])&&yt(Ye(n[7]),n[1]),d,g,m,p,b,y,v;const C=[cj,aj],_=[];function S(T,U){return T[12]?0:1}s=S(n),o=_[s]=C[s](n);const x=n[33].identifier,D=jt(x,n,n[34],L_);let P=!n[17]&&H_();function E(T,U){return T[12]?uj:fj}let O=E(n),I=O(n),N=h&&W_(n),F=n[15]&&(!n[12]||!n[15].isChildError)&&q_(n);function z(T,U){if(T[12])return dj;if(!T[17])return hj}let q=z(n),Q=q&&q(n),X=n[12]&&U_(n);return{c(){e=R("div"),t=R("div"),i=R("button"),o.c(),r=G(),D&&D.c(),l=G(),P&&P.c(),a=G(),c=R("div"),f=R("div"),I.c(),u=G(),N&&N.c(),d=G(),F&&F.c(),g=G(),Q&&Q.c(),m=G(),X&&X.c(),p=bt(),w(i,"type","button"),w(i,"class","jse-expand svelte-6mjnsm"),w(i,"title","Expand or collapse this object (Ctrl+Click to expand/collapse recursively)"),w(f,"class","jse-meta-inner svelte-6mjnsm"),w(c,"class","jse-meta svelte-6mjnsm"),w(c,"data-type","selectable-value"),w(t,"class","jse-header svelte-6mjnsm"),w(e,"class","jse-header-outer svelte-6mjnsm")},m(T,U){j(T,e,U),A(e,t),A(t,i),_[s].m(i,null),A(t,r),D&&D.m(t,null),A(t,l),P&&P.m(t,null),A(t,a),A(t,c),A(c,f),I.m(f,null),A(t,u),N&&N.m(t,null),A(e,d),F&&F.m(e,null),A(e,g),Q&&Q.m(e,null),j(T,m,U),X&&X.m(T,U),j(T,p,U),b=!0,y||(v=he(i,"click",n[20]),y=!0)},p(T,U){let Y=s;s=S(T),s!==Y&&(me(),M(_[Y],1,1,()=>{_[Y]=null}),pe(),o=_[s],o||(o=_[s]=C[s](T),o.c()),k(o,1),o.m(i,null)),D&&D.p&&(!b||U[1]&8)&&zt(D,x,T,T[34],b?Ft(x,T[34],U,ij):Vt(T[34]),L_),T[17]?P&&(P.d(1),P=null):P||(P=H_(),P.c(),P.m(t,a)),O===(O=E(T))&&I?I.p(T,U):(I.d(1),I=O(T),I&&(I.c(),I.m(f,null))),U[0]&65922&&(h=!T[8].readOnly&&T[16]&&T[7]&&(St(T[7])||Wt(T[7]))&&!pi(T[7])&&yt(Ye(T[7]),T[1])),h?N?(N.p(T,U),U[0]&65922&&k(N,1)):(N=W_(T),N.c(),k(N,1),N.m(t,null)):N&&(me(),M(N,1,1,()=>{N=null}),pe()),T[15]&&(!T[12]||!T[15].isChildError)?F?(F.p(T,U),U[0]&36864&&k(F,1)):(F=q_(T),F.c(),k(F,1),F.m(e,g)):F&&(me(),M(F,1,1,()=>{F=null}),pe()),q===(q=z(T))&&Q?Q.p(T,U):(Q&&Q.d(1),Q=q&&q(T),Q&&(Q.c(),Q.m(e,null))),T[12]?X?(X.p(T,U),U[0]&4096&&k(X,1)):(X=U_(T),X.c(),k(X,1),X.m(p.parentNode,p)):X&&(me(),M(X,1,1,()=>{X=null}),pe())},i(T){b||(k(o),k(D,T),k(N),k(F),k(X),b=!0)},o(T){M(o),M(D,T),M(N),M(F),M(X),b=!1},d(T){T&&(B(e),B(m),B(p)),_[s].d(),D&&D.d(T),P&&P.d(),I.d(),N&&N.d(),F&&F.d(),Q&&Q.d(),X&&X.d(T),y=!1,v()}}}function lj(n){let e,t,i,s,o,r,l,a,c,f,u,h=!n[8].readOnly&&n[16]&&n[7]&&(St(n[7])||Wt(n[7]))&&!pi(n[7])&&yt(Ye(n[7]),n[1]),d,g,m,p,b,y,v;const C=[pj,mj],_=[];function S(T,U){return T[12]?0:1}s=S(n),o=_[s]=C[s](n);const x=n[33].identifier,D=jt(x,n,n[34],B_);let P=!n[17]&&X_();function E(T,U){return T[12]?yj:bj}let O=E(n),I=O(n),N=h&&G_(n),F=n[15]&&(!n[12]||!n[15].isChildError)&&Q_(n);function z(T,U){return T[12]?wj:_j}let q=z(n),Q=q(n),X=n[12]&&Z_(n);return{c(){e=R("div"),t=R("div"),i=R("button"),o.c(),r=G(),D&&D.c(),l=G(),P&&P.c(),a=G(),c=R("div"),f=R("div"),I.c(),u=G(),N&&N.c(),d=G(),F&&F.c(),g=G(),Q.c(),m=G(),X&&X.c(),p=bt(),w(i,"type","button"),w(i,"class","jse-expand svelte-6mjnsm"),w(i,"title","Expand or collapse this array (Ctrl+Click to expand/collapse recursively)"),w(f,"class","jse-meta-inner svelte-6mjnsm"),w(f,"data-type","selectable-value"),w(c,"class","jse-meta svelte-6mjnsm"),w(t,"class","jse-header svelte-6mjnsm"),w(e,"class","jse-header-outer svelte-6mjnsm")},m(T,U){j(T,e,U),A(e,t),A(t,i),_[s].m(i,null),A(t,r),D&&D.m(t,null),A(t,l),P&&P.m(t,null),A(t,a),A(t,c),A(c,f),I.m(f,null),A(t,u),N&&N.m(t,null),A(e,d),F&&F.m(e,null),A(e,g),Q.m(e,null),j(T,m,U),X&&X.m(T,U),j(T,p,U),b=!0,y||(v=he(i,"click",n[20]),y=!0)},p(T,U){let Y=s;s=S(T),s!==Y&&(me(),M(_[Y],1,1,()=>{_[Y]=null}),pe(),o=_[s],o||(o=_[s]=C[s](T),o.c()),k(o,1),o.m(i,null)),D&&D.p&&(!b||U[1]&8)&&zt(D,x,T,T[34],b?Ft(x,T[34],U,sj):Vt(T[34]),B_),T[17]?P&&(P.d(1),P=null):P||(P=X_(),P.c(),P.m(t,a)),O===(O=E(T))&&I?I.p(T,U):(I.d(1),I=O(T),I&&(I.c(),I.m(f,null))),U[0]&65922&&(h=!T[8].readOnly&&T[16]&&T[7]&&(St(T[7])||Wt(T[7]))&&!pi(T[7])&&yt(Ye(T[7]),T[1])),h?N?(N.p(T,U),U[0]&65922&&k(N,1)):(N=G_(T),N.c(),k(N,1),N.m(t,null)):N&&(me(),M(N,1,1,()=>{N=null}),pe()),T[15]&&(!T[12]||!T[15].isChildError)?F?(F.p(T,U),U[0]&36864&&k(F,1)):(F=Q_(T),F.c(),k(F,1),F.m(e,g)):F&&(me(),M(F,1,1,()=>{F=null}),pe()),q===(q=z(T))&&Q?Q.p(T,U):(Q.d(1),Q=q(T),Q&&(Q.c(),Q.m(e,null))),T[12]?X?(X.p(T,U),U[0]&4096&&k(X,1)):(X=Z_(T),X.c(),k(X,1),X.m(p.parentNode,p)):X&&(me(),M(X,1,1,()=>{X=null}),pe())},i(T){b||(k(o),k(D,T),k(N),k(F),k(X),b=!0)},o(T){M(o),M(D,T),M(N),M(F),M(X),b=!1},d(T){T&&(B(e),B(m),B(p)),_[s].d(),D&&D.d(T),P&&P.d(),I.d(),N&&N.d(),F&&F.d(),Q.d(),X&&X.d(T),y=!1,v()}}}function j_(n){let e;return{c(){e=R("div"),e.textContent=":",w(e,"class","jse-separator svelte-6mjnsm")},m(t,i){j(t,e,i)},d(t){t&&B(e)}}}function F_(n){let e,t,i;return t=new zr({props:{selected:!0,onContextMenu:n[8].onContextMenu}}),{c(){e=R("div"),se(t.$$.fragment),w(e,"class","jse-context-menu-pointer-anchor svelte-6mjnsm")},m(s,o){j(s,e,o),ne(t,e,null),i=!0},p(s,o){const r={};o[0]&256&&(r.onContextMenu=s[8].onContextMenu),t.$set(r)},i(s){i||(k(t.$$.fragment,s),i=!0)},o(s){M(t.$$.fragment,s),i=!1},d(s){s&&B(e),ie(t)}}}function z_(n){let e,t;return e=new ac({props:{validationError:n[15],onExpand:n[21]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s[0]&32768&&(o.validationError=i[15]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function V_(n){let e,t,i;return{c(){e=R("div"),w(e,"role","none"),w(e,"class","jse-insert-selection-area jse-after svelte-6mjnsm"),w(e,"data-type","insert-selection-area-after")},m(s,o){j(s,e,o),t||(i=he(e,"click",n[29]),t=!0)},p:ge,d(s){s&&B(e),t=!1,i()}}}function aj(n){let e,t;return e=new vt({props:{data:fr}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function cj(n){let e,t;return e=new vt({props:{data:ss}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function H_(n){let e;return{c(){e=R("div"),e.textContent=":",w(e,"class","jse-separator svelte-6mjnsm")},m(t,i){j(t,e,i)},d(t){t&&B(e)}}}function fj(n){let e,t,i,s=Object.keys(n[0]).length+"",o,r,l=Object.keys(n[0]).length===1?"prop":"props",a,c,f,u,h;return{c(){e=R("div"),e.textContent="{",t=G(),i=R("button"),o=Se(s),r=G(),a=Se(l),c=G(),f=R("div"),f.textContent="}",w(e,"class","jse-bracket svelte-6mjnsm"),w(i,"type","button"),w(i,"class","jse-tag svelte-6mjnsm"),w(f,"class","jse-bracket svelte-6mjnsm")},m(d,g){j(d,e,g),j(d,t,g),j(d,i,g),A(i,o),A(i,r),A(i,a),j(d,c,g),j(d,f,g),u||(h=he(i,"click",n[21]),u=!0)},p(d,g){g[0]&1&&s!==(s=Object.keys(d[0]).length+"")&&Xe(o,s),g[0]&1&&l!==(l=Object.keys(d[0]).length===1?"prop":"props")&&Xe(a,l)},d(d){d&&(B(e),B(t),B(i),B(c),B(f)),u=!1,h()}}}function uj(n){let e;return{c(){e=R("div"),e.textContent="{",w(e,"class","jse-bracket jse-expanded svelte-6mjnsm")},m(t,i){j(t,e,i)},p:ge,d(t){t&&B(e)}}}function W_(n){let e,t,i;return t=new zr({props:{selected:!0,onContextMenu:n[8].onContextMenu}}),{c(){e=R("div"),se(t.$$.fragment),w(e,"class","jse-context-menu-pointer-anchor svelte-6mjnsm")},m(s,o){j(s,e,o),ne(t,e,null),i=!0},p(s,o){const r={};o[0]&256&&(r.onContextMenu=s[8].onContextMenu),t.$set(r)},i(s){i||(k(t.$$.fragment,s),i=!0)},o(s){M(t.$$.fragment,s),i=!1},d(s){s&&B(e),ie(t)}}}function q_(n){let e,t;return e=new ac({props:{validationError:n[15],onExpand:n[21]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s[0]&32768&&(o.validationError=i[15]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function hj(n){let e,t,i;return{c(){e=R("div"),w(e,"role","none"),w(e,"class","jse-insert-selection-area jse-after svelte-6mjnsm"),w(e,"data-type","insert-selection-area-after")},m(s,o){j(s,e,o),t||(i=he(e,"click",n[29]),t=!0)},p:ge,d(s){s&&B(e),t=!1,i()}}}function dj(n){let e,t,i;return{c(){e=R("div"),w(e,"role","none"),w(e,"class","jse-insert-selection-area jse-inside svelte-6mjnsm"),w(e,"data-type","insert-selection-area-inside")},m(s,o){j(s,e,o),t||(i=he(e,"click",n[28]),t=!0)},p:ge,d(s){s&&B(e),t=!1,i()}}}function U_(n){let e,t=!n[8].readOnly&&(n[10]===jo||n[16]&&Sn(n[7])),i,s,o,r,l,a,c=t&&J_(n),f=at(n[18](n[1],n[0],n[2],n[3],n[4],n[5],n[6],n[7],n[11])),u=[];for(let g=0;g<f.length;g+=1)u[g]=K_(D_(n,f,g));const h=g=>M(u[g],1,1,()=>{u[g]=null});let d=!n[17]&&Y_(n);return{c(){e=R("div"),c&&c.c(),i=G();for(let g=0;g<u.length;g+=1)u[g].c();s=G(),o=R("div"),r=R("div"),r.innerHTML='<div class="jse-bracket svelte-6mjnsm">}</div>',l=G(),d&&d.c(),w(e,"class","jse-props svelte-6mjnsm"),w(r,"data-type","selectable-value"),w(r,"class","jse-footer svelte-6mjnsm"),w(o,"class","jse-footer-outer svelte-6mjnsm")},m(g,m){j(g,e,m),c&&c.m(e,null),A(e,i);for(let p=0;p<u.length;p+=1)u[p]&&u[p].m(e,null);j(g,s,m),j(g,o,m),A(o,r),A(o,l),d&&d.m(o,null),a=!0},p(g,m){if(m[0]&66944&&(t=!g[8].readOnly&&(g[10]===jo||g[16]&&Sn(g[7]))),t?c?(c.p(g,m),m[0]&66944&&k(c,1)):(c=J_(g),c.c(),k(c,1),c.m(e,i)):c&&(me(),M(c,1,1,()=>{c=null}),pe()),m[0]&38013439){f=at(g[18](g[1],g[0],g[2],g[3],g[4],g[5],g[6],g[7],g[11]));let p;for(p=0;p<f.length;p+=1){const b=D_(g,f,p);u[p]?(u[p].p(b,m),k(u[p],1)):(u[p]=K_(b),u[p].c(),k(u[p],1),u[p].m(e,null))}for(me(),p=f.length;p<u.length;p+=1)h(p);pe()}g[17]?d&&(d.d(1),d=null):d?d.p(g,m):(d=Y_(g),d.c(),d.m(o,null))},i(g){if(!a){k(c);for(let m=0;m<f.length;m+=1)k(u[m]);a=!0}},o(g){M(c),u=u.filter(Boolean);for(let m=0;m<u.length;m+=1)M(u[m]);a=!1},d(g){g&&(B(e),B(s),B(o)),c&&c.d(),xn(u,g),d&&d.d()}}}function J_(n){let e,t,i;return t=new zr({props:{selected:n[16]&&Sn(n[7]),onContextMenu:n[30]}}),{c(){e=R("div"),se(t.$$.fragment),w(e,"class","jse-insert-area jse-inside svelte-6mjnsm"),w(e,"data-type","insert-selection-area-inside"),w(e,"title",X1),te(e,"jse-hovered",n[10]===jo),te(e,"jse-selected",n[16]&&Sn(n[7])),fi(e,"--level",n[1].length+1)},m(s,o){j(s,e,o),ne(t,e,null),i=!0},p(s,o){const r={};o[0]&65664&&(r.selected=s[16]&&Sn(s[7])),t.$set(r),(!i||o[0]&1024)&&te(e,"jse-hovered",s[10]===jo),(!i||o[0]&65664)&&te(e,"jse-selected",s[16]&&Sn(s[7])),o[0]&2&&fi(e,"--level",s[1].length+1)},i(s){i||(k(t.$$.fragment,s),i=!0)},o(s){M(t.$$.fragment,s),i=!1},d(s){s&&B(e),ie(t)}}}function gj(n){let e,t,i,s;return t=new WB({props:{path:n[52].path,key:n[52].key,selection:n[52].selection,searchResultItems:n[52].keySearchResultItemsMap,context:n[8],onUpdateKey:n[22]}}),{c(){e=R("div"),se(t.$$.fragment),i=G(),w(e,"slot","identifier"),w(e,"class","jse-identifier svelte-6mjnsm")},m(o,r){j(o,e,r),ne(t,e,null),A(e,i),s=!0},p(o,r){const l={};r[0]&2303&&(l.path=o[52].path),r[0]&2303&&(l.key=o[52].key),r[0]&2303&&(l.selection=o[52].selection),r[0]&2303&&(l.searchResultItems=o[52].keySearchResultItemsMap),r[0]&256&&(l.context=o[8]),t.$set(l)},i(o){s||(k(t.$$.fragment,o),s=!0)},o(o){M(t.$$.fragment,o),s=!1},d(o){o&&B(e),ie(t)}}}function K_(n){let e,t;return e=new D0({props:{value:n[52].value,path:n[52].path,expandedMap:n[52].expandedMap,enforceStringMap:n[52].enforceStringMap,visibleSectionsMap:n[52].visibleSectionsMap,validationErrorsMap:n[52].validationErrorsMap,searchResultItemsMap:n[52].valueSearchResultItemsMap,selection:n[52].selection,context:n[8],onDragSelectionStart:n[25],$$slots:{identifier:[gj]},$$scope:{ctx:n}}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s[0]&2303&&(o.value=i[52].value),s[0]&2303&&(o.path=i[52].path),s[0]&2303&&(o.expandedMap=i[52].expandedMap),s[0]&2303&&(o.enforceStringMap=i[52].enforceStringMap),s[0]&2303&&(o.visibleSectionsMap=i[52].visibleSectionsMap),s[0]&2303&&(o.validationErrorsMap=i[52].validationErrorsMap),s[0]&2303&&(o.searchResultItemsMap=i[52].valueSearchResultItemsMap),s[0]&2303&&(o.selection=i[52].selection),s[0]&256&&(o.context=i[8]),s[0]&2559|s[1]&8&&(o.$$scope={dirty:s,ctx:i}),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Y_(n){let e,t,i;return{c(){e=R("div"),w(e,"role","none"),w(e,"class","jse-insert-selection-area jse-after svelte-6mjnsm"),w(e,"data-type","insert-selection-area-after")},m(s,o){j(s,e,o),t||(i=he(e,"click",n[29]),t=!0)},p:ge,d(s){s&&B(e),t=!1,i()}}}function mj(n){let e,t;return e=new vt({props:{data:fr}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function pj(n){let e,t;return e=new vt({props:{data:ss}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function X_(n){let e;return{c(){e=R("div"),e.textContent=":",w(e,"class","jse-separator svelte-6mjnsm")},m(t,i){j(t,e,i)},d(t){t&&B(e)}}}function bj(n){let e,t,i,s=n[0].length+"",o,r,l=n[0].length===1?"item":"items",a,c,f,u,h;return{c(){e=R("div"),e.textContent="[",t=G(),i=R("button"),o=Se(s),r=G(),a=Se(l),c=G(),f=R("div"),f.textContent="]",w(e,"class","jse-bracket svelte-6mjnsm"),w(i,"type","button"),w(i,"class","jse-tag svelte-6mjnsm"),w(f,"class","jse-bracket svelte-6mjnsm")},m(d,g){j(d,e,g),j(d,t,g),j(d,i,g),A(i,o),A(i,r),A(i,a),j(d,c,g),j(d,f,g),u||(h=he(i,"click",n[21]),u=!0)},p(d,g){g[0]&1&&s!==(s=d[0].length+"")&&Xe(o,s),g[0]&1&&l!==(l=d[0].length===1?"item":"items")&&Xe(a,l)},d(d){d&&(B(e),B(t),B(i),B(c),B(f)),u=!1,h()}}}function yj(n){let e,t,i,s=n[0].length+"",o,r,l=n[0].length===1?"item":"items",a,c;return{c(){e=R("div"),e.textContent="[",t=G(),i=R("span"),o=Se(s),r=G(),a=Se(l),c=Se(`
              Â `),w(e,"class","jse-bracket svelte-6mjnsm"),w(i,"class","jse-tag jse-expanded svelte-6mjnsm")},m(f,u){j(f,e,u),j(f,t,u),j(f,i,u),A(i,o),A(i,r),A(i,a),j(f,c,u)},p(f,u){u[0]&1&&s!==(s=f[0].length+"")&&Xe(o,s),u[0]&1&&l!==(l=f[0].length===1?"item":"items")&&Xe(a,l)},d(f){f&&(B(e),B(t),B(i),B(c))}}}function G_(n){let e,t,i;return t=new zr({props:{selected:!0,onContextMenu:n[8].onContextMenu}}),{c(){e=R("div"),se(t.$$.fragment),w(e,"class","jse-context-menu-pointer-anchor svelte-6mjnsm")},m(s,o){j(s,e,o),ne(t,e,null),i=!0},p(s,o){const r={};o[0]&256&&(r.onContextMenu=s[8].onContextMenu),t.$set(r)},i(s){i||(k(t.$$.fragment,s),i=!0)},o(s){M(t.$$.fragment,s),i=!1},d(s){s&&B(e),ie(t)}}}function Q_(n){let e,t;return e=new ac({props:{validationError:n[15],onExpand:n[21]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s[0]&32768&&(o.validationError=i[15]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function _j(n){let e,t,i;return{c(){e=R("div"),w(e,"role","none"),w(e,"class","jse-insert-selection-area jse-after svelte-6mjnsm"),w(e,"data-type","insert-selection-area-after")},m(s,o){j(s,e,o),t||(i=he(e,"click",n[29]),t=!0)},p:ge,d(s){s&&B(e),t=!1,i()}}}function wj(n){let e,t,i;return{c(){e=R("div"),w(e,"role","none"),w(e,"class","jse-insert-selection-area jse-inside svelte-6mjnsm"),w(e,"data-type","insert-selection-area-inside")},m(s,o){j(s,e,o),t||(i=he(e,"click",n[28]),t=!0)},p:ge,d(s){s&&B(e),t=!1,i()}}}function Z_(n){let e,t=!n[8].readOnly&&(n[10]===jo||n[16]&&Sn(n[7])),i,s=[],o=new Map,r,l,a,c,f,u=t&&$_(n),h=at(n[14]||kl);const d=m=>m[48];for(let m=0;m<h.length;m+=1){let p=I_(n,h,m),b=d(p);o.set(b,s[m]=nw(b,p))}let g=!n[17]&&iw(n);return{c(){e=R("div"),u&&u.c(),i=G();for(let m=0;m<s.length;m+=1)s[m].c();r=G(),l=R("div"),a=R("div"),a.innerHTML='<span class="jse-bracket svelte-6mjnsm">]</span>',c=G(),g&&g.c(),w(e,"class","jse-items svelte-6mjnsm"),w(a,"data-type","selectable-value"),w(a,"class","jse-footer svelte-6mjnsm"),w(l,"class","jse-footer-outer svelte-6mjnsm")},m(m,p){j(m,e,p),u&&u.m(e,null),A(e,i);for(let b=0;b<s.length;b+=1)s[b]&&s[b].m(e,null);j(m,r,p),j(m,l,p),A(l,a),A(l,c),g&&g.m(l,null),f=!0},p(m,p){p[0]&66944&&(t=!m[8].readOnly&&(m[10]===jo||m[16]&&Sn(m[7]))),t?u?(u.p(m,p),p[0]&66944&&k(u,1)):(u=$_(m),u.c(),k(u,1),u.m(e,i)):u&&(me(),M(u,1,1,()=>{u=null}),pe()),p[0]&34097663&&(h=at(m[14]||kl),me(),s=Jd(s,p,d,1,m,h,o,e,Y1,nw,null,I_),pe()),m[17]?g&&(g.d(1),g=null):g?g.p(m,p):(g=iw(m),g.c(),g.m(l,null))},i(m){if(!f){k(u);for(let p=0;p<h.length;p+=1)k(s[p]);f=!0}},o(m){M(u);for(let p=0;p<s.length;p+=1)M(s[p]);f=!1},d(m){m&&(B(e),B(r),B(l)),u&&u.d();for(let p=0;p<s.length;p+=1)s[p].d();g&&g.d()}}}function $_(n){let e,t,i;return t=new zr({props:{selected:n[16]&&Sn(n[7]),onContextMenu:n[30]}}),{c(){e=R("div"),se(t.$$.fragment),w(e,"class","jse-insert-area jse-inside svelte-6mjnsm"),w(e,"data-type","insert-selection-area-inside"),w(e,"title",X1),te(e,"jse-hovered",n[10]===jo),te(e,"jse-selected",n[16]&&Sn(n[7])),fi(e,"--level",n[1].length+1)},m(s,o){j(s,e,o),ne(t,e,null),i=!0},p(s,o){const r={};o[0]&65664&&(r.selected=s[16]&&Sn(s[7])),t.$set(r),(!i||o[0]&1024)&&te(e,"jse-hovered",s[10]===jo),(!i||o[0]&65664)&&te(e,"jse-selected",s[16]&&Sn(s[7])),o[0]&2&&fi(e,"--level",s[1].length+1)},i(s){i||(k(t.$$.fragment,s),i=!0)},o(s){M(t.$$.fragment,s),i=!1},d(s){s&&B(e),ie(t)}}}function vj(n){let e,t,i=n[49].index+"",s;return{c(){e=R("div"),t=R("div"),s=Se(i),w(t,"class","jse-index svelte-6mjnsm"),w(e,"slot","identifier"),w(e,"class","jse-identifier svelte-6mjnsm")},m(o,r){j(o,e,r),A(e,t),A(t,s)},p(o,r){r[0]&18687&&i!==(i=o[49].index+"")&&Xe(s,i)},d(o){o&&B(e)}}}function ew(n,e){let t,i,s;return i=new D0({props:{value:e[49].value,path:e[49].path,expandedMap:e[49].expandedMap,enforceStringMap:e[49].enforceStringMap,visibleSectionsMap:e[49].visibleSectionsMap,validationErrorsMap:e[49].validationErrorsMap,searchResultItemsMap:e[49].searchResultItemsMap,selection:e[49].selection,context:e[8],onDragSelectionStart:e[25],$$slots:{identifier:[vj]},$$scope:{ctx:e}}}),{key:n,first:null,c(){t=bt(),se(i.$$.fragment),this.first=t},m(o,r){j(o,t,r),ne(i,o,r),s=!0},p(o,r){e=o;const l={};r[0]&18687&&(l.value=e[49].value),r[0]&18687&&(l.path=e[49].path),r[0]&18687&&(l.expandedMap=e[49].expandedMap),r[0]&18687&&(l.enforceStringMap=e[49].enforceStringMap),r[0]&18687&&(l.visibleSectionsMap=e[49].visibleSectionsMap),r[0]&18687&&(l.validationErrorsMap=e[49].validationErrorsMap),r[0]&18687&&(l.searchResultItemsMap=e[49].searchResultItemsMap),r[0]&18687&&(l.selection=e[49].selection),r[0]&256&&(l.context=e[8]),r[0]&18687|r[1]&8&&(l.$$scope={dirty:r,ctx:e}),i.$set(l)},i(o){s||(k(i.$$.fragment,o),s=!0)},o(o){M(i.$$.fragment,o),s=!1},d(o){o&&B(t),ie(i,o)}}}function tw(n){let e,t;return e=new LB({props:{visibleSections:n[14]||kl,sectionIndex:n[48],total:n[0].length,path:n[1],onExpandSection:n[8].onExpandSection,selection:n[7],context:n[8]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s[0]&16384&&(o.visibleSections=i[14]||kl),s[0]&16384&&(o.sectionIndex=i[48]),s[0]&1&&(o.total=i[0].length),s[0]&2&&(o.path=i[1]),s[0]&256&&(o.onExpandSection=i[8].onExpandSection),s[0]&128&&(o.selection=i[7]),s[0]&256&&(o.context=i[8]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function nw(n,e){let t,i=[],s=new Map,o,r,l,a=at(e[19](e[1],e[0],e[46],e[2],e[3],e[4],e[5],e[6],e[7],e[11]));const c=u=>u[49].index;for(let u=0;u<a.length;u+=1){let h=N_(e,a,u),d=c(h);s.set(d,i[u]=ew(d,h))}let f=e[46].end<e[0].length&&tw(e);return{key:n,first:null,c(){t=bt();for(let u=0;u<i.length;u+=1)i[u].c();o=G(),f&&f.c(),r=bt(),this.first=t},m(u,h){j(u,t,h);for(let d=0;d<i.length;d+=1)i[d]&&i[d].m(u,h);j(u,o,h),f&&f.m(u,h),j(u,r,h),l=!0},p(u,h){e=u,h[0]&34097663&&(a=at(e[19](e[1],e[0],e[46],e[2],e[3],e[4],e[5],e[6],e[7],e[11])),me(),i=Jd(i,h,c,1,e,a,s,o.parentNode,Y1,ew,o,N_),pe()),e[46].end<e[0].length?f?(f.p(e,h),h[0]&16385&&k(f,1)):(f=tw(e),f.c(),k(f,1),f.m(r.parentNode,r)):f&&(me(),M(f,1,1,()=>{f=null}),pe())},i(u){if(!l){for(let h=0;h<a.length;h+=1)k(i[h]);k(f),l=!0}},o(u){for(let h=0;h<i.length;h+=1)M(i[h]);M(f),l=!1},d(u){u&&(B(t),B(o),B(r));for(let h=0;h<i.length;h+=1)i[h].d(u);f&&f.d(u)}}}function iw(n){let e,t,i;return{c(){e=R("div"),w(e,"role","none"),w(e,"class","jse-insert-selection-area jse-after svelte-6mjnsm"),w(e,"data-type","insert-selection-area-after")},m(s,o){j(s,e,o),t||(i=he(e,"click",n[29]),t=!0)},p:ge,d(s){s&&B(e),t=!1,i()}}}function sw(n){let e,t,i;return t=new zr({props:{selected:n[16]&&Ri(n[7]),onContextMenu:n[31]}}),{c(){e=R("div"),se(t.$$.fragment),w(e,"class","jse-insert-area jse-after svelte-6mjnsm"),w(e,"data-type","insert-selection-area-after"),w(e,"title",X1),te(e,"jse-hovered",n[10]===cf),te(e,"jse-selected",n[16]&&Ri(n[7]))},m(s,o){j(s,e,o),ne(t,e,null),i=!0},p(s,o){const r={};o[0]&65664&&(r.selected=s[16]&&Ri(s[7])),t.$set(r),(!i||o[0]&1024)&&te(e,"jse-hovered",s[10]===cf),(!i||o[0]&65664)&&te(e,"jse-selected",s[16]&&Ri(s[7]))},i(s){i||(k(t.$$.fragment,s),i=!0)},o(s){M(t.$$.fragment,s),i=!1},d(s){s&&B(e),ie(t)}}}function kj(n){let e,t,i,s,o,r,l=!n[8].readOnly&&(n[10]===cf||n[16]&&Ri(n[7])),a,c,f,u,h;const d=[lj,rj,oj],g=[];function m(b,y){return y[0]&1&&(t=null),y[0]&1&&(i=null),t==null&&(t=!!Array.isArray(b[0])),t?0:(i==null&&(i=!!Ut(b[0])),i?1:2)}s=m(n,[-1,-1]),o=g[s]=d[s](n);let p=l&&sw(n);return{c(){e=R("div"),o.c(),r=G(),p&&p.c(),w(e,"role","treeitem"),w(e,"tabindex","-1"),w(e,"class",a=pn(ho("jse-json-node",{"jse-expanded":n[12]},n[8].onClassName(n[1],n[0])))+" svelte-6mjnsm"),w(e,"data-path",c=za(n[1])),w(e,"aria-selected",n[16]),te(e,"jse-root",n[17]),te(e,"jse-selected",n[16]&&Wt(n[7])),te(e,"jse-selected-key",n[16]&&vn(n[7])),te(e,"jse-selected-value",n[16]&&St(n[7])),te(e,"jse-readonly",n[8].readOnly),te(e,"jse-hovered",n[10]===tp),fi(e,"--level",n[1].length)},m(b,y){j(b,e,y),g[s].m(e,null),A(e,r),p&&p.m(e,null),f=!0,u||(h=[he(e,"mousedown",n[23]),he(e,"mousemove",n[24]),he(e,"mouseover",n[26]),he(e,"mouseout",n[27]),he(e,"focus",void 0),he(e,"blur",void 0)],u=!0)},p(b,y){let v=s;s=m(b,y),s===v?g[s].p(b,y):(me(),M(g[v],1,1,()=>{g[v]=null}),pe(),o=g[s],o?o.p(b,y):(o=g[s]=d[s](b),o.c()),k(o,1),o.m(e,r)),y[0]&66944&&(l=!b[8].readOnly&&(b[10]===cf||b[16]&&Ri(b[7]))),l?p?(p.p(b,y),y[0]&66944&&k(p,1)):(p=sw(b),p.c(),k(p,1),p.m(e,null)):p&&(me(),M(p,1,1,()=>{p=null}),pe()),(!f||y[0]&4355&&a!==(a=pn(ho("jse-json-node",{"jse-expanded":b[12]},b[8].onClassName(b[1],b[0])))+" svelte-6mjnsm"))&&w(e,"class",a),(!f||y[0]&2&&c!==(c=za(b[1])))&&w(e,"data-path",c),(!f||y[0]&65536)&&w(e,"aria-selected",b[16]),(!f||y[0]&135427)&&te(e,"jse-root",b[17]),(!f||y[0]&70019)&&te(e,"jse-selected",b[16]&&Wt(b[7])),(!f||y[0]&70019)&&te(e,"jse-selected-key",b[16]&&vn(b[7])),(!f||y[0]&70019)&&te(e,"jse-selected-value",b[16]&&St(b[7])),(!f||y[0]&4355)&&te(e,"jse-readonly",b[8].readOnly),(!f||y[0]&5379)&&te(e,"jse-hovered",b[10]===tp),y[0]&2&&fi(e,"--level",b[1].length)},i(b){f||(k(o),k(p),f=!0)},o(b){M(o),M(p),f=!1},d(b){b&&B(e),g[s].d(),p&&p.d(),u=!1,Et(h)}}}function Sj(n,e,t){let i,{$$slots:s={},$$scope:o}=e,{value:r}=e,{path:l}=e,{expandedMap:a}=e,{enforceStringMap:c}=e,{visibleSectionsMap:f}=e,{validationErrorsMap:u}=e,{searchResultItemsMap:h}=e,{selection:d}=e,{context:g}=e,{onDragSelectionStart:m}=e;const p=Fn("jsoneditor:JSONNode");let b,y,v;const C=bL();let _,S,x,D,P,E;function O(H,ae,De,Le,Ie,Te,de,lt,wt){let Ee=Object.keys(ae).map(st=>{const dt=C(H.concat(st)),Ze=o2(_,st);return{key:st,value:ae[st],path:dt,expandedMap:$i(De,Ze),enforceStringMap:$i(Le,Ze),visibleSectionsMap:$i(Ie,Ze),validationErrorsMap:$i(Te,Ze),keySearchResultItemsMap:CI(de,Ze),valueSearchResultItemsMap:$i(de,Ze),selection:fy(g.getJson(),lt,dt)}});return wt&&wt.offset!==0&&(Ee=K2(Ee,wt.selectionStartIndex,wt.selectionItemsCount,wt.offset)),Ee}function I(H,ae,De,Le,Ie,Te,de,lt,wt,Ee){const st=De.start,dt=Math.min(De.end,ae.length);let Ze=[];for(let It=st;It<dt;It++){const We=C(H.concat(String(It))),ct=o2(_,It);Ze.push({index:It,value:ae[It],path:We,expandedMap:$i(Le,ct),enforceStringMap:$i(Ie,ct),visibleSectionsMap:$i(Te,ct),validationErrorsMap:$i(de,ct),searchResultItemsMap:$i(lt,ct),selection:fy(g.getJson(),wt,We)})}if(Ee&&Ee.offset!==0){const It=Ze.map(We=>We.index);Ze=K2(Ze,Ee.selectionStartIndex,Ee.selectionItemsCount,Ee.offset);for(let We=0;We<Ze.length;We++)Ze[We].index=It[We]}return Ze}function N(H){H.stopPropagation();const ae=_0(H);g.onExpand(l,!S,ae)}function F(H){H.stopPropagation(),g.onExpand(l,!0)}function z(H,ae){const De=Gf(l,Object.keys(r),H,ae);return g.onPatch(De),mt(Ts(De[0].path))}function q(H){if(H.buttons!==1&&H.buttons!==2||iL(H.target)||H.buttons===1&&d4(H.target,"BUTTON"))return;H.stopPropagation(),H.preventDefault(),g.focus(),document.addEventListener("mousemove",X,!0),document.addEventListener("mouseup",T);const ae=$g(H.target),De=g.getJson(),Le=g.getDocumentState();if(d&&ae!==qt.after&&ae!==qt.inside&&(d.type===ae||d.type===qt.multi)&&mf(De,d,l)){H.button===0&&m(H);return}if(Ln.selecting=!0,Ln.selectionAnchor=l,Ln.selectionAnchorType=ae,Ln.selectionFocus=l,H.shiftKey){const Ie=g.getDocumentState().selection;Ie&&g.onSelect(hi(Al(Ie),l))}else if(ae===qt.multi)if(i&&H.target.hasAttribute("data-path")){const Ie=mt(O4(r,Le));g.onSelect(S0(Ie))}else g.onSelect(hi(l,l));else De!==void 0&&g.onSelect(cy(De,ae,l))}function Q(H){if(Ln.selecting){H.preventDefault(),H.stopPropagation(),Ln.selectionFocus==null&&window.getSelection&&window.getSelection().empty();const ae=$g(H.target);(!yt(l,Ln.selectionFocus)||ae!==Ln.selectionAnchorType)&&(Ln.selectionFocus=l,Ln.selectionAnchorType=ae,g.onSelect(hi(Ln.selectionAnchor||Ln.selectionFocus,Ln.selectionFocus)))}}function X(H){g.onDrag(H)}function T(H){Ln.selecting&&(Ln.selecting=!1,H.stopPropagation()),g.onDragEnd(),document.removeEventListener("mousemove",X,!0),document.removeEventListener("mouseup",T)}function U(){var H,ae;return((ae=(H=g.findElement([]))==null?void 0:H.getBoundingClientRect())==null?void 0:ae.top)||0}function Y(H,ae){const Le=U()-H.initialContentTop;return ae.clientY-H.initialClientY-Le}function le(H){if(g.readOnly||!d)return;const ae=_t(Ye(d));if(!yt(l,ae)){m(H);return}const De=W(d,D||kl);if(p("dragSelectionStart",{selection:d,items:De}),!De){p("Cannot drag the current selection (probably spread over multiple sections)");return}const Le=g.getJson();if(Le===void 0)return;const Ie=Ho(Le,d),Te=De.findIndex(wt=>yt(wt.path,Ie)),de=g.getDocumentState(),{offset:lt}=cm({json:Le,documentState:de,deltaY:0,items:De});t(11,v={initialTarget:H.target,initialClientY:H.clientY,initialContentTop:U(),selectionStartIndex:Te,selectionItemsCount:Ar(Le,d).length,items:De,offset:lt,didMoveItems:!1}),Ln.dragging=!0,document.addEventListener("mousemove",Z,!0),document.addEventListener("mouseup",ue)}function Z(H){if(v){const ae=g.getJson();if(ae===void 0)return;const De=g.getDocumentState(),Le=Y(v,H),{offset:Ie}=cm({json:ae,documentState:De,deltaY:Le,items:v.items});Ie!==v.offset&&(p("drag selection",Ie,Le),t(11,v={...v,offset:Ie,didMoveItems:!0}))}}function ue(H){if(v){const ae=g.getJson();if(ae===void 0)return;const De=g.getDocumentState(),Le=Y(v,H),{operations:Ie,updatedSelection:Te}=cm({json:ae,documentState:De,deltaY:Le,items:v.items});if(Ie)g.onPatch(Ie,(de,lt)=>({state:{...lt,selection:Te||d}}));else if(H.target===v.initialTarget&&!v.didMoveItems){const de=$g(H.target),lt=p4(H.target);lt&&g.onSelect(cy(ae,de,lt))}t(11,v=void 0),Ln.dragging=!1,document.removeEventListener("mousemove",Z,!0),document.removeEventListener("mouseup",ue)}}function W(H,ae){const De=[];function Le(Ie){const Te=l.concat(Ie),de=g.findElement(Te);de!=null&&De.push({path:Te,height:de.clientHeight})}if(Array.isArray(r)){const Ie=g.getJson();if(Ie===void 0)return null;const Te=Ho(Ie,H),de=Fr(Ie,H),lt=parseInt(mt(Te),10),wt=parseInt(mt(de),10),Ee=ae.find(Ze=>lt>=Ze.start&&wt<=Ze.end);if(!Ee)return null;const{start:st,end:dt}=Ee;i4(st,Math.min(r.length,dt),Ze=>Le(String(Ze)))}else Object.keys(r).forEach(Le);return De}function we(H){Ln.selecting||Ln.dragging||(H.stopPropagation(),fl(H.target,"data-type","selectable-value")?t(10,b=tp):fl(H.target,"data-type","insert-selection-area-inside")?t(10,b=jo):fl(H.target,"data-type","insert-selection-area-after")&&t(10,b=cf),clearTimeout(y))}function ee(H){H.stopPropagation(),y=window.setTimeout(()=>t(10,b=void 0))}function be(H){H.shiftKey||(H.stopPropagation(),H.preventDefault(),g.onSelect(qo(l)))}function tt(H){H.shiftKey||(H.stopPropagation(),H.preventDefault(),g.onSelect(Uo(l)))}function re(H){g.onSelect(qo(l)),g.onContextMenu(H)}function Qe(H){g.onSelect(Uo(l)),g.onContextMenu(H)}return n.$$set=H=>{"value"in H&&t(0,r=H.value),"path"in H&&t(1,l=H.path),"expandedMap"in H&&t(2,a=H.expandedMap),"enforceStringMap"in H&&t(3,c=H.enforceStringMap),"visibleSectionsMap"in H&&t(4,f=H.visibleSectionsMap),"validationErrorsMap"in H&&t(5,u=H.validationErrorsMap),"searchResultItemsMap"in H&&t(6,h=H.searchResultItemsMap),"selection"in H&&t(7,d=H.selection),"context"in H&&t(8,g=H.context),"onDragSelectionStart"in H&&t(32,m=H.onDragSelectionStart),"$$scope"in H&&t(34,o=H.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&2&&t(9,_=Oe(l)),n.$$.dirty[0]&516&&t(12,S=a?a[_]===!0:!1),n.$$.dirty[0]&777&&t(13,x=Vo(r,c,_,g.parser)),n.$$.dirty[0]&528&&t(14,D=f?f[_]:void 0),n.$$.dirty[0]&544&&t(15,P=u?u[_]:void 0),n.$$.dirty[0]&386&&t(16,E=mf(g.getJson(),d,l)),n.$$.dirty[0]&2&&t(17,i=l.length===0)},[r,l,a,c,f,u,h,d,g,_,b,v,S,x,D,P,E,i,O,I,N,F,z,q,Q,le,we,ee,be,tt,re,Qe,m,s,o]}class D0 extends ze{constructor(e){super(),Fe(this,e,Sj,kj,ft,{value:0,path:1,expandedMap:2,enforceStringMap:3,visibleSectionsMap:4,validationErrorsMap:5,searchResultItemsMap:6,selection:7,context:8,onDragSelectionStart:32},null,[-1,-1])}}const Cj={prefix:"fas",iconName:"jsoneditor-expand",icon:[512,512,[],"","M 0,448 V 512 h 512 v -64 z M 0,0 V 64 H 512 V 0 Z M 256,96 128,224 h 256 z M 256,416 384,288 H 128 Z"]},Mj={prefix:"fas",iconName:"jsoneditor-collapse",icon:[512,512,[],"","m 0,224 v 64 h 512 v -64 z M 256,192 384,64 H 128 Z M 256,320 128,448 h 256 z"]},Pp={prefix:"fas",iconName:"jsoneditor-format",icon:[512,512,[],"","M 0,32 v 64 h 416 v -64 z M 160,160 v 64 h 352 v -64 z M 160,288 v 64 h 288 v -64 z M 0,416 v 64 h 320 v -64 z"]},xj={prefix:"fas",iconName:"jsoneditor-compact",icon:[512,512,[],"","M 0,32 v 64 h 512 v -64 z M 0,160 v 64 h 512 v -64 z M 0,288 v 64 h 352 v -64 z"]};function Aj(n){let e,t;return e=new vg({props:{items:n[0]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,[s]){const o={};s&1&&(o.items=i[0]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Oj(n,e,t){let i,s,o,{json:r}=e,{selection:l}=e,{readOnly:a}=e,{showSearch:c=!1}=e,{historyState:f}=e,{onExpandAll:u}=e,{onCollapseAll:h}=e,{onUndo:d}=e,{onRedo:g}=e,{onSort:m}=e,{onTransform:p}=e,{onContextMenu:b}=e,{onCopy:y}=e,{onRenderMenu:v}=e;function C(){t(1,c=!c)}let _,S,x,D;return n.$$set=P=>{"json"in P&&t(2,r=P.json),"selection"in P&&t(3,l=P.selection),"readOnly"in P&&t(4,a=P.readOnly),"showSearch"in P&&t(1,c=P.showSearch),"historyState"in P&&t(5,f=P.historyState),"onExpandAll"in P&&t(6,u=P.onExpandAll),"onCollapseAll"in P&&t(7,h=P.onCollapseAll),"onUndo"in P&&t(8,d=P.onUndo),"onRedo"in P&&t(9,g=P.onRedo),"onSort"in P&&t(10,m=P.onSort),"onTransform"in P&&t(11,p=P.onTransform),"onContextMenu"in P&&t(12,b=P.onContextMenu),"onCopy"in P&&t(13,y=P.onCopy),"onRenderMenu"in P&&t(14,v=P.onRenderMenu)},n.$$.update=()=>{n.$$.dirty&4&&t(20,i=r!==void 0),n.$$.dirty&1048584&&t(19,s=i&&(Wt(l)||vn(l)||St(l))),n.$$.dirty&68&&t(15,_={type:"button",icon:Cj,title:"Expand all",className:"jse-expand-all",onClick:u,disabled:!fn(r)}),n.$$.dirty&132&&t(16,S={type:"button",icon:Mj,title:"Collapse all",className:"jse-collapse-all",onClick:h,disabled:!fn(r)}),n.$$.dirty&4&&t(17,x={type:"button",icon:gg,title:"Search (Ctrl+F)",className:"jse-search",onClick:C,disabled:r===void 0}),n.$$.dirty&769844&&t(18,D=a?[_,S,{type:"separator"},{type:"button",icon:wr,title:"Copy (Ctrl+C)",className:"jse-copy",onClick:y,disabled:!s},{type:"separator"},x,{type:"space"}]:[_,S,{type:"separator"},{type:"button",icon:dg,title:"Sort",className:"jse-sort",onClick:m,disabled:a||r===void 0},{type:"button",icon:ug,title:"Transform contents (filter, sort, project)",className:"jse-transform",onClick:p,disabled:a||r===void 0},x,{type:"button",icon:q4,title:G1,className:"jse-contextmenu",onClick:b},{type:"separator"},{type:"button",icon:x0,title:"Undo (Ctrl+Z)",className:"jse-undo",onClick:d,disabled:!f.canUndo},{type:"button",icon:M0,title:"Redo (Ctrl+Shift+Z)",className:"jse-redo",onClick:g,disabled:!f.canRedo},{type:"space"}]),n.$$.dirty&278528&&t(0,o=v(D))},[o,c,r,l,a,f,u,h,d,g,m,p,b,y,v,_,S,x,D,s,i]}class Pj extends ze{constructor(e){super(),Fe(this,e,Oj,Aj,ft,{json:2,selection:3,readOnly:4,showSearch:1,historyState:5,onExpandAll:6,onCollapseAll:7,onUndo:8,onRedo:9,onSort:10,onTransform:11,onContextMenu:12,onCopy:13,onRenderMenu:14})}}function ow(n){let e,t,i,s,o,r,l;return{c(){e=R("div"),e.innerHTML="You can paste clipboard data using <b>Ctrl+V</b>, or use the following options:",t=G(),i=R("button"),i.textContent="Create object",s=G(),o=R("button"),o.textContent="Create array",w(e,"class","jse-welcome-info svelte-s2toti"),w(i,"title","Create an empty JSON object (press '{')"),w(i,"class","svelte-s2toti"),w(o,"title","Create an empty JSON array (press '[')"),w(o,"class","svelte-s2toti")},m(a,c){j(a,e,c),j(a,t,c),j(a,i,c),j(a,s,c),j(a,o,c),r||(l=[he(i,"click",Ps(n[4])),he(o,"click",Ps(n[5]))],r=!0)},p:ge,d(a){a&&(B(e),B(t),B(i),B(s),B(o)),r=!1,Et(l)}}}function Tj(n){let e,t,i,s,o,r,l,a,c,f,u=!n[0]&&ow(n);return{c(){e=R("div"),t=R("div"),i=G(),s=R("div"),o=R("div"),o.textContent="Empty document",r=G(),u&&u.c(),l=G(),a=R("div"),w(t,"class","jse-space jse-before svelte-s2toti"),w(o,"class","jse-welcome-title"),w(s,"class","jse-contents svelte-s2toti"),w(a,"class","jse-space jse-after svelte-s2toti"),w(e,"class","jse-welcome svelte-s2toti"),w(e,"role","none")},m(h,d){j(h,e,d),A(e,t),A(e,i),A(e,s),A(s,o),A(s,r),u&&u.m(s,null),A(e,l),A(e,a),c||(f=he(e,"click",n[6]),c=!0)},p(h,[d]){h[0]?u&&(u.d(1),u=null):u?u.p(h,d):(u=ow(h),u.c(),u.m(s,null))},i:ge,o:ge,d(h){h&&B(e),u&&u.d(),c=!1,f()}}}function Ej(n,e,t){let{readOnly:i}=e,{onCreateArray:s}=e,{onCreateObject:o}=e,{onClick:r}=e;const l=()=>o(),a=()=>s(),c=()=>r();return n.$$set=f=>{"readOnly"in f&&t(0,i=f.readOnly),"onCreateArray"in f&&t(1,s=f.onCreateArray),"onCreateObject"in f&&t(2,o=f.onCreateObject),"onClick"in f&&t(3,r=f.onClick)},[i,s,o,r,l,a,c]}class Rj extends ze{constructor(e){super(),Fe(this,e,Ej,Tj,ft,{readOnly:0,onCreateArray:1,onCreateObject:2,onClick:3})}}var uM={exports:{}};/*
 * @version    1.4.0
 * @date       2015-10-26
 * @stability  3 - Stable
 * @author     Lauri Rooden (https://github.com/litejs/natural-compare-lite)
 * @license    MIT License
 */var rw=function(n,e){var t,i,s=1,o=0,r=0,l=String.alphabet;function a(c,f,u){if(u){for(t=f;u=a(c,t),u<76&&u>65;)++t;return+c.slice(f-1,t)}return u=l&&l.indexOf(c.charAt(f)),u>-1?u+76:(u=c.charCodeAt(f)||0,u<45||u>127?u:u<46?65:u<48?u-1:u<58?u+18:u<65?u-11:u<91?u+11:u<97?u-37:u<123?u+5:u-63)}if((n+="")!=(e+="")){for(;s;)if(i=a(n,o++),s=a(e,r++),i<76&&s<76&&i>66&&s>66&&(i=a(n,o,o),s=a(e,r,o=t),r=t),i!=s)return i<s?-1:1}return 0};try{uM.exports=rw}catch{String.naturalCompare=rw}var Dj=uM.exports;const Lj=i8(Dj);function L0(n,e){const t=typeof n=="string"?n.toLowerCase():n,i=typeof e=="string"?e.toLowerCase():e;return Lj(t,i)}function hM(n,e=[],t=[],i=1){if(Jt(Be(n,e))){if(t===void 0)throw new Error("Cannot sort: no property selected by which to sort the array");return Nj(n,e,t,i)}if(Ut(n))return Ij(n,e,i);throw new Error("Cannot sort: no array or object")}function Ij(n,e=[],t=1){const i=Be(n,e),o=Object.keys(i).slice();o.sort((l,a)=>t*L0(l,a));const r=[];for(let l=0;l<o.length;l++){const a=o[l],c=Oe(e.concat(a));r.push({op:"move",from:c,path:c})}return r}function Nj(n,e=[],t=[],i=1){const s=Bj(t,i),o=Be(n,e);return[{op:"replace",path:Oe(e),value:o.slice(0).sort(s)}]}function Bj(n,e){return function(i,s){const o=Be(i,n),r=Be(s,n);return o===void 0?e:r===void 0?-e:typeof o!="string"&&typeof r!="string"?o>r?e:o<r?-e:0:e*L0(o,r)}}function lw(n,e,t){const i=n.slice();return i[4]=e[t],i}function aw(n,e){let t,i=zo(e[4].toString(),fw)+"",s,o,r,l;function a(){return e[3](e[4])}return{key:n,first:null,c(){t=R("button"),s=Se(i),w(t,"type","button"),w(t,"class","jse-navigation-bar-dropdown-item svelte-12glmu0"),w(t,"title",o=e[4].toString()),te(t,"jse-selected",e[4]===e[1]),this.first=t},m(c,f){j(c,t,f),A(t,s),r||(l=he(t,"click",Ps(a)),r=!0)},p(c,f){e=c,f&1&&i!==(i=zo(e[4].toString(),fw)+"")&&Xe(s,i),f&1&&o!==(o=e[4].toString())&&w(t,"title",o),f&3&&te(t,"jse-selected",e[4]===e[1])},d(c){c&&B(t),r=!1,l()}}}function cw(n){let e,t;return{c(){e=R("button"),t=Se("..."),w(e,"type","button"),w(e,"class","jse-navigation-bar-dropdown-item svelte-12glmu0"),w(e,"title","Limited to "+Dc+" items")},m(i,s){j(i,e,s),A(e,t)},p:ge,d(i){i&&B(e)}}}function jj(n){let e,t=[],i=new Map,s,o=at(Yh(n[0],Dc));const r=a=>a[4];for(let a=0;a<o.length;a+=1){let c=lw(n,o,a),f=r(c);i.set(f,t[a]=aw(f,c))}let l=n[0].length>Dc&&cw();return{c(){e=R("div");for(let a=0;a<t.length;a+=1)t[a].c();s=G(),l&&l.c(),w(e,"class","jse-navigation-bar-dropdown svelte-12glmu0")},m(a,c){j(a,e,c);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null);A(e,s),l&&l.m(e,null)},p(a,[c]){c&7&&(o=at(Yh(a[0],Dc)),t=Jd(t,c,r,1,a,o,i,e,G5,aw,s,lw)),a[0].length>Dc?l?l.p(a,c):(l=cw(),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i:ge,o:ge,d(a){a&&B(e);for(let c=0;c<t.length;c+=1)t[c].d();l&&l.d()}}}const Dc=100,fw=30;function Fj(n,e,t){let{items:i}=e,{selectedItem:s}=e,{onSelect:o}=e;const r=l=>o(l);return n.$$set=l=>{"items"in l&&t(0,i=l.items),"selectedItem"in l&&t(1,s=l.selectedItem),"onSelect"in l&&t(2,o=l.onSelect)},[i,s,o,r]}class zj extends ze{constructor(e){super(),Fe(this,e,Fj,jj,ft,{items:0,selectedItem:1,onSelect:2})}}function uw(n){let e,t,i,s;return{c(){e=R("button"),t=Se(n[2]),w(e,"type","button"),w(e,"class","jse-navigation-bar-button svelte-x08607")},m(o,r){j(o,e,r),A(e,t),i||(s=he(e,"click",n[9]),i=!0)},p(o,r){r&4&&Xe(t,o[2])},d(o){o&&B(e),i=!1,s()}}}function Vj(n){let e,t,i,s,o,r,l;i=new vt({props:{data:H4}});let a=n[2]!==void 0&&uw(n);return{c(){e=R("div"),t=R("button"),se(i.$$.fragment),s=G(),a&&a.c(),w(t,"type","button"),w(t,"class","jse-navigation-bar-button jse-navigation-bar-arrow svelte-x08607"),te(t,"jse-open",n[1]),w(e,"class","jse-navigation-bar-item svelte-x08607")},m(c,f){j(c,e,f),A(e,t),ne(i,t,null),A(e,s),a&&a.m(e,null),n[10](e),o=!0,r||(l=he(t,"click",n[4]),r=!0)},p(c,[f]){(!o||f&2)&&te(t,"jse-open",c[1]),c[2]!==void 0?a?a.p(c,f):(a=uw(c),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i(c){o||(k(i.$$.fragment,c),o=!0)},o(c){M(i.$$.fragment,c),o=!1},d(c){c&&B(e),ie(i),a&&a.d(),n[10](null),r=!1,l()}}}function Hj(n,e,t){let i,s;const{openAbsolutePopup:o,closeAbsolutePopup:r}=jn("absolute-popup");let{path:l}=e,{index:a}=e,{onSelect:c}=e,{getItems:f}=e,u,h=!1,d;function g(y){r(d),c(i.concat(y))}function m(){if(u){t(1,h=!0);const y={items:f(i),selectedItem:s,onSelect:g};d=o(zj,y,{anchor:u,closeOnOuterClick:!0,onClose:()=>{t(1,h=!1)}})}}const p=()=>g(s);function b(y){it[y?"unshift":"push"](()=>{u=y,t(0,u)})}return n.$$set=y=>{"path"in y&&t(5,l=y.path),"index"in y&&t(6,a=y.index),"onSelect"in y&&t(7,c=y.onSelect),"getItems"in y&&t(8,f=y.getItems)},n.$$.update=()=>{n.$$.dirty&96&&(i=l.slice(0,a)),n.$$.dirty&96&&t(2,s=l[a])},[u,h,s,g,m,l,a,c,f,p,b]}class dM extends ze{constructor(e){super(),Fe(this,e,Hj,Vj,ft,{path:5,index:6,onSelect:7,getItems:8})}}function I0(n){var e;if(navigator.clipboard)return navigator.clipboard.writeText(n);if((e=document.queryCommandSupported)!=null&&e.call(document,"copy")){const t=document.createElement("textarea");t.value=n,t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select();try{document.execCommand("copy")}catch(i){console.error(i)}finally{document.body.removeChild(t)}}else console.error("Copy failed.")}function hw(n){let e,t,i,s,o,r;return t=new vt({props:{data:Vl}}),{c(){e=R("button"),se(t.$$.fragment),w(e,"type","button"),w(e,"class","jse-navigation-bar-validation-error svelte-1844qyt")},m(l,a){j(l,e,a),ne(t,e,null),s=!0,o||(r=En(i=C0.call(null,e,{text:String(n[3]||""),...n[4]})),o=!0)},p(l,a){i&&Kn(i.update)&&a&8&&i.update.call(null,{text:String(l[3]||""),...l[4]})},i(l){s||(k(t.$$.fragment,l),s=!0)},o(l){M(t.$$.fragment,l),s=!1},d(l){l&&B(e),ie(t),o=!1,r()}}}function dw(n){let e;return{c(){e=R("div"),e.textContent="Copied!",w(e,"class","jse-copied-text svelte-1844qyt")},m(t,i){j(t,e,i)},d(t){t&&B(e)}}}function Wj(n){let e,t,i,s,o,r,l,a,c,f,u=n[3]&&hw(n),h=n[2]&&dw();return l=new vt({props:{data:wr}}),{c(){e=R("div"),t=R("input"),i=G(),u&&u.c(),s=G(),h&&h.c(),o=G(),r=R("button"),se(l.$$.fragment),w(t,"type","text"),w(t,"class","jse-navigation-bar-text svelte-1844qyt"),t.value=n[0],w(r,"type","button"),w(r,"class","jse-navigation-bar-copy svelte-1844qyt"),w(r,"title","Copy selected path to the clipboard"),te(r,"copied",n[2]),w(e,"class","jse-navigation-bar-path-editor svelte-1844qyt"),te(e,"error",n[3])},m(d,g){j(d,e,g),A(e,t),n[15](t),A(e,i),u&&u.m(e,null),A(e,s),h&&h.m(e,null),A(e,o),A(e,r),ne(l,r,null),a=!0,c||(f=[he(t,"keydown",Ps(n[6])),he(t,"input",n[5]),he(r,"click",n[7])],c=!0)},p(d,[g]){(!a||g&1&&t.value!==d[0])&&(t.value=d[0]),d[3]?u?(u.p(d,g),g&8&&k(u,1)):(u=hw(d),u.c(),k(u,1),u.m(e,s)):u&&(me(),M(u,1,1,()=>{u=null}),pe()),d[2]?h||(h=dw(),h.c(),h.m(e,o)):h&&(h.d(1),h=null),(!a||g&4)&&te(r,"copied",d[2]),(!a||g&8)&&te(e,"error",d[3])},i(d){a||(k(u),k(l.$$.fragment,d),a=!0)},o(d){M(u),M(l.$$.fragment,d),a=!1},d(d){d&&B(e),n[15](null),u&&u.d(),h&&h.d(),ie(l),c=!1,Et(f)}}}const qj=1e3;function Uj(n,e,t){let i;const s=jn("absolute-popup");let{path:o}=e,{pathParser:r}=e,{onChange:l}=e,{onClose:a}=e,{onError:c}=e,{pathExists:f}=e,u,h,d=!1,g,m=!1;Ai(()=>{p()}),Ci(()=>{clearTimeout(g)});function p(){u.focus()}function b(x){try{const D=r.parse(x);return y(D),{path:D,error:void 0}}catch(D){return{path:void 0,error:D}}}function y(x){if(!f(x))throw new Error("Path does not exist in current document")}function v(x){t(0,h=x.currentTarget.value)}function C(x){const D=Fo(x);if(D==="Escape"&&a(),D==="Enter"){t(14,d=!0);const P=b(h);P.path!==void 0?l(P.path):c(P.error)}}function _(){I0(h),t(2,m=!0),g=window.setTimeout(()=>t(2,m=!1),qj),p()}function S(x){it[x?"unshift":"push"](()=>{u=x,t(1,u)})}return n.$$set=x=>{"path"in x&&t(8,o=x.path),"pathParser"in x&&t(9,r=x.pathParser),"onChange"in x&&t(10,l=x.onChange),"onClose"in x&&t(11,a=x.onClose),"onError"in x&&t(12,c=x.onError),"pathExists"in x&&t(13,f=x.pathExists)},n.$$.update=()=>{n.$$.dirty&768&&t(0,h=r.stringify(o)),n.$$.dirty&16385&&t(3,i=d?b(h).error:void 0)},[h,u,m,i,s,v,C,_,o,r,l,a,c,f,d,S]}class Jj extends ze{constructor(e){super(),Fe(this,e,Uj,Wj,Qt,{path:8,pathParser:9,onChange:10,onClose:11,onError:12,pathExists:13})}}function gw(n,e,t){const i=n.slice();return i[18]=e[t],i[20]=t,i}function Kj(n){let e,t;return e=new Jj({props:{path:n[3],onClose:n[11],onChange:n[12],onError:n[1],pathExists:n[8],pathParser:n[2]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s&8&&(o.path=i[3]),s&2&&(o.onError=i[1]),s&4&&(o.pathParser=i[2]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Yj(n){let e=[],t=new Map,i,s,o,r=at(n[3]);const l=c=>c[20];for(let c=0;c<r.length;c+=1){let f=gw(n,r,c),u=l(f);t.set(u,e[c]=mw(u,f))}let a=n[6]&&pw(n);return{c(){for(let c=0;c<e.length;c+=1)e[c].c();i=G(),a&&a.c(),s=bt()},m(c,f){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(c,f);j(c,i,f),a&&a.m(c,f),j(c,s,f),o=!0},p(c,f){f&648&&(r=at(c[3]),me(),e=Jd(e,f,l,1,c,r,t,i.parentNode,Y1,mw,i,gw),pe()),c[6]?a?(a.p(c,f),f&64&&k(a,1)):(a=pw(c),a.c(),k(a,1),a.m(s.parentNode,s)):a&&(me(),M(a,1,1,()=>{a=null}),pe())},i(c){if(!o){for(let f=0;f<r.length;f+=1)k(e[f]);k(a),o=!0}},o(c){for(let f=0;f<e.length;f+=1)M(e[f]);M(a),o=!1},d(c){c&&(B(i),B(s));for(let f=0;f<e.length;f+=1)e[f].d(c);a&&a.d(c)}}}function mw(n,e){let t,i,s;return i=new dM({props:{getItems:e[7],path:e[3],index:e[20],onSelect:e[9]}}),{key:n,first:null,c(){t=bt(),se(i.$$.fragment),this.first=t},m(o,r){j(o,t,r),ne(i,o,r),s=!0},p(o,r){e=o;const l={};r&8&&(l.path=e[3]),r&8&&(l.index=e[20]),i.$set(l)},i(o){s||(k(i.$$.fragment,o),s=!0)},o(o){M(i.$$.fragment,o),s=!1},d(o){o&&B(t),ie(i,o)}}}function pw(n){let e,t;return e=new dM({props:{getItems:n[7],path:n[3],index:n[3].length,onSelect:n[9]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s&8&&(o.path=i[3]),s&8&&(o.index=i[3].length),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Xj(n){let e,t,i,s,o,r,l=!fn(n[0])&&!n[5]?"Navigation bar":"Â ",a,c,f,u,h,d,g;const m=[Yj,Kj],p=[];function b(y,v){return y[5]?1:0}return t=b(n),i=p[t]=m[t](n),f=new vt({props:{data:n[5]?vy:_y}}),{c(){e=R("div"),i.c(),s=G(),o=R("button"),r=R("span"),a=Se(l),c=G(),se(f.$$.fragment),w(r,"class","jse-navigation-bar-space svelte-1aycet9"),w(o,"type","button"),w(o,"class","jse-navigation-bar-edit svelte-1aycet9"),w(o,"title",u=n[5]?"Cancel editing the selected path":"Edit the selected path"),te(o,"flex",!n[5]),te(o,"editing",n[5]),w(e,"class","jse-navigation-bar svelte-1aycet9")},m(y,v){j(y,e,v),p[t].m(e,null),A(e,s),A(e,o),A(o,r),A(r,a),A(o,c),ne(f,o,null),n[15](e),h=!0,d||(g=he(o,"click",n[10]),d=!0)},p(y,[v]){let C=t;t=b(y),t===C?p[t].p(y,v):(me(),M(p[C],1,1,()=>{p[C]=null}),pe(),i=p[t],i?i.p(y,v):(i=p[t]=m[t](y),i.c()),k(i,1),i.m(e,s)),(!h||v&33)&&l!==(l=!fn(y[0])&&!y[5]?"Navigation bar":"Â ")&&Xe(a,l);const _={};v&32&&(_.data=y[5]?vy:_y),f.$set(_),(!h||v&32&&u!==(u=y[5]?"Cancel editing the selected path":"Edit the selected path"))&&w(o,"title",u),(!h||v&32)&&te(o,"flex",!y[5]),(!h||v&32)&&te(o,"editing",y[5])},i(y){h||(k(i),k(f.$$.fragment,y),h=!0)},o(y){M(i),M(f.$$.fragment,y),h=!1},d(y){y&&B(e),p[t].d(),ie(f),n[15](null),d=!1,g()}}}function Gj(n,e,t){let i,s;const o=Fn("jsoneditor:NavigationBar");let{json:r}=e,{selection:l}=e,{onSelect:a}=e,{onError:c}=e,{pathParser:f}=e,u,h=!1;function d(_){setTimeout(()=>{if(u&&u.scrollTo){const S=u.scrollWidth-u.clientWidth;S>0&&(o("scrollTo ",S),u.scrollTo({left:S,behavior:"smooth"}))}})}function g(_){o("get items for path",_);const S=Be(r,_);if(Array.isArray(S))return D7(0,S.length).map(String);if(Ut(S)){const D=Object.keys(S).slice(0);return D.sort(L0),D}else return[]}function m(_){return ls(r,_)}function p(_){o("select path",JSON.stringify(_)),a(hi(_,_))}function b(){t(5,h=!h)}function y(){t(5,h=!1)}function v(_){y(),p(_)}function C(_){it[_?"unshift":"push"](()=>{u=_,t(4,u)})}return n.$$set=_=>{"json"in _&&t(0,r=_.json),"selection"in _&&t(13,l=_.selection),"onSelect"in _&&t(14,a=_.onSelect),"onError"in _&&t(1,c=_.onError),"pathParser"in _&&t(2,f=_.pathParser)},n.$$.update=()=>{n.$$.dirty&8192&&t(3,i=l?Ye(l):[]),n.$$.dirty&9&&t(6,s=fn(Be(r,i))),n.$$.dirty&8&&d()},[r,c,f,i,u,h,s,g,m,p,b,y,v,l,a,C]}class Qj extends ze{constructor(e){super(),Fe(this,e,Gj,Xj,ft,{json:0,selection:13,onSelect:14,onError:1,pathParser:2})}}function bw(n){let e,t,i,s,o,r,l,a,c,f,u,h,d,g=n[7]!==-1&&n[7]<n[4]?`${n[7]+1}/`:"",m,p,b,y,v,C,_,S,x,D,P,E,O,I,N,F=!n[2]&&yw(n);const z=[$j,Zj],q=[];function Q(T,U){return T[6]?0:1}l=Q(n),a=q[l]=z[l](n),v=new vt({props:{data:c9}}),S=new vt({props:{data:YI}}),P=new vt({props:{data:pf}});let X=n[0]&&!n[2]&&_w(n);return{c(){e=R("div"),t=R("form"),F&&F.c(),i=G(),s=R("div"),o=R("div"),r=R("div"),a.c(),c=G(),f=R("label"),u=R("input"),h=G(),d=R("div"),m=Se(g),p=Se(n[8]),b=G(),y=R("button"),se(v.$$.fragment),C=G(),_=R("button"),se(S.$$.fragment),x=G(),D=R("button"),se(P.$$.fragment),E=G(),X&&X.c(),w(r,"class","jse-search-icon svelte-wnmp4a"),w(u,"class","jse-search-input svelte-wnmp4a"),w(u,"title","Enter text to search"),w(u,"type","text"),w(u,"placeholder","Find"),w(f,"class","jse-search-input-label svelte-wnmp4a"),w(f,"about","jse-search input"),w(d,"class","jse-search-count svelte-wnmp4a"),te(d,"jse-visible",n[3]!==""),w(y,"type","button"),w(y,"class","jse-search-next svelte-wnmp4a"),w(y,"title","Go to next search result (Enter)"),w(_,"type","button"),w(_,"class","jse-search-previous svelte-wnmp4a"),w(_,"title","Go to previous search result (Shift+Enter)"),w(D,"type","button"),w(D,"class","jse-search-clear svelte-wnmp4a"),w(D,"title","Close search box (Esc)"),w(o,"class","jse-search-section svelte-wnmp4a"),w(s,"class","jse-search-contents svelte-wnmp4a"),w(t,"class","jse-search-form svelte-wnmp4a"),w(e,"class","jse-search-box svelte-wnmp4a")},m(T,U){j(T,e,U),A(e,t),F&&F.m(t,null),A(t,i),A(t,s),A(s,o),A(o,r),q[l].m(r,null),A(o,c),A(o,f),A(f,u),Mr(u,n[3]),A(o,h),A(o,d),A(d,m),A(d,p),A(o,b),A(o,y),ne(v,y,null),A(o,C),A(o,_),ne(S,_,null),A(o,x),A(o,D),ne(P,D,null),A(s,E),X&&X.m(s,null),O=!0,I||(N=[he(u,"input",n[27]),En(tF.call(null,u)),he(u,"paste",n[12]),he(y,"click",n[15]),he(_,"click",n[16]),he(D,"click",n[17]),he(t,"keydown",n[10])],I=!0)},p(T,U){T[2]?F&&(me(),M(F,1,1,()=>{F=null}),pe()):F?(F.p(T,U),U[0]&4&&k(F,1)):(F=yw(T),F.c(),k(F,1),F.m(t,i));let Y=l;l=Q(T),l!==Y&&(me(),M(q[Y],1,1,()=>{q[Y]=null}),pe(),a=q[l],a||(a=q[l]=z[l](T),a.c()),k(a,1),a.m(r,null)),U[0]&8&&u.value!==T[3]&&Mr(u,T[3]),(!O||U[0]&144)&&g!==(g=T[7]!==-1&&T[7]<T[4]?`${T[7]+1}/`:"")&&Xe(m,g),(!O||U[0]&256)&&Xe(p,T[8]),(!O||U[0]&8)&&te(d,"jse-visible",T[3]!==""),T[0]&&!T[2]?X?X.p(T,U):(X=_w(T),X.c(),X.m(s,null)):X&&(X.d(1),X=null)},i(T){O||(k(F),k(a),k(v.$$.fragment,T),k(S.$$.fragment,T),k(P.$$.fragment,T),O=!0)},o(T){M(F),M(a),M(v.$$.fragment,T),M(S.$$.fragment,T),M(P.$$.fragment,T),O=!1},d(T){T&&B(e),F&&F.d(),q[l].d(),ie(v),ie(S),ie(P),X&&X.d(),I=!1,Et(N)}}}function yw(n){let e,t,i,s,o;return t=new vt({props:{data:n[0]?ss:fr}}),{c(){e=R("button"),se(t.$$.fragment),w(e,"type","button"),w(e,"class","jse-replace-toggle svelte-wnmp4a"),w(e,"title","Toggle visibility of replace options (Ctrl+H)")},m(r,l){j(r,e,l),ne(t,e,null),i=!0,s||(o=he(e,"click",n[9]),s=!0)},p(r,l){const a={};l[0]&1&&(a.data=r[0]?ss:fr),t.$set(a)},i(r){i||(k(t.$$.fragment,r),i=!0)},o(r){M(t.$$.fragment,r),i=!1},d(r){r&&B(e),ie(t),s=!1,o()}}}function Zj(n){let e,t;return e=new vt({props:{data:gg}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function $j(n){let e,t;return e=new vt({props:{data:VI,spin:!0}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function _w(n){let e,t,i,s,o,r,l,a;return{c(){e=R("div"),t=R("input"),i=G(),s=R("button"),s.textContent="Replace",o=G(),r=R("button"),r.textContent="All",w(t,"class","jse-replace-input svelte-wnmp4a"),w(t,"title","Enter replacement text"),w(t,"type","text"),w(t,"placeholder","Replace"),w(s,"type","button"),w(s,"title","Replace current occurrence (Ctrl+Enter)"),w(s,"class","svelte-wnmp4a"),w(r,"type","button"),w(r,"title","Replace all occurrences"),w(r,"class","svelte-wnmp4a"),w(e,"class","jse-replace-section svelte-wnmp4a")},m(c,f){j(c,e,f),A(e,t),Mr(t,n[5]),A(e,i),A(e,s),A(e,o),A(e,r),l||(a=[he(t,"input",n[28]),he(t,"keydown",n[11]),he(s,"click",n[13]),he(r,"click",n[14])],l=!0)},p(c,f){f[0]&32&&t.value!==c[5]&&Mr(t,c[5])},d(c){c&&B(e),l=!1,Et(a)}}}function eF(n){let e,t,i=n[1]&&bw(n);return{c(){i&&i.c(),e=bt()},m(s,o){i&&i.m(s,o),j(s,e,o),t=!0},p(s,o){s[1]?i?(i.p(s,o),o[0]&2&&k(i,1)):(i=bw(s),i.c(),k(i,1),i.m(e.parentNode,e)):i&&(me(),M(i,1,1,()=>{i=null}),pe())},i(s){t||(k(i),t=!0)},o(s){M(i),t=!1},d(s){s&&B(e),i&&i.d(s)}}}function tF(n){n.select()}function nF(n,e,t){let i,s,o;const r=Fn("jsoneditor:SearchBox");let{json:l}=e,{documentState:a}=e,{parser:c}=e,{showSearch:f}=e,{showReplace:u}=e,{readOnly:h}=e,{columns:d}=e,{onSearch:g}=e,{onFocus:m}=e,{onPatch:p}=e,{onClose:b}=e,y="",v="",C="",_=!1,S;const x=Kh(T,Zm),D=Kh(U,Zm);function P(){t(0,u=!u&&!h)}function E(W){W.stopPropagation();const we=Fo(W);we==="Enter"&&(W.preventDefault(),y!==v?(x.flush(),v=y):z()),we==="Shift+Enter"&&(W.preventDefault(),q()),we==="Ctrl+Enter"&&(W.preventDefault(),u?N():z()),we==="Ctrl+H"&&(W.preventDefault(),P()),we==="Escape"&&(W.preventDefault(),le())}function O(W){Fo(W)==="Enter"&&(W.preventDefault(),W.stopPropagation(),N())}async function I(){await wn(),setTimeout(()=>x.flush())}async function N(){if(h)return;const W=S==null?void 0:S.activeItem;if(r("handleReplace",{replaceText:C,activeItem:W}),!S||!W||l===void 0)return;t(26,S={...hy(S),activeIndex:s});const{operations:we,newSelection:ee}=vI(l,a,C,W,c);p(we,(be,tt)=>({state:{...tt,selection:ee}})),await wn(),await D.flush(),await Q()}async function F(){if(h)return;r("handleReplaceAll",{text:y,replaceText:C});const{operations:W,newSelection:we}=kI(l,a,y,C,c);p(W,(ee,be)=>({state:{...be,selection:we}})),await Q()}async function z(){t(26,S=S?hy(S):void 0),await Q()}async function q(){t(26,S=S?wI(S):void 0),await Q()}async function Q(){r("handleFocus",S);const W=S==null?void 0:S.activeItem;W&&l!==void 0&&await m(W.path)}async function X(W){await Y(W,y,l)}async function T(W){await Y(f,W,l),await Q()}async function U(W){await Y(f,y,W)}async function Y(W,we,ee){if(!W){S&&t(26,S=void 0);return}if(r("applySearch",{showSearch:W,text:we}),we===""){r("clearing search result"),S!==void 0&&t(26,S=void 0);return}return t(6,_=!0),new Promise(be=>{setTimeout(()=>{const tt=j4(we,ee,{maxResults:qg,columns:d});t(26,S=_I(ee,tt,S)),t(6,_=!1),be()})})}function le(){r("handleClose"),x.cancel(),D.cancel(),Y(!1,y,l),b()}function Z(){y=this.value,t(3,y)}function ue(){C=this.value,t(5,C)}return n.$$set=W=>{"json"in W&&t(18,l=W.json),"documentState"in W&&t(19,a=W.documentState),"parser"in W&&t(20,c=W.parser),"showSearch"in W&&t(1,f=W.showSearch),"showReplace"in W&&t(0,u=W.showReplace),"readOnly"in W&&t(2,h=W.readOnly),"columns"in W&&t(21,d=W.columns),"onSearch"in W&&t(22,g=W.onSearch),"onFocus"in W&&t(23,m=W.onFocus),"onPatch"in W&&t(24,p=W.onPatch),"onClose"in W&&t(25,b=W.onClose)},n.$$.update=()=>{var W;n.$$.dirty[0]&67108864&&t(4,i=((W=S==null?void 0:S.items)==null?void 0:W.length)||0),n.$$.dirty[0]&67108864&&t(7,s=(S==null?void 0:S.activeIndex)||0),n.$$.dirty[0]&16&&t(8,o=i>=qg?`${qg-1}+`:String(i)),n.$$.dirty[0]&71303168&&g(S),n.$$.dirty[0]&2&&X(f),n.$$.dirty[0]&8&&x(y),n.$$.dirty[0]&262144&&D(l)},[u,f,h,y,i,C,_,s,o,P,E,O,I,N,F,z,q,le,l,a,c,d,g,m,p,b,S,Z,ue]}class gM extends ze{constructor(e){super(),Fe(this,e,nF,eF,ft,{json:18,documentState:19,parser:20,showSearch:1,showReplace:0,readOnly:2,columns:21,onSearch:22,onFocus:23,onPatch:24,onClose:25},null,[-1,-1])}}var ww=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function iF(n,e){return!!(n===e||ww(n)&&ww(e))}function sF(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!iF(n[t],e[t]))return!1;return!0}function eu(n,e){e===void 0&&(e=sF);var t=null;function i(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];if(t&&t.lastThis===this&&e(s,t.lastArgs))return t.lastResult;var r=n.apply(this,s);return t={lastResult:r,lastArgs:s,lastThis:this},r}return i.clear=function(){t=null},i}const _f=Symbol("path");function oF(n,e,t=1/0){const i={};Array.isArray(n)&&z7(n,t,o=>{Ut(o)?mM(o,i,e):i[_f]=!0});const s=[];return _f in i&&s.push([]),pM(i,[],s,e),s}function mM(n,e,t){for(const i in n){const s=n[i],o=e[i]||(e[i]={});Ut(s)&&t?mM(s,o,t):o[_f]===void 0&&(o[_f]=!0)}}function pM(n,e,t,i){for(const s in n){const o=e.concat(s),r=n[s];r&&r[_f]===!0&&t.push(o),gn(r)&&i&&pM(r,o,t,i)}}function rF(n,e){const t=new Set(e.map(Oe)),i=new Set(n.map(Oe));for(const s of t)i.has(s)||t.delete(s);for(const s of i)t.has(s)||t.add(s);return[...t].map(Ts)}function lF(n,e,t,i,s,o,r=80){const l=Jt(t)?t.length:0,a=aF(i,s),c=n-r,f=e+2*r,u=y=>i[y]||s;let h=0,d=o;for(;d<c&&h<l;)d+=u(h),h++;h>0&&(h--,d-=u(h));let g=h,m=0;for(;m<f&&g<l;)m+=u(g),g++;let p=0;for(let y=g;y<l;y++)p+=u(y);const b=Jt(t)?t.slice(h,g):[];return{startIndex:h,endIndex:g,startHeight:d,endHeight:p,averageItemHeight:a,visibleHeight:m,visibleItems:b}}function vw(n,e,t,i){const{rowIndex:s}=gs(n,e);let o=0;for(let r=0;r<s;r++)o+=t[r]||i;return o}function aF(n,e){const t=Object.values(n);if(Ct(t))return e;const i=(o,r)=>o+r;return t.reduce(i)/t.length}function cF(n,e){const{rowIndex:t,columnIndex:i}=gs(Ye(e),n);if(t>0){const s={rowIndex:t-1,columnIndex:i},o=Hl(s,n);return ut(o,!1)}return e}function fF(n,e,t){const{rowIndex:i,columnIndex:s}=gs(Ye(t),e);if(i<n.length-1){const o={rowIndex:i+1,columnIndex:s},r=Hl(o,e);return ut(r,!1)}return t}function uF(n,e){const{rowIndex:t,columnIndex:i}=gs(Ye(e),n);if(i>0){const s={rowIndex:t,columnIndex:i-1},o=Hl(s,n);return ut(o,!1)}return e}function hF(n,e){const{rowIndex:t,columnIndex:i}=gs(Ye(e),n);if(i<n.length-1){const s={rowIndex:t,columnIndex:i+1},o=Hl(s,n);return ut(o,!1)}return e}function gs(n,e){const[t,...i]=n,s=parseInt(t,10);return{rowIndex:isNaN(s)?-1:s,columnIndex:e.findIndex(o=>Wo(i,o))}}function Hl(n,e){const{rowIndex:t,columnIndex:i}=n;return[String(t),...e[i]]}function dF(n,e){const[t,i]=O7(n,r=>s0(r.path[0])),s=lg(t,gF),o=k7(s,r=>{const l={row:[],columns:{}};return r.forEach(a=>{const c=mF(a,e);c!==-1?(l.columns[c]===void 0&&(l.columns[c]=[]),l.columns[c].push(a)):l.row.push(a)}),l});return{root:i,rows:o}}function N0(n,e){if(!(!e||e.length===0))return e.length===1?e[0]:{path:n,message:"Multiple validation issues: "+e.map(t=>Ii(t.path)+" "+t.message).join(", "),severity:Ms.warning}}function gF(n){return parseInt(n.path[0],10)}function mF(n,e){const t=gs(n.path,e);return t.columnIndex!==-1?t.columnIndex:-1}function pF(n,e,t){return e.some(s=>bF(n.sortedColumn,s,t))?{...n,sortedColumn:null}:n}function bF(n,e,t){if(!n)return!1;if(e.op==="replace"){const i=Ts(e.path),{rowIndex:s,columnIndex:o}=gs(i,t),r=t.findIndex(l=>yt(l,n.path));if(s!==-1&&o!==-1&&o!==r)return!1}return!0}function yF(n,e=2){const t=[];function i(s,o){gn(s)&&o.length<e&&Object.keys(s).forEach(r=>{i(s[r],o.concat(r))}),Jt(s)&&t.push(o)}return i(n,[]),t}const di=Fn("jsoneditor:actions");async function bM({json:n,documentState:e,indentation:t,readOnly:i,parser:s,onPatch:o}){if(i||n===void 0||!e.selection||!rc(e.selection))return;const r=R4(n,e.selection,t,s);if(r==null)return;di("cut",{selection:e.selection,clipboard:r,indentation:t}),await I0(r);const{operations:l,newSelection:a}=N4(n,e.selection);o(l,(c,f)=>({state:{...f,selection:a}}))}async function yM({json:n,documentState:e,indentation:t,parser:i}){const s=R4(n,e.selection,t,i);s!=null&&(di("copy",{clipboard:s,indentation:t}),await I0(s))}function _M({clipboardText:n,json:e,selection:t,readOnly:i,parser:s,onPatch:o,onChangeText:r,openRepairModal:l}){if(i)return;function a(c){if(e!==void 0){const f=t||ut([],!1),u=I4(e,f,c,s);di("paste",{pastedText:c,operations:u,selectionNonNull:f}),o(u,(h,d)=>{let g=d;return u.filter(m=>(c3(m)||Q1(m))&&fn(m.value)).forEach(m=>{const p=so(e,m.path);g=lr(h,g,p)}),{state:g}})}else di("paste text",{pastedText:c}),r(n,(f,u)=>{if(f)return{state:lr(f,u,[])}})}try{a(n)}catch{l(n,f=>{di("repaired pasted text: ",f),a(f)})}}function wM({json:n,text:e,documentState:t,keepSelection:i,readOnly:s,onChange:o,onPatch:r}){if(s||!t.selection)return;const l=n!==void 0&&(vn(t.selection)||St(t.selection))?hi(t.selection.path,t.selection.path):t.selection;if(Ct(Ye(t.selection)))di("remove root",{selection:t.selection}),o&&o({text:"",json:void 0},n!==void 0?{text:void 0,json:n}:{text:e||"",json:n},{contentErrors:null,patchResult:null});else if(n!==void 0){const{operations:a,newSelection:c}=N4(n,l);di("remove",{operations:a,selection:t.selection,newSelection:c}),r(a,(f,u)=>({state:{...u,selection:i?t.selection:c}}))}}function _F({json:n,documentState:e,columns:t,readOnly:i,onPatch:s}){if(i||n===void 0||!e.selection||!rc(e.selection))return;const{rowIndex:o,columnIndex:r}=gs(Ye(e.selection),t);di("duplicate row",{rowIndex:o});const l=[String(o)],a=L4(n,[l]);s(a,(c,f)=>{const u=o<n.length?o+1:o,h=Hl({rowIndex:u,columnIndex:r},t),d=ut(h,!1);return{state:{...f,selection:d}}})}function wF({json:n,documentState:e,columns:t,readOnly:i,onPatch:s}){if(i||n===void 0||!e.selection||!rc(e.selection))return;const{rowIndex:o}=gs(Ye(e.selection),t);di("insert before row",{rowIndex:o});const r=[String(o)],a=[{key:"",value:gn(n[0])?{}:""}],c=ga(n,r,a);s(c)}function vF({json:n,documentState:e,columns:t,readOnly:i,onPatch:s}){if(i||n===void 0||!e.selection||!rc(e.selection))return;const{rowIndex:o,columnIndex:r}=gs(Ye(e.selection),t);di("insert after row",{rowIndex:o});const l=o+1,a=[String(l)],f=[{key:"",value:gn(n[0])?{}:""}],u=l<n.length?ga(n,a,f):Sp(n,[],f);s(u,(h,d)=>{const g=Hl({rowIndex:l,columnIndex:r},t),m=ut(g,!1);return{state:{...d,selection:m}}})}function kF({json:n,documentState:e,columns:t,readOnly:i,onPatch:s}){if(i||n===void 0||!e.selection||!rc(e.selection))return;const{rowIndex:o,columnIndex:r}=gs(Ye(e.selection),t);di("remove row",{rowIndex:o});const l=[String(o)],a=$h([l]);s(a,(c,f)=>{const u=o<c.length?o:o>0?o-1:void 0,h=u!==void 0?ut(Hl({rowIndex:u,columnIndex:r},t),!1):null;return di("remove row new selection",{rowIndex:o,newRowIndex:u,newSelection:h}),{state:{...f,selection:h}}})}function od({insertType:n,selectInside:e,refJsonEditor:t,json:i,selection:s,readOnly:o,parser:r,onPatch:l,onReplaceJson:a}){if(o)return;const c=bI(i,s,n);if(i!==void 0){const f=r.stringify(c),u=I4(i,s,f,r);di("onInsert",{insertType:n,operations:u,newValue:c,data:f});const h=mt(u.filter(d=>d.op==="add"||d.op==="replace"));l(u,(d,g)=>{if(h){const m=so(d,h.path);if(fn(c))return{state:{...ts(d,g,m,gf),selection:e?qo(m):g.selection}};if(c===""){const p=Ct(m)?null:Be(d,_t(m));return{state:wp(d,{...g,selection:Ut(p)?as(m,!0):ut(m,!0)},m)}}return}}),di("after patch"),h&&c===""&&rd(()=>Xh(t,"",!0,ld))}else{di("onInsert",{insertType:n,newValue:c});const f=[];a(c,(u,h)=>({state:{...lr(u,h,f),selection:fn(c)?qo(f):ut(f,!0)}}))}}async function vM({char:n,selectInside:e,refJsonEditor:t,json:i,selection:s,readOnly:o,parser:r,onPatch:l,onReplaceJson:a,onSelect:c}){if(!o){if(vn(s)){const f=!s.edit;c({...s,edit:!0}),rd(()=>Xh(t,n,f,ld));return}if(n==="{")od({insertType:"object",selectInside:e,refJsonEditor:t,json:i,selection:s,readOnly:o,parser:r,onPatch:l,onReplaceJson:a});else if(n==="[")od({insertType:"array",selectInside:e,refJsonEditor:t,json:i,selection:s,readOnly:o,parser:r,onPatch:l,onReplaceJson:a});else if(St(s)&&i!==void 0){if(!fn(Be(i,s.path))){const f=!s.edit;c({...s,edit:!0}),rd(()=>Xh(t,n,f,ld))}}else di("onInsertValueWithCharacter",{char:n}),await SF({char:n,refJsonEditor:t,json:i,selection:s,readOnly:o,parser:r,onPatch:l,onReplaceJson:a})}}async function SF({char:n,refJsonEditor:e,json:t,selection:i,readOnly:s,parser:o,onPatch:r,onReplaceJson:l}){if(s)return;od({insertType:"value",selectInside:!1,refJsonEditor:e,json:t,selection:i,readOnly:s,parser:o,onPatch:r,onReplaceJson:l});const a=!pi(i);rd(()=>Xh(e,n,a,ld))}function rd(n){setTimeout(()=>setTimeout(n))}function ld(n){n==null||n.refresh()}function CF(n){let e,t;return{c(){e=R("div"),t=Se(n[0]),w(e,"class","jse-json-preview svelte-l2z0i3")},m(i,s){j(i,e,s),A(e,t)},p(i,[s]){s&1&&Xe(t,i[0])},i:ge,o:ge,d(i){i&&B(e)}}}function MF(n,e,t){let i,s,{text:o}=e,{json:r}=e,{indentation:l}=e,{parser:a}=e;return n.$$set=c=>{"text"in c&&t(1,o=c.text),"json"in c&&t(2,r=c.json),"indentation"in c&&t(3,l=c.indentation),"parser"in c&&t(4,a=c.parser)},n.$$.update=()=>{n.$$.dirty&6&&t(5,i=r!==void 0?{json:r}:{text:o||""}),n.$$.dirty&56&&t(0,s=zo(pp(i,l,a),$m))},[s,o,r,l,a,i]}class kM extends ze{constructor(e){super(),Fe(this,e,MF,CF,Qt,{text:1,json:2,indentation:3,parser:4})}}function kw(n){let e,t;return e=new vt({props:{data:n[0].icon}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s&1&&(o.data=i[0].icon),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Sw(n){let e=n[0].text+"",t;return{c(){t=Se(e)},m(i,s){j(i,t,s)},p(i,s){s&1&&e!==(e=i[0].text+"")&&Xe(t,e)},d(i){i&&B(t)}}}function xF(n){let e,t,i,s,o,r,l,a,c=n[0].icon&&kw(n),f=n[0].text&&Sw(n);return{c(){e=R("button"),c&&c.c(),t=G(),f&&f.c(),w(e,"type","button"),w(e,"class",i=pn(ho("jse-context-menu-button",n[1],n[0].className))+" svelte-szeu2l"),w(e,"title",s=n[0].title),e.disabled=o=n[0].disabled||!1},m(u,h){j(u,e,h),c&&c.m(e,null),A(e,t),f&&f.m(e,null),r=!0,l||(a=he(e,"click",n[3]),l=!0)},p(u,[h]){u[0].icon?c?(c.p(u,h),h&1&&k(c,1)):(c=kw(u),c.c(),k(c,1),c.m(e,t)):c&&(me(),M(c,1,1,()=>{c=null}),pe()),u[0].text?f?f.p(u,h):(f=Sw(u),f.c(),f.m(e,null)):f&&(f.d(1),f=null),(!r||h&3&&i!==(i=pn(ho("jse-context-menu-button",u[1],u[0].className))+" svelte-szeu2l"))&&w(e,"class",i),(!r||h&1&&s!==(s=u[0].title))&&w(e,"title",s),(!r||h&1&&o!==(o=u[0].disabled||!1))&&(e.disabled=o)},i(u){r||(k(c),r=!0)},o(u){M(c),r=!1},d(u){u&&B(e),c&&c.d(),f&&f.d(),l=!1,a()}}}function AF(n,e,t){let{item:i}=e,{className:s=void 0}=e,{onRequestClose:o}=e;const r=l=>{o(),i.onClick(l)};return n.$$set=l=>{"item"in l&&t(0,i=l.item),"className"in l&&t(1,s=l.className),"onRequestClose"in l&&t(2,o=l.onRequestClose)},[i,s,o,r]}class B0 extends ze{constructor(e){super(),Fe(this,e,AF,xF,Qt,{item:0,className:1,onRequestClose:2})}}function Cw(n,e,t){const i=n.slice();return i[11]=e[t],i}const OF=n=>({}),Mw=n=>({});function xw(n){let e,t;return e=new vt({props:{data:n[11].icon}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s&1&&(o.data=i[11].icon),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Aw(n){let e,t,i,s=n[11].text+"",o,r,l,a,c,f,u,h,d=n[11].icon&&xw(n);function g(...m){return n[9](n[11],...m)}return{c(){e=R("li"),t=R("button"),d&&d.c(),i=G(),o=Se(s),c=G(),w(t,"type","button"),w(t,"title",r=n[11].title),t.disabled=l=n[11].disabled,w(t,"class",a=pn(n[11].className)+" svelte-9i012w"),w(e,"class","svelte-9i012w")},m(m,p){j(m,e,p),A(e,t),d&&d.m(t,null),A(t,i),A(t,o),A(e,c),f=!0,u||(h=he(t,"click",g),u=!0)},p(m,p){n=m,n[11].icon?d?(d.p(n,p),p&1&&k(d,1)):(d=xw(n),d.c(),k(d,1),d.m(t,i)):d&&(me(),M(d,1,1,()=>{d=null}),pe()),(!f||p&1)&&s!==(s=n[11].text+"")&&Xe(o,s),(!f||p&1&&r!==(r=n[11].title))&&w(t,"title",r),(!f||p&1&&l!==(l=n[11].disabled))&&(t.disabled=l),(!f||p&1&&a!==(a=pn(n[11].className)+" svelte-9i012w"))&&w(t,"class",a)},i(m){f||(k(d),f=!0)},o(m){M(d),f=!1},d(m){m&&B(e),d&&d.d(),u=!1,h()}}}function PF(n){let e,t,i,s,o,r,l,a,c,f;const u=n[8].defaultItem,h=jt(u,n,n[7],Mw);s=new vt({props:{data:ss}});let d=at(n[0]),g=[];for(let p=0;p<d.length;p+=1)g[p]=Aw(Cw(n,d,p));const m=p=>M(g[p],1,1,()=>{g[p]=null});return{c(){e=R("div"),h&&h.c(),t=G(),i=R("button"),se(s.$$.fragment),o=G(),r=R("div"),l=R("ul");for(let p=0;p<g.length;p+=1)g[p].c();w(i,"type","button"),w(i,"class","jse-open-dropdown svelte-9i012w"),w(i,"data-type","jse-open-dropdown"),i.disabled=n[4],te(i,"jse-visible",n[3]),w(l,"class","svelte-9i012w"),w(r,"class","jse-dropdown-items svelte-9i012w"),fi(r,"width",n[2]),te(r,"jse-visible",n[3]),w(e,"role","button"),w(e,"tabindex","0"),w(e,"class","jse-dropdown-button svelte-9i012w"),w(e,"title",n[1])},m(p,b){j(p,e,b),h&&h.m(e,null),A(e,t),A(e,i),ne(s,i,null),A(e,o),A(e,r),A(r,l);for(let y=0;y<g.length;y+=1)g[y]&&g[y].m(l,null);a=!0,c||(f=[he(i,"click",n[5]),he(e,"click",n[6])],c=!0)},p(p,[b]){if(h&&h.p&&(!a||b&128)&&zt(h,u,p,p[7],a?Ft(u,p[7],b,OF):Vt(p[7]),Mw),(!a||b&16)&&(i.disabled=p[4]),(!a||b&8)&&te(i,"jse-visible",p[3]),b&1){d=at(p[0]);let y;for(y=0;y<d.length;y+=1){const v=Cw(p,d,y);g[y]?(g[y].p(v,b),k(g[y],1)):(g[y]=Aw(v),g[y].c(),k(g[y],1),g[y].m(l,null))}for(me(),y=d.length;y<g.length;y+=1)m(y);pe()}(!a||b&4)&&fi(r,"width",p[2]),(!a||b&8)&&te(r,"jse-visible",p[3]),(!a||b&2)&&w(e,"title",p[1])},i(p){if(!a){k(h,p),k(s.$$.fragment,p);for(let b=0;b<d.length;b+=1)k(g[b]);a=!0}},o(p){M(h,p),M(s.$$.fragment,p),g=g.filter(Boolean);for(let b=0;b<g.length;b+=1)M(g[b]);a=!1},d(p){p&&B(e),h&&h.d(p),ie(s),xn(g,p),c=!1,Et(f)}}}function TF(n,e,t){let i,{$$slots:s={},$$scope:o}=e,{items:r=[]}=e,{title:l=void 0}=e,{width:a="120px"}=e,c=!1;function f(){const g=c;setTimeout(()=>t(3,c=!g))}function u(){t(3,c=!1)}function h(g){Fo(g)==="Escape"&&(g.preventDefault(),t(3,c=!1))}Ai(()=>{document.addEventListener("click",u),document.addEventListener("keydown",h)}),Ci(()=>{document.removeEventListener("click",u),document.removeEventListener("keydown",h)});const d=(g,m)=>g.onClick(m);return n.$$set=g=>{"items"in g&&t(0,r=g.items),"title"in g&&t(1,l=g.title),"width"in g&&t(2,a=g.width),"$$scope"in g&&t(7,o=g.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&t(4,i=r.every(g=>g.disabled===!0))},[r,l,a,c,i,f,u,o,s,d]}class EF extends ze{constructor(e){super(),Fe(this,e,TF,PF,ft,{items:0,title:1,width:2})}}function Ow(n){let e,t;return e=new vt({props:{data:n[0].main.icon}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s&1&&(o.data=i[0].main.icon),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function RF(n){let e,t,i=n[0].main.text+"",s,o,r,l,a,c,f,u=n[0].main.icon&&Ow(n);return{c(){e=R("button"),u&&u.c(),t=G(),s=Se(i),w(e,"class",o=pn(ho("jse-context-menu-button",n[1],n[0].main.className))+" svelte-szeu2l"),w(e,"type","button"),w(e,"slot","defaultItem"),w(e,"title",r=n[0].main.title),e.disabled=l=n[0].main.disabled||!1},m(h,d){j(h,e,d),u&&u.m(e,null),A(e,t),A(e,s),a=!0,c||(f=he(e,"click",n[4]),c=!0)},p(h,d){h[0].main.icon?u?(u.p(h,d),d&1&&k(u,1)):(u=Ow(h),u.c(),k(u,1),u.m(e,t)):u&&(me(),M(u,1,1,()=>{u=null}),pe()),(!a||d&1)&&i!==(i=h[0].main.text+"")&&Xe(s,i),(!a||d&3&&o!==(o=pn(ho("jse-context-menu-button",h[1],h[0].main.className))+" svelte-szeu2l"))&&w(e,"class",o),(!a||d&1&&r!==(r=h[0].main.title))&&w(e,"title",r),(!a||d&1&&l!==(l=h[0].main.disabled||!1))&&(e.disabled=l)},i(h){a||(k(u),a=!0)},o(h){M(u),a=!1},d(h){h&&B(e),u&&u.d(),c=!1,f()}}}function DF(n){let e,t;return e=new EF({props:{width:n[0].width,items:n[3],$$slots:{defaultItem:[RF]},$$scope:{ctx:n}}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,[s]){const o={};s&1&&(o.width=i[0].width),s&8&&(o.items=i[3]),s&39&&(o.$$scope={dirty:s,ctx:i}),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function LF(n,e,t){let i,{item:s}=e,{className:o=void 0}=e,{onRequestClose:r}=e;const l=a=>{r(),s.main.onClick(a)};return n.$$set=a=>{"item"in a&&t(0,s=a.item),"className"in a&&t(1,o=a.className),"onRequestClose"in a&&t(2,r=a.onRequestClose)},n.$$.update=()=>{n.$$.dirty&5&&t(3,i=s.items.map(a=>({...a,onClick:c=>{r(),a.onClick(c)}})))},[s,o,r,i,l]}class j0 extends ze{constructor(e){super(),Fe(this,e,LF,DF,Qt,{item:0,className:1,onRequestClose:2})}}function Pw(n,e,t){const i=n.slice();return i[7]=e[t],i}function Tw(n,e,t){const i=n.slice();return i[10]=e[t],i}function Ew(n,e,t){const i=n.slice();return i[13]=e[t],i}function IF(n){let e=qa(n[7])+"",t;return{c(){t=Se(e)},m(i,s){j(i,t,s)},p(i,s){s&1&&e!==(e=qa(i[7])+"")&&Xe(t,e)},i:ge,o:ge,d(i){i&&B(t)}}}function NF(n){let e;return{c(){e=R("div"),w(e,"class","jse-separator svelte-fnyc8j")},m(t,i){j(t,e,i)},p:ge,i:ge,o:ge,d(t){t&&B(e)}}}function BF(n){let e,t,i=at(n[7].items),s=[];for(let r=0;r<i.length;r+=1)s[r]=Dw(Tw(n,i,r));const o=r=>M(s[r],1,1,()=>{s[r]=null});return{c(){e=R("div");for(let r=0;r<s.length;r+=1)s[r].c();w(e,"class","jse-row svelte-fnyc8j")},m(r,l){j(r,e,l);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(r,l){if(l&3){i=at(r[7].items);let a;for(a=0;a<i.length;a+=1){const c=Tw(r,i,a);s[a]?(s[a].p(c,l),k(s[a],1)):(s[a]=Dw(c),s[a].c(),k(s[a],1),s[a].m(e,null))}for(me(),a=i.length;a<s.length;a+=1)o(a);pe()}},i(r){if(!t){for(let l=0;l<i.length;l+=1)k(s[l]);t=!0}},o(r){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)M(s[l]);t=!1},d(r){r&&B(e),xn(s,r)}}}function jF(n){let e,t;return e=new j0({props:{item:n[7],onRequestClose:n[1]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s&1&&(o.item=i[7]),s&2&&(o.onRequestClose=i[1]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function FF(n){let e,t;return e=new B0({props:{item:n[7],onRequestClose:n[1]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s&1&&(o.item=i[7]),s&2&&(o.onRequestClose=i[1]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function zF(n){let e=qa(n[10])+"",t;return{c(){t=Se(e)},m(i,s){j(i,t,s)},p(i,s){s&1&&e!==(e=qa(i[10])+"")&&Xe(t,e)},i:ge,o:ge,d(i){i&&B(t)}}}function VF(n){let e;return{c(){e=R("div"),w(e,"class","jse-separator svelte-fnyc8j")},m(t,i){j(t,e,i)},p:ge,i:ge,o:ge,d(t){t&&B(e)}}}function HF(n){let e,t,i=at(n[10].items),s=[];for(let r=0;r<i.length;r+=1)s[r]=Rw(Ew(n,i,r));const o=r=>M(s[r],1,1,()=>{s[r]=null});return{c(){e=R("div");for(let r=0;r<s.length;r+=1)s[r].c();w(e,"class","jse-column svelte-fnyc8j")},m(r,l){j(r,e,l);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(r,l){if(l&3){i=at(r[10].items);let a;for(a=0;a<i.length;a+=1){const c=Ew(r,i,a);s[a]?(s[a].p(c,l),k(s[a],1)):(s[a]=Rw(c),s[a].c(),k(s[a],1),s[a].m(e,null))}for(me(),a=i.length;a<s.length;a+=1)o(a);pe()}},i(r){if(!t){for(let l=0;l<i.length;l+=1)k(s[l]);t=!0}},o(r){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)M(s[l]);t=!1},d(r){r&&B(e),xn(s,r)}}}function WF(n){let e,t;return e=new j0({props:{item:n[10],onRequestClose:n[1]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s&1&&(o.item=i[10]),s&2&&(o.onRequestClose=i[1]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function qF(n){let e,t;return e=new B0({props:{item:n[10],onRequestClose:n[1]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s&1&&(o.item=i[10]),s&2&&(o.onRequestClose=i[1]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function UF(n){let e=qa(n[13])+"",t;return{c(){t=Se(e)},m(i,s){j(i,t,s)},p(i,s){s&1&&e!==(e=qa(i[13])+"")&&Xe(t,e)},i:ge,o:ge,d(i){i&&B(t)}}}function JF(n){let e,t=n[13].text+"",i;return{c(){e=R("div"),i=Se(t),w(e,"class","jse-label svelte-fnyc8j")},m(s,o){j(s,e,o),A(e,i)},p(s,o){o&1&&t!==(t=s[13].text+"")&&Xe(i,t)},i:ge,o:ge,d(s){s&&B(e)}}}function KF(n){let e;return{c(){e=R("div"),w(e,"class","jse-separator svelte-fnyc8j")},m(t,i){j(t,e,i)},p:ge,i:ge,o:ge,d(t){t&&B(e)}}}function YF(n){let e,t;return e=new j0({props:{className:"left",item:n[13],onRequestClose:n[1]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s&1&&(o.item=i[13]),s&2&&(o.onRequestClose=i[1]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function XF(n){let e,t;return e=new B0({props:{className:"left",item:n[13],onRequestClose:n[1]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s&1&&(o.item=i[13]),s&2&&(o.onRequestClose=i[1]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Rw(n){let e,t,i,s,o,r,l,a;const c=[XF,YF,KF,JF,UF],f=[];function u(h,d){return d&1&&(e=null),d&1&&(t=null),d&1&&(i=null),d&1&&(s=null),e==null&&(e=!!$f(h[13])),e?0:(t==null&&(t=!!R0(h[13])),t?1:(i==null&&(i=!!wg(h[13])),i?2:(s==null&&(s=!!cB(h[13])),s?3:4)))}return o=u(n,-1),r=f[o]=c[o](n),{c(){r.c(),l=bt()},m(h,d){f[o].m(h,d),j(h,l,d),a=!0},p(h,d){let g=o;o=u(h,d),o===g?f[o].p(h,d):(me(),M(f[g],1,1,()=>{f[g]=null}),pe(),r=f[o],r?r.p(h,d):(r=f[o]=c[o](h),r.c()),k(r,1),r.m(l.parentNode,l))},i(h){a||(k(r),a=!0)},o(h){M(r),a=!1},d(h){h&&B(l),f[o].d(h)}}}function Dw(n){let e,t,i,s,o,r,l,a;const c=[qF,WF,HF,VF,zF],f=[];function u(h,d){return d&1&&(e=null),d&1&&(t=null),d&1&&(i=null),d&1&&(s=null),e==null&&(e=!!$f(h[10])),e?0:(t==null&&(t=!!R0(h[10])),t?1:(i==null&&(i=!!uB(h[10])),i?2:(s==null&&(s=!!wg(h[10])),s?3:4)))}return o=u(n,-1),r=f[o]=c[o](n),{c(){r.c(),l=bt()},m(h,d){f[o].m(h,d),j(h,l,d),a=!0},p(h,d){let g=o;o=u(h,d),o===g?f[o].p(h,d):(me(),M(f[g],1,1,()=>{f[g]=null}),pe(),r=f[o],r?r.p(h,d):(r=f[o]=c[o](h),r.c()),k(r,1),r.m(l.parentNode,l))},i(h){a||(k(r),a=!0)},o(h){M(r),a=!1},d(h){h&&B(l),f[o].d(h)}}}function Lw(n){let e,t,i,s,o,r,l,a;const c=[FF,jF,BF,NF,IF],f=[];function u(h,d){return d&1&&(e=null),d&1&&(t=null),d&1&&(i=null),d&1&&(s=null),e==null&&(e=!!$f(h[7])),e?0:(t==null&&(t=!!R0(h[7])),t?1:(i==null&&(i=!!fB(h[7])),i?2:(s==null&&(s=!!wg(h[7])),s?3:4)))}return o=u(n,-1),r=f[o]=c[o](n),{c(){r.c(),l=bt()},m(h,d){f[o].m(h,d),j(h,l,d),a=!0},p(h,d){let g=o;o=u(h,d),o===g?f[o].p(h,d):(me(),M(f[g],1,1,()=>{f[g]=null}),pe(),r=f[o],r?r.p(h,d):(r=f[o]=c[o](h),r.c()),k(r,1),r.m(l.parentNode,l))},i(h){a||(k(r),a=!0)},o(h){M(r),a=!1},d(h){h&&B(l),f[o].d(h)}}}function Iw(n){let e,t,i,s,o,r,l,a;return s=new vt({props:{data:SL}}),{c(){e=R("div"),t=R("div"),i=R("div"),se(s.$$.fragment),o=G(),r=R("div"),l=Se(n[2]),w(i,"class","jse-tip-icon svelte-fnyc8j"),w(r,"class","jse-tip-text"),w(t,"class","jse-tip svelte-fnyc8j"),w(e,"class","jse-row svelte-fnyc8j")},m(c,f){j(c,e,f),A(e,t),A(t,i),ne(s,i,null),A(t,o),A(t,r),A(r,l),a=!0},p(c,f){(!a||f&4)&&Xe(l,c[2])},i(c){a||(k(s.$$.fragment,c),a=!0)},o(c){M(s.$$.fragment,c),a=!1},d(c){c&&B(e),ie(s)}}}function GF(n){let e,t,i,s,o,r=at(n[0]),l=[];for(let f=0;f<r.length;f+=1)l[f]=Lw(Pw(n,r,f));const a=f=>M(l[f],1,1,()=>{l[f]=null});let c=n[2]&&Iw(n);return{c(){e=R("div");for(let f=0;f<l.length;f+=1)l[f].c();t=G(),c&&c.c(),w(e,"role","menu"),w(e,"tabindex","-1"),w(e,"class","jse-contextmenu svelte-fnyc8j")},m(f,u){j(f,e,u);for(let h=0;h<l.length;h+=1)l[h]&&l[h].m(e,null);A(e,t),c&&c.m(e,null),n[5](e),i=!0,s||(o=he(e,"keydown",n[4]),s=!0)},p(f,[u]){if(u&3){r=at(f[0]);let h;for(h=0;h<r.length;h+=1){const d=Pw(f,r,h);l[h]?(l[h].p(d,u),k(l[h],1)):(l[h]=Lw(d),l[h].c(),k(l[h],1),l[h].m(e,t))}for(me(),h=r.length;h<l.length;h+=1)a(h);pe()}f[2]?c?(c.p(f,u),u&4&&k(c,1)):(c=Iw(f),c.c(),k(c,1),c.m(e,null)):c&&(me(),M(c,1,1,()=>{c=null}),pe())},i(f){if(!i){for(let u=0;u<r.length;u+=1)k(l[u]);k(c),i=!0}},o(f){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)M(l[u]);M(c),i=!1},d(f){f&&B(e),xn(l,f),c&&c.d(),n[5](null),s=!1,o()}}}function qa(n){return console.error("Unknown type of context menu item",n),"???"}function QF(n,e,t){let{items:i}=e,{onRequestClose:s}=e,{tip:o}=e,r;Ai(()=>{const f=Array.from(r.querySelectorAll("button")).find(u=>!u.disabled);f&&f.focus()});const l={ArrowUp:"Up",ArrowDown:"Down",ArrowLeft:"Left",ArrowRight:"Right"};function a(f){const u=Fo(f),h=l[u];if(h&&f.target){f.preventDefault();const d=Array.from(r.querySelectorAll("button:not([disabled])")),g=rL({allElements:d,currentElement:f.target,direction:h,hasPrio:m=>m.getAttribute("data-type")!=="jse-open-dropdown"});g&&g.focus()}}function c(f){it[f?"unshift":"push"](()=>{r=f,t(3,r)})}return n.$$set=f=>{"items"in f&&t(0,i=f.items),"onRequestClose"in f&&t(1,s=f.onRequestClose),"tip"in f&&t(2,o=f.tip)},[i,s,o,r,a,c]}class SM extends ze{constructor(e){super(),Fe(this,e,QF,GF,ft,{items:0,onRequestClose:1,tip:2})}}function ZF({json:n,documentState:e,readOnly:t,parser:i,onEditKey:s,onEditValue:o,onToggleEnforceString:r,onCut:l,onCopy:a,onPaste:c,onRemove:f,onDuplicate:u,onExtract:h,onInsertBefore:d,onInsert:g,onConvert:m,onInsertAfter:p,onSort:b,onTransform:y}){const v=e.selection,C=n!==void 0,_=!!v,S=v?Ct(Ye(v)):!1,x=v?Be(n,Ye(v)):void 0,D=Array.isArray(x)?"Edit array":Ut(x)?"Edit object":"Edit value",P=C&&(Wt(v)||vn(v)||St(v)),E=!t&&C&&v!=null&&Zh(v)&&!S&&!Array.isArray(Be(n,_t(Ye(v)))),O=!t&&C&&v!=null&&Zh(v),I=O&&!fn(x),N=!t&&P,F=P,z=!t&&_,q=!t&&C&&P&&!S,Q=!t&&C&&v!=null&&(Wt(v)||St(v))&&!S,X=P,T=X?"Convert to:":"Insert:",U=t||X?!1:_,Y=!t&&(X?wh(v)&&!Ut(x):_),le=!t&&(X?wh(v)&&!Array.isArray(x):_),Z=!t&&(X?wh(v)&&fn(x):_),ue=v!=null&&x?Vo(x,e.enforceStringMap,Oe(Ye(v)),i):!1;function W(we){P?we!=="structure"&&m(we):g(we)}return[{type:"row",items:[{type:"button",onClick:()=>s(),icon:Ma,text:"Edit key",title:"Edit the key (Double-click on the key)",disabled:!E},{type:"dropdown-button",main:{type:"button",onClick:()=>o(),icon:Ma,text:D,title:"Edit the value (Double-click on the value)",disabled:!O},width:"11em",items:[{type:"button",icon:Ma,text:D,title:"Edit the value (Double-click on the value)",onClick:()=>o(),disabled:!O},{type:"button",icon:ue?V4:W4,text:"Enforce string",title:"Enforce keeping the value as string when it contains a numeric value",onClick:()=>r(),disabled:!I}]}]},{type:"separator"},{type:"row",items:[{type:"dropdown-button",main:{type:"button",onClick:()=>l(!0),icon:Ca,text:"Cut",title:"Cut selected contents, formatted with indentation (Ctrl+X)",disabled:!N},width:"10em",items:[{type:"button",icon:Ca,text:"Cut formatted",title:"Cut selected contents, formatted with indentation (Ctrl+X)",onClick:()=>l(!0),disabled:!N},{type:"button",icon:Ca,text:"Cut compacted",title:"Cut selected contents, without indentation (Ctrl+Shift+X)",onClick:()=>l(!1),disabled:!N}]},{type:"dropdown-button",main:{type:"button",onClick:()=>a(!0),icon:wr,text:"Copy",title:"Copy selected contents, formatted with indentation (Ctrl+C)",disabled:!F},width:"12em",items:[{type:"button",icon:wr,text:"Copy formatted",title:"Copy selected contents, formatted with indentation (Ctrl+C)",onClick:()=>a(!0),disabled:!F},{type:"button",icon:wr,text:"Copy compacted",title:"Copy selected contents, without indentation (Ctrl+Shift+C)",onClick:()=>a(!1),disabled:!F}]},{type:"button",onClick:()=>c(),icon:z4,text:"Paste",title:"Paste clipboard contents (Ctrl+V)",disabled:!z}]},{type:"separator"},{type:"row",items:[{type:"column",items:[{type:"button",onClick:()=>u(),icon:J4,text:"Duplicate",title:"Duplicate selected contents (Ctrl+D)",disabled:!q},{type:"button",onClick:()=>h(),icon:t9,text:"Extract",title:"Extract selected contents",disabled:!Q},{type:"button",onClick:()=>b(),icon:dg,text:"Sort",title:"Sort array or object contents",disabled:t||!P},{type:"button",onClick:()=>y(),icon:ug,text:"Transform",title:"Transform array or object contents (filter, sort, project)",disabled:t||!P},{type:"button",onClick:()=>f(),icon:xp,text:"Remove",title:"Remove selected contents (Delete)",disabled:t||!P}]},{type:"column",items:[{type:"label",text:T},{type:"button",onClick:()=>W("structure"),icon:X?vu:ma,text:"Structure",title:T+" structure",disabled:!U},{type:"button",onClick:()=>W("object"),icon:X?vu:ma,text:"Object",title:T+" structure",disabled:!Y},{type:"button",onClick:()=>W("array"),icon:X?vu:ma,text:"Array",title:T+" array",disabled:!le},{type:"button",onClick:()=>W("value"),icon:X?vu:ma,text:"Value",title:T+" value",disabled:!Z}]}]},{type:"separator"},{type:"row",items:[{type:"button",onClick:()=>d(),icon:GI,text:"Insert before",title:"Select area before current entry to insert or paste contents",disabled:t||!P||S},{type:"button",onClick:()=>p(),icon:qI,text:"Insert after",title:"Select area after current entry to insert or paste contents",disabled:t||!P||S}]}]}const{window:$F}=U1;function Nw(n){let e,t,i;function s(r){n[75](r)}let o={json:n[11],selection:n[12].selection,readOnly:n[0],historyState:n[22],onExpandAll:n[38],onCollapseAll:n[39],onUndo:n[33],onRedo:n[34],onSort:n[35],onTransform:n[36],onContextMenu:n[43],onCopy:n[30],onRenderMenu:n[7]};return n[13]!==void 0&&(o.showSearch=n[13]),e=new Pj({props:o}),it.push(()=>Jn(e,"showSearch",s)),{c(){se(e.$$.fragment)},m(r,l){ne(e,r,l),i=!0},p(r,l){const a={};l[0]&2048&&(a.json=r[11]),l[0]&4096&&(a.selection=r[12].selection),l[0]&1&&(a.readOnly=r[0]),l[0]&4194304&&(a.historyState=r[22]),l[0]&128&&(a.onRenderMenu=r[7]),!t&&l[0]&8192&&(t=!0,a.showSearch=r[13],Un(()=>t=!1)),e.$set(a)},i(r){i||(k(e.$$.fragment,r),i=!0)},o(r){M(e.$$.fragment,r),i=!1},d(r){ie(e,r)}}}function Bw(n){let e,t;return e=new Qj({props:{json:n[11],selection:n[12].selection,onSelect:n[47],onError:n[6],pathParser:n[4]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s[0]&2048&&(o.json=i[11]),s[0]&4096&&(o.selection=i[12].selection),s[0]&64&&(o.onError=i[6]),s[0]&16&&(o.pathParser=i[4]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function ez(n){let e;return{c(){e=R("div"),e.innerHTML='<div class="jse-loading-space svelte-1ig7ktu"></div> <div class="jse-loading svelte-1ig7ktu">loading...</div>',w(e,"class","jse-contents svelte-1ig7ktu")},m(t,i){j(t,e,i)},p:ge,i:ge,o:ge,d(t){t&&B(e)}}}function tz(n){let e,t,i,s,o,r,l,a,c;const f=[iz,nz],u=[];function h(d,g){return d[11]===void 0?0:1}return s=h(n),o=u[s]=f[s](n),{c(){e=R("label"),t=R("input"),i=G(),o.c(),r=bt(),w(t,"type","text"),t.readOnly=!0,w(t,"tabindex","-1"),w(t,"class","jse-hidden-input svelte-1ig7ktu"),w(e,"class","jse-hidden-input-label")},m(d,g){j(d,e,g),A(e,t),n[76](t),j(d,i,g),u[s].m(d,g),j(d,r,g),l=!0,a||(c=he(t,"paste",n[31]),a=!0)},p(d,g){let m=s;s=h(d),s===m?u[s].p(d,g):(me(),M(u[m],1,1,()=>{u[m]=null}),pe(),o=u[s],o?o.p(d,g):(o=u[s]=f[s](d),o.c()),k(o,1),o.m(r.parentNode,r))},i(d){l||(k(o),l=!0)},o(d){M(o),l=!1},d(d){d&&(B(e),B(i),B(r)),n[76](null),u[s].d(d),a=!1,c()}}}function nz(n){var d;let e,t,i,s,o,r,l,a,c,f;t=new gM({props:{json:n[11],documentState:n[12],parser:n[3],showSearch:n[13],showReplace:n[21],readOnly:n[0],columns:void 0,onSearch:n[26],onFocus:n[27],onPatch:n[37],onClose:n[28]}}),o=new D0({props:{value:n[11],path:[],expandedMap:n[12].expandedMap,enforceStringMap:n[12].enforceStringMap,visibleSectionsMap:n[12].visibleSectionsMap,validationErrorsMap:n[24],searchResultItemsMap:(d=n[20])==null?void 0:d.itemsMap,selection:n[12].selection,context:n[15],onDragSelectionStart:Hn}});let u=n[19]&&jw(n),h=n[23]&&Fw(n);return c=new E0({props:{validationErrors:n[14],selectError:n[29]}}),{c(){e=R("div"),se(t.$$.fragment),i=G(),s=R("div"),se(o.$$.fragment),r=G(),u&&u.c(),l=G(),h&&h.c(),a=G(),se(c.$$.fragment),w(e,"class","jse-search-box-container svelte-1ig7ktu"),w(s,"class","jse-contents svelte-1ig7ktu"),w(s,"data-jsoneditor-scrollable-contents",!0)},m(g,m){j(g,e,m),ne(t,e,null),j(g,i,m),j(g,s,m),ne(o,s,null),n[80](s),j(g,r,m),u&&u.m(g,m),j(g,l,m),h&&h.m(g,m),j(g,a,m),ne(c,g,m),f=!0},p(g,m){var v;const p={};m[0]&2048&&(p.json=g[11]),m[0]&4096&&(p.documentState=g[12]),m[0]&8&&(p.parser=g[3]),m[0]&8192&&(p.showSearch=g[13]),m[0]&2097152&&(p.showReplace=g[21]),m[0]&1&&(p.readOnly=g[0]),t.$set(p);const b={};m[0]&2048&&(b.value=g[11]),m[0]&4096&&(b.expandedMap=g[12].expandedMap),m[0]&4096&&(b.enforceStringMap=g[12].enforceStringMap),m[0]&4096&&(b.visibleSectionsMap=g[12].visibleSectionsMap),m[0]&16777216&&(b.validationErrorsMap=g[24]),m[0]&1048576&&(b.searchResultItemsMap=(v=g[20])==null?void 0:v.itemsMap),m[0]&4096&&(b.selection=g[12].selection),m[0]&32768&&(b.context=g[15]),o.$set(b),g[19]?u?(u.p(g,m),m[0]&524288&&k(u,1)):(u=jw(g),u.c(),k(u,1),u.m(l.parentNode,l)):u&&(me(),M(u,1,1,()=>{u=null}),pe()),g[23]?h?(h.p(g,m),m[0]&8388608&&k(h,1)):(h=Fw(g),h.c(),k(h,1),h.m(a.parentNode,a)):h&&(me(),M(h,1,1,()=>{h=null}),pe());const y={};m[0]&16384&&(y.validationErrors=g[14]),c.$set(y)},i(g){f||(k(t.$$.fragment,g),k(o.$$.fragment,g),k(u),k(h),k(c.$$.fragment,g),f=!0)},o(g){M(t.$$.fragment,g),M(o.$$.fragment,g),M(u),M(h),M(c.$$.fragment,g),f=!1},d(g){g&&(B(e),B(i),B(s),B(r),B(l),B(a)),ie(t),ie(o),n[80](null),u&&u.d(g),h&&h.d(g),ie(c,g)}}}function iz(n){let e,t,i,s;const o=[oz,sz],r=[];function l(a,c){return a[18]===""||a[18]===void 0?0:1}return e=l(n),t=r[e]=o[e](n),{c(){t.c(),i=bt()},m(a,c){r[e].m(a,c),j(a,i,c),s=!0},p(a,c){let f=e;e=l(a),e===f?r[e].p(a,c):(me(),M(r[f],1,1,()=>{r[f]=null}),pe(),t=r[e],t?t.p(a,c):(t=r[e]=o[e](a),t.c()),k(t,1),t.m(i.parentNode,i))},i(a){s||(k(t),s=!0)},o(a){M(t),s=!1},d(a){a&&B(i),r[e].d(a)}}}function jw(n){let e,t;return e=new Ns({props:{type:"info",message:`You pasted a JSON ${Array.isArray(n[19].contents)?"array":"object"} as text`,actions:[{icon:hg,text:"Paste as JSON instead",title:"Replace the value with the pasted JSON",onMouseDown:n[44]},{text:"Leave as is",title:"Keep the JSON embedded in the value",onClick:n[45]}]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s[0]&524288&&(o.message=`You pasted a JSON ${Array.isArray(i[19].contents)?"array":"object"} as text`),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Fw(n){let e,t;return e=new Ns({props:{type:"success",message:"The loaded JSON document was invalid but is successfully repaired.",actions:n[0]?[]:[{icon:bf,text:"Ok",title:"Accept the repaired document",onClick:n[8]},{icon:Or,text:"Repair manually instead",title:"Leave the document unchanged and repair it manually instead",onClick:n[46]}],onClose:n[9]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s[0]&1&&(o.actions=i[0]?[]:[{icon:bf,text:"Ok",title:"Accept the repaired document",onClick:i[8]},{icon:Or,text:"Repair manually instead",title:"Leave the document unchanged and repair it manually instead",onClick:i[46]}]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function sz(n){let e,t,i,s;return e=new Ns({props:{type:"error",message:"The loaded JSON document is invalid and could not be repaired automatically.",actions:n[0]?[]:[{icon:Or,text:"Repair manually",title:'Open the document in "code" mode and repair it manually',onClick:n[46]}]}}),i=new kM({props:{text:n[18],json:n[11],indentation:n[5],parser:n[3]}}),{c(){se(e.$$.fragment),t=G(),se(i.$$.fragment)},m(o,r){ne(e,o,r),j(o,t,r),ne(i,o,r),s=!0},p(o,r){const l={};r[0]&1&&(l.actions=o[0]?[]:[{icon:Or,text:"Repair manually",title:'Open the document in "code" mode and repair it manually',onClick:o[46]}]),e.$set(l);const a={};r[0]&262144&&(a.text=o[18]),r[0]&2048&&(a.json=o[11]),r[0]&32&&(a.indentation=o[5]),r[0]&8&&(a.parser=o[3]),i.$set(a)},i(o){s||(k(e.$$.fragment,o),k(i.$$.fragment,o),s=!0)},o(o){M(e.$$.fragment,o),M(i.$$.fragment,o),s=!1},d(o){o&&B(t),ie(e,o),ie(i,o)}}}function oz(n){let e,t;return e=new Rj({props:{readOnly:n[0],onCreateObject:n[77],onCreateArray:n[78],onClick:n[79]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s[0]&1&&(o.readOnly=i[0]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function rz(n){let e,t,i,s,o,r,l,a,c=n[1]&&Nw(n),f=n[2]&&Bw(n);const u=[tz,ez],h=[];function d(g,m){return g[25]?1:0}return s=d(n),o=h[s]=u[s](n),{c(){e=R("div"),c&&c.c(),t=G(),f&&f.c(),i=G(),o.c(),w(e,"role","tree"),w(e,"tabindex","-1"),w(e,"class","jse-tree-mode svelte-1ig7ktu"),te(e,"no-main-menu",!n[1])},m(g,m){j(g,e,m),c&&c.m(e,null),A(e,t),f&&f.m(e,null),A(e,i),h[s].m(e,null),n[81](e),r=!0,l||(a=[he($F,"mousedown",n[48]),he(e,"keydown",n[40]),he(e,"mousedown",n[41]),he(e,"contextmenu",n[42])],l=!0)},p(g,m){g[1]?c?(c.p(g,m),m[0]&2&&k(c,1)):(c=Nw(g),c.c(),k(c,1),c.m(e,t)):c&&(me(),M(c,1,1,()=>{c=null}),pe()),g[2]?f?(f.p(g,m),m[0]&4&&k(f,1)):(f=Bw(g),f.c(),k(f,1),f.m(e,i)):f&&(me(),M(f,1,1,()=>{f=null}),pe()),o.p(g,m),(!r||m[0]&2)&&te(e,"no-main-menu",!g[1])},i(g){r||(k(c),k(f),k(o),r=!0)},o(g){M(c),M(f),M(o),r=!1},d(g){g&&B(e),c&&c.d(),f&&f.d(),h[s].d(),n[81](null),l=!1,Et(a)}}}function lz(n,e,t){let i;const s=Fn("jsoneditor:TreeMode"),o=typeof window>"u";s("isSSR:",o);const{open:r}=jn("simple-modal"),l=Ba(),a=Ba(),{openAbsolutePopup:c,closeAbsolutePopup:f}=jn("absolute-popup");let u,h,d,g=!1;const m=sM();let{readOnly:p}=e,{externalContent:b}=e,{externalSelection:y}=e,{mainMenuBar:v}=e,{navigationBar:C}=e,{escapeControlCharacters:_}=e,{escapeUnicodeCharacters:S}=e,{parser:x}=e,{parseMemoizeOne:D}=e,{validator:P}=e,{validationParser:E}=e,{pathParser:O}=e,{indentation:I}=e,{onError:N}=e,{onChange:F}=e,{onChangeMode:z}=e,{onSelect:q}=e,{onRenderValue:Q}=e,{onRenderMenu:X}=e,{onRenderContextMenu:T}=e,{onClassName:U}=e,{onFocus:Y}=e,{onBlur:le}=e,{onSortModal:Z}=e,{onTransformModal:ue}=e,{onJSONEditorModal:W}=e,we=!1;T0({onMount:Ai,onDestroy:Ci,getWindow:()=>oc(d),hasFocus:()=>we&&document.hasFocus()||b0(d),onFocus:()=>{g=!0,Y&&Y()},onBlur:()=>{g=!1,le&&le()}});let ee,be,tt;function re(L){s("updateSelection",L);const ce=typeof L=="function"?L(H.selection)||null:L;yt(ce,H.selection)||(t(12,H={...H,selection:ce}),q(ce))}let Qe=!1,H=Qh(),ae,De,Le,Ie=!1,Te=!1;function de(L){if(u)if(L){const ce=parseInt(getComputedStyle(u).padding)??0;t(10,u.style.overflowAnchor="none",u),t(10,u.style.paddingTop=ce+cl+"px",u),t(10,u.scrollTop+=cl,u),t(10,u.style.overflowAnchor="",u)}else t(10,u.style.overflowAnchor="none",u),t(10,u.style.paddingTop="",u),t(10,u.scrollTop-=cl,u),t(10,u.style.overflowAnchor="",u)}function lt(L){t(20,Le=L)}async function wt(L){t(12,H={...wp(ee,H,L),selection:null}),await Rt(L)}function Ee(){t(13,Ie=!1),t(21,Te=!1),_n()}function st(L){s("select validation error",L),re(ut(L.path,!1)),Rt(L.path)}const dt=oM({onChange:L=>{t(22,Ze=L)}});let Ze=dt.getState();function It(L=gf){s("expand");const ce={...H,expandedMap:{},visibleSectionsMap:{}};t(12,H=ts(ee,ce,[],L))}let We=!1,ct=[],K;const ke=eu(rM);function qe(L,ce,ye,et){pa(()=>{let Ke;try{Ke=ke(L,ce,ye,et)}catch(Nt){Ke=[{path:[],message:"Failed to validate: "+Nt.message,severity:Ms.warning}]}yt(Ke,ct)||(s("validationErrors changed:",Ke),t(14,ct=Ke))},Ke=>s(`validationErrors updated in ${Ke} ms`))}function Ce(){return s("validate"),tt?{parseError:tt,isRepairable:!1}:(qe(ee,P,x,E),Ct(ct)?null:{validationErrors:ct})}function $(){return ee}function xe(){return H}function Pe(L){df(L)?Ge(L.json):Fa(L)&&ot(L.text)}function Ge(L){if(L===void 0)return;const ce=!yt(ee,L);if(s("update external json",{isChanged:ce,currentlyText:ee===void 0}),!ce)return;const ye=H,et=ee,Ke=be,Nt=We;t(11,ee=L),Pt(ee),t(18,be=void 0),t(23,We=!1),tt=void 0,At(ee),nt({previousJson:et,previousState:ye,previousText:Ke,previousTextIsRepaired:Nt})}function ot(L){if(L===void 0||df(b))return;const ce=L!==be;if(s("update external text",{isChanged:ce}),!ce)return;const ye=ee,et=H,Ke=be,Nt=We;try{t(11,ee=D(L)),Pt(ee),t(18,be=L),t(23,We=!1),tt=void 0}catch(An){try{t(11,ee=D(oo(L))),Pt(ee),t(18,be=L),t(23,We=!0),tt=void 0,At(ee)}catch{t(11,ee=void 0),t(18,be=b.text),t(23,We=!1),tt=be!==void 0&&be!==""?ja(be,An.message||String(An)):void 0}}At(ee),nt({previousJson:ye,previousState:et,previousText:Ke,previousTextIsRepaired:Nt})}function fe(L){yt(H.selection,L)||(s("applyExternalSelection",L),(k0(L)||L===null)&&re(L))}function Pt(L){Qe||(Qe=!0,t(12,H=ts(L,H,[],eI(L))))}function At(L){H.selection&&(ls(L,Al(H.selection))&&ls(L,Ye(H.selection))||(s("clearing selection: path does not exist anymore",H.selection),t(12,H={...H,selection:ta(L,H)})))}function nt({previousJson:L,previousState:ce,previousText:ye,previousTextIsRepaired:et}){L===void 0&&ye===void 0||(ee!==void 0?L!==void 0?dt.add({undo:{patch:[{op:"replace",path:"",value:L}],state:li(ce),json:void 0,text:ye,textIsRepaired:et},redo:{patch:[{op:"replace",path:"",value:ee}],state:li(H),json:void 0,text:be,textIsRepaired:We}}):dt.add({undo:{patch:void 0,json:void 0,text:ye,state:li(ce),textIsRepaired:et},redo:{patch:void 0,json:ee,state:li(H),text:be,textIsRepaired:We}}):L!==void 0&&dt.add({undo:{patch:void 0,json:L,state:li(ce),text:ye,textIsRepaired:et},redo:{patch:void 0,json:void 0,text:be,textIsRepaired:We,state:li(H)}}))}function Kt(){s("createDefaultSelection"),t(12,H={...H,selection:ut([],!1)})}function Yt(L,ce){if(s("patch",L,ce),ee===void 0)throw new Error("Cannot apply patch: no JSON");const ye=ee,et=H,Ke=be,Nt=We,An=B4(ee,L),Qi=S4(ee,H,L),On=Va(ee,L),Kr=lI(Qi.documentState,On,!1);s("patch updatedSelection",On);const sr=typeof ce=="function"?ce(Qi.json,Kr):void 0;t(11,ee=sr&&sr.json!==void 0?sr.json:Qi.json);const uu=sr&&sr.state!==void 0?sr.state:Kr;return t(12,H=uu),t(18,be=void 0),t(23,We=!1),t(19,De=void 0),tt=void 0,At(ee),dt.add({undo:{patch:An,json:void 0,text:Ke,state:li(et),textIsRepaired:Nt},redo:{patch:L,json:void 0,state:li(uu),text:be,textIsRepaired:We}}),{json:ee,previousJson:ye,undo:An,redo:L}}function wi(){p||!H.selection||re(as(Ye(H.selection),!0))}function bs(){if(p||!H.selection)return;const L=Ye(H.selection),ce=Be(ee,L);fn(ce)?$t(L,ce):re(ut(L,!0))}function $o(){if(p||!St(H.selection))return;const L=Ye(H.selection),ce=Oe(L),ye=Be(ee,L),et=!Vo(ye,H.enforceStringMap,ce,x),Ke=et?String(ye):tc(String(ye),x);s("handleToggleEnforceString",{enforceString:et,value:ye,updatedValue:Ke}),ln([{op:"replace",path:ce,value:Ke}],(Nt,An)=>({state:k4(An,ce,et)}))}function qr(){return We&&ee!==void 0&&qs(ee),ee!==void 0?{json:ee}:{text:be||""}}async function Zt(L=!0){await bM({json:ee,documentState:H,indentation:L?I:void 0,readOnly:p,parser:x,onPatch:ln})}async function js(L=!0){ee!==void 0&&await yM({json:ee,documentState:H,indentation:L?I:void 0,parser:x})}function Fs(L){var ye;L.preventDefault();const ce=(ye=L.clipboardData)==null?void 0:ye.getData("text/plain");ce!==void 0&&_M({clipboardText:ce,json:ee,selection:H.selection,readOnly:p,parser:x,onPatch:ln,onChangeText:uc,openRepairModal:ys})}function yo(){r(lM,{},{...Sl,styleWindow:{width:"450px"}},{onClose:()=>_n()})}function ys(L,ce){r(fM,{text:L,onParse:ye=>ag(ye,et=>Jf(et,x)),onRepair:o4,onApply:ce},{...Sl,styleWindow:{width:"600px",height:"500px"},styleContent:{padding:0,height:"100%"}},{onClose:()=>_n()})}function zs(){wM({json:ee,text:be,documentState:H,keepSelection:!1,readOnly:p,onChange:F,onPatch:ln})}function Bi(){if(p||ee===void 0||!H.selection||!rc||Ct(Ye(H.selection)))return;s("duplicate",{selection:H.selection});const L=L4(ee,Ar(ee,H.selection));ln(L)}function ii(){if(p||!H.selection||!Wt(H.selection)&&!St(H.selection)||Ct(Ye(H.selection)))return;s("extract",{selection:H.selection});const L=mI(ee,H.selection);ln(L,(ce,ye)=>{if(fn(ce))return{state:lr(ce,ye,[])}})}function si(L){od({insertType:L,selectInside:!0,refJsonEditor:d,json:ee,selection:H.selection,readOnly:p,parser:x,onPatch:ln,onReplaceJson:qs})}function oi(L){vn(H.selection)&&re(ut(H.selection.path,!1)),H.selection||re(ta(ee,H)),si(L)}function Xn(L){if(!(p||!H.selection)){if(!wh(H.selection)){N(new Error(`Cannot convert current selection to ${L}`));return}try{const ce=Al(H.selection),ye=Be(ee,ce),et=q7(ye,L,x);if(et===ye)return;const Ke=[{op:"replace",path:Oe(ce),value:et}];s("handleConvert",{selection:H.selection,path:ce,type:L,operations:Ke}),ln(Ke,(Nt,An)=>({state:H.selection?lr(Nt,An,Ye(H.selection)):H}))}catch(ce){N(ce)}}}function _s(){if(!H.selection)return;const L=ly(ee,H,!1),ce=_t(Ye(H.selection));L&&!Ct(Ye(L))&&yt(ce,_t(Ye(L)))?re(Uo(Ye(L))):re(qo(ce)),s("insert before",{selection:H.selection,selectionBefore:L,parentPath:ce}),wn().then(()=>ir())}function Vs(){if(!H.selection)return;const L=Fr(ee,H.selection);s("insert after",L),re(Uo(L)),wn().then(()=>ir())}async function mn(L){await vM({char:L,selectInside:!0,refJsonEditor:d,json:ee,selection:H.selection,readOnly:p,parser:x,onPatch:ln,onReplaceJson:qs,onSelect:re})}function Hs(){if(p||!dt.getState().canUndo)return;const L=dt.undo();if(!L)return;const ce={json:ee,text:be};t(11,ee=L.undo.patch?As(ee,L.undo.patch):L.undo.json),t(12,H=L.undo.state),t(18,be=L.undo.text),t(23,We=L.undo.textIsRepaired),tt=void 0,s("undo",{item:L,json:ee,documentState:H});const ye=L.undo.patch&&L.redo.patch?{json:ee,previousJson:ce.json,redo:L.undo.patch,undo:L.redo.patch}:null;vi(ce,ye),_n(),H.selection&&Rt(Ye(H.selection),!1)}function Ws(){if(p||!dt.getState().canRedo)return;const L=dt.redo();if(!L)return;const ce={json:ee,text:be};t(11,ee=L.redo.patch?As(ee,L.redo.patch):L.redo.json),t(12,H=L.redo.state),t(18,be=L.redo.text),t(23,We=L.redo.textIsRepaired),tt=void 0,s("redo",{item:L,json:ee,documentState:H});const ye=L.undo.patch&&L.redo.patch?{json:ee,previousJson:ce.json,redo:L.redo.patch,undo:L.undo.patch}:null;vi(ce,ye),_n(),H.selection&&Rt(Ye(H.selection),!1)}function er(L){p||ee===void 0||(we=!0,Z({id:l,json:ee,rootPath:L,onSort:async({operations:ce})=>{s("onSort",L,ce),ln(ce,(ye,et)=>({state:{...lr(ye,et,L),selection:ut(L,!1)}}))},onClose:()=>{we=!1,_n()}}))}function _o(){if(!H.selection)return;const L=ay(ee,H.selection);er(L)}function wo(){er([])}function oe(L){if(ee===void 0)return;const{id:ce,onTransform:ye,onClose:et}=L,Ke=L.rootPath||[];we=!0,ue({id:ce||a,json:ee,rootPath:Ke,onTransform:Nt=>{ye?ye({operations:Nt,json:ee,transformedJson:As(ee,Nt)}):(s("onTransform",Ke,Nt),ln(Nt,(An,Qi)=>({state:{...lr(An,Qi,Ke),selection:ut(Ke,!1)}})))},onClose:()=>{we=!1,_n(),et&&et()}})}function $e(){if(!H.selection)return;const L=ay(ee,H.selection);oe({rootPath:L})}function ht(){oe({rootPath:[]})}function $t(L,ce){s("openJSONEditorModal",{path:L,value:ce}),we=!0,W({content:{json:ce},path:L,onPatch:Fi.onPatch,onClose:()=>{we=!1,_n()}})}async function Rt(L,ce=!0){t(12,H=wp(ee,H,L)),await wn();const ye=Xt(L);if(s("scrollTo",{path:L,elem:ye,refContents:u}),!ye||!u)return Promise.resolve();const et=u.getBoundingClientRect(),Ke=ye.getBoundingClientRect();if(!ce&&Ke.bottom>et.top&&Ke.top<et.bottom)return Promise.resolve();const Nt=-(et.height/4);return new Promise(An=>{m(ye,{container:u,offset:Nt,duration:Qm,callback:()=>An()})})}function Xt(L){return u?u.querySelector(`div[data-path="${za(L)}"]`):null}function Vn(L){const ce=Xt(L);if(!ce||!u)return;const ye=u.getBoundingClientRect(),et=ce.getBoundingClientRect(),Ke=20,Nt=fn(Be(ee,L))?Ke:et.height;et.top<ye.top+Ke?m(ce,{container:u,offset:-Ke,duration:0}):et.top+Nt>ye.bottom-Ke&&m(ce,{container:u,offset:-(ye.height-Nt-Ke),duration:0})}function vi(L,ce){if(!(L.json===void 0&&(L==null?void 0:L.text)===void 0)){if(be!==void 0){const ye={text:be,json:void 0};F==null||F(ye,L,{contentErrors:Ce(),patchResult:ce})}else if(ee!==void 0){const ye={text:void 0,json:ee};F==null||F(ye,L,{contentErrors:Ce(),patchResult:ce})}}}function ln(L,ce){s("handlePatch",L,ce);const ye={json:ee,text:be},et=Yt(L,ce);return vi(ye,et),et}function qs(L,ce){const ye=H,et=ee,Ke=be,Nt={json:ee,text:be},An=We,Qi=ts(ee,H,[],eo),On=typeof ce=="function"?ce(L,Qi):void 0;t(11,ee=On&&On.json!==void 0?On.json:L),t(12,H=On&&On.state!==void 0?On.state:Qi),t(18,be=void 0),t(23,We=!1),tt=void 0,At(ee),nt({previousJson:et,previousState:ye,previousText:Ke,previousTextIsRepaired:An}),vi(Nt,null)}function uc(L,ce){s("handleChangeText");const ye=H,et=ee,Ke=be,Nt={json:ee,text:be},An=We;try{t(11,ee=D(L)),t(12,H=ts(ee,H,[],eo)),t(18,be=void 0),t(23,We=!1),tt=void 0}catch(On){try{t(11,ee=D(oo(L))),t(12,H=ts(ee,H,[],eo)),t(18,be=L),t(23,We=!0),tt=void 0}catch{t(11,ee=void 0),t(12,H=Qh({json:ee,expand:eo})),t(18,be=L),t(23,We=!1),tt=be!==""?ja(be,On.message||String(On)):void 0}}if(typeof ce=="function"){const On=ce(ee,H);t(11,ee=On&&On.json?On.json:ee),t(12,H=On&&On.state?On.state:H)}At(ee),nt({previousJson:et,previousState:ye,previousText:Ke,previousTextIsRepaired:An}),vi(Nt,null)}function tr(L,ce,ye=!1){s("expand",{path:L,expanded:ce,recursive:ye}),ce?ye?t(12,H=ts(ee,H,L,gf)):t(12,H=YL(H,L)):t(12,H=v4(H,L)),H.selection&&!ce&&nI(H.selection,L)&&re(null),_n()}function Ur(){tr([],!0,!0)}function hc(){tr([],!1,!0)}function Jr(L){s("openFind",{findAndReplace:L}),t(13,Ie=!1),t(21,Te=!1),wn().then(()=>{t(13,Ie=!0),t(21,Te=L)})}function dc(L,ce){s("handleExpandSection",L,ce);const ye=Oe(L);t(12,H=XL(ee,H,ye,ce))}function Jl(L){s("pasted json as text",L),t(19,De=L)}function nr(L){const ce=Fo(L),ye=L.shiftKey;if(s("keydown",{combo:ce,key:L.key}),ce==="Ctrl+X"&&(L.preventDefault(),Zt(!0)),ce==="Ctrl+Shift+X"&&(L.preventDefault(),Zt(!1)),ce==="Ctrl+C"&&(L.preventDefault(),js(!0)),ce==="Ctrl+Shift+C"&&(L.preventDefault(),js(!1)),ce==="Ctrl+D"&&(L.preventDefault(),Bi()),(ce==="Delete"||ce==="Backspace")&&(L.preventDefault(),zs()),ce==="Insert"&&(L.preventDefault(),si("structure")),ce==="Ctrl+A"&&(L.preventDefault(),re(aI())),ce==="Ctrl+Q"&&ir(L),ce==="ArrowUp"||ce==="Shift+ArrowUp"){L.preventDefault();const Ke=H.selection?ly(ee,H,ye)||H.selection:ta(ee,H);re(Ke),Vn(Ye(Ke))}if(ce==="ArrowDown"||ce==="Shift+ArrowDown"){L.preventDefault();const Ke=H.selection?iI(ee,H,ye)||H.selection:ta(ee,H);re(Ke),Vn(Ye(Ke))}if(ce==="ArrowLeft"||ce==="Shift+ArrowLeft"){L.preventDefault();const Ke=H.selection?oI(ee,H,ye,!p)||H.selection:ta(ee,H);re(Ke),Vn(Ye(Ke))}if(ce==="ArrowRight"||ce==="Shift+ArrowRight"){L.preventDefault();const Ke=H.selection&&ee!==void 0?rI(ee,H,ye,!p)||H.selection:ta(ee,H);re(Ke),Vn(Ye(Ke))}if(ce==="Enter"&&H.selection){if(fg(H.selection)){const Ke=H.selection.focusPath,Nt=Be(ee,_t(Ke));Array.isArray(Nt)&&re(ut(Ke,!1))}if(vn(H.selection)&&(L.preventDefault(),re({...H.selection,edit:!0})),St(H.selection)){L.preventDefault();const Ke=Be(ee,H.selection.path);fn(Ke)?tr(H.selection.path,!0):re({...H.selection,edit:!0})}}if(ce.replace(/^Shift\+/,"").length===1&&H.selection){L.preventDefault(),mn(L.key);return}if(ce==="Enter"&&(Ri(H.selection)||Sn(H.selection))){L.preventDefault(),mn("");return}if(ce==="Ctrl+Enter"&&St(H.selection)){const Ke=Be(ee,H.selection.path);Xd(Ke)&&window.open(String(Ke),"_blank")}ce==="Escape"&&H.selection&&(L.preventDefault(),re(null)),ce==="Ctrl+F"&&(L.preventDefault(),Jr(!1)),ce==="Ctrl+H"&&(L.preventDefault(),Jr(!0)),ce==="Ctrl+Z"&&(L.preventDefault(),Hs()),ce==="Ctrl+Shift+Z"&&(L.preventDefault(),Ws())}function gc(L){s("handleMouseDown",L);const ce=L.target;!d4(ce,"BUTTON")&&!ce.isContentEditable&&(_n(),!H.selection&&ee===void 0&&(be===""||be===void 0)&&Kt())}function vo({anchor:L,left:ce,top:ye,width:et,height:Ke,offsetTop:Nt,offsetLeft:An,showTip:Qi}){const On=ZF({json:ee,documentState:H,readOnly:p,parser:x,onEditKey:wi,onEditValue:bs,onToggleEnforceString:$o,onCut:Zt,onCopy:js,onPaste:yo,onRemove:zs,onDuplicate:Bi,onExtract:ii,onInsertBefore:_s,onInsert:oi,onInsertAfter:Vs,onConvert:Xn,onSort:_o,onTransform:$e}),Kr=T(On);if(Kr===!1)return;const sr={tip:Qi?"Tip: you can open this context menu via right-click or with Ctrl+Q":void 0,items:Kr,onRequestClose:()=>f(Fb)},uu={left:ce,top:ye,offsetTop:Nt,offsetLeft:An,width:et,height:Ke,anchor:L,closeOnOuterClick:!0,onClose:()=>{we=!1,_n()}};we=!0;const Fb=c(SM,sr,uu)}function ir(L){if(!pi(H.selection)){if(L&&(L.stopPropagation(),L.preventDefault()),L&&L.type==="contextmenu"&&L.target!==h)vo({left:L.clientX,top:L.clientY,width:Eo,height:To,showTip:!1});else{const ce=u==null?void 0:u.querySelector(".jse-context-menu-pointer.jse-selected");if(ce)vo({anchor:ce,offsetTop:2,width:Eo,height:To,showTip:!1});else{const ye=u==null?void 0:u.getBoundingClientRect();ye&&vo({top:ye.top+2,left:ye.left+2,width:Eo,height:To,showTip:!1})}}return!1}}function Kl(L){vo({anchor:m4(L.target,"BUTTON"),offsetTop:0,width:Eo,height:To,showTip:!0})}async function Yl(){if(s("apply pasted json",De),!De)return;const{path:L,contents:ce}=De;t(19,De=void 0);const ye=(u==null?void 0:u.querySelector(".jse-editable-div"))||null;b4(ye)&&ye.cancel();const et=[{op:"replace",path:Oe(L),value:ce}];ln(et,(Ke,Nt)=>({state:lr(Ke,Nt,L)})),setTimeout(_n)}function Xl(){s("clear pasted json"),t(19,De=void 0),_n()}function mc(){z(Wn.text)}function Gl(L){re(L),_n(),Rt(Ye(L))}function _n(){s("focus"),h&&(h.focus(),h.select())}function J(L){!Kf(L.target,ye=>ye===d)&&pi(H.selection)&&(s("click outside the editor, stop edit mode"),re(ye=>vn(ye)?{...ye,edit:!1}:St(ye)?{...ye,edit:!1}:ye),g&&h&&(h.focus(),h.blur()),s("blur (outside editor)"),h&&h.blur())}function Ue(L){return sI(ee,H,L)}function en(L){i&&i.onDrag(L)}function ji(){i&&i.onDragEnd()}let Fi;function zi(L){Ie=L,t(13,Ie)}function V(L){it[L?"unshift":"push"](()=>{h=L,t(16,h)})}const ve=()=>{_n(),mn("{")},Ne=()=>{_n(),mn("[")},He=()=>{_n()};function kt(L){it[L?"unshift":"push"](()=>{u=L,t(10,u)})}function Dt(L){it[L?"unshift":"push"](()=>{d=L,t(17,d)})}return n.$$set=L=>{"readOnly"in L&&t(0,p=L.readOnly),"externalContent"in L&&t(49,b=L.externalContent),"externalSelection"in L&&t(50,y=L.externalSelection),"mainMenuBar"in L&&t(1,v=L.mainMenuBar),"navigationBar"in L&&t(2,C=L.navigationBar),"escapeControlCharacters"in L&&t(51,_=L.escapeControlCharacters),"escapeUnicodeCharacters"in L&&t(52,S=L.escapeUnicodeCharacters),"parser"in L&&t(3,x=L.parser),"parseMemoizeOne"in L&&t(53,D=L.parseMemoizeOne),"validator"in L&&t(54,P=L.validator),"validationParser"in L&&t(55,E=L.validationParser),"pathParser"in L&&t(4,O=L.pathParser),"indentation"in L&&t(5,I=L.indentation),"onError"in L&&t(6,N=L.onError),"onChange"in L&&t(56,F=L.onChange),"onChangeMode"in L&&t(57,z=L.onChangeMode),"onSelect"in L&&t(58,q=L.onSelect),"onRenderValue"in L&&t(59,Q=L.onRenderValue),"onRenderMenu"in L&&t(7,X=L.onRenderMenu),"onRenderContextMenu"in L&&t(60,T=L.onRenderContextMenu),"onClassName"in L&&t(61,U=L.onClassName),"onFocus"in L&&t(62,Y=L.onFocus),"onBlur"in L&&t(63,le=L.onBlur),"onSortModal"in L&&t(64,Z=L.onSortModal),"onTransformModal"in L&&t(65,ue=L.onTransformModal),"onJSONEditorModal"in L&&t(66,W=L.onJSONEditorModal)},n.$$.update=()=>{n.$$.dirty[1]&3145728&&t(74,ae=m0({escapeControlCharacters:_,escapeUnicodeCharacters:S})),n.$$.dirty[0]&4096&&s("selection",H.selection),n.$$.dirty[0]&8192&&de(Ie),n.$$.dirty[1]&262144&&Pe(b),n.$$.dirty[1]&524288&&fe(y),n.$$.dirty[0]&2056|n.$$.dirty[1]&25165824&&qe(ee,P,x,E),n.$$.dirty[0]&16384&&t(24,K=ZN(ct)),n.$$.dirty[0]&1024&&(i=u?XN(u):void 0),n.$$.dirty[0]&9|n.$$.dirty[1]&1342177280|n.$$.dirty[2]&4096&&t(15,Fi={readOnly:p,parser:x,normalization:ae,getJson:$,getDocumentState:xe,findElement:Xt,findNextInside:Ue,focus:_n,onPatch:ln,onInsert:si,onExpand:tr,onSelect:re,onFind:Jr,onExpandSection:dc,onPasteJson:Jl,onRenderValue:Q,onContextMenu:vo,onClassName:U||(()=>{}),onDrag:en,onDragEnd:ji}),n.$$.dirty[0]&32768&&s("context changed",Fi)},[p,v,C,x,O,I,N,X,qr,_n,u,ee,H,Ie,ct,Fi,h,d,be,De,Le,Te,Ze,We,K,o,lt,wt,Ee,st,js,Fs,mn,Hs,Ws,wo,ht,ln,Ur,hc,nr,gc,ir,Kl,Yl,Xl,mc,Gl,J,b,y,_,S,D,P,E,F,z,q,Q,T,U,Y,le,Z,ue,W,It,Ce,$,Yt,oe,Rt,Xt,ae,zi,V,ve,Ne,He,kt,Dt]}class F0 extends ze{constructor(e){super(),Fe(this,e,lz,rz,ft,{readOnly:0,externalContent:49,externalSelection:50,mainMenuBar:1,navigationBar:2,escapeControlCharacters:51,escapeUnicodeCharacters:52,parser:3,parseMemoizeOne:53,validator:54,validationParser:55,pathParser:4,indentation:5,onError:6,onChange:56,onChangeMode:57,onSelect:58,onRenderValue:59,onRenderMenu:7,onRenderContextMenu:60,onClassName:61,onFocus:62,onBlur:63,onSortModal:64,onTransformModal:65,onJSONEditorModal:66,expand:67,validate:68,getJson:69,patch:70,acceptAutoRepair:8,openTransformModal:71,scrollTo:72,findElement:73,focus:9},null,[-1,-1,-1,-1,-1])}get expand(){return this.$$.ctx[67]}get validate(){return this.$$.ctx[68]}get getJson(){return this.$$.ctx[69]}get patch(){return this.$$.ctx[70]}get acceptAutoRepair(){return this.$$.ctx[8]}get openTransformModal(){return this.$$.ctx[71]}get scrollTo(){return this.$$.ctx[72]}get findElement(){return this.$$.ctx[73]}get focus(){return this.$$.ctx[9]}}function CM(n){return az(n)?new Proxy(n,{get(e,t,i){const s=Reflect.get(e,t,i);return CM(s)},set(){return!1},deleteProperty(){return!1}}):n}function az(n){return typeof n=="object"&&n!==null}function zw(n){let e,t,i,s,o;const r=[fz,cz],l=[];function a(c,f){return f[0]&16384&&(e=null),e==null&&(e=!!Array.isArray(c[14])),e?0:1}return t=a(n,[-1,-1]),i=l[t]=r[t](n),{c(){i.c(),s=bt()},m(c,f){l[t].m(c,f),j(c,s,f),o=!0},p(c,f){let u=t;t=a(c,f),t===u?l[t].p(c,f):(me(),M(l[u],1,1,()=>{l[u]=null}),pe(),i=l[t],i?i.p(c,f):(i=l[t]=r[t](c),i.c()),k(i,1),i.m(s.parentNode,s))},i(c){o||(k(i),o=!0)},o(c){M(i),o=!1},d(c){c&&B(s),l[t].d(c)}}}function cz(n){let e;return{c(){e=Se("(Only available for arrays, not for objects)")},m(t,i){j(t,e,i)},p:ge,i:ge,o:ge,d(t){t&&B(e)}}}function fz(n){let e,t;return e=new NN({props:{queryOptions:n[15],json:n[14],onChange:n[24]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s[0]&32768&&(o.queryOptions=i[15]),s[0]&16384&&(o.json=i[14]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Vw(n){let e,t;return e=new F0({props:{externalContent:n[17],externalSelection:null,readOnly:!0,mainMenuBar:!1,navigationBar:!1,indentation:n[2],escapeControlCharacters:n[3],escapeUnicodeCharacters:n[4],parser:n[5],parseMemoizeOne:n[6],onRenderValue:n[10],onRenderMenu:n[11],onRenderContextMenu:n[12],onError:console.error,onChange:Hn,onChangeMode:Hn,onSelect:Hn,onFocus:Hn,onBlur:Hn,onSortModal:Hn,onTransformModal:Hn,onJSONEditorModal:Hn,onClassName:n[13],validator:null,validationParser:n[7],pathParser:n[8]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s[0]&131072&&(o.externalContent=i[17]),s[0]&4&&(o.indentation=i[2]),s[0]&8&&(o.escapeControlCharacters=i[3]),s[0]&16&&(o.escapeUnicodeCharacters=i[4]),s[0]&32&&(o.parser=i[5]),s[0]&64&&(o.parseMemoizeOne=i[6]),s[0]&1024&&(o.onRenderValue=i[10]),s[0]&2048&&(o.onRenderMenu=i[11]),s[0]&4096&&(o.onRenderContextMenu=i[12]),s[0]&8192&&(o.onClassName=i[13]),s[0]&128&&(o.validationParser=i[7]),s[0]&256&&(o.pathParser=i[8]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function uz(n){let e,t;return{c(){e=R("div"),t=Se(n[21]),w(e,"class","jse-preview jse-error svelte-1mpf6w7")},m(i,s){j(i,e,s),A(e,t)},p(i,s){s[0]&2097152&&Xe(t,i[21])},i:ge,o:ge,d(i){i&&B(e)}}}function hz(n){let e,t;return e=new F0({props:{externalContent:n[22],externalSelection:null,readOnly:!0,mainMenuBar:!1,navigationBar:!1,indentation:n[2],escapeControlCharacters:n[3],escapeUnicodeCharacters:n[4],parser:n[5],parseMemoizeOne:n[6],onRenderValue:n[10],onRenderMenu:n[11],onRenderContextMenu:n[12],onError:console.error,onChange:Hn,onChangeMode:Hn,onSelect:Hn,onFocus:Hn,onBlur:Hn,onSortModal:Hn,onTransformModal:Hn,onJSONEditorModal:Hn,onClassName:n[13],validator:null,validationParser:n[7],pathParser:n[8]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s[0]&4194304&&(o.externalContent=i[22]),s[0]&4&&(o.indentation=i[2]),s[0]&8&&(o.escapeControlCharacters=i[3]),s[0]&16&&(o.escapeUnicodeCharacters=i[4]),s[0]&32&&(o.parser=i[5]),s[0]&64&&(o.parseMemoizeOne=i[6]),s[0]&1024&&(o.onRenderValue=i[10]),s[0]&2048&&(o.onRenderMenu=i[11]),s[0]&4096&&(o.onRenderContextMenu=i[12]),s[0]&8192&&(o.onClassName=i[13]),s[0]&128&&(o.validationParser=i[7]),s[0]&256&&(o.pathParser=i[8]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function dz(n){let e,t,i,s,o,r,l,a,c,f=n[23](n[0]).description+"",u,h,d,g,m,p,b,y,v,C,_,S,x,D,P,E,O,I,N,F,z,q,Q,X,T,U,Y,le,Z,ue,W,we,ee,be,tt,re,Qe,H,ae;function De(Ee){n[37](Ee)}let Le={queryLanguages:n[9],queryLanguageId:n[0],onChangeQueryLanguage:n[29]};n[18]!==void 0&&(Le.fullscreen=n[18]),e=new YN({props:Le}),it.push(()=>Jn(e,"fullscreen",De)),C=new vt({props:{data:n[19]?ss:fr}});let Ie=n[19]&&zw(n);Q=new vt({props:{data:n[20]?ss:fr}});let Te=n[20]&&Vw(n);const de=[hz,uz],lt=[];function wt(Ee,st){return Ee[21]?1:0}return ue=wt(n),W=lt[ue]=de[ue](n),{c(){se(e.$$.fragment),i=G(),s=R("div"),o=R("div"),r=R("div"),l=R("div"),l.innerHTML='<div class="jse-label-inner svelte-1mpf6w7">Language</div>',a=G(),c=R("div"),u=G(),h=R("div"),h.innerHTML='<div class="jse-label-inner svelte-1mpf6w7">Path</div>',d=G(),g=R("input"),p=G(),b=R("div"),y=R("div"),v=R("button"),se(C.$$.fragment),_=Se(`
                Wizard`),S=G(),Ie&&Ie.c(),x=G(),D=R("div"),D.innerHTML='<div class="jse-label-inner svelte-1mpf6w7">Query</div>',P=G(),E=R("textarea"),O=G(),I=R("div"),N=R("div"),F=R("div"),z=R("div"),q=R("button"),se(Q.$$.fragment),X=Se(`
                  Original`),T=G(),Te&&Te.c(),U=G(),Y=R("div"),le=R("div"),le.innerHTML='<div class="jse-label-inner svelte-1mpf6w7">Preview</div>',Z=G(),W.c(),we=G(),ee=R("div"),be=R("button"),tt=Se("Transform"),w(l,"class","jse-label svelte-1mpf6w7"),w(c,"class","jse-description svelte-1mpf6w7"),w(h,"class","jse-label svelte-1mpf6w7"),w(g,"class","jse-path svelte-1mpf6w7"),w(g,"type","text"),g.readOnly=!0,w(g,"title","Selected path"),g.value=m=Ct(n[1])?"(document root)":Ii(n[1]),w(v,"type","button"),w(v,"class","svelte-1mpf6w7"),w(y,"class","jse-label-inner svelte-1mpf6w7"),w(b,"class","jse-label svelte-1mpf6w7"),w(D,"class","jse-label svelte-1mpf6w7"),w(E,"class","jse-query svelte-1mpf6w7"),w(E,"spellcheck","false"),E.value=n[16],w(r,"class","jse-query-contents svelte-1mpf6w7"),w(q,"type","button"),w(q,"class","svelte-1mpf6w7"),w(z,"class","jse-label-inner svelte-1mpf6w7"),w(F,"class","jse-label svelte-1mpf6w7"),w(N,"class","jse-original-data svelte-1mpf6w7"),te(N,"jse-hide",!n[20]),w(le,"class","jse-label svelte-1mpf6w7"),w(Y,"class","jse-preview-data svelte-1mpf6w7"),w(I,"class","jse-data-contents svelte-1mpf6w7"),te(I,"jse-hide-original-data",!n[20]),w(o,"class","jse-main-contents svelte-1mpf6w7"),w(be,"type","button"),w(be,"class","jse-primary svelte-1mpf6w7"),be.disabled=re=!!n[21],w(ee,"class","jse-actions svelte-1mpf6w7"),w(s,"class","jse-modal-contents svelte-1mpf6w7")},m(Ee,st){ne(e,Ee,st),j(Ee,i,st),j(Ee,s,st),A(s,o),A(o,r),A(r,l),A(r,a),A(r,c),c.innerHTML=f,A(r,u),A(r,h),A(r,d),A(r,g),A(r,p),A(r,b),A(b,y),A(y,v),ne(C,v,null),A(v,_),A(r,S),Ie&&Ie.m(r,null),A(r,x),A(r,D),A(r,P),A(r,E),A(o,O),A(o,I),A(I,N),A(N,F),A(F,z),A(z,q),ne(Q,q,null),A(q,X),A(N,T),Te&&Te.m(N,null),A(I,U),A(I,Y),A(Y,le),A(Y,Z),lt[ue].m(Y,null),A(s,we),A(s,ee),A(ee,be),A(be,tt),Qe=!0,H||(ae=[he(v,"click",n[27]),he(E,"input",n[25]),he(q,"click",n[28]),he(be,"click",n[26]),En(mz.call(null,be))],H=!0)},p(Ee,st){const dt={};st[0]&512&&(dt.queryLanguages=Ee[9]),st[0]&1&&(dt.queryLanguageId=Ee[0]),!t&&st[0]&262144&&(t=!0,dt.fullscreen=Ee[18],Un(()=>t=!1)),e.$set(dt),(!Qe||st[0]&1)&&f!==(f=Ee[23](Ee[0]).description+"")&&(c.innerHTML=f),(!Qe||st[0]&2&&m!==(m=Ct(Ee[1])?"(document root)":Ii(Ee[1]))&&g.value!==m)&&(g.value=m);const Ze={};st[0]&524288&&(Ze.data=Ee[19]?ss:fr),C.$set(Ze),Ee[19]?Ie?(Ie.p(Ee,st),st[0]&524288&&k(Ie,1)):(Ie=zw(Ee),Ie.c(),k(Ie,1),Ie.m(r,x)):Ie&&(me(),M(Ie,1,1,()=>{Ie=null}),pe()),(!Qe||st[0]&65536)&&(E.value=Ee[16]);const It={};st[0]&1048576&&(It.data=Ee[20]?ss:fr),Q.$set(It),Ee[20]?Te?(Te.p(Ee,st),st[0]&1048576&&k(Te,1)):(Te=Vw(Ee),Te.c(),k(Te,1),Te.m(N,null)):Te&&(me(),M(Te,1,1,()=>{Te=null}),pe()),(!Qe||st[0]&1048576)&&te(N,"jse-hide",!Ee[20]);let We=ue;ue=wt(Ee),ue===We?lt[ue].p(Ee,st):(me(),M(lt[We],1,1,()=>{lt[We]=null}),pe(),W=lt[ue],W?W.p(Ee,st):(W=lt[ue]=de[ue](Ee),W.c()),k(W,1),W.m(Y,null)),(!Qe||st[0]&1048576)&&te(I,"jse-hide-original-data",!Ee[20]),(!Qe||st[0]&2097152&&re!==(re=!!Ee[21]))&&(be.disabled=re)},i(Ee){Qe||(k(e.$$.fragment,Ee),k(C.$$.fragment,Ee),k(Ie),k(Q.$$.fragment,Ee),k(Te),k(W),Qe=!0)},o(Ee){M(e.$$.fragment,Ee),M(C.$$.fragment,Ee),M(Ie),M(Q.$$.fragment,Ee),M(Te),M(W),Qe=!1},d(Ee){Ee&&(B(i),B(s)),ie(e,Ee),ie(C),Ie&&Ie.d(),ie(Q),Te&&Te.d(),lt[ue].d(),H=!1,Et(ae)}}}function gz(n){let e,t,i,s,o;return t=new y4({props:{$$slots:{default:[dz]},$$scope:{ctx:n}}}),{c(){e=R("div"),se(t.$$.fragment),w(e,"class","jse-modal jse-transform svelte-1mpf6w7"),te(e,"fullscreen",n[18])},m(r,l){j(r,e,l),ne(t,e,null),i=!0,s||(o=En(Zf.call(null,e,n[30])),s=!0)},p(r,l){const a={};l[0]&8388607|l[1]&16384&&(a.$$scope={dirty:l,ctx:r}),t.$set(a),(!i||l[0]&262144)&&te(e,"fullscreen",r[18])},i(r){i||(k(t.$$.fragment,r),i=!0)},o(r){M(t.$$.fragment,r),i=!1},d(r){r&&B(e),ie(t),s=!1,o()}}}function mz(n){n.focus()}function pz(n,e,t){const i=Fn("jsoneditor:TransformModal");let{id:s="transform-modal-"+Jc()}=e,{json:o}=e,{rootPath:r=[]}=e,{indentation:l}=e,{escapeControlCharacters:a}=e,{escapeUnicodeCharacters:c}=e,{parser:f}=e,{parseMemoizeOne:u}=e,{validationParser:h}=e,{pathParser:d}=e,{queryLanguages:g}=e,{queryLanguageId:m}=e,{onChangeQueryLanguage:p}=e,{onRenderValue:b}=e,{onRenderMenu:y}=e,{onRenderContextMenu:v}=e,{onClassName:C}=e,{onTransform:_}=e,S,x;const{close:D}=jn("simple-modal");let P=!1;const E=`${s}:${Oe(r)}`,O=wc[E]||{};let I=ku.showWizard!==!1,N=ku.showOriginal!==!1,F=O.queryOptions||{},z=m===O.queryLanguageId&&O.query?O.query:T(m).createQuery(S,O.queryOptions||{}),q=O.isManual||!1,Q,X={text:""};function T(re){return g.find(Qe=>Qe.id===re)||g[0]}function U(re){t(15,F=re),t(16,z=T(m).createQuery(S,re)),t(36,q=!1),i("updateQueryByWizard",{queryOptions:F,query:z,isManual:q})}function Y(re){t(16,z=re.target.value),t(36,q=!0),i("handleChangeQuery",{query:z,isManual:q})}function le(re,Qe){if(re===void 0){t(22,X={text:""}),t(21,Q="Error: No JSON");return}try{i("previewTransform",{query:Qe});const H=T(m).executeQuery(re,Qe,f);t(22,X={json:H}),t(21,Q=void 0)}catch(H){t(22,X={text:""}),t(21,Q=String(H))}}const Z=Kh(le,Zm);function ue(){if(S===void 0){t(22,X={text:""}),t(21,Q="Error: No JSON");return}try{i("handleTransform",{query:z});const re=T(m).executeQuery(S,z,f);_([{op:"replace",path:Oe(r),value:re}]),D()}catch(re){console.error(re),t(22,X={text:""}),t(21,Q=String(re))}}function W(){t(19,I=!I),ku.showWizard=I}function we(){t(20,N=!N),ku.showOriginal=N}function ee(re){i("handleChangeQueryLanguage",re),t(0,m=re),p(re);const Qe=T(m);t(16,z=Qe.createQuery(S,F)),t(36,q=!1)}function be(){P?t(18,P=!P):D()}function tt(re){P=re,t(18,P)}return n.$$set=re=>{"id"in re&&t(31,s=re.id),"json"in re&&t(32,o=re.json),"rootPath"in re&&t(1,r=re.rootPath),"indentation"in re&&t(2,l=re.indentation),"escapeControlCharacters"in re&&t(3,a=re.escapeControlCharacters),"escapeUnicodeCharacters"in re&&t(4,c=re.escapeUnicodeCharacters),"parser"in re&&t(5,f=re.parser),"parseMemoizeOne"in re&&t(6,u=re.parseMemoizeOne),"validationParser"in re&&t(7,h=re.validationParser),"pathParser"in re&&t(8,d=re.pathParser),"queryLanguages"in re&&t(9,g=re.queryLanguages),"queryLanguageId"in re&&t(0,m=re.queryLanguageId),"onChangeQueryLanguage"in re&&t(33,p=re.onChangeQueryLanguage),"onRenderValue"in re&&t(10,b=re.onRenderValue),"onRenderMenu"in re&&t(11,y=re.onRenderMenu),"onRenderContextMenu"in re&&t(12,v=re.onRenderContextMenu),"onClassName"in re&&t(13,C=re.onClassName),"onTransform"in re&&t(34,_=re.onTransform)},n.$$.update=()=>{n.$$.dirty[0]&2|n.$$.dirty[1]&2&&t(14,S=CM(Be(o,r))),n.$$.dirty[0]&16384&&t(17,x=S?{json:S}:{text:""}),n.$$.dirty[0]&81920&&Z(S,z),n.$$.dirty[0]&98305|n.$$.dirty[1]&48&&(t(35,wc[E]={queryOptions:F,query:z,queryLanguageId:m,isManual:q},wc),i("store state in memory",E,wc[E]))},[m,r,l,a,c,f,u,h,d,g,b,y,v,C,S,F,z,x,P,I,N,Q,X,T,U,Y,ue,W,we,ee,be,s,o,p,_,wc,q,tt]}class bz extends ze{constructor(e){super(),Fe(this,e,pz,gz,ft,{id:31,json:32,rootPath:1,indentation:2,escapeControlCharacters:3,escapeUnicodeCharacters:4,parser:5,parseMemoizeOne:6,validationParser:7,pathParser:8,queryLanguages:9,queryLanguageId:0,onChangeQueryLanguage:33,onRenderValue:10,onRenderMenu:11,onRenderContextMenu:12,onClassName:13,onTransform:34},null,[-1,-1])}}const na={};function Hw(n){let e,t,i,s,o,r,l;function a(f){n[14](f)}let c={showChevron:!0,items:n[5]};return n[1]!==void 0&&(c.value=n[1]),o=new ol({props:c}),it.push(()=>Jn(o,"value",a)),{c(){e=R("tr"),t=R("th"),t.textContent="Property",i=G(),s=R("td"),se(o.$$.fragment),w(t,"class","svelte-jdii8g"),w(s,"class","svelte-jdii8g")},m(f,u){j(f,e,u),A(e,t),A(e,i),A(e,s),ne(o,s,null),l=!0},p(f,u){const h={};u&32&&(h.items=f[5]),!r&&u&2&&(r=!0,h.value=f[1],Un(()=>r=!1)),o.$set(h)},i(f){l||(k(o.$$.fragment,f),l=!0)},o(f){M(o.$$.fragment,f),l=!1},d(f){f&&B(e),ie(o)}}}function Ww(n){let e,t;return{c(){e=R("div"),t=Se(n[4]),w(e,"class","jse-error svelte-jdii8g")},m(i,s){j(i,e,s),A(e,t)},p(i,s){s&16&&Xe(t,i[4])},d(i){i&&B(e)}}}function yz(n){var Y;let e,t,i,s,o,r,l,a,c,f,u,h,d,g,m,p,b,y,v,C,_,S,x,D,P,E,O,I,N,F,z,q;t=new _g({props:{title:n[3]?"Sort array items":"Sort object keys"}});let Q=n[3]&&(n[5]&&((Y=n[5])==null?void 0:Y.length)>1||n[1]===void 0)&&Hw(n);function X(le){n[15](le)}let T={showChevron:!0,clearable:!1,items:n[7]};n[2]!==void 0&&(T.value=n[2]),_=new ol({props:T}),it.push(()=>Jn(_,"value",X));let U=n[4]&&Ww(n);return{c(){var le;e=R("div"),se(t.$$.fragment),i=G(),s=R("div"),o=R("table"),r=R("colgroup"),r.innerHTML='<col width="25%"/> <col width="75%"/>',l=G(),a=R("tbody"),c=R("tr"),f=R("th"),f.textContent="Path",u=G(),h=R("td"),d=R("input"),m=G(),Q&&Q.c(),p=G(),b=R("tr"),y=R("th"),y.textContent="Direction",v=G(),C=R("td"),se(_.$$.fragment),x=G(),D=R("div"),U&&U.c(),P=G(),E=R("div"),O=R("button"),I=Se("Sort"),w(f,"class","svelte-jdii8g"),w(d,"class","jse-path svelte-jdii8g"),w(d,"type","text"),d.readOnly=!0,w(d,"title","Selected path"),d.value=g=Ct(n[0])?"(document root)":Ii(n[0]),w(h,"class","svelte-jdii8g"),w(y,"class","svelte-jdii8g"),w(C,"class","svelte-jdii8g"),w(o,"class","svelte-jdii8g"),w(D,"class","jse-space svelte-jdii8g"),w(O,"type","button"),w(O,"class","jse-primary svelte-jdii8g"),O.disabled=N=n[3]&&n[5]&&((le=n[5])==null?void 0:le.length)>1?!n[1]:!1,w(E,"class","jse-actions svelte-jdii8g"),w(s,"class","jse-modal-contents svelte-jdii8g"),w(e,"class","jse-modal jse-sort svelte-jdii8g")},m(le,Z){j(le,e,Z),ne(t,e,null),A(e,i),A(e,s),A(s,o),A(o,r),A(o,l),A(o,a),A(a,c),A(c,f),A(c,u),A(c,h),A(h,d),A(a,m),Q&&Q.m(a,null),A(a,p),A(a,b),A(b,y),A(b,v),A(b,C),ne(_,C,null),A(s,x),A(s,D),U&&U.m(D,null),A(s,P),A(s,E),A(E,O),A(O,I),F=!0,z||(q=[he(O,"click",n[8]),En(_z.call(null,O)),En(Zf.call(null,e,n[6]))],z=!0)},p(le,[Z]){var we,ee;const ue={};Z&8&&(ue.title=le[3]?"Sort array items":"Sort object keys"),t.$set(ue),(!F||Z&1&&g!==(g=Ct(le[0])?"(document root)":Ii(le[0]))&&d.value!==g)&&(d.value=g),le[3]&&(le[5]&&((we=le[5])==null?void 0:we.length)>1||le[1]===void 0)?Q?(Q.p(le,Z),Z&42&&k(Q,1)):(Q=Hw(le),Q.c(),k(Q,1),Q.m(a,p)):Q&&(me(),M(Q,1,1,()=>{Q=null}),pe());const W={};!S&&Z&4&&(S=!0,W.value=le[2],Un(()=>S=!1)),_.$set(W),le[4]?U?U.p(le,Z):(U=Ww(le),U.c(),U.m(D,null)):U&&(U.d(1),U=null),(!F||Z&42&&N!==(N=le[3]&&le[5]&&((ee=le[5])==null?void 0:ee.length)>1?!le[1]:!1))&&(O.disabled=N)},i(le){F||(k(t.$$.fragment,le),k(Q),k(_.$$.fragment,le),F=!0)},o(le){M(t.$$.fragment,le),M(Q),M(_.$$.fragment,le),F=!1},d(le){le&&B(e),ie(t),Q&&Q.d(),ie(_),U&&U.d(),z=!1,Et(q)}}}function _z(n){n.focus()}function wz(n,e,t){var x,D;let i,s,o;const r=Fn("jsoneditor:SortModal");let{id:l}=e,{json:a}=e,{rootPath:c}=e,{onSort:f}=e;const{close:u}=jn("simple-modal"),h=`${l}:${Oe(c)}`,d=Be(a,c),g={value:1,label:"ascending"},p=[g,{value:-1,label:"descending"}];let b=(x=na[h])==null?void 0:x.selectedProperty,y=((D=na[h])==null?void 0:D.selectedDirection)||g,v;function C(){var P;try{t(4,v=void 0);const E=(b==null?void 0:b.value)||((P=o==null?void 0:o[0])==null?void 0:P.value)||[],O=y==null?void 0:y.value,I=hM(a,c,E,O);f({operations:I,rootPath:c,itemPath:E,direction:O}),u()}catch(E){t(4,v=String(E))}}function _(P){b=P,t(1,b)}function S(P){y=P,t(2,y)}return n.$$set=P=>{"id"in P&&t(9,l=P.id),"json"in P&&t(10,a=P.json),"rootPath"in P&&t(0,c=P.rootPath),"onSort"in P&&t(11,f=P.onSort)},n.$$.update=()=>{n.$$.dirty&8&&t(13,s=i&&d!==void 0?mp(d):void 0),n.$$.dirty&8192&&t(5,o=s?s.map(Rc):void 0),n.$$.dirty&4102&&(t(12,na[h]={selectedProperty:b,selectedDirection:y},na),r("store state in memory",h,na[h]))},t(3,i=Array.isArray(d)),[c,b,y,i,v,o,u,p,C,l,a,f,na,s,_,S]}class vz extends ze{constructor(e){super(),Fe(this,e,wz,yz,ft,{id:9,json:10,rootPath:0,onSort:11})}}function vs(){}function xu(n,e=1e3){if(n<.9*e)return n.toFixed()+" B";const t=n/e;if(t<.9*e)return t.toFixed(1)+" KB";const i=t/e;if(i<.9*e)return i.toFixed(1)+" MB";const s=i/e;return s<.9*e?s.toFixed(1)+" GB":(s/e).toFixed(1)+" TB"}function kz(n){let e,t;return e=new vg({props:{items:n[0]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,[s]){const o={};s&1&&(o.items=i[0]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Sz(n,e,t){let i,{readOnly:s=!1}=e,{onFormat:o}=e,{onCompact:r}=e,{onSort:l}=e,{onTransform:a}=e,{onToggleSearch:c}=e,{onUndo:f}=e,{onRedo:u}=e,{canUndo:h}=e,{canRedo:d}=e,{canFormat:g}=e,{canCompact:m}=e,{canSort:p}=e,{canTransform:b}=e,{onRenderMenu:y}=e;const v={type:"button",icon:gg,title:"Search (Ctrl+F)",className:"jse-search",onClick:c};let C;return n.$$set=_=>{"readOnly"in _&&t(1,s=_.readOnly),"onFormat"in _&&t(2,o=_.onFormat),"onCompact"in _&&t(3,r=_.onCompact),"onSort"in _&&t(4,l=_.onSort),"onTransform"in _&&t(5,a=_.onTransform),"onToggleSearch"in _&&t(6,c=_.onToggleSearch),"onUndo"in _&&t(7,f=_.onUndo),"onRedo"in _&&t(8,u=_.onRedo),"canUndo"in _&&t(9,h=_.canUndo),"canRedo"in _&&t(10,d=_.canRedo),"canFormat"in _&&t(11,g=_.canFormat),"canCompact"in _&&t(12,m=_.canCompact),"canSort"in _&&t(13,p=_.canSort),"canTransform"in _&&t(14,b=_.canTransform),"onRenderMenu"in _&&t(15,y=_.onRenderMenu)},n.$$.update=()=>{n.$$.dirty&32702&&t(16,C=s?[v,{type:"space"}]:[{type:"button",icon:Pp,title:"Format JSON: add proper indentation and new lines (Ctrl+I)",className:"jse-format",onClick:o,disabled:s||!g},{type:"button",icon:xj,title:"Compact JSON: remove all white spacing and new lines (Ctrl+Shift+I)",className:"jse-compact",onClick:r,disabled:s||!m},{type:"separator"},{type:"button",icon:dg,title:"Sort",className:"jse-sort",onClick:l,disabled:s||!p},{type:"button",icon:ug,title:"Transform contents (filter, sort, project)",className:"jse-transform",onClick:a,disabled:s||!b},v,{type:"separator"},{type:"button",icon:x0,title:"Undo (Ctrl+Z)",className:"jse-undo",onClick:f,disabled:!h},{type:"button",icon:M0,title:"Redo (Ctrl+Shift+Z)",className:"jse-redo",onClick:u,disabled:!d},{type:"space"}]),n.$$.dirty&98304&&t(0,i=y(C)||C)},[i,s,o,r,l,a,c,f,u,h,d,g,m,p,b,y,C]}class Cz extends ze{constructor(e){super(),Fe(this,e,Sz,kz,ft,{readOnly:1,onFormat:2,onCompact:3,onSort:4,onTransform:5,onToggleSearch:6,onUndo:7,onRedo:8,canUndo:9,canRedo:10,canFormat:11,canCompact:12,canSort:13,canTransform:14,onRenderMenu:15})}}class Bt{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){[e,t]=Ua(this,e,t);let s=[];return this.decompose(0,e,s,2),i.length&&i.decompose(0,i.length,s,3),this.decompose(t,this.length,s,1),Zs.from(s,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=Ua(this,e,t);let i=[];return this.decompose(e,t,i,0),Zs.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),s=new Gc(this),o=new Gc(e);for(let r=t,l=t;;){if(s.next(r),o.next(r),r=0,s.lineBreak!=o.lineBreak||s.done!=o.done||s.value!=o.value)return!1;if(l+=s.value.length,s.done||l>=i)return!0}}iter(e=1){return new Gc(this,e)}iterRange(e,t=this.length){return new MM(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let s=this.line(e).from;i=this.iterRange(s,Math.max(s,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new xM(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Bt.empty:e.length<=32?new Pn(e):Zs.from(Pn.split(e,[]))}}class Pn extends Bt{constructor(e,t=Mz(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,s){for(let o=0;;o++){let r=this.text[o],l=s+r.length;if((t?i:l)>=e)return new xz(s,l,i,r);s=l+1,i++}}decompose(e,t,i,s){let o=e<=0&&t>=this.length?this:new Pn(qw(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(s&1){let r=i.pop(),l=vh(o.text,r.text.slice(),0,o.length);if(l.length<=32)i.push(new Pn(l,r.length+o.length));else{let a=l.length>>1;i.push(new Pn(l.slice(0,a)),new Pn(l.slice(a)))}}else i.push(o)}replace(e,t,i){if(!(i instanceof Pn))return super.replace(e,t,i);[e,t]=Ua(this,e,t);let s=vh(this.text,vh(i.text,qw(this.text,0,e)),t),o=this.length+i.length-(t-e);return s.length<=32?new Pn(s,o):Zs.from(Pn.split(s,[]),o)}sliceString(e,t=this.length,i=`
`){[e,t]=Ua(this,e,t);let s="";for(let o=0,r=0;o<=t&&r<this.text.length;r++){let l=this.text[r],a=o+l.length;o>e&&r&&(s+=i),e<a&&t>o&&(s+=l.slice(Math.max(0,e-o),t-o)),o=a+1}return s}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],s=-1;for(let o of e)i.push(o),s+=o.length+1,i.length==32&&(t.push(new Pn(i,s)),i=[],s=-1);return s>-1&&t.push(new Pn(i,s)),t}}class Zs extends Bt{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,s){for(let o=0;;o++){let r=this.children[o],l=s+r.length,a=i+r.lines-1;if((t?a:l)>=e)return r.lineInner(e,t,i,s);s=l+1,i=a+1}}decompose(e,t,i,s){for(let o=0,r=0;r<=t&&o<this.children.length;o++){let l=this.children[o],a=r+l.length;if(e<=a&&t>=r){let c=s&((r<=e?1:0)|(a>=t?2:0));r>=e&&a<=t&&!c?i.push(l):l.decompose(e-r,t-r,i,c)}r=a+1}}replace(e,t,i){if([e,t]=Ua(this,e,t),i.lines<this.lines)for(let s=0,o=0;s<this.children.length;s++){let r=this.children[s],l=o+r.length;if(e>=o&&t<=l){let a=r.replace(e-o,t-o,i),c=this.lines-r.lines+a.lines;if(a.lines<c>>4&&a.lines>c>>6){let f=this.children.slice();return f[s]=a,new Zs(f,this.length-(t-e)+i.length)}return super.replace(o,l,a)}o=l+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){[e,t]=Ua(this,e,t);let s="";for(let o=0,r=0;o<this.children.length&&r<=t;o++){let l=this.children[o],a=r+l.length;r>e&&o&&(s+=i),e<a&&t>r&&(s+=l.sliceString(e-r,t-r,i)),r=a+1}return s}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Zs))return 0;let i=0,[s,o,r,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;s+=t,o+=t){if(s==r||o==l)return i;let a=this.children[s],c=e.children[o];if(a!=c)return i+a.scanIdentical(c,t);i+=a.length+1}}static from(e,t=e.reduce((i,s)=>i+s.length+1,-1)){let i=0;for(let d of e)i+=d.lines;if(i<32){let d=[];for(let g of e)g.flatten(d);return new Pn(d,t)}let s=Math.max(32,i>>5),o=s<<1,r=s>>1,l=[],a=0,c=-1,f=[];function u(d){let g;if(d.lines>o&&d instanceof Zs)for(let m of d.children)u(m);else d.lines>r&&(a>r||!a)?(h(),l.push(d)):d instanceof Pn&&a&&(g=f[f.length-1])instanceof Pn&&d.lines+g.lines<=32?(a+=d.lines,c+=d.length+1,f[f.length-1]=new Pn(g.text.concat(d.text),g.length+1+d.length)):(a+d.lines>s&&h(),a+=d.lines,c+=d.length+1,f.push(d))}function h(){a!=0&&(l.push(f.length==1?f[0]:Zs.from(f,c)),c=-1,a=f.length=0)}for(let d of e)u(d);return h(),l.length==1?l[0]:new Zs(l,t)}}Bt.empty=new Pn([""],0);function Mz(n){let e=-1;for(let t of n)e+=t.length+1;return e}function vh(n,e,t=0,i=1e9){for(let s=0,o=0,r=!0;o<n.length&&s<=i;o++){let l=n[o],a=s+l.length;a>=t&&(a>i&&(l=l.slice(0,i-s)),s<t&&(l=l.slice(t-s)),r?(e[e.length-1]+=l,r=!1):e.push(l)),s=a+1}return e}function qw(n,e,t){return vh(n,[""],e,t)}class Gc{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Pn?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,s=this.nodes[i],o=this.offsets[i],r=o>>1,l=s instanceof Pn?s.text.length:s.children.length;if(r==(t>0?l:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(s instanceof Pn){let a=s.text[r+(t<0?-1:0)];if(this.offsets[i]+=t,a.length>Math.max(0,e))return this.value=e==0?a:t>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=s.children[r+(t<0?-1:0)];e>a.length?(e-=a.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(t>0?1:(a instanceof Pn?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class MM{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new Gc(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:s}=this.cursor.next(e);return this.pos+=(s.length+e)*t,this.value=s.length<=i?s:t<0?s.slice(s.length-i):s.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class xM{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:s}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Bt.prototype[Symbol.iterator]=function(){return this.iter()},Gc.prototype[Symbol.iterator]=MM.prototype[Symbol.iterator]=xM.prototype[Symbol.iterator]=function(){return this});class xz{constructor(e,t,i,s){this.from=e,this.to=t,this.number=i,this.text=s}get length(){return this.to-this.from}}function Ua(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}let Aa="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(n=>n?parseInt(n,36):1);for(let n=1;n<Aa.length;n++)Aa[n]+=Aa[n-1];function Az(n){for(let e=1;e<Aa.length;e+=2)if(Aa[e]>n)return Aa[e-1]<=n;return!1}function Uw(n){return n>=127462&&n<=127487}const Jw=8205;function ei(n,e,t=!0,i=!0){return(t?AM:Oz)(n,e,i)}function AM(n,e,t){if(e==n.length)return e;e&&OM(n.charCodeAt(e))&&PM(n.charCodeAt(e-1))&&e--;let i=Qn(n,e);for(e+=is(i);e<n.length;){let s=Qn(n,e);if(i==Jw||s==Jw||t&&Az(s))e+=is(s),i=s;else if(Uw(s)){let o=0,r=e-2;for(;r>=0&&Uw(Qn(n,r));)o++,r-=2;if(o%2==0)break;e+=2}else break}return e}function Oz(n,e,t){for(;e>0;){let i=AM(n,e-2,t);if(i<e)return i;e--}return 0}function OM(n){return n>=56320&&n<57344}function PM(n){return n>=55296&&n<56320}function Qn(n,e){let t=n.charCodeAt(e);if(!PM(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return OM(i)?(t-55296<<10)+(i-56320)+65536:t}function z0(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function is(n){return n<65536?1:2}const Tp=/\r\n?|\n/;var ki=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(ki||(ki={}));class lo{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,s=0;t<this.sections.length;){let o=this.sections[t++],r=this.sections[t++];r<0?(e(i,s,o),s+=o):s+=r,i+=o}}iterChangedRanges(e,t=!1){Ep(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],s=this.sections[t++];s<0?e.push(i,s):e.push(s,i)}return new lo(e)}composeDesc(e){return this.empty?e:e.empty?this:TM(this,e)}mapDesc(e,t=!1){return e.empty?this:Rp(this,e,t)}mapPos(e,t=-1,i=ki.Simple){let s=0,o=0;for(let r=0;r<this.sections.length;){let l=this.sections[r++],a=this.sections[r++],c=s+l;if(a<0){if(c>e)return o+(e-s);o+=l}else{if(i!=ki.Simple&&c>=e&&(i==ki.TrackDel&&s<e&&c>e||i==ki.TrackBefore&&s<e||i==ki.TrackAfter&&c>e))return null;if(c>e||c==e&&t<0&&!l)return e==s||t<0?o:o+a;o+=a}s=c}if(e>s)throw new RangeError(`Position ${e} is out of range for changeset of length ${s}`);return o}touchesRange(e,t=e){for(let i=0,s=0;i<this.sections.length&&s<=t;){let o=this.sections[i++],r=this.sections[i++],l=s+o;if(r>=0&&s<=t&&l>=e)return s<e&&l>t?"cover":!0;s=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],s=this.sections[t++];e+=(e?" ":"")+i+(s>=0?":"+s:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new lo(e)}static create(e){return new lo(e)}}class In extends lo{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Ep(this,(t,i,s,o,r)=>e=e.replace(s,s+(i-t),r),!1),e}mapDesc(e,t=!1){return Rp(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let s=0,o=0;s<t.length;s+=2){let r=t[s],l=t[s+1];if(l>=0){t[s]=l,t[s+1]=r;let a=s>>1;for(;i.length<a;)i.push(Bt.empty);i.push(r?e.slice(o,o+r):Bt.empty)}o+=r}return new In(t,i)}compose(e){return this.empty?e:e.empty?this:TM(this,e,!0)}map(e,t=!1){return e.empty?this:Rp(this,e,t,!0)}iterChanges(e,t=!1){Ep(this,e,t)}get desc(){return lo.create(this.sections)}filter(e){let t=[],i=[],s=[],o=new wf(this);e:for(let r=0,l=0;;){let a=r==e.length?1e9:e[r++];for(;l<a||l==a&&o.len==0;){if(o.done)break e;let f=Math.min(o.len,a-l);ai(s,f,-1);let u=o.ins==-1?-1:o.off==0?o.ins:0;ai(t,f,u),u>0&&ur(i,t,o.text),o.forward(f),l+=f}let c=e[r++];for(;l<c;){if(o.done)break e;let f=Math.min(o.len,c-l);ai(t,f,-1),ai(s,f,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(f),l+=f}}return{changes:new In(t,i),filtered:lo.create(s)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],s=this.sections[t+1];s<0?e.push(i):s==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let s=[],o=[],r=0,l=null;function a(f=!1){if(!f&&!s.length)return;r<t&&ai(s,t-r,-1);let u=new In(s,o);l=l?l.compose(u.map(l)):u,s=[],o=[],r=0}function c(f){if(Array.isArray(f))for(let u of f)c(u);else if(f instanceof In){if(f.length!=t)throw new RangeError(`Mismatched change set length (got ${f.length}, expected ${t})`);a(),l=l?l.compose(f.map(l)):f}else{let{from:u,to:h=u,insert:d}=f;if(u>h||u<0||h>t)throw new RangeError(`Invalid change range ${u} to ${h} (in doc of length ${t})`);let g=d?typeof d=="string"?Bt.of(d.split(i||Tp)):d:Bt.empty,m=g.length;if(u==h&&m==0)return;u<r&&a(),u>r&&ai(s,u-r,-1),ai(s,h-u,m),ur(o,s,g),r=h}}return c(e),a(!l),l}static empty(e){return new In(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let s=0;s<e.length;s++){let o=e[s];if(typeof o=="number")t.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((r,l)=>l&&typeof r!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)t.push(o[0],0);else{for(;i.length<s;)i.push(Bt.empty);i[s]=Bt.of(o.slice(1)),t.push(o[0],i[s].length)}}}return new In(t,i)}static createSet(e,t){return new In(e,t)}}function ai(n,e,t,i=!1){if(e==0&&t<=0)return;let s=n.length-2;s>=0&&t<=0&&t==n[s+1]?n[s]+=e:e==0&&n[s]==0?n[s+1]+=t:i?(n[s]+=e,n[s+1]+=t):n.push(e,t)}function ur(n,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<i;)n.push(Bt.empty);n.push(t)}}function Ep(n,e,t){let i=n.inserted;for(let s=0,o=0,r=0;r<n.sections.length;){let l=n.sections[r++],a=n.sections[r++];if(a<0)s+=l,o+=l;else{let c=s,f=o,u=Bt.empty;for(;c+=l,f+=a,a&&i&&(u=u.append(i[r-2>>1])),!(t||r==n.sections.length||n.sections[r+1]<0);)l=n.sections[r++],a=n.sections[r++];e(s,c,o,f,u),s=c,o=f}}}function Rp(n,e,t,i=!1){let s=[],o=i?[]:null,r=new wf(n),l=new wf(e);for(let a=-1;;)if(r.ins==-1&&l.ins==-1){let c=Math.min(r.len,l.len);ai(s,c,-1),r.forward(c),l.forward(c)}else if(l.ins>=0&&(r.ins<0||a==r.i||r.off==0&&(l.len<r.len||l.len==r.len&&!t))){let c=l.len;for(ai(s,l.ins,-1);c;){let f=Math.min(r.len,c);r.ins>=0&&a<r.i&&r.len<=f&&(ai(s,0,r.ins),o&&ur(o,s,r.text),a=r.i),r.forward(f),c-=f}l.next()}else if(r.ins>=0){let c=0,f=r.len;for(;f;)if(l.ins==-1){let u=Math.min(f,l.len);c+=u,f-=u,l.forward(u)}else if(l.ins==0&&l.len<f)f-=l.len,l.next();else break;ai(s,c,a<r.i?r.ins:0),o&&a<r.i&&ur(o,s,r.text),a=r.i,r.forward(r.len-f)}else{if(r.done&&l.done)return o?In.createSet(s,o):lo.create(s);throw new Error("Mismatched change set lengths")}}function TM(n,e,t=!1){let i=[],s=t?[]:null,o=new wf(n),r=new wf(e);for(let l=!1;;){if(o.done&&r.done)return s?In.createSet(i,s):lo.create(i);if(o.ins==0)ai(i,o.len,0,l),o.next();else if(r.len==0&&!r.done)ai(i,0,r.ins,l),s&&ur(s,i,r.text),r.next();else{if(o.done||r.done)throw new Error("Mismatched change set lengths");{let a=Math.min(o.len2,r.len),c=i.length;if(o.ins==-1){let f=r.ins==-1?-1:r.off?0:r.ins;ai(i,a,f,l),s&&f&&ur(s,i,r.text)}else r.ins==-1?(ai(i,o.off?0:o.len,a,l),s&&ur(s,i,o.textBit(a))):(ai(i,o.off?0:o.len,r.off?0:r.ins,l),s&&!r.off&&ur(s,i,r.text));l=(o.ins>a||r.ins>=0&&r.len>a)&&(l||i.length>c),o.forward2(a),r.forward(a)}}}}class wf{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Bt.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?Bt.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class ul{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let i,s;return this.empty?i=s=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),s=e.mapPos(this.to,-1)),i==this.from&&s==this.to?this:new ul(i,s,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return _e.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return _e.range(this.anchor,i)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return _e.range(e.anchor,e.head)}static create(e,t,i){return new ul(e,t,i)}}class _e{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:_e.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new _e([this.main],0)}addRange(e,t=!0){return _e.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,_e.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new _e(e.ranges.map(t=>ul.fromJSON(t)),e.main)}static single(e,t=e){return new _e([_e.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,s=0;s<e.length;s++){let o=e[s];if(o.empty?o.from<=i:o.from<i)return _e.normalized(e.slice(),t);i=o.to}return new _e(e,t)}static cursor(e,t=0,i,s){return ul.create(e,e,(t==0?0:t<0?8:16)|(i==null?7:Math.min(6,i))|(s??16777215)<<6)}static range(e,t,i,s){let o=(i??16777215)<<6|(s==null?7:Math.min(6,s));return t<e?ul.create(t,e,48|o):ul.create(e,t,(t>e?8:0)|o)}static normalized(e,t=0){let i=e[t];e.sort((s,o)=>s.from-o.from),t=e.indexOf(i);for(let s=1;s<e.length;s++){let o=e[s],r=e[s-1];if(o.empty?o.from<=r.to:o.from<r.to){let l=r.from,a=Math.max(o.to,r.to);s<=t&&t--,e.splice(--s,2,o.anchor>o.head?_e.range(a,l):_e.range(l,a))}}return new _e(e,t)}}function EM(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let V0=0;class Ve{constructor(e,t,i,s,o){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=s,this.id=V0++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}get reader(){return this}static define(e={}){return new Ve(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:H0),!!e.static,e.enables)}of(e){return new kh([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new kh(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new kh(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function H0(n,e){return n==e||n.length==e.length&&n.every((t,i)=>t===e[i])}class kh{constructor(e,t,i,s){this.dependencies=e,this.facet=t,this.type=i,this.value=s,this.id=V0++}dynamicSlot(e){var t;let i=this.value,s=this.facet.compareInput,o=this.id,r=e[o]>>1,l=this.type==2,a=!1,c=!1,f=[];for(let u of this.dependencies)u=="doc"?a=!0:u=="selection"?c=!0:((t=e[u.id])!==null&&t!==void 0?t:1)&1||f.push(e[u.id]);return{create(u){return u.values[r]=i(u),1},update(u,h){if(a&&h.docChanged||c&&(h.docChanged||h.selection)||Dp(u,f)){let d=i(u);if(l?!Kw(d,u.values[r],s):!s(d,u.values[r]))return u.values[r]=d,1}return 0},reconfigure:(u,h)=>{let d,g=h.config.address[o];if(g!=null){let m=cd(h,g);if(this.dependencies.every(p=>p instanceof Ve?h.facet(p)===u.facet(p):p instanceof zn?h.field(p,!1)==u.field(p,!1):!0)||(l?Kw(d=i(u),m,s):s(d=i(u),m)))return u.values[r]=m,0}else d=i(u);return u.values[r]=d,1}}}}function Kw(n,e,t){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!t(n[i],e[i]))return!1;return!0}function Dp(n,e){let t=!1;for(let i of e)Qc(n,i)&1&&(t=!0);return t}function Pz(n,e,t){let i=t.map(a=>n[a.id]),s=t.map(a=>a.type),o=i.filter(a=>!(a&1)),r=n[e.id]>>1;function l(a){let c=[];for(let f=0;f<i.length;f++){let u=cd(a,i[f]);if(s[f]==2)for(let h of u)c.push(h);else c.push(u)}return e.combine(c)}return{create(a){for(let c of i)Qc(a,c);return a.values[r]=l(a),1},update(a,c){if(!Dp(a,o))return 0;let f=l(a);return e.compare(f,a.values[r])?0:(a.values[r]=f,1)},reconfigure(a,c){let f=Dp(a,i),u=c.config.facets[e.id],h=c.facet(e);if(u&&!f&&H0(t,u))return a.values[r]=h,0;let d=l(a);return e.compare(d,h)?(a.values[r]=h,0):(a.values[r]=d,1)}}}const Yw=Ve.define({static:!0});class zn{constructor(e,t,i,s,o){this.id=e,this.createF=t,this.updateF=i,this.compareF=s,this.spec=o,this.provides=void 0}static define(e){let t=new zn(V0++,e.create,e.update,e.compare||((i,s)=>i===s),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Yw).find(i=>i.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,s)=>{let o=i.values[t],r=this.updateF(o,s);return this.compareF(o,r)?0:(i.values[t]=r,1)},reconfigure:(i,s)=>s.config.address[this.id]!=null?(i.values[t]=s.field(this),0):(i.values[t]=this.create(i),1)}}init(e){return[this,Yw.of({field:this,create:e})]}get extension(){return this}}const rl={lowest:4,low:3,default:2,high:1,highest:0};function vc(n){return e=>new RM(e,n)}const Wl={highest:vc(rl.highest),high:vc(rl.high),default:vc(rl.default),low:vc(rl.low),lowest:vc(rl.lowest)};class RM{constructor(e,t){this.inner=e,this.prec=t}}class Oo{of(e){return new Lp(this,e)}reconfigure(e){return Oo.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Lp{constructor(e,t){this.compartment=e,this.inner=t}}class ad{constructor(e,t,i,s,o,r){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=s,this.staticValues=o,this.facets=r,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let s=[],o=Object.create(null),r=new Map;for(let h of Tz(e,t,r))h instanceof zn?s.push(h):(o[h.facet.id]||(o[h.facet.id]=[])).push(h);let l=Object.create(null),a=[],c=[];for(let h of s)l[h.id]=c.length<<1,c.push(d=>h.slot(d));let f=i==null?void 0:i.config.facets;for(let h in o){let d=o[h],g=d[0].facet,m=f&&f[h]||[];if(d.every(p=>p.type==0))if(l[g.id]=a.length<<1|1,H0(m,d))a.push(i.facet(g));else{let p=g.combine(d.map(b=>b.value));a.push(i&&g.compare(p,i.facet(g))?i.facet(g):p)}else{for(let p of d)p.type==0?(l[p.id]=a.length<<1|1,a.push(p.value)):(l[p.id]=c.length<<1,c.push(b=>p.dynamicSlot(b)));l[g.id]=c.length<<1,c.push(p=>Pz(p,g,d))}}let u=c.map(h=>h(l));return new ad(e,r,u,l,a,o)}}function Tz(n,e,t){let i=[[],[],[],[],[]],s=new Map;function o(r,l){let a=s.get(r);if(a!=null){if(a<=l)return;let c=i[a].indexOf(r);c>-1&&i[a].splice(c,1),r instanceof Lp&&t.delete(r.compartment)}if(s.set(r,l),Array.isArray(r))for(let c of r)o(c,l);else if(r instanceof Lp){if(t.has(r.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(r.compartment)||r.inner;t.set(r.compartment,c),o(c,l)}else if(r instanceof RM)o(r.inner,r.prec);else if(r instanceof zn)i[l].push(r),r.provides&&o(r.provides,l);else if(r instanceof kh)i[l].push(r),r.facet.extensions&&o(r.facet.extensions,rl.default);else{let c=r.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${r}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(c,l)}}return o(n,rl.default),i.reduce((r,l)=>r.concat(l))}function Qc(n,e){if(e&1)return 2;let t=e>>1,i=n.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;n.status[t]=4;let s=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|s}function cd(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const DM=Ve.define(),Ip=Ve.define({combine:n=>n.some(e=>e),static:!0}),LM=Ve.define({combine:n=>n.length?n[0]:void 0,static:!0}),IM=Ve.define(),NM=Ve.define(),BM=Ve.define(),jM=Ve.define({combine:n=>n.length?n[0]:!1});class Qo{constructor(e,t){this.type=e,this.value=t}static define(){return new Ez}}class Ez{of(e){return new Qo(this,e)}}class Rz{constructor(e){this.map=e}of(e){return new pt(this,e)}}class pt{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new pt(this.type,t)}is(e){return this.type==e}static define(e={}){return new Rz(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let s of e){let o=s.map(t);o&&i.push(o)}return i}}pt.reconfigure=pt.define();pt.appendConfig=pt.define();class Nn{constructor(e,t,i,s,o,r){this.startState=e,this.changes=t,this.selection=i,this.effects=s,this.annotations=o,this.scrollIntoView=r,this._doc=null,this._state=null,i&&EM(i,t.newLength),o.some(l=>l.type==Nn.time)||(this.annotations=o.concat(Nn.time.of(Date.now())))}static create(e,t,i,s,o,r){return new Nn(e,t,i,s,o,r)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Nn.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Nn.time=Qo.define();Nn.userEvent=Qo.define();Nn.addToHistory=Qo.define();Nn.remote=Qo.define();function Dz(n,e){let t=[];for(let i=0,s=0;;){let o,r;if(i<n.length&&(s==e.length||e[s]>=n[i]))o=n[i++],r=n[i++];else if(s<e.length)o=e[s++],r=e[s++];else return t;!t.length||t[t.length-1]<o?t.push(o,r):t[t.length-1]<r&&(t[t.length-1]=r)}}function FM(n,e,t){var i;let s,o,r;return t?(s=e.changes,o=In.empty(e.changes.length),r=n.changes.compose(e.changes)):(s=e.changes.map(n.changes),o=n.changes.mapDesc(e.changes,!0),r=n.changes.compose(s)),{changes:r,selection:e.selection?e.selection.map(o):(i=n.selection)===null||i===void 0?void 0:i.map(s),effects:pt.mapEffects(n.effects,s).concat(pt.mapEffects(e.effects,o)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function Np(n,e,t){let i=e.selection,s=Oa(e.annotations);return e.userEvent&&(s=s.concat(Nn.userEvent.of(e.userEvent))),{changes:e.changes instanceof In?e.changes:In.of(e.changes||[],t,n.facet(LM)),selection:i&&(i instanceof _e?i:_e.single(i.anchor,i.head)),effects:Oa(e.effects),annotations:s,scrollIntoView:!!e.scrollIntoView}}function zM(n,e,t){let i=Np(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(t=!1);let r=!!e[o].sequential;i=FM(i,Np(n,e[o],r?i.changes.newLength:n.doc.length),r)}let s=Nn.create(n,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return Iz(t?Lz(s):s)}function Lz(n){let e=n.startState,t=!0;for(let s of e.facet(IM)){let o=s(n);if(o===!1){t=!1;break}Array.isArray(o)&&(t=t===!0?o:Dz(t,o))}if(t!==!0){let s,o;if(t===!1)o=n.changes.invertedDesc,s=In.empty(e.doc.length);else{let r=n.changes.filter(t);s=r.changes,o=r.filtered.mapDesc(r.changes).invertedDesc}n=Nn.create(e,s,n.selection&&n.selection.map(o),pt.mapEffects(n.effects,o),n.annotations,n.scrollIntoView)}let i=e.facet(NM);for(let s=i.length-1;s>=0;s--){let o=i[s](n);o instanceof Nn?n=o:Array.isArray(o)&&o.length==1&&o[0]instanceof Nn?n=o[0]:n=zM(e,Oa(o),!1)}return n}function Iz(n){let e=n.startState,t=e.facet(BM),i=n;for(let s=t.length-1;s>=0;s--){let o=t[s](n);o&&Object.keys(o).length&&(i=FM(i,Np(e,o,n.changes.newLength),!0))}return i==n?n:Nn.create(e,n.changes,n.selection,i.effects,i.annotations,i.scrollIntoView)}const Nz=[];function Oa(n){return n==null?Nz:Array.isArray(n)?n:[n]}var yn=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(yn||(yn={}));const Bz=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Bp;try{Bp=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function jz(n){if(Bp)return Bp.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>"Â"&&(t.toUpperCase()!=t.toLowerCase()||Bz.test(t)))return!0}return!1}function Fz(n){return e=>{if(!/\S/.test(e))return yn.Space;if(jz(e))return yn.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return yn.Word;return yn.Other}}class xt{constructor(e,t,i,s,o,r){this.config=e,this.doc=t,this.selection=i,this.values=s,this.status=e.statusTemplate.slice(),this.computeSlot=o,r&&(r._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)Qc(this,l<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return Qc(this,i),cd(this,i)}update(...e){return zM(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:s}=t;for(let l of e.effects)l.is(Oo.reconfigure)?(t&&(s=new Map,t.compartments.forEach((a,c)=>s.set(c,a)),t=null),s.set(l.value.compartment,l.value.extension)):l.is(pt.reconfigure)?(t=null,i=l.value):l.is(pt.appendConfig)&&(t=null,i=Oa(i).concat(l.value));let o;t?o=e.startState.values.slice():(t=ad.resolve(i,s,this),o=new xt(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(a,c)=>c.reconfigure(a,this),null).values);let r=e.startState.facet(Ip)?e.newSelection:e.newSelection.asSingle();new xt(t,e.newDoc,r,o,(l,a)=>a.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:_e.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),s=this.changes(i.changes),o=[i.range],r=Oa(i.effects);for(let l=1;l<t.ranges.length;l++){let a=e(t.ranges[l]),c=this.changes(a.changes),f=c.map(s);for(let h=0;h<l;h++)o[h]=o[h].map(f);let u=s.mapDesc(c,!0);o.push(a.range.map(u)),s=s.compose(f),r=pt.mapEffects(r,f).concat(pt.mapEffects(Oa(a.effects),u))}return{changes:s,selection:_e.create(o,t.mainIndex),effects:r}}changes(e=[]){return e instanceof In?e:In.of(e,this.doc.length,this.facet(xt.lineSeparator))}toText(e){return Bt.of(e.split(this.facet(xt.lineSeparator)||Tp))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Qc(this,t),cd(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let s=e[i];s instanceof zn&&this.config.address[s.id]!=null&&(t[i]=s.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(i){for(let o in i)if(Object.prototype.hasOwnProperty.call(e,o)){let r=i[o],l=e[o];s.push(r.init(a=>r.spec.fromJSON(l,a)))}}return xt.create({doc:e.doc,selection:_e.fromJSON(e.selection),extensions:t.extensions?s.concat([t.extensions]):s})}static create(e={}){let t=ad.resolve(e.extensions||[],new Map),i=e.doc instanceof Bt?e.doc:Bt.of((e.doc||"").split(t.staticFacet(xt.lineSeparator)||Tp)),s=e.selection?e.selection instanceof _e?e.selection:_e.single(e.selection.anchor,e.selection.head):_e.single(0);return EM(s,i.length),t.staticFacet(Ip)||(s=s.asSingle()),new xt(t,i,s,t.dynamicSlots.map(()=>null),(o,r)=>r.create(o),null)}get tabSize(){return this.facet(xt.tabSize)}get lineBreak(){return this.facet(xt.lineSeparator)||`
`}get readOnly(){return this.facet(jM)}phrase(e,...t){for(let i of this.facet(xt.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,s)=>{if(s=="$")return"$";let o=+(s||1);return!o||o>t.length?i:t[o-1]})),e}languageDataAt(e,t,i=-1){let s=[];for(let o of this.facet(DM))for(let r of o(this,t,i))Object.prototype.hasOwnProperty.call(r,e)&&s.push(r[e]);return s}charCategorizer(e){return Fz(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:s}=this.doc.lineAt(e),o=this.charCategorizer(e),r=e-i,l=e-i;for(;r>0;){let a=ei(t,r,!1);if(o(t.slice(a,r))!=yn.Word)break;r=a}for(;l<s;){let a=ei(t,l);if(o(t.slice(l,a))!=yn.Word)break;l=a}return r==l?null:_e.range(r+i,l+i)}}xt.allowMultipleSelections=Ip;xt.tabSize=Ve.define({combine:n=>n.length?n[0]:4});xt.lineSeparator=LM;xt.readOnly=jM;xt.phrases=Ve.define({compare(n,e){let t=Object.keys(n),i=Object.keys(e);return t.length==i.length&&t.every(s=>n[s]==e[s])}});xt.languageData=DM;xt.changeFilter=IM;xt.transactionFilter=NM;xt.transactionExtender=BM;Oo.reconfigure=pt.define();function ms(n,e,t={}){let i={};for(let s of n)for(let o of Object.keys(s)){let r=s[o],l=i[o];if(l===void 0)i[o]=r;else if(!(l===r||r===void 0))if(Object.hasOwnProperty.call(t,o))i[o]=t[o](l,r);else throw new Error("Config merge conflict for field "+o)}for(let s in e)i[s]===void 0&&(i[s]=e[s]);return i}class El{eq(e){return this==e}range(e,t=e){return jp.create(e,t,this)}}El.prototype.startSide=El.prototype.endSide=0;El.prototype.point=!1;El.prototype.mapMode=ki.TrackDel;let jp=class VM{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new VM(e,t,i)}};function Fp(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class W0{constructor(e,t,i,s){this.from=e,this.to=t,this.value=i,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,s=0){let o=i?this.to:this.from;for(let r=s,l=o.length;;){if(r==l)return r;let a=r+l>>1,c=o[a]-e||(i?this.value[a].endSide:this.value[a].startSide)-t;if(a==r)return c>=0?r:l;c>=0?l=a:r=a+1}}between(e,t,i,s){for(let o=this.findIndex(t,-1e9,!0),r=this.findIndex(i,1e9,!1,o);o<r;o++)if(s(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,t){let i=[],s=[],o=[],r=-1,l=-1;for(let a=0;a<this.value.length;a++){let c=this.value[a],f=this.from[a]+e,u=this.to[a]+e,h,d;if(f==u){let g=t.mapPos(f,c.startSide,c.mapMode);if(g==null||(h=d=g,c.startSide!=c.endSide&&(d=t.mapPos(f,c.endSide),d<h)))continue}else if(h=t.mapPos(f,c.startSide),d=t.mapPos(u,c.endSide),h>d||h==d&&c.startSide>0&&c.endSide<=0)continue;(d-h||c.endSide-c.startSide)<0||(r<0&&(r=h),c.point&&(l=Math.max(l,d-h)),i.push(c),s.push(h-r),o.push(d-r))}return{mapped:i.length?new W0(s,o,i,l):null,pos:r}}}class Tt{constructor(e,t,i,s){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=s}static create(e,t,i,s){return new Tt(e,t,i,s)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:s=0,filterTo:o=this.length}=e,r=e.filter;if(t.length==0&&!r)return this;if(i&&(t=t.slice().sort(Fp)),this.isEmpty)return t.length?Tt.of(t):this;let l=new HM(this,null,-1).goto(0),a=0,c=[],f=new mo;for(;l.value||a<t.length;)if(a<t.length&&(l.from-t[a].from||l.startSide-t[a].value.startSide)>=0){let u=t[a++];f.addInner(u.from,u.to,u.value)||c.push(u)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(l.chunkIndex)<t[a].from)&&(!r||s>this.chunkEnd(l.chunkIndex)||o<this.chunkPos[l.chunkIndex])&&f.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!r||s>l.to||o<l.from||r(l.from,l.to,l.value))&&(f.addInner(l.from,l.to,l.value)||c.push(jp.create(l.from,l.to,l.value))),l.next());return f.finishInner(this.nextLayer.isEmpty&&!c.length?Tt.empty:this.nextLayer.update({add:c,filter:r,filterFrom:s,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],s=-1;for(let r=0;r<this.chunk.length;r++){let l=this.chunkPos[r],a=this.chunk[r],c=e.touchesRange(l,l+a.length);if(c===!1)s=Math.max(s,a.maxPoint),t.push(a),i.push(e.mapPos(l));else if(c===!0){let{mapped:f,pos:u}=a.map(l,e);f&&(s=Math.max(s,f.maxPoint),t.push(f),i.push(u))}}let o=this.nextLayer.map(e);return t.length==0?o:new Tt(i,t,o||Tt.empty,s)}between(e,t,i){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let o=this.chunkPos[s],r=this.chunk[s];if(t>=o&&e<=o+r.length&&r.between(o,e-o,t-o,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return vf.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return vf.from(e).goto(t)}static compare(e,t,i,s,o=-1){let r=e.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=o),l=t.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=o),a=Xw(r,l,i),c=new kc(r,a,o),f=new kc(l,a,o);i.iterGaps((u,h,d)=>Gw(c,u,f,h,d,s)),i.empty&&i.length==0&&Gw(c,0,f,0,0,s)}static eq(e,t,i=0,s){s==null&&(s=999999999);let o=e.filter(f=>!f.isEmpty&&t.indexOf(f)<0),r=t.filter(f=>!f.isEmpty&&e.indexOf(f)<0);if(o.length!=r.length)return!1;if(!o.length)return!0;let l=Xw(o,r),a=new kc(o,l,0).goto(i),c=new kc(r,l,0).goto(i);for(;;){if(a.to!=c.to||!zp(a.active,c.active)||a.point&&(!c.point||!a.point.eq(c.point)))return!1;if(a.to>s)return!0;a.next(),c.next()}}static spans(e,t,i,s,o=-1){let r=new kc(e,null,o).goto(t),l=t,a=r.openStart;for(;;){let c=Math.min(r.to,i);if(r.point){let f=r.activeForPoint(r.to),u=r.pointFrom<t?f.length+1:r.point.startSide<0?f.length:Math.min(f.length,a);s.point(l,c,r.point,f,u,r.pointRank),a=Math.min(r.openEnd(c),f.length)}else c>l&&(s.span(l,c,r.active,a),a=r.openEnd(c));if(r.to>i)return a+(r.point&&r.to>i?1:0);l=r.to,r.next()}}static of(e,t=!1){let i=new mo;for(let s of e instanceof jp?[e]:t?zz(e):e)i.add(s.from,s.to,s.value);return i.finish()}static join(e){if(!e.length)return Tt.empty;let t=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let s=e[i];s!=Tt.empty;s=s.nextLayer)t=new Tt(s.chunkPos,s.chunk,t,Math.max(s.maxPoint,t.maxPoint));return t}}Tt.empty=new Tt([],[],null,-1);function zz(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let i=n[t];if(Fp(e,i)>0)return n.slice().sort(Fp);e=i}return n}Tt.empty.nextLayer=Tt.empty;class mo{finishChunk(e){this.chunks.push(new W0(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new mo)).add(e,t,i)}addInner(e,t,i){let s=e-this.lastTo||i.startSide-this.last.endSide;if(s<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(Tt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Tt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function Xw(n,e,t){let i=new Map;for(let o of n)for(let r=0;r<o.chunk.length;r++)o.chunk[r].maxPoint<=0&&i.set(o.chunk[r],o.chunkPos[r]);let s=new Set;for(let o of e)for(let r=0;r<o.chunk.length;r++){let l=i.get(o.chunk[r]);l!=null&&(t?t.mapPos(l):l)==o.chunkPos[r]&&!(t!=null&&t.touchesRange(l,l+o.chunk[r].length))&&s.add(o.chunk[r])}return s}class HM{constructor(e,t,i,s=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<e||s.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class vf{constructor(e){this.heap=e}static from(e,t=null,i=-1){let s=[];for(let o=0;o<e.length;o++)for(let r=e[o];!r.isEmpty;r=r.nextLayer)r.maxPoint>=i&&s.push(new HM(r,t,i,o));return s.length==1?s[0]:new vf(s)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)fm(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)fm(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),fm(this.heap,0)}}}function fm(n,e){for(let t=n[e];;){let i=(e<<1)+1;if(i>=n.length)break;let s=n[i];if(i+1<n.length&&s.compare(n[i+1])>=0&&(s=n[i+1],i++),t.compare(s)<0)break;n[i]=t,n[e]=s,e=i}}class kc{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=vf.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Au(this.active,e),Au(this.activeTo,e),Au(this.activeRank,e),this.minActive=Qw(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:s,rank:o}=this.cursor;for(;t<this.activeRank.length&&(o-this.activeRank[t]||s-this.activeTo[t])>0;)t++;Ou(this.active,t,i),Ou(this.activeTo,t,s),Ou(this.activeRank,t,o),e&&Ou(e,t,this.cursor.from),this.minActive=Qw(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),i&&Au(i,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let s=i.length-1;s>=0&&i[s]<e;s--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function Gw(n,e,t,i,s,o){n.goto(e),t.goto(i);let r=i+s,l=i,a=i-e;for(;;){let c=n.to+a-t.to||n.endSide-t.endSide,f=c<0?n.to+a:t.to,u=Math.min(f,r);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&zp(n.activeForPoint(n.to),t.activeForPoint(t.to))||o.comparePoint(l,u,n.point,t.point):u>l&&!zp(n.active,t.active)&&o.compareRange(l,u,n.active,t.active),f>r)break;l=f,c<=0&&n.next(),c>=0&&t.next()}}function zp(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function Au(n,e){for(let t=e,i=n.length-1;t<i;t++)n[t]=n[t+1];n.pop()}function Ou(n,e,t){for(let i=n.length-1;i>=e;i--)n[i+1]=n[i];n[e]=t}function Qw(n,e){let t=-1,i=1e9;for(let s=0;s<e.length;s++)(e[s]-i||n[s].endSide-n[t].endSide)<0&&(t=s,i=e[s]);return t}function cc(n,e,t=n.length){let i=0;for(let s=0;s<t;)n.charCodeAt(s)==9?(i+=e-i%e,s++):(i++,s=ei(n,s));return i}function Vp(n,e,t,i){for(let s=0,o=0;;){if(o>=e)return s;if(s==n.length)break;o+=n.charCodeAt(s)==9?t-o%t:1,s=ei(n,s)}return i===!0?-1:n.length}const Hp="Í¼",Zw=typeof Symbol>"u"?"__"+Hp:Symbol.for(Hp),Wp=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),$w=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Er{constructor(e,t){this.rules=[];let{finish:i}=t||{};function s(r){return/^@/.test(r)?[r]:r.split(/,\s*/)}function o(r,l,a,c){let f=[],u=/^@(\w+)\b/.exec(r[0]),h=u&&u[1]=="keyframes";if(u&&l==null)return a.push(r[0]+";");for(let d in l){let g=l[d];if(/&/.test(d))o(d.split(/,\s*/).map(m=>r.map(p=>m.replace(/&/,p))).reduce((m,p)=>m.concat(p)),g,a);else if(g&&typeof g=="object"){if(!u)throw new RangeError("The value of a property ("+d+") should be a primitive value.");o(s(d),g,f,h)}else g!=null&&f.push(d.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+g+";")}(f.length||h)&&a.push((i&&!u&&!c?r.map(i):r).join(", ")+" {"+f.join(" ")+"}")}for(let r in e)o(s(r),e[r],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=$w[Zw]||1;return $w[Zw]=e+1,Hp+e.toString(36)}static mount(e,t,i){let s=e[Wp],o=i&&i.nonce;s?o&&s.setNonce(o):s=new Vz(e,o),s.mount(Array.isArray(t)?t:[t],e)}}let ev=new Map;class Vz{constructor(e,t){let i=e.ownerDocument||e,s=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&s.CSSStyleSheet){let o=ev.get(i);if(o)return e[Wp]=o;this.sheet=new s.CSSStyleSheet,ev.set(i,this)}else this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[Wp]=this}mount(e,t){let i=this.sheet,s=0,o=0;for(let r=0;r<e.length;r++){let l=e[r],a=this.modules.indexOf(l);if(a<o&&a>-1&&(this.modules.splice(a,1),o--,a=-1),a==-1){if(this.modules.splice(o++,0,l),i)for(let c=0;c<l.rules.length;c++)i.insertRule(l.rules[c],s++)}else{for(;o<a;)s+=this.modules[o++].rules.length;s+=l.rules.length,o++}}if(i)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let r="";for(let a=0;a<this.modules.length;a++)r+=this.modules[a].getRules()+`
`;this.styleTag.textContent=r;let l=t.head||t;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Rr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},kf={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Hz=typeof navigator<"u"&&/Mac/.test(navigator.platform),Wz=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Zn=0;Zn<10;Zn++)Rr[48+Zn]=Rr[96+Zn]=String(Zn);for(var Zn=1;Zn<=24;Zn++)Rr[Zn+111]="F"+Zn;for(var Zn=65;Zn<=90;Zn++)Rr[Zn]=String.fromCharCode(Zn+32),kf[Zn]=String.fromCharCode(Zn);for(var um in Rr)kf.hasOwnProperty(um)||(kf[um]=Rr[um]);function qz(n){var e=Hz&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||Wz&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?kf:Rr)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function Sf(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function qp(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function Uz(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Sh(n,e){if(!e.anchorNode)return!1;try{return qp(n,e.anchorNode)}catch{return!1}}function Cf(n){return n.nodeType==3?Dl(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function Zc(n,e,t,i){return t?tv(n,e,t,i,-1)||tv(n,e,t,i,1):!1}function Rl(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function fd(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function tv(n,e,t,i,s){for(;;){if(n==t&&e==i)return!0;if(e==(s<0?0:Jo(n))){if(n.nodeName=="DIV")return!1;let o=n.parentNode;if(!o||o.nodeType!=1)return!1;e=Rl(n)+(s<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[e+(s<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=s<0?Jo(n):0}else return!1}}function Jo(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function kg(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function Jz(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function WM(n,e){let t=e.width/n.offsetWidth,i=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-n.offsetHeight)<1)&&(i=1),{scaleX:t,scaleY:i}}function Kz(n,e,t,i,s,o,r,l){let a=n.ownerDocument,c=a.defaultView||window;for(let f=n,u=!1;f&&!u;)if(f.nodeType==1){let h,d=f==a.body,g=1,m=1;if(d)h=Jz(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(f).position)&&(u=!0),f.scrollHeight<=f.clientHeight&&f.scrollWidth<=f.clientWidth){f=f.assignedSlot||f.parentNode;continue}let y=f.getBoundingClientRect();({scaleX:g,scaleY:m}=WM(f,y)),h={left:y.left,right:y.left+f.clientWidth*g,top:y.top,bottom:y.top+f.clientHeight*m}}let p=0,b=0;if(s=="nearest")e.top<h.top?(b=-(h.top-e.top+r),t>0&&e.bottom>h.bottom+b&&(b=e.bottom-h.bottom+b+r)):e.bottom>h.bottom&&(b=e.bottom-h.bottom+r,t<0&&e.top-b<h.top&&(b=-(h.top+b-e.top+r)));else{let y=e.bottom-e.top,v=h.bottom-h.top;b=(s=="center"&&y<=v?e.top+y/2-v/2:s=="start"||s=="center"&&t<0?e.top-r:e.bottom-v+r)-h.top}if(i=="nearest"?e.left<h.left?(p=-(h.left-e.left+o),t>0&&e.right>h.right+p&&(p=e.right-h.right+p+o)):e.right>h.right&&(p=e.right-h.right+o,t<0&&e.left<h.left+p&&(p=-(h.left+p-e.left+o))):p=(i=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:i=="start"==l?e.left-o:e.right-(h.right-h.left)+o)-h.left,p||b)if(d)c.scrollBy(p,b);else{let y=0,v=0;if(b){let C=f.scrollTop;f.scrollTop+=b/m,v=(f.scrollTop-C)*m}if(p){let C=f.scrollLeft;f.scrollLeft+=p/g,y=(f.scrollLeft-C)*g}e={left:e.left-y,top:e.top-v,right:e.right-y,bottom:e.bottom-v},y&&Math.abs(y-p)<1&&(i="nearest"),v&&Math.abs(v-b)<1&&(s="nearest")}if(d)break;f=f.assignedSlot||f.parentNode}else if(f.nodeType==11)f=f.host;else break}function Yz(n){let e=n.ownerDocument,t,i;for(let s=n.parentNode;s&&!(s==e.body||t&&i);)if(s.nodeType==1)!i&&s.scrollHeight>s.clientHeight&&(i=s),!t&&s.scrollWidth>s.clientWidth&&(t=s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;return{x:t,y:i}}class Xz{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?Jo(t):0),i,Math.min(e.focusOffset,i?Jo(i):0))}set(e,t,i,s){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=s}}let ia=null;function qM(n){if(n.setActive)return n.setActive();if(ia)return n.focus(ia);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(ia==null?{get preventScroll(){return ia={preventScroll:!0},!0}}:void 0),!ia){ia=!1;for(let t=0;t<e.length;){let i=e[t++],s=e[t++],o=e[t++];i.scrollTop!=s&&(i.scrollTop=s),i.scrollLeft!=o&&(i.scrollLeft=o)}}}let nv;function Dl(n,e,t=e){let i=nv||(nv=document.createRange());return i.setEnd(n,t),i.setStart(n,e),i}function Pa(n,e,t,i){let s={key:e,code:e,keyCode:t,which:t,cancelable:!0};i&&({altKey:s.altKey,ctrlKey:s.ctrlKey,shiftKey:s.shiftKey,metaKey:s.metaKey}=i);let o=new KeyboardEvent("keydown",s);o.synthetic=!0,n.dispatchEvent(o);let r=new KeyboardEvent("keyup",s);return r.synthetic=!0,n.dispatchEvent(r),o.defaultPrevented||r.defaultPrevented}function Gz(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function UM(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function Qz(n,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(i=Math.min(i,Jo(t));;)if(i){if(t.nodeType!=1)return!1;let s=t.childNodes[i-1];s.contentEditable=="false"?i--:(t=s,i=Jo(t))}else{if(t==n)return!0;i=Rl(t),t=t.parentNode}}function JM(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function KM(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i>0)return{node:t,offset:i};if(t.nodeType==1&&i>0){if(t.contentEditable=="false")return null;t=t.childNodes[i-1],i=Jo(t)}else if(t.parentNode&&!fd(t))i=Rl(t),t=t.parentNode;else return null}}function YM(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i<t.nodeValue.length)return{node:t,offset:i};if(t.nodeType==1&&i<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[i],i=0}else if(t.parentNode&&!fd(t))i=Rl(t)+1,t=t.parentNode;else return null}}class ci{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new ci(e.parentNode,Rl(e),t)}static after(e,t){return new ci(e.parentNode,Rl(e)+1,t)}}const q0=[];class nn{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let i=this.dom,s=null,o;for(let r of this.children){if(r.flags&7){if(!r.dom&&(o=s?s.nextSibling:i.firstChild)){let l=nn.get(o);(!l||!l.parent&&l.canReuseDOM(r))&&r.reuseDOM(o)}r.sync(e,t),r.flags&=-8}if(o=s?s.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&o!=r.dom&&(t.written=!0),r.dom.parentNode==i)for(;o&&o!=r.dom;)o=iv(o);else i.insertBefore(r.dom,o);s=r.dom}for(o=s?s.nextSibling:i.firstChild,o&&t&&t.node==i&&(t.written=!0);o;)o=iv(o)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,t),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let s=Jo(e)==0?0:t==0?-1:1;for(;;){let o=e.parentNode;if(o==this.dom)break;s==0&&o.firstChild!=o.lastChild&&(e==o.firstChild?s=-1:s=1),e=o}s<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!nn.get(i);)i=i.nextSibling;if(!i)return this.length;for(let s=0,o=0;;s++){let r=this.children[s];if(r.dom==i)return o;o+=r.length+r.breakAfter}}domBoundsAround(e,t,i=0){let s=-1,o=-1,r=-1,l=-1;for(let a=0,c=i,f=i;a<this.children.length;a++){let u=this.children[a],h=c+u.length;if(c<e&&h>t)return u.domBoundsAround(e,t,c);if(h>=e&&s==-1&&(s=a,o=c),c>t&&u.dom.parentNode==this.dom){r=a,l=f;break}f=h,c=h+u.breakAfter}return{from:o,to:l<0?i+this.length:l,startDOM:(s?this.children[s-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:r<this.children.length&&r>=0?this.children[r].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=q0){this.markDirty();for(let s=e;s<t;s++){let o=this.children[s];o.parent==this&&i.indexOf(o)<0&&o.destroy()}this.children.splice(e,t-e,...i);for(let s=0;s<i.length;s++)i[s].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new XM(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,i,s,o,r){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}nn.prototype.breakAfter=0;function iv(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class XM{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function GM(n,e,t,i,s,o,r,l,a){let{children:c}=n,f=c.length?c[e]:null,u=o.length?o[o.length-1]:null,h=u?u.breakAfter:r;if(!(e==i&&f&&!r&&!h&&o.length<2&&f.merge(t,s,o.length?u:null,t==0,l,a))){if(i<c.length){let d=c[i];d&&(s<d.length||d.breakAfter&&(u!=null&&u.breakAfter))?(e==i&&(d=d.split(s),s=0),!h&&u&&d.merge(0,s,u,!0,0,a)?o[o.length-1]=d:((s||d.children.length&&!d.children[0].length)&&d.merge(0,s,null,!1,0,a),o.push(d))):d!=null&&d.breakAfter&&(u?u.breakAfter=1:r=1),i++}for(f&&(f.breakAfter=r,t>0&&(!r&&o.length&&f.merge(t,f.length,o[0],!1,l,0)?f.breakAfter=o.shift().breakAfter:(t<f.length||f.children.length&&f.children[f.children.length-1].length==0)&&f.merge(t,f.length,null,!1,l,0),e++));e<i&&o.length;)if(c[i-1].become(o[o.length-1]))i--,o.pop(),a=o.length?0:l;else if(c[e].become(o[0]))e++,o.shift(),l=o.length?0:a;else break;!o.length&&e&&i<c.length&&!c[e-1].breakAfter&&c[i].merge(0,0,c[e-1],!1,l,a)&&e--,(e<i||o.length)&&n.replaceChildren(e,i,o)}}function QM(n,e,t,i,s,o){let r=n.childCursor(),{i:l,off:a}=r.findPos(t,1),{i:c,off:f}=r.findPos(e,-1),u=e-t;for(let h of i)u+=h.length;n.length+=u,GM(n,c,f,l,a,i,0,s,o)}let Pi=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Up=typeof document<"u"?document:{documentElement:{style:{}}};const Jp=/Edge\/(\d+)/.exec(Pi.userAgent),ZM=/MSIE \d/.test(Pi.userAgent),Kp=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Pi.userAgent),Sg=!!(ZM||Kp||Jp),sv=!Sg&&/gecko\/(\d+)/i.test(Pi.userAgent),hm=!Sg&&/Chrome\/(\d+)/.exec(Pi.userAgent),ov="webkitFontSmoothing"in Up.documentElement.style,$M=!Sg&&/Apple Computer/.test(Pi.vendor),rv=$M&&(/Mobile\/\w+/.test(Pi.userAgent)||Pi.maxTouchPoints>2);var Je={mac:rv||/Mac/.test(Pi.platform),windows:/Win/.test(Pi.platform),linux:/Linux|X11/.test(Pi.platform),ie:Sg,ie_version:ZM?Up.documentMode||6:Kp?+Kp[1]:Jp?+Jp[1]:0,gecko:sv,gecko_version:sv?+(/Firefox\/(\d+)/.exec(Pi.userAgent)||[0,0])[1]:0,chrome:!!hm,chrome_version:hm?+hm[1]:0,ios:rv,android:/Android\b/.test(Pi.userAgent),webkit:ov,safari:$M,webkit_version:ov?+(/\bAppleWebKit\/(\d+)/.exec(Pi.userAgent)||[0,0])[1]:0,tabSize:Up.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const Zz=256;class Ds extends nn{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return this.flags&8||i&&(!(i instanceof Ds)||this.length-(t-e)+i.length>Zz||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Ds(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new ci(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return $z(this.dom,e,t)}}class Ko extends nn{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let s of t)s.setParent(this)}setAttrs(e){if(UM(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,s,o,r){return i&&(!(i instanceof Ko&&i.mark.eq(this.mark))||e&&o<=0||t<this.length&&r<=0)?!1:(QM(this,e,t,i?i.children.slice():[],o-1,r-1),this.markDirty(),!0)}split(e){let t=[],i=0,s=-1,o=0;for(let l of this.children){let a=i+l.length;a>e&&t.push(i<e?l.split(e-i):l),s<0&&i>=e&&(s=o),i=a,o++}let r=this.length-e;return this.length=e,s>-1&&(this.children.length=s,this.markDirty()),new Ko(this.mark,t,r)}domAtPos(e){return ex(this,e)}coordsAt(e,t){return nx(this,e,t)}}function $z(n,e,t){let i=n.nodeValue.length;e>i&&(e=i);let s=e,o=e,r=0;e==0&&t<0||e==i&&t>=0?Je.chrome||Je.gecko||(e?(s--,r=1):o<i&&(o++,r=-1)):t<0?s--:o<i&&o++;let l=Dl(n,s,o).getClientRects();if(!l.length)return null;let a=l[(r?r<0:t>=0)?0:l.length-1];return Je.safari&&!r&&a.width==0&&(a=Array.prototype.find.call(l,c=>c.width)||a),r?kg(a,r<0):a||null}class hr extends nn{static create(e,t,i){return new hr(e,t,i)}constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}split(e){let t=hr.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,i,s,o,r){return i&&(!(i instanceof hr)||!this.widget.compare(i.widget)||e>0&&o<=0||t<this.length&&r<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e instanceof hr&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Bt.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,s=this.posAtStart;return i?i.slice(s,s+this.length):Bt.empty}domAtPos(e){return(this.length?e==0:this.side>0)?ci.before(this.dom):ci.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);if(i)return i;let s=this.dom.getClientRects(),o=null;if(!s.length)return null;let r=this.side?this.side<0:e>0;for(let l=r?s.length-1:0;o=s[l],!(e>0?l==0:l==s.length-1||o.top<o.bottom);l+=r?-1:1);return kg(o,!r)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Ja extends nn{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Ja&&e.side==this.side}split(){return new Ja(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?ci.before(this.dom):ci.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Bt.empty}get isHidden(){return!0}}Ds.prototype.children=hr.prototype.children=Ja.prototype.children=q0;function ex(n,e){let t=n.dom,{children:i}=n,s=0;for(let o=0;s<i.length;s++){let r=i[s],l=o+r.length;if(!(l==o&&r.getSide()<=0)){if(e>o&&e<l&&r.dom.parentNode==t)return r.domAtPos(e-o);if(e<=o)break;o=l}}for(let o=s;o>0;o--){let r=i[o-1];if(r.dom.parentNode==t)return r.domAtPos(r.length)}for(let o=s;o<i.length;o++){let r=i[o];if(r.dom.parentNode==t)return r.domAtPos(0)}return new ci(t,0)}function tx(n,e,t){let i,{children:s}=n;t>0&&e instanceof Ko&&s.length&&(i=s[s.length-1])instanceof Ko&&i.mark.eq(e.mark)?tx(i,e.children[0],t-1):(s.push(e),e.setParent(n)),n.length+=e.length}function nx(n,e,t){let i=null,s=-1,o=null,r=-1;function l(c,f){for(let u=0,h=0;u<c.children.length&&h<=f;u++){let d=c.children[u],g=h+d.length;g>=f&&(d.children.length?l(d,f-h):(!o||o.isHidden&&t>0)&&(g>f||h==g&&d.getSide()>0)?(o=d,r=f-h):(h<f||h==g&&d.getSide()<0&&!d.isHidden)&&(i=d,s=f-h)),h=g}}l(n,e);let a=(t<0?i:o)||i||o;return a?a.coordsAt(Math.max(0,a==i?s:r),t):eV(n)}function eV(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=Cf(e);return t[t.length-1]||null}function Yp(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const lv=Object.create(null);function ud(n,e,t){if(n==e)return!0;n||(n=lv),e||(e=lv);let i=Object.keys(n),s=Object.keys(e);if(i.length-(t&&i.indexOf(t)>-1?1:0)!=s.length-(t&&s.indexOf(t)>-1?1:0))return!1;for(let o of i)if(o!=t&&(s.indexOf(o)==-1||n[o]!==e[o]))return!1;return!0}function Xp(n,e,t){let i=!1;if(e)for(let s in e)t&&s in t||(i=!0,s=="style"?n.style.cssText="":n.removeAttribute(s));if(t)for(let s in t)e&&e[s]==t[s]||(i=!0,s=="style"?n.style.cssText=t[s]:n.setAttribute(s,t[s]));return i}function tV(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let i=n.attributes[t];e[i.name]=i.value}return e}class Vr{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Mi=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(Mi||(Mi={}));class rt extends El{constructor(e,t,i,s){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=s}get heightRelevant(){return!1}static mark(e){return new tu(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Dr(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,s;if(e.isBlockGap)i=-5e8,s=4e8;else{let{start:o,end:r}=ix(e,t);i=(o?t?-3e8:-1:5e8)-1,s=(r?t?2e8:1:-6e8)+1}return new Dr(e,i,s,t,e.widget||null,!0)}static line(e){return new nu(e)}static set(e,t=!1){return Tt.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}rt.none=Tt.empty;class tu extends rt{constructor(e){let{start:t,end:i}=ix(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,i;return this==e||e instanceof tu&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&ud(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}tu.prototype.point=!1;class nu extends rt{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof nu&&this.spec.class==e.spec.class&&ud(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}nu.prototype.mapMode=ki.TrackBefore;nu.prototype.point=!0;class Dr extends rt{constructor(e,t,i,s,o,r){super(t,i,o,e),this.block=s,this.isReplace=r,this.mapMode=s?t<=0?ki.TrackBefore:ki.TrackAfter:ki.TrackDel}get type(){return this.startSide!=this.endSide?Mi.WidgetRange:this.startSide<=0?Mi.WidgetBefore:Mi.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Dr&&nV(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Dr.prototype.point=!0;function ix(n,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=n;return t==null&&(t=n.inclusive),i==null&&(i=n.inclusive),{start:t??e,end:i??e}}function nV(n,e){return n==e||!!(n&&e&&n.compare(e))}function Gp(n,e,t,i=0){let s=t.length-1;s>=0&&t[s]+i>=n?t[s]=Math.max(t[s],e):t.push(n,e)}class Rn extends nn{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,s,o,r){if(i){if(!(i instanceof Rn))return!1;this.dom||i.transferDOM(this)}return s&&this.setDeco(i?i.attrs:null),QM(this,e,t,i?i.children.slice():[],o,r),!0}split(e){let t=new Rn;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:s}=this.childPos(e);s&&(t.append(this.children[i].split(s),0),this.children[i].merge(s,this.children[i].length,null,!1,0,0),i++);for(let o=i;o<this.children.length;o++)t.append(this.children[o],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){ud(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){tx(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=Yp(t,this.attrs||{})),i&&(this.attrs=Yp({class:i},this.attrs||{}))}domAtPos(e){return ex(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var i;this.dom?this.flags&4&&(UM(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Xp(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let s=this.dom.lastChild;for(;s&&nn.get(s)instanceof Ko;)s=s.lastChild;if(!s||!this.length||s.nodeName!="BR"&&((i=nn.get(s))===null||i===void 0?void 0:i.isEditable)==!1&&(!Je.ios||!this.children.some(o=>o instanceof Ds))){let o=document.createElement("BR");o.cmIgnore=!0,this.dom.appendChild(o)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let i of this.children){if(!(i instanceof Ds)||/[^ -~]/.test(i.text))return null;let s=Cf(i.dom);if(s.length!=1)return null;e+=s[0].width,t=s[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let i=nx(this,e,t);if(!this.children.length&&i&&this.parent){let{heightOracle:s}=this.parent.view.viewState,o=i.bottom-i.top;if(Math.abs(o-s.lineHeight)<2&&s.textHeight<o){let r=(o-s.textHeight)/2;return{top:i.top+r,bottom:i.bottom-r,left:i.left,right:i.left}}}return i}become(e){return e instanceof Rn&&this.children.length==0&&e.children.length==0&&ud(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let i=0,s=0;i<e.children.length;i++){let o=e.children[i],r=s+o.length;if(r>=t){if(o instanceof Rn)return o;if(r>t)break}s=r+o.breakAfter}return null}}class Bo extends nn{constructor(e,t,i){super(),this.widget=e,this.length=t,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,s,o,r){return i&&(!(i instanceof Bo)||!this.widget.compare(i.widget)||e>0&&o<=0||t<this.length&&r<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?ci.before(this.dom):ci.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new Bo(this.widget,t,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return q0}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Bt.empty}domBoundsAround(){return null}become(e){return e instanceof Bo&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);return i||(this.widget instanceof Qp?null:kg(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:i}=this.deco;return t==i?!1:e<0?t<0:i>0}}class Qp extends Vr{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class $c{constructor(e,t,i,s){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=s,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Bo&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Rn),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Pu(new Ja(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Bo)&&this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:r,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(r){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=o,this.textOff=0}let s=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(Pu(new Ds(this.text.slice(this.textOff,this.textOff+s)),t),i),this.atCursorPos=!0,this.textOff+=s,e-=s,i=0}}span(e,t,i,s){this.buildText(t-e,i,s),this.pos=t,this.openStart<0&&(this.openStart=s)}point(e,t,i,s,o,r){if(this.disallowBlockEffectsFor[r]&&i instanceof Dr){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=t-e;if(i instanceof Dr)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Bo(i.widget||Ka.block,l,i));else{let a=hr.create(i.widget||Ka.inline,l,l?0:i.startSide),c=this.atCursorPos&&!a.isEditable&&o<=s.length&&(e<t||i.startSide>0),f=!a.isEditable&&(e<t||o>s.length||i.startSide<=0),u=this.getLine();this.pendingBuffer==2&&!c&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(s),c&&(u.append(Pu(new Ja(1),s),o),o=s.length+Math.max(0,o-s.length)),u.append(Pu(a,s),o),this.atCursorPos=f,this.pendingBuffer=f?e<t||o>s.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=s.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=o)}static build(e,t,i,s,o){let r=new $c(e,t,i,o);return r.openEnd=Tt.spans(s,t,i,r),r.openStart<0&&(r.openStart=r.openEnd),r.finish(r.openEnd),r}}function Pu(n,e){for(let t of e)n=new Ko(t,[n],n.length);return n}class Ka extends Vr{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Ka.inline=new Ka("span");Ka.block=new Ka("div");var un=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(un||(un={}));const Ll=un.LTR,U0=un.RTL;function sx(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const iV=sx("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),sV=sx("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Zp=Object.create(null),Js=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);Zp[e]=t,Zp[t]=-e}function ox(n){return n<=247?iV[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?sV[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const oV=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class dr{get dir(){return this.level%2?U0:Ll}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,i,s){let o=-1;for(let r=0;r<e.length;r++){let l=e[r];if(l.from<=t&&l.to>=t){if(l.level==i)return r;(o<0||(s!=0?s<0?l.from<t:l.to>t:e[o].level>l.level))&&(o=r)}}if(o<0)throw new RangeError("Index out of range");return o}}function rx(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let i=n[t],s=e[t];if(i.from!=s.from||i.to!=s.to||i.direction!=s.direction||!rx(i.inner,s.inner))return!1}return!0}const tn=[];function rV(n,e,t,i,s){for(let o=0;o<=i.length;o++){let r=o?i[o-1].to:e,l=o<i.length?i[o].from:t,a=o?256:s;for(let c=r,f=a,u=a;c<l;c++){let h=ox(n.charCodeAt(c));h==512?h=f:h==8&&u==4&&(h=16),tn[c]=h==4?2:h,h&7&&(u=h),f=h}for(let c=r,f=a,u=a;c<l;c++){let h=tn[c];if(h==128)c<l-1&&f==tn[c+1]&&f&24?h=tn[c]=f:tn[c]=256;else if(h==64){let d=c+1;for(;d<l&&tn[d]==64;)d++;let g=c&&f==8||d<t&&tn[d]==8?u==1?1:8:256;for(let m=c;m<d;m++)tn[m]=g;c=d-1}else h==8&&u==1&&(tn[c]=1);f=h,h&7&&(u=h)}}}function lV(n,e,t,i,s){let o=s==1?2:1;for(let r=0,l=0,a=0;r<=i.length;r++){let c=r?i[r-1].to:e,f=r<i.length?i[r].from:t;for(let u=c,h,d,g;u<f;u++)if(d=Zp[h=n.charCodeAt(u)])if(d<0){for(let m=l-3;m>=0;m-=3)if(Js[m+1]==-d){let p=Js[m+2],b=p&2?s:p&4?p&1?o:s:0;b&&(tn[u]=tn[Js[m]]=b),l=m;break}}else{if(Js.length==189)break;Js[l++]=u,Js[l++]=h,Js[l++]=a}else if((g=tn[u])==2||g==1){let m=g==s;a=m?0:1;for(let p=l-3;p>=0;p-=3){let b=Js[p+2];if(b&2)break;if(m)Js[p+2]|=2;else{if(b&4)break;Js[p+2]|=4}}}}}function aV(n,e,t,i){for(let s=0,o=i;s<=t.length;s++){let r=s?t[s-1].to:n,l=s<t.length?t[s].from:e;for(let a=r;a<l;){let c=tn[a];if(c==256){let f=a+1;for(;;)if(f==l){if(s==t.length)break;f=t[s++].to,l=s<t.length?t[s].from:e}else if(tn[f]==256)f++;else break;let u=o==1,h=(f<e?tn[f]:i)==1,d=u==h?u?1:2:i;for(let g=f,m=s,p=m?t[m-1].to:n;g>a;)g==p&&(g=t[--m].from,p=m?t[m-1].to:n),tn[--g]=d;a=f}else o=c,a++}}}function $p(n,e,t,i,s,o,r){let l=i%2?2:1;if(i%2==s%2)for(let a=e,c=0;a<t;){let f=!0,u=!1;if(c==o.length||a<o[c].from){let m=tn[a];m!=l&&(f=!1,u=m==16)}let h=!f&&l==1?[]:null,d=f?i:i+1,g=a;e:for(;;)if(c<o.length&&g==o[c].from){if(u)break e;let m=o[c];if(!f)for(let p=m.to,b=c+1;;){if(p==t)break e;if(b<o.length&&o[b].from==p)p=o[b++].to;else{if(tn[p]==l)break e;break}}if(c++,h)h.push(m);else{m.from>a&&r.push(new dr(a,m.from,d));let p=m.direction==Ll!=!(d%2);e1(n,p?i+1:i,s,m.inner,m.from,m.to,r),a=m.to}g=m.to}else{if(g==t||(f?tn[g]!=l:tn[g]==l))break;g++}h?$p(n,a,g,i+1,s,h,r):a<g&&r.push(new dr(a,g,d)),a=g}else for(let a=t,c=o.length;a>e;){let f=!0,u=!1;if(!c||a>o[c-1].to){let m=tn[a-1];m!=l&&(f=!1,u=m==16)}let h=!f&&l==1?[]:null,d=f?i:i+1,g=a;e:for(;;)if(c&&g==o[c-1].to){if(u)break e;let m=o[--c];if(!f)for(let p=m.from,b=c;;){if(p==e)break e;if(b&&o[b-1].to==p)p=o[--b].from;else{if(tn[p-1]==l)break e;break}}if(h)h.push(m);else{m.to<a&&r.push(new dr(m.to,a,d));let p=m.direction==Ll!=!(d%2);e1(n,p?i+1:i,s,m.inner,m.from,m.to,r),a=m.from}g=m.from}else{if(g==e||(f?tn[g-1]!=l:tn[g-1]==l))break;g--}h?$p(n,g,a,i+1,s,h,r):g<a&&r.push(new dr(g,a,d)),a=g}}function e1(n,e,t,i,s,o,r){let l=e%2?2:1;rV(n,s,o,i,l),lV(n,s,o,i,l),aV(s,o,i,l),$p(n,s,o,e,t,i,r)}function cV(n,e,t){if(!n)return[new dr(0,0,e==U0?1:0)];if(e==Ll&&!t.length&&!oV.test(n))return lx(n.length);if(t.length)for(;n.length>tn.length;)tn[tn.length]=256;let i=[],s=e==Ll?0:1;return e1(n,s,s,t,0,n.length,i),i}function lx(n){return[new dr(0,n,0)]}let ax="";function fV(n,e,t,i,s){var o;let r=i.head-n.from,l=dr.find(e,r,(o=i.bidiLevel)!==null&&o!==void 0?o:-1,i.assoc),a=e[l],c=a.side(s,t);if(r==c){let h=l+=s?1:-1;if(h<0||h>=e.length)return null;a=e[l=h],r=a.side(!s,t),c=a.side(s,t)}let f=ei(n.text,r,a.forward(s,t));(f<a.from||f>a.to)&&(f=c),ax=n.text.slice(Math.min(r,f),Math.max(r,f));let u=l==(s?e.length-1:0)?null:e[l+(s?1:-1)];return u&&f==c&&u.level+(s?0:1)<a.level?_e.cursor(u.side(!s,t)+n.from,u.forward(s,t)?1:-1,u.level):_e.cursor(f+n.from,a.forward(s,t)?-1:1,a.level)}function uV(n,e,t){for(let i=e;i<t;i++){let s=ox(n.charCodeAt(i));if(s==1)return Ll;if(s==2||s==4)return U0}return Ll}const cx=Ve.define(),fx=Ve.define(),ux=Ve.define(),hx=Ve.define(),t1=Ve.define(),dx=Ve.define(),gx=Ve.define(),J0=Ve.define(),K0=Ve.define(),mx=Ve.define({combine:n=>n.some(e=>e)}),px=Ve.define({combine:n=>n.some(e=>e)}),bx=Ve.define();class Ta{constructor(e,t="nearest",i="nearest",s=5,o=5,r=!1){this.range=e,this.y=t,this.x=i,this.yMargin=s,this.xMargin=o,this.isSnapshot=r}map(e){return e.empty?this:new Ta(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Ta(_e.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Tu=pt.define({map:(n,e)=>n.map(e)}),yx=pt.define();function Si(n,e,t){let i=n.facet(hx);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const ar=Ve.define({combine:n=>n.length?n[0]:!0});let hV=0;const Lc=Ve.define();class kn{constructor(e,t,i,s,o){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=s,this.extension=o(this)}static define(e,t){const{eventHandlers:i,eventObservers:s,provide:o,decorations:r}=t||{};return new kn(hV++,e,i,s,l=>{let a=[Lc.of(l)];return r&&a.push(Mf.of(c=>{let f=c.plugin(l);return f?r(f):rt.none})),o&&a.push(o(l)),a})}static fromClass(e,t){return kn.define(i=>new e(i),t)}}class dm{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(Si(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Si(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){Si(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const _x=Ve.define(),Y0=Ve.define(),Mf=Ve.define(),wx=Ve.define(),X0=Ve.define(),vx=Ve.define();function av(n,e){let t=n.state.facet(vx);if(!t.length)return t;let i=t.map(o=>o instanceof Function?o(n):o),s=[];return Tt.spans(i,e.from,e.to,{point(){},span(o,r,l,a){let c=o-e.from,f=r-e.from,u=s;for(let h=l.length-1;h>=0;h--,a--){let d=l[h].spec.bidiIsolate,g;if(d==null&&(d=uV(e.text,c,f)),a>0&&u.length&&(g=u[u.length-1]).to==c&&g.direction==d)g.to=f,u=g.inner;else{let m={from:c,to:f,direction:d,inner:[]};u.push(m),u=m.inner}}}}),s}const kx=Ve.define();function Sx(n){let e=0,t=0,i=0,s=0;for(let o of n.state.facet(kx)){let r=o(n);r&&(r.left!=null&&(e=Math.max(e,r.left)),r.right!=null&&(t=Math.max(t,r.right)),r.top!=null&&(i=Math.max(i,r.top)),r.bottom!=null&&(s=Math.max(s,r.bottom)))}return{left:e,right:t,top:i,bottom:s}}const Ic=Ve.define();class cs{constructor(e,t,i,s){this.fromA=e,this.toA=t,this.fromB=i,this.toB=s}join(e){return new cs(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let s=e[t-1];if(!(s.fromA>i.toA)){if(s.toA<i.fromA)break;i=i.join(s),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let s=0,o=0,r=0,l=0;;s++){let a=s==e.length?null:e[s],c=r-l,f=a?a.fromB:1e9;for(;o<t.length&&t[o]<f;){let u=t[o],h=t[o+1],d=Math.max(l,u),g=Math.min(f,h);if(d<=g&&new cs(d+c,g+c,d,g).addToSet(i),h>f)break;o+=2}if(!a)return i;new cs(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),r=a.toA,l=a.toB}}}class hd{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=In.empty(this.startState.doc.length);for(let o of i)this.changes=this.changes.compose(o.changes);let s=[];this.changes.iterChangedRanges((o,r,l,a)=>s.push(new cs(o,r,l,a))),this.changedRanges=s}static create(e,t,i){return new hd(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class cv extends nn{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=rt.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Rn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new cs(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:c,toA:f})=>f<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let s=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?s=this.domChanged.newSel.head:!_V(e.changes,this.hasComposition)&&!e.selectionSet&&(s=e.state.selection.main.head));let o=s>-1?gV(this.view,e.changes,s):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:f}=this.hasComposition;i=new cs(c,f,e.changes.mapPos(c,-1),e.changes.mapPos(f,1)).addToSet(i.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(Je.ie||Je.chrome)&&!o&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let r=this.decorations,l=this.updateDeco(),a=bV(r,l,e.changes);return i=cs.extendWithRanges(i,a),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,o),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,i);let{observer:s}=this.view;s.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let r=Je.chrome||Je.ios?{node:s.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,r),this.flags&=-8,r&&(r.written||s.selectionRange.focusNode!=r.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(r=>r.flags&=-9);let o=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let r of this.children)r instanceof Bo&&r.widget instanceof Qp&&o.push(r.dom);s.updateGaps(o)}updateChildren(e,t,i){let s=i?i.range.addToSet(e.slice()):e,o=this.childCursor(t);for(let r=s.length-1;;r--){let l=r>=0?s[r]:null;if(!l)break;let{fromA:a,toA:c,fromB:f,toB:u}=l,h,d,g,m;if(i&&i.range.fromB<u&&i.range.toB>f){let C=$c.build(this.view.state.doc,f,i.range.fromB,this.decorations,this.dynamicDecorationMap),_=$c.build(this.view.state.doc,i.range.toB,u,this.decorations,this.dynamicDecorationMap);d=C.breakAtStart,g=C.openStart,m=_.openEnd;let S=this.compositionView(i);_.breakAtStart?S.breakAfter=1:_.content.length&&S.merge(S.length,S.length,_.content[0],!1,_.openStart,0)&&(S.breakAfter=_.content[0].breakAfter,_.content.shift()),C.content.length&&S.merge(0,0,C.content[C.content.length-1],!0,0,C.openEnd)&&C.content.pop(),h=C.content.concat(S).concat(_.content)}else({content:h,breakAtStart:d,openStart:g,openEnd:m}=$c.build(this.view.state.doc,f,u,this.decorations,this.dynamicDecorationMap));let{i:p,off:b}=o.findPos(c,1),{i:y,off:v}=o.findPos(a,-1);GM(this,y,v,p,b,h,d,g,m)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let i of t.effects)i.is(yx)&&(this.editContextFormatting=i.value)}compositionView(e){let t=new Ds(e.text.nodeValue);t.flags|=8;for(let{deco:s}of e.marks)t=new Ko(s,[t],t.length);let i=new Rn;return i.append(t,0),i}fixCompositionDOM(e){let t=(o,r)=>{r.flags|=8|(r.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(r);let l=nn.get(o);l&&l!=r&&(l.dom=null),r.setDOM(o)},i=this.childPos(e.range.fromB,1),s=this.children[i.i];t(e.line,s);for(let o=e.marks.length-1;o>=-1;o--)i=s.childPos(i.off,1),s=s.children[i.i],t(o>=0?e.marks[o].node:e.text,s)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,s=i==this.dom,o=!s&&Sh(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(s||t||o))return;let r=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(l.anchor)),c=l.empty?a:this.moveToLine(this.domAtPos(l.head));if(Je.gecko&&l.empty&&!this.hasComposition&&dV(a)){let u=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(u,a.node.childNodes[a.offset]||null)),a=c=new ci(u,0),r=!0}let f=this.view.observer.selectionRange;(r||!f.focusNode||(!Zc(a.node,a.offset,f.anchorNode,f.anchorOffset)||!Zc(c.node,c.offset,f.focusNode,f.focusOffset))&&!this.suppressWidgetCursorChange(f,l))&&(this.view.observer.ignore(()=>{Je.android&&Je.chrome&&this.dom.contains(f.focusNode)&&yV(f.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let u=Sf(this.view.root);if(u)if(l.empty){if(Je.gecko){let h=mV(a.node,a.offset);if(h&&h!=3){let d=(h==1?KM:YM)(a.node,a.offset);d&&(a=new ci(d.node,d.offset))}}u.collapse(a.node,a.offset),l.bidiLevel!=null&&u.caretBidiLevel!==void 0&&(u.caretBidiLevel=l.bidiLevel)}else if(u.extend){u.collapse(a.node,a.offset);try{u.extend(c.node,c.offset)}catch{}}else{let h=document.createRange();l.anchor>l.head&&([a,c]=[c,a]),h.setEnd(c.node,c.offset),h.setStart(a.node,a.offset),u.removeAllRanges(),u.addRange(h)}o&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(a,c)),this.impreciseAnchor=a.precise?null:new ci(f.anchorNode,f.anchorOffset),this.impreciseHead=c.precise?null:new ci(f.focusNode,f.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Zc(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=Sf(e.root),{anchorNode:s,anchorOffset:o}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let r=Rn.find(this,t.head);if(!r)return;let l=r.posAtStart;if(t.head==l||t.head==l+r.length)return;let a=this.coordsAt(t.head,-1),c=this.coordsAt(t.head,1);if(!a||!c||a.bottom>c.top)return;let f=this.domAtPos(t.head+t.assoc);i.collapse(f.node,f.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let u=e.observer.selectionRange;e.docView.posFromDOM(u.anchorNode,u.anchorOffset)!=t.from&&i.collapse(s,o)}moveToLine(e){let t=this.dom,i;if(e.node!=t)return e;for(let s=e.offset;!i&&s<t.childNodes.length;s++){let o=nn.get(t.childNodes[s]);o instanceof Rn&&(i=o.domAtPos(0))}for(let s=e.offset-1;!i&&s>=0;s--){let o=nn.get(t.childNodes[s]);o instanceof Rn&&(i=o.domAtPos(o.length))}return i?new ci(i.node,i.offset,!0):e}nearest(e){for(let t=e;t;){let i=nn.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let s=this.children[t];if(i<s.length||s instanceof Rn)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){let i=null,s=0;for(let o=this.length,r=this.children.length-1;r>=0;r--){let l=this.children[r],a=o-l.breakAfter,c=a-l.length;if(a<e)break;if(c<=e&&(c<e||l.covers(-1))&&(a>e||l.covers(1))&&(!i||l instanceof Rn&&!(i instanceof Rn&&t>=0)))i=l,s=c;else if(i&&c==e&&a==e&&l instanceof Bo&&Math.abs(t)<2){if(l.deco.startSide<0)break;r&&(i=null)}o=c}return i?i.coordsAt(e-s,t):null}coordsForChar(e){let{i:t,off:i}=this.childPos(e,1),s=this.children[t];if(!(s instanceof Rn))return null;for(;s.children.length;){let{i:l,off:a}=s.childPos(i,1);for(;;l++){if(l==s.children.length)return null;if((s=s.children[l]).length)break}i=a}if(!(s instanceof Ds))return null;let o=ei(s.text,i);if(o==i)return null;let r=Dl(s.dom,i,o).getClientRects();for(let l=0;l<r.length;l++){let a=r[l];if(l==r.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let t=[],{from:i,to:s}=e,o=this.view.contentDOM.clientWidth,r=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==un.LTR;for(let c=0,f=0;f<this.children.length;f++){let u=this.children[f],h=c+u.length;if(h>s)break;if(c>=i){let d=u.dom.getBoundingClientRect();if(t.push(d.height),r){let g=u.dom.lastChild,m=g?Cf(g):[];if(m.length){let p=m[m.length-1],b=a?p.right-d.left:d.right-p.left;b>l&&(l=b,this.minWidth=o,this.minWidthFrom=c,this.minWidthTo=h)}}}c=h+u.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?un.RTL:un.LTR}measureTextSize(){for(let o of this.children)if(o instanceof Rn){let r=o.measureTextSize();if(r)return r}let e=document.createElement("div"),t,i,s;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let o=Cf(e.firstChild)[0];t=e.getBoundingClientRect().height,i=o?o.width/27:7,s=o?o.height:t,e.remove()}),{lineHeight:t,charWidth:i,textHeight:s}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new XM(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,s=0;;s++){let o=s==t.viewports.length?null:t.viewports[s],r=o?o.from-1:this.length;if(r>i){let l=(t.lineBlockAt(r).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(rt.replace({widget:new Qp(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,r))}if(!o)break;i=o.to+1}return rt.set(e)}updateDeco(){let e=1,t=this.view.state.facet(Mf).map(o=>(this.dynamicDecorationMap[e++]=typeof o=="function")?o(this.view):o),i=!1,s=this.view.state.facet(wx).map((o,r)=>{let l=typeof o=="function";return l&&(i=!0),l?o(this.view):o});for(s.length&&(this.dynamicDecorationMap[e++]=i,t.push(Tt.join(s))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let c of this.view.state.facet(bx))try{if(c(this.view,e.range,e))return!0}catch(f){Si(this.view.state,f,"scroll handler")}let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),s;if(!i)return;!t.empty&&(s=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,s.left),top:Math.min(i.top,s.top),right:Math.max(i.right,s.right),bottom:Math.max(i.bottom,s.bottom)});let o=Sx(this.view),r={left:i.left-o.left,top:i.top-o.top,right:i.right+o.right,bottom:i.bottom+o.bottom},{offsetWidth:l,offsetHeight:a}=this.view.scrollDOM;Kz(this.view.scrollDOM,r,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==un.LTR)}}function dV(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function Cx(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let i=KM(t.focusNode,t.focusOffset),s=YM(t.focusNode,t.focusOffset),o=i||s;if(s&&i&&s.node!=i.node){let l=nn.get(s.node);if(!l||l instanceof Ds&&l.text!=s.node.nodeValue)o=s;else if(n.docView.lastCompositionAfterCursor){let a=nn.get(i.node);!a||a instanceof Ds&&a.text!=i.node.nodeValue||(o=s)}}if(n.docView.lastCompositionAfterCursor=o!=i,!o)return null;let r=e-o.offset;return{from:r,to:r+o.node.nodeValue.length,node:o.node}}function gV(n,e,t){let i=Cx(n,t);if(!i)return null;let{node:s,from:o,to:r}=i,l=s.nodeValue;if(/[\n\r]/.test(l)||n.state.doc.sliceString(i.from,i.to)!=l)return null;let a=e.invertedDesc,c=new cs(a.mapPos(o),a.mapPos(r),o,r),f=[];for(let u=s.parentNode;;u=u.parentNode){let h=nn.get(u);if(h instanceof Ko)f.push({node:u,deco:h.mark});else{if(h instanceof Rn||u.nodeName=="DIV"&&u.parentNode==n.contentDOM)return{range:c,text:s,marks:f,line:u};if(u!=n.contentDOM)f.push({node:u,deco:new tu({inclusive:!0,attributes:tV(u),tagName:u.tagName.toLowerCase()})});else return null}}}function mV(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let pV=class{constructor(){this.changes=[]}compareRange(e,t){Gp(e,t,this.changes)}comparePoint(e,t){Gp(e,t,this.changes)}};function bV(n,e,t){let i=new pV;return Tt.compare(n,e,t,i),i.changes}function yV(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function _V(n,e){let t=!1;return e&&n.iterChangedRanges((i,s)=>{i<e.to&&s>e.from&&(t=!0)}),t}function wV(n,e,t=1){let i=n.charCategorizer(e),s=n.doc.lineAt(e),o=e-s.from;if(s.length==0)return _e.cursor(e);o==0?t=1:o==s.length&&(t=-1);let r=o,l=o;t<0?r=ei(s.text,o,!1):l=ei(s.text,o);let a=i(s.text.slice(r,l));for(;r>0;){let c=ei(s.text,r,!1);if(i(s.text.slice(c,r))!=a)break;r=c}for(;l<s.length;){let c=ei(s.text,l);if(i(s.text.slice(l,c))!=a)break;l=c}return _e.range(r+s.from,l+s.from)}function vV(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function kV(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function gm(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function fv(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function uv(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function n1(n,e,t){let i,s,o,r,l=!1,a,c,f,u;for(let g=n.firstChild;g;g=g.nextSibling){let m=Cf(g);for(let p=0;p<m.length;p++){let b=m[p];s&&gm(s,b)&&(b=fv(uv(b,s.bottom),s.top));let y=vV(e,b),v=kV(t,b);if(y==0&&v==0)return g.nodeType==3?hv(g,e,t):n1(g,e,t);if(!i||r>v||r==v&&o>y){i=g,s=b,o=y,r=v;let C=v?t<b.top?-1:1:y?e<b.left?-1:1:0;l=!C||(C>0?p<m.length-1:p>0)}y==0?t>b.bottom&&(!f||f.bottom<b.bottom)?(a=g,f=b):t<b.top&&(!u||u.top>b.top)&&(c=g,u=b):f&&gm(f,b)?f=uv(f,b.bottom):u&&gm(u,b)&&(u=fv(u,b.top))}}if(f&&f.bottom>=t?(i=a,s=f):u&&u.top<=t&&(i=c,s=u),!i)return{node:n,offset:0};let h=Math.max(s.left,Math.min(s.right,e));if(i.nodeType==3)return hv(i,h,t);if(l&&i.contentEditable!="false")return n1(i,h,t);let d=Array.prototype.indexOf.call(n.childNodes,i)+(e>=(s.left+s.right)/2?1:0);return{node:n,offset:d}}function hv(n,e,t){let i=n.nodeValue.length,s=-1,o=1e9,r=0;for(let l=0;l<i;l++){let a=Dl(n,l,l+1).getClientRects();for(let c=0;c<a.length;c++){let f=a[c];if(f.top==f.bottom)continue;r||(r=e-f.left);let u=(f.top>t?f.top-t:t-f.bottom)-1;if(f.left-1<=e&&f.right+1>=e&&u<o){let h=e>=(f.left+f.right)/2,d=h;if((Je.chrome||Je.gecko)&&Dl(n,l).getBoundingClientRect().left==f.right&&(d=!h),u<=0)return{node:n,offset:l+(d?1:0)};s=l+(d?1:0),o=u}}}return{node:n,offset:s>-1?s:r>0?n.nodeValue.length:0}}function Mx(n,e,t,i=-1){var s,o;let r=n.contentDOM.getBoundingClientRect(),l=r.top+n.viewState.paddingTop,a,{docHeight:c}=n.viewState,{x:f,y:u}=e,h=u-l;if(h<0)return 0;if(h>c)return n.state.doc.length;for(let C=n.viewState.heightOracle.textHeight/2,_=!1;a=n.elementAtHeight(h),a.type!=Mi.Text;)for(;h=i>0?a.bottom+C:a.top-C,!(h>=0&&h<=c);){if(_)return t?null:0;_=!0,i=-i}u=l+h;let d=a.from;if(d<n.viewport.from)return n.viewport.from==0?0:t?null:dv(n,r,a,f,u);if(d>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:dv(n,r,a,f,u);let g=n.dom.ownerDocument,m=n.root.elementFromPoint?n.root:g,p=m.elementFromPoint(f,u);p&&!n.contentDOM.contains(p)&&(p=null),p||(f=Math.max(r.left+1,Math.min(r.right-1,f)),p=m.elementFromPoint(f,u),p&&!n.contentDOM.contains(p)&&(p=null));let b,y=-1;if(p&&((s=n.docView.nearest(p))===null||s===void 0?void 0:s.isEditable)!=!1){if(g.caretPositionFromPoint){let C=g.caretPositionFromPoint(f,u);C&&({offsetNode:b,offset:y}=C)}else if(g.caretRangeFromPoint){let C=g.caretRangeFromPoint(f,u);C&&({startContainer:b,startOffset:y}=C,(!n.contentDOM.contains(b)||Je.safari&&SV(b,y,f)||Je.chrome&&CV(b,y,f))&&(b=void 0))}}if(!b||!n.docView.dom.contains(b)){let C=Rn.find(n.docView,d);if(!C)return h>a.top+a.height/2?a.to:a.from;({node:b,offset:y}=n1(C.dom,f,u))}let v=n.docView.nearest(b);if(!v)return null;if(v.isWidget&&((o=v.dom)===null||o===void 0?void 0:o.nodeType)==1){let C=v.dom.getBoundingClientRect();return e.y<C.top||e.y<=C.bottom&&e.x<=(C.left+C.right)/2?v.posAtStart:v.posAtEnd}else return v.localPosFromDOM(b,y)+v.posAtStart}function dv(n,e,t,i,s){let o=Math.round((i-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let l=n.viewState.heightOracle.textHeight,a=Math.floor((s-t.top-(n.defaultLineHeight-l)*.5)/l);o+=a*n.viewState.heightOracle.lineLength}let r=n.state.sliceDoc(t.from,t.to);return t.from+Vp(r,o,n.state.tabSize)}function SV(n,e,t){let i;if(n.nodeType!=3||e!=(i=n.nodeValue.length))return!1;for(let s=n.nextSibling;s;s=s.nextSibling)if(s.nodeType!=1||s.nodeName!="BR")return!1;return Dl(n,i-1,i).getBoundingClientRect().left>t}function CV(n,e,t){if(e!=0)return!1;for(let s=n;;){let o=s.parentNode;if(!o||o.nodeType!=1||o.firstChild!=s)return!1;if(o.classList.contains("cm-line"))break;s=o}let i=n.nodeType==1?n.getBoundingClientRect():Dl(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}function i1(n,e){let t=n.lineBlockAt(e);if(Array.isArray(t.type)){for(let i of t.type)if(i.to>e||i.to==e&&(i.to==t.to||i.type==Mi.Text))return i}return t}function MV(n,e,t,i){let s=i1(n,e.head),o=!i||s.type!=Mi.Text||!(n.lineWrapping||s.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>s.from?e.head-1:e.head);if(o){let r=n.dom.getBoundingClientRect(),l=n.textDirectionAt(s.from),a=n.posAtCoords({x:t==(l==un.LTR)?r.right-1:r.left+1,y:(o.top+o.bottom)/2});if(a!=null)return _e.cursor(a,t?-1:1)}return _e.cursor(t?s.to:s.from,t?-1:1)}function gv(n,e,t,i){let s=n.state.doc.lineAt(e.head),o=n.bidiSpans(s),r=n.textDirectionAt(s.from);for(let l=e,a=null;;){let c=fV(s,o,r,l,t),f=ax;if(!c){if(s.number==(t?n.state.doc.lines:1))return l;f=`
`,s=n.state.doc.line(s.number+(t?1:-1)),o=n.bidiSpans(s),c=n.visualLineSide(s,!t)}if(a){if(!a(f))return l}else{if(!i)return c;a=i(f)}l=c}}function xV(n,e,t){let i=n.state.charCategorizer(e),s=i(t);return o=>{let r=i(o);return s==yn.Space&&(s=r),s==r}}function AV(n,e,t,i){let s=e.head,o=t?1:-1;if(s==(t?n.state.doc.length:0))return _e.cursor(s,e.assoc);let r=e.goalColumn,l,a=n.contentDOM.getBoundingClientRect(),c=n.coordsAtPos(s,e.assoc||-1),f=n.documentTop;if(c)r==null&&(r=c.left-a.left),l=o<0?c.top:c.bottom;else{let d=n.viewState.lineBlockAt(s);r==null&&(r=Math.min(a.right-a.left,n.defaultCharacterWidth*(s-d.from))),l=(o<0?d.top:d.bottom)+f}let u=a.left+r,h=i??n.viewState.heightOracle.textHeight>>1;for(let d=0;;d+=10){let g=l+(h+d)*o,m=Mx(n,{x:u,y:g},!1,o);if(g<a.top||g>a.bottom||(o<0?m<s:m>s)){let p=n.docView.coordsForChar(m),b=!p||g<p.top?-1:1;return _e.cursor(m,b,void 0,r)}}}function Ch(n,e,t){for(;;){let i=0;for(let s of n)s.between(e-1,e+1,(o,r,l)=>{if(e>o&&e<r){let a=i||t||(e-o<r-e?-1:1);e=a<0?o:r,i=a}});if(!i)return e}}function mm(n,e,t){let i=Ch(n.state.facet(X0).map(s=>s(n)),t.from,e.head>t.from?-1:1);return i==t.from?t:_e.cursor(i,i<t.from?1:-1)}const Nc="ï¿¿";class OV{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(xt.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Nc}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let s=e;;){this.findPointBefore(i,s);let o=this.text.length;this.readNode(s);let r=s.nextSibling;if(r==t)break;let l=nn.get(s),a=nn.get(r);(l&&a?l.breakAfter:(l?l.breakAfter:fd(s))||fd(r)&&(s.nodeName!="BR"||s.cmIgnore)&&this.text.length>o)&&this.lineBreak(),s=r}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,r=1,l;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,i),r=this.lineSeparator.length):(l=s.exec(t))&&(o=l.index,r=l[0].length),this.append(t.slice(i,o<0?t.length:o)),o<0)break;if(this.lineBreak(),r>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=r-1);i=o+r}}readNode(e){if(e.cmIgnore)return;let t=nn.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let s=i.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(PV(e,i.node,i.offset)?t:0))}}function PV(n,e,t){for(;;){if(!e||t<Jo(e))return!1;if(e==n)return!0;t=Rl(e)+1,e=e.parentNode}}class mv{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class TV{constructor(e,t,i,s){this.typeOver=s,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:o,impreciseAnchor:r}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let l=o||r?[]:DV(e),a=new OV(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=LV(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=o&&o.node==l.focusNode&&o.offset==l.focusOffset||!qp(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),c=r&&r.node==l.anchorNode&&r.offset==l.anchorOffset||!qp(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),f=e.viewport;if((Je.ios||Je.chrome)&&e.state.selection.main.empty&&a!=c&&(f.from>0||f.to<e.state.doc.length)){let u=Math.min(a,c),h=Math.max(a,c),d=f.from-u,g=f.to-h;(d==0||d==1||u==0)&&(g==0||g==-1||h==e.state.doc.length)&&(a=0,c=e.state.doc.length)}this.newSel=_e.single(c,a)}}}function xx(n,e){let t,{newSel:i}=e,s=n.state.selection.main,o=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:r,to:l}=e.bounds,a=s.from,c=null;(o===8||Je.android&&e.text.length<l-r)&&(a=s.to,c="end");let f=RV(n.state.doc.sliceString(r,l,Nc),e.text,a-r,c);f&&(Je.chrome&&o==13&&f.toB==f.from+2&&e.text.slice(f.from,f.toB)==Nc+Nc&&f.toB--,t={from:r+f.from,to:r+f.toA,insert:Bt.of(e.text.slice(f.from,f.toB).split(Nc))})}else i&&(!n.hasFocus&&n.state.facet(ar)||i.main.eq(s))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!s.empty&&i&&i.main.empty?t={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,s.to)}:t&&t.from>=s.from&&t.to<=s.to&&(t.from!=s.from||t.to!=s.to)&&s.to-s.from-(t.to-t.from)<=4?t={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,s.to))}:(Je.mac||Je.android)&&t&&t.from==t.to&&t.from==s.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=_e.single(i.main.anchor-1,i.main.head-1)),t={from:s.from,to:s.to,insert:Bt.of([" "])}):Je.chrome&&t&&t.from==t.to&&t.from==s.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(i&&(i=_e.single(i.main.anchor-1,i.main.head-1)),t={from:s.from,to:s.to,insert:Bt.of([" "])}),t)return G0(n,t,i,o);if(i&&!i.main.eq(s)){let r=!1,l="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(r=!0),l=n.inputState.lastSelectionOrigin),n.dispatch({selection:i,scrollIntoView:r,userEvent:l}),!0}else return!1}function G0(n,e,t,i=-1){if(Je.ios&&n.inputState.flushIOSKey(e))return!0;let s=n.state.selection.main;if(Je.android&&(e.to==s.to&&(e.from==s.from||e.from==s.from-1&&n.state.sliceDoc(e.from,s.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Pa(n.contentDOM,"Enter",13)||(e.from==s.from-1&&e.to==s.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>s.head)&&Pa(n.contentDOM,"Backspace",8)||e.from==s.from&&e.to==s.to+1&&e.insert.length==0&&Pa(n.contentDOM,"Delete",46)))return!0;let o=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let r,l=()=>r||(r=EV(n,e,t));return n.state.facet(dx).some(a=>a(n,e.from,e.to,o,l))||n.dispatch(l()),!0}function EV(n,e,t){let i,s=n.state,o=s.selection.main;if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let l=o.from<e.from?s.sliceDoc(o.from,e.from):"",a=o.to>e.to?s.sliceDoc(e.to,o.to):"";i=s.replaceSelection(n.state.toText(l+e.insert.sliceString(0,void 0,n.state.lineBreak)+a))}else{let l=s.changes(e),a=t&&t.main.to<=l.newLength?t.main:void 0;if(s.selection.ranges.length>1&&n.inputState.composing>=0&&e.to<=o.to&&e.to>=o.to-10){let c=n.state.sliceDoc(e.from,e.to),f,u=t&&Cx(n,t.main.head);if(u){let g=e.insert.length-(e.to-e.from);f={from:u.from,to:u.to-g}}else f=n.state.doc.lineAt(o.head);let h=o.to-e.to,d=o.to-o.from;i=s.changeByRange(g=>{if(g.from==o.from&&g.to==o.to)return{changes:l,range:a||g.map(l)};let m=g.to-h,p=m-c.length;if(g.to-g.from!=d||n.state.sliceDoc(p,m)!=c||g.to>=f.from&&g.from<=f.to)return{range:g};let b=s.changes({from:p,to:m,insert:e.insert}),y=g.to-o.to;return{changes:b,range:a?_e.range(Math.max(0,a.anchor+y),Math.max(0,a.head+y)):g.map(b)}})}else i={changes:l,selection:a&&s.selection.replaceRange(a)}}let r="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,r+=".compose",n.inputState.compositionFirstChange&&(r+=".start",n.inputState.compositionFirstChange=!1)),s.update(i,{userEvent:r,scrollIntoView:!0})}function RV(n,e,t,i){let s=Math.min(n.length,e.length),o=0;for(;o<s&&n.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==s&&n.length==e.length)return null;let r=n.length,l=e.length;for(;r>0&&l>0&&n.charCodeAt(r-1)==e.charCodeAt(l-1);)r--,l--;if(i=="end"){let a=Math.max(0,o-Math.min(r,l));t-=r+a-o}if(r<o&&n.length<e.length){let a=t<=o&&t>=r?o-t:0;o-=a,l=o+(l-r),r=o}else if(l<o){let a=t<=o&&t>=l?o-t:0;o-=a,r=o+(r-l),l=o}return{from:o,toA:r,toB:l}}function DV(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:s,focusOffset:o}=n.observer.selectionRange;return t&&(e.push(new mv(t,i)),(s!=t||o!=i)&&e.push(new mv(s,o))),e}function LV(n,e){if(n.length==0)return null;let t=n[0].pos,i=n.length==2?n[1].pos:t;return t>-1&&i>-1?_e.single(t+e,i+e):null}class IV{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Je.safari&&e.contentDOM.addEventListener("input",()=>null),Je.gecko&&QV(e.contentDOM.ownerDocument)}handleEvent(e){!WV(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,t){let i=this.handlers[e];if(i){for(let s of i.observers)s(this.view,t);for(let s of i.handlers){if(t.defaultPrevented)break;if(s(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=NV(e),i=this.handlers,s=this.view.contentDOM;for(let o in t)if(o!="scroll"){let r=!t[o].handlers.length,l=i[o];l&&r!=!l.handlers.length&&(s.removeEventListener(o,this.handleEvent),l=null),l||s.addEventListener(o,this.handleEvent,{passive:r})}for(let o in i)o!="scroll"&&!t[o]&&s.removeEventListener(o,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Ox.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Je.android&&Je.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return Je.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=Ax.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||BV.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Pa(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Je.safari&&!Je.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function pv(n,e){return(t,i)=>{try{return e.call(n,i,t)}catch(s){Si(t.state,s)}}}function NV(n){let e=Object.create(null);function t(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of n){let s=i.spec;if(s&&s.domEventHandlers)for(let o in s.domEventHandlers){let r=s.domEventHandlers[o];r&&t(o).handlers.push(pv(i.value,r))}if(s&&s.domEventObservers)for(let o in s.domEventObservers){let r=s.domEventObservers[o];r&&t(o).observers.push(pv(i.value,r))}}for(let i in Ls)t(i).handlers.push(Ls[i]);for(let i in ds)t(i).observers.push(ds[i]);return e}const Ax=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],BV="dthko",Ox=[16,17,18,20,91,92,224,225],Eu=6;function Ru(n){return Math.max(0,n)*.7+8}function jV(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class FV{constructor(e,t,i,s){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=Yz(e.contentDOM),this.atoms=e.state.facet(X0).map(r=>r(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(xt.allowMultipleSelections)&&zV(e,t),this.dragging=HV(e,t)&&Ex(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&jV(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,i=0,s=0,o=0,r=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:s,right:r}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:l}=this.scrollParents.y.getBoundingClientRect());let a=Sx(this.view);e.clientX-a.left<=s+Eu?t=-Ru(s-e.clientX):e.clientX+a.right>=r-Eu&&(t=Ru(e.clientX-r)),e.clientY-a.top<=o+Eu?i=-Ru(o-e.clientY):e.clientY+a.bottom>=l-Eu&&(i=Ru(e.clientY-l)),this.setScrollSpeed(t,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let i=0;i<e.ranges.length;i++){let s=e.ranges[i],o=null;if(s.empty){let r=Ch(this.atoms,s.from,0);r!=s.from&&(o=_e.cursor(r,-1))}else{let r=Ch(this.atoms,s.from,-1),l=Ch(this.atoms,s.to,1);(r!=s.from||l!=s.to)&&(o=_e.range(s.from==s.anchor?r:l,s.from==s.head?r:l))}o&&(t||(t=e.ranges.slice()),t[i]=o)}return t?_e.create(t,e.mainIndex):e}select(e){let{view:t}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function zV(n,e){let t=n.state.facet(cx);return t.length?t[0](e):Je.mac?e.metaKey:e.ctrlKey}function VV(n,e){let t=n.state.facet(fx);return t.length?t[0](e):Je.mac?!e.altKey:!e.ctrlKey}function HV(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let i=Sf(n.root);if(!i||i.rangeCount==0)return!0;let s=i.getRangeAt(0).getClientRects();for(let o=0;o<s.length;o++){let r=s[o];if(r.left<=e.clientX&&r.right>=e.clientX&&r.top<=e.clientY&&r.bottom>=e.clientY)return!0}return!1}function WV(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=nn.get(t))&&i.ignoreEvent(e))return!1;return!0}const Ls=Object.create(null),ds=Object.create(null),Px=Je.ie&&Je.ie_version<15||Je.ios&&Je.webkit_version<604;function qV(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),Tx(n,t.value)},50)}function Cg(n,e,t){for(let i of n.facet(e))t=i(t,n);return t}function Tx(n,e){e=Cg(n.state,J0,e);let{state:t}=n,i,s=1,o=t.toText(e),r=o.lines==t.selection.ranges.length;if(s1!=null&&t.selection.ranges.every(a=>a.empty)&&s1==o.toString()){let a=-1;i=t.changeByRange(c=>{let f=t.doc.lineAt(c.from);if(f.from==a)return{range:c};a=f.from;let u=t.toText((r?o.line(s++).text:e)+t.lineBreak);return{changes:{from:f.from,insert:u},range:_e.cursor(c.from+u.length)}})}else r?i=t.changeByRange(a=>{let c=o.line(s++);return{changes:{from:a.from,to:a.to,insert:c.text},range:_e.cursor(a.from+c.length)}}):i=t.replaceSelection(o);n.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}ds.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};Ls.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);ds.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};ds.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};Ls.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let i of n.state.facet(ux))if(t=i(n,e),t)break;if(!t&&e.button==0&&(t=KV(n,e)),t){let i=!n.hasFocus;n.inputState.startMouseSelection(new FV(n,e,t,i)),i&&n.observer.ignore(()=>{qM(n.contentDOM);let o=n.root.activeElement;o&&!o.contains(n.contentDOM)&&o.blur()});let s=n.inputState.mouseSelection;if(s)return s.start(e),s.dragging===!1}return!1};function bv(n,e,t,i){if(i==1)return _e.cursor(e,t);if(i==2)return wV(n.state,e,t);{let s=Rn.find(n.docView,e),o=n.state.doc.lineAt(s?s.posAtEnd:e),r=s?s.posAtStart:o.from,l=s?s.posAtEnd:o.to;return l<n.state.doc.length&&l==o.to&&l++,_e.range(r,l)}}let yv=(n,e,t)=>e>=t.top&&e<=t.bottom&&n>=t.left&&n<=t.right;function UV(n,e,t,i){let s=Rn.find(n.docView,e);if(!s)return 1;let o=e-s.posAtStart;if(o==0)return 1;if(o==s.length)return-1;let r=s.coordsAt(o,-1);if(r&&yv(t,i,r))return-1;let l=s.coordsAt(o,1);return l&&yv(t,i,l)?1:r&&r.bottom>=i?-1:1}function _v(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:UV(n,t,e.clientX,e.clientY)}}const JV=Je.ie&&Je.ie_version<=11;let wv=null,vv=0,kv=0;function Ex(n){if(!JV)return n.detail;let e=wv,t=kv;return wv=n,kv=Date.now(),vv=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(vv+1)%3:1}function KV(n,e){let t=_v(n,e),i=Ex(e),s=n.state.selection;return{update(o){o.docChanged&&(t.pos=o.changes.mapPos(t.pos),s=s.map(o.changes))},get(o,r,l){let a=_v(n,o),c,f=bv(n,a.pos,a.bias,i);if(t.pos!=a.pos&&!r){let u=bv(n,t.pos,t.bias,i),h=Math.min(u.from,f.from),d=Math.max(u.to,f.to);f=h<f.from?_e.range(h,d):_e.range(d,h)}return r?s.replaceRange(s.main.extend(f.from,f.to)):l&&i==1&&s.ranges.length>1&&(c=YV(s,a.pos))?c:l?s.addRange(f):_e.create([f])}}}function YV(n,e){for(let t=0;t<n.ranges.length;t++){let{from:i,to:s}=n.ranges[t];if(i<=e&&s>=e)return _e.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}Ls.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let s=n.docView.nearest(e.target);if(s&&s.isWidget){let o=s.posAtStart,r=o+s.length;(o>=t.to||r<=t.from)&&(t=_e.range(o,r))}}let{inputState:i}=n;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",Cg(n.state,K0,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Ls.dragend=n=>(n.inputState.draggedContent=null,!1);function Sv(n,e,t,i){if(t=Cg(n.state,J0,t),!t)return;let s=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=n.inputState,r=i&&o&&VV(n,e)?{from:o.from,to:o.to}:null,l={from:s,insert:t},a=n.state.changes(r?[r,l]:l);n.focus(),n.dispatch({changes:a,selection:{anchor:a.mapPos(s,-1),head:a.mapPos(s,1)},userEvent:r?"move.drop":"input.drop"}),n.inputState.draggedContent=null}Ls.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let i=Array(t.length),s=0,o=()=>{++s==t.length&&Sv(n,e,i.filter(r=>r!=null).join(n.state.lineBreak),!1)};for(let r=0;r<t.length;r++){let l=new FileReader;l.onerror=o,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[r]=l.result),o()},l.readAsText(t[r])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return Sv(n,e,i,!0),!0}return!1};Ls.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=Px?null:e.clipboardData;return t?(Tx(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(qV(n),!1)};function XV(n,e){let t=n.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),n.focus()},50)}function GV(n){let e=[],t=[],i=!1;for(let s of n.selection.ranges)s.empty||(e.push(n.sliceDoc(s.from,s.to)),t.push(s));if(!e.length){let s=-1;for(let{from:o}of n.selection.ranges){let r=n.doc.lineAt(o);r.number>s&&(e.push(r.text),t.push({from:r.from,to:Math.min(n.doc.length,r.to+1)})),s=r.number}i=!0}return{text:Cg(n,K0,e.join(n.lineBreak)),ranges:t,linewise:i}}let s1=null;Ls.copy=Ls.cut=(n,e)=>{let{text:t,ranges:i,linewise:s}=GV(n.state);if(!t&&!s)return!1;s1=s?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let o=Px?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",t),!0):(XV(n,t),!1)};const Rx=Qo.define();function Dx(n,e){let t=[];for(let i of n.facet(gx)){let s=i(n,e);s&&t.push(s)}return t?n.update({effects:t,annotations:Rx.of(!0)}):null}function Lx(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=Dx(n.state,e);t?n.dispatch(t):n.update([])}},10)}ds.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),Lx(n)};ds.blur=n=>{n.observer.clearSelectionRange(),Lx(n)};ds.compositionstart=ds.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};ds.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,Je.chrome&&Je.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};ds.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Ls.beforeinput=(n,e)=>{var t,i;if(e.inputType=="insertReplacementText"&&n.observer.editContext){let o=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),r=e.getTargetRanges();if(o&&r.length){let l=r[0],a=n.posAtDOM(l.startContainer,l.startOffset),c=n.posAtDOM(l.endContainer,l.endOffset);return G0(n,{from:a,to:c,insert:n.state.toText(o)},null),!0}}let s;if(Je.chrome&&Je.android&&(s=Ax.find(o=>o.inputType==e.inputType))&&(n.observer.delayAndroidKey(s.key,s.keyCode),s.key=="Backspace"||s.key=="Delete")){let o=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var r;(((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0)>o+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return Je.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),Je.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>ds.compositionend(n,e),20),!1};const Cv=new Set;function QV(n){Cv.has(n)||(Cv.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const Mv=["pre-wrap","normal","pre-line","break-spaces"];let Ya=!1;function xv(){Ya=!1}class ZV{constructor(e){this.lineWrapping=e,this.doc=Bt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Mv.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let s=e[i];s<0?i++:this.heightSamples[Math.floor(s*10)]||(t=!0,this.heightSamples[Math.floor(s*10)]=!0)}return t}refresh(e,t,i,s,o,r){let l=Mv.indexOf(e)>-1,a=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=t,this.charWidth=i,this.textHeight=s,this.lineLength=o,a){this.heightSamples={};for(let c=0;c<r.length;c++){let f=r[c];f<0?c++:this.heightSamples[Math.floor(f*10)]=!0}}return a}}class $V{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class $s{constructor(e,t,i,s,o){this.from=e,this.length=t,this.top=i,this.height=s,this._content=o}get type(){return typeof this._content=="number"?Mi.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Dr?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new $s(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var cn=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(cn||(cn={}));const Mh=.001;class xi{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Mh&&(Ya=!0),this.height=e)}replace(e,t,i){return xi.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,s){let o=this,r=i.doc;for(let l=s.length-1;l>=0;l--){let{fromA:a,toA:c,fromB:f,toB:u}=s[l],h=o.lineAt(a,cn.ByPosNoHeight,i.setDoc(t),0,0),d=h.to>=c?h:o.lineAt(c,cn.ByPosNoHeight,i,0,0);for(u+=d.to-c,c=d.to;l>0&&h.from<=s[l-1].toA;)a=s[l-1].fromA,f=s[l-1].fromB,l--,a<h.from&&(h=o.lineAt(a,cn.ByPosNoHeight,i,0,0));f+=h.from-a,a=h.from;let g=Q0.build(i.setDoc(r),e,f,u);o=dd(o,o.replace(a,c,g))}return o.updateHeight(i,0)}static empty(){return new qi(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,s=0,o=0;for(;;)if(t==i)if(s>o*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),i+=1+l.break,s-=l.size}else if(o>s*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,o-=l.size}else break;else if(s<o){let l=e[t++];l&&(s+=l.size)}else{let l=e[--i];l&&(o+=l.size)}let r=0;return e[t-1]==null?(r=1,t--):e[t]==null&&(r=1,i++),new eH(xi.of(e.slice(0,t)),r,xi.of(e.slice(i)))}}function dd(n,e){return n==e?n:(n.constructor!=e.constructor&&(Ya=!0),e)}xi.prototype.size=1;class Ix extends xi{constructor(e,t,i){super(e,t),this.deco=i}blockAt(e,t,i,s){return new $s(s,this.length,i,this.height,this.deco||0)}lineAt(e,t,i,s,o){return this.blockAt(0,i,s,o)}forEachLine(e,t,i,s,o,r){e<=o+this.length&&t>=o&&r(this.blockAt(0,i,s,o))}updateHeight(e,t=0,i=!1,s){return s&&s.from<=t&&s.more&&this.setHeight(s.heights[s.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class qi extends Ix{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,i,s){return new $s(s,this.length,i,this.height,this.breaks)}replace(e,t,i){let s=i[0];return i.length==1&&(s instanceof qi||s instanceof Gn&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof Gn?s=new qi(s.length,this.height):s.height=this.height,this.outdated||(s.outdated=!1),s):xi.of(i)}updateHeight(e,t=0,i=!1,s){return s&&s.from<=t&&s.more?this.setHeight(s.heights[s.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Gn extends xi{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,s=e.doc.lineAt(t+this.length).number,o=s-i+1,r,l=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*o);r=a/o,this.length>o+1&&(l=(this.height-a)/(this.length-o-1))}else r=this.height/o;return{firstLine:i,lastLine:s,perLine:r,perChar:l}}blockAt(e,t,i,s){let{firstLine:o,lastLine:r,perLine:l,perChar:a}=this.heightMetrics(t,s);if(t.lineWrapping){let c=s+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),f=t.doc.lineAt(c),u=l+f.length*a,h=Math.max(i,e-u/2);return new $s(f.from,f.length,h,u,0)}else{let c=Math.max(0,Math.min(r-o,Math.floor((e-i)/l))),{from:f,length:u}=t.doc.line(o+c);return new $s(f,u,i+l*c,l,0)}}lineAt(e,t,i,s,o){if(t==cn.ByHeight)return this.blockAt(e,i,s,o);if(t==cn.ByPosNoHeight){let{from:d,to:g}=i.doc.lineAt(e);return new $s(d,g-d,0,0,0)}let{firstLine:r,perLine:l,perChar:a}=this.heightMetrics(i,o),c=i.doc.lineAt(e),f=l+c.length*a,u=c.number-r,h=s+l*u+a*(c.from-o-u);return new $s(c.from,c.length,Math.max(s,Math.min(h,s+this.height-f)),f,0)}forEachLine(e,t,i,s,o,r){e=Math.max(e,o),t=Math.min(t,o+this.length);let{firstLine:l,perLine:a,perChar:c}=this.heightMetrics(i,o);for(let f=e,u=s;f<=t;){let h=i.doc.lineAt(f);if(f==e){let g=h.number-l;u+=a*g+c*(e-o-g)}let d=a+c*h.length;r(new $s(h.from,h.length,u,d,0)),u+=d,f=h.to+1}}replace(e,t,i){let s=this.length-t;if(s>0){let o=i[i.length-1];o instanceof Gn?i[i.length-1]=new Gn(o.length+s):i.push(null,new Gn(s-1))}if(e>0){let o=i[0];o instanceof Gn?i[0]=new Gn(e+o.length):i.unshift(new Gn(e-1),null)}return xi.of(i)}decomposeLeft(e,t){t.push(new Gn(e-1),null)}decomposeRight(e,t){t.push(null,new Gn(this.length-e-1))}updateHeight(e,t=0,i=!1,s){let o=t+this.length;if(s&&s.from<=t+this.length&&s.more){let r=[],l=Math.max(t,s.from),a=-1;for(s.from>t&&r.push(new Gn(s.from-t-1).updateHeight(e,t));l<=o&&s.more;){let f=e.doc.lineAt(l).length;r.length&&r.push(null);let u=s.heights[s.index++];a==-1?a=u:Math.abs(u-a)>=Mh&&(a=-2);let h=new qi(f,u);h.outdated=!1,r.push(h),l+=f+1}l<=o&&r.push(null,new Gn(o-l).updateHeight(e,l));let c=xi.of(r);return(a<0||Math.abs(c.height-this.height)>=Mh||Math.abs(a-this.heightMetrics(e,t).perLine)>=Mh)&&(Ya=!0),dd(this,c)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class eH extends xi{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,s){let o=i+this.left.height;return e<o?this.left.blockAt(e,t,i,s):this.right.blockAt(e,t,o,s+this.left.length+this.break)}lineAt(e,t,i,s,o){let r=s+this.left.height,l=o+this.left.length+this.break,a=t==cn.ByHeight?e<r:e<l,c=a?this.left.lineAt(e,t,i,s,o):this.right.lineAt(e,t,i,r,l);if(this.break||(a?c.to<l:c.from>l))return c;let f=t==cn.ByPosNoHeight?cn.ByPosNoHeight:cn.ByPos;return a?c.join(this.right.lineAt(l,f,i,r,l)):this.left.lineAt(l,f,i,s,o).join(c)}forEachLine(e,t,i,s,o,r){let l=s+this.left.height,a=o+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,i,s,o,r),t>=a&&this.right.forEachLine(e,t,i,l,a,r);else{let c=this.lineAt(a,cn.ByPos,i,s,o);e<c.from&&this.left.forEachLine(e,c.from-1,i,s,o,r),c.to>=e&&c.from<=t&&r(c),t>c.to&&this.right.forEachLine(c.to+1,t,i,l,a,r)}}replace(e,t,i){let s=this.left.length+this.break;if(t<s)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-s,t-s,i));let o=[];e>0&&this.decomposeLeft(e,o);let r=o.length;for(let l of i)o.push(l);if(e>0&&Av(o,r-1),t<this.length){let l=o.length;this.decomposeRight(t,o),Av(o,l)}return xi.of(o)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,s=i+this.break;if(e>=s)return this.right.decomposeRight(e-s,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<s&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?xi.of(this.break?[e,null,t]:[e,t]):(this.left=dd(this.left,e),this.right=dd(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,s){let{left:o,right:r}=this,l=t+o.length+this.break,a=null;return s&&s.from<=t+o.length&&s.more?a=o=o.updateHeight(e,t,i,s):o.updateHeight(e,t,i),s&&s.from<=l+r.length&&s.more?a=r=r.updateHeight(e,l,i,s):r.updateHeight(e,l,i),a?this.balanced(o,r):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Av(n,e){let t,i;n[e]==null&&(t=n[e-1])instanceof Gn&&(i=n[e+1])instanceof Gn&&n.splice(e-1,3,new Gn(t.length+1+i.length))}const tH=5;class Q0{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof qi?s.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new qi(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let s=i.widget?i.widget.estimatedHeight:0,o=i.widget?i.widget.lineBreaks:0;s<0&&(s=this.oracle.lineHeight);let r=t-e;i.block?this.addBlock(new Ix(r,s,i)):(r||o||s>=tH)&&this.addLineDeco(s,o,r)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new qi(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new Gn(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof qi)return e;let t=new qi(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let s=this.ensureLine();s.length+=i,s.collapsed+=i,s.widgetHeight=Math.max(s.widgetHeight,e),s.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof qi)&&!this.isCovered?this.nodes.push(new qi(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let s of this.nodes)s instanceof qi&&s.updateHeight(this.oracle,i),i+=s?s.length:1;return this.nodes}static build(e,t,i,s){let o=new Q0(i,e);return Tt.spans(t,i,s,o,0),o.finish(i)}}function nH(n,e,t){let i=new iH;return Tt.compare(n,e,t,i,0),i.changes}class iH{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,s){(e<t||i&&i.heightRelevant||s&&s.heightRelevant)&&Gp(e,t,this.changes,5)}}function sH(n,e){let t=n.getBoundingClientRect(),i=n.ownerDocument,s=i.defaultView||window,o=Math.max(0,t.left),r=Math.min(s.innerWidth,t.right),l=Math.max(0,t.top),a=Math.min(s.innerHeight,t.bottom);for(let c=n.parentNode;c&&c!=i.body;)if(c.nodeType==1){let f=c,u=window.getComputedStyle(f);if((f.scrollHeight>f.clientHeight||f.scrollWidth>f.clientWidth)&&u.overflow!="visible"){let h=f.getBoundingClientRect();o=Math.max(o,h.left),r=Math.min(r,h.right),l=Math.max(l,h.top),a=Math.min(c==n.parentNode?s.innerHeight:a,h.bottom)}c=u.position=="absolute"||u.position=="fixed"?f.offsetParent:f.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:o-t.left,right:Math.max(o,r)-t.left,top:l-(t.top+e),bottom:Math.max(l,a)-(t.top+e)}}function oH(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class pm{constructor(e,t,i){this.from=e,this.to=t,this.size=i}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let s=e[i],o=t[i];if(s.from!=o.from||s.to!=o.to||s.size!=o.size)return!1}return!0}draw(e,t){return rt.replace({widget:new rH(this.size*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class rH extends Vr{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Ov{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Pv,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=un.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Y0).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new ZV(t),this.stateDeco=e.facet(Mf).filter(i=>typeof i!="function"),this.heightMap=xi.empty().applyChanges(this.stateDeco,Bt.empty,this.heightOracle.setDoc(e.doc),[new cs(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=rt.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let s=i?t.head:t.anchor;if(!e.some(({from:o,to:r})=>s>=o&&s<=r)){let{from:o,to:r}=this.lineBlockAt(s);e.push(new Du(o,r))}}return this.viewports=e.sort((i,s)=>i.from-s.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?Pv:new Z0(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Bc(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Mf).filter(f=>typeof f!="function");let s=e.changedRanges,o=cs.extendWithRanges(s,nH(i,this.stateDeco,e?e.changes:In.empty(this.state.doc.length))),r=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);xv(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=r||Ya)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let a=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<a.from||t.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t));let c=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(c||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(px)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),s=this.heightOracle,o=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?un.RTL:un.LTR;let r=this.heightOracle.mustRefreshForWrapping(o),l=t.getBoundingClientRect(),a=r||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let c=0,f=0;if(l.width&&l.height){let{scaleX:C,scaleY:_}=WM(t,l);(C>.005&&Math.abs(this.scaleX-C)>.005||_>.005&&Math.abs(this.scaleY-_)>.005)&&(this.scaleX=C,this.scaleY=_,c|=8,r=a=!0)}let u=(parseInt(i.paddingTop)||0)*this.scaleY,h=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=u||this.paddingBottom!=h)&&(this.paddingTop=u,this.paddingBottom=h,c|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=8);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=JM(e.scrollDOM);let g=(this.printing?oH:sH)(t,this.paddingTop),m=g.top-this.pixelViewport.top,p=g.bottom-this.pixelViewport.bottom;this.pixelViewport=g;let b=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(b!=this.inView&&(this.inView=b,b&&(a=!0)),!this.inView&&!this.scrollTarget)return 0;let y=l.width;if((this.contentDOMWidth!=y||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,c|=8),a){let C=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(C)&&(r=!0),r||s.lineWrapping&&Math.abs(y-this.contentDOMWidth)>s.charWidth){let{lineHeight:_,charWidth:S,textHeight:x}=e.docView.measureTextSize();r=_>0&&s.refresh(o,_,S,x,y/S,C),r&&(e.docView.minWidth=0,c|=8)}m>0&&p>0?f=Math.max(m,p):m<0&&p<0&&(f=Math.min(m,p)),xv();for(let _ of this.viewports){let S=_.from==this.viewport.from?C:e.docView.measureVisibleLineHeights(_);this.heightMap=(r?xi.empty().applyChanges(this.stateDeco,Bt.empty,this.heightOracle,[new cs(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,r,new $V(_.from,S))}Ya&&(c|=2)}let v=!this.viewportIsAppropriate(this.viewport,f)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return v&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(f,this.scrollTarget),c|=this.updateForViewport()),(c&2||v)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(r?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),s=this.heightMap,o=this.heightOracle,{visibleTop:r,visibleBottom:l}=this,a=new Du(s.lineAt(r-i*1e3,cn.ByHeight,o,0,0).from,s.lineAt(l+(1-i)*1e3,cn.ByHeight,o,0,0).to);if(t){let{head:c}=t.range;if(c<a.from||c>a.to){let f=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),u=s.lineAt(c,cn.ByPos,o,0,0),h;t.y=="center"?h=(u.top+u.bottom)/2-f/2:t.y=="start"||t.y=="nearest"&&c<a.from?h=u.top:h=u.bottom-f,a=new Du(s.lineAt(h-1e3/2,cn.ByHeight,o,0,0).from,s.lineAt(h+f+1e3/2,cn.ByHeight,o,0,0).to)}}return a}mapViewport(e,t){let i=t.mapPos(e.from,-1),s=t.mapPos(e.to,1);return new Du(this.heightMap.lineAt(i,cn.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,cn.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(e,cn.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(t,cn.ByPos,this.heightOracle,0,0),{visibleTop:r,visibleBottom:l}=this;return(e==0||s<=r-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||o>=l+Math.max(10,Math.min(i,250)))&&s>r-2*1e3&&o<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let s of e)t.touchesRange(s.from,s.to)||i.push(new pm(t.mapPos(s.from),t.mapPos(s.to),s.size));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,s=i?1e4:2e3,o=s>>1,r=s<<1;if(this.defaultTextDirection!=un.LTR&&!i)return[];let l=[],a=(f,u,h,d)=>{if(u-f<o)return;let g=this.state.selection.main,m=[g.from];g.empty||m.push(g.to);for(let b of m)if(b>f&&b<u){a(f,b-10,h,d),a(b+10,u,h,d);return}let p=aH(e,b=>b.from>=h.from&&b.to<=h.to&&Math.abs(b.from-f)<o&&Math.abs(b.to-u)<o&&!m.some(y=>b.from<y&&b.to>y));if(!p){if(u<h.to&&t&&i&&t.visibleRanges.some(b=>b.from<=u&&b.to>=u)){let b=t.moveToLineBoundary(_e.cursor(u),!1,!0).head;b>f&&(u=b)}p=new pm(f,u,this.gapSize(h,f,u,d))}l.push(p)},c=f=>{if(f.length<r||f.type!=Mi.Text)return;let u=lH(f.from,f.to,this.stateDeco);if(u.total<r)return;let h=this.scrollTarget?this.scrollTarget.range.head:null,d,g;if(i){let m=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,p,b;if(h!=null){let y=Iu(u,h),v=((this.visibleBottom-this.visibleTop)/2+m)/f.height;p=y-v,b=y+v}else p=(this.visibleTop-f.top-m)/f.height,b=(this.visibleBottom-f.top+m)/f.height;d=Lu(u,p),g=Lu(u,b)}else{let m=u.total*this.heightOracle.charWidth,p=s*this.heightOracle.charWidth,b,y;if(h!=null){let v=Iu(u,h),C=((this.pixelViewport.right-this.pixelViewport.left)/2+p)/m;b=v-C,y=v+C}else b=(this.pixelViewport.left-p)/m,y=(this.pixelViewport.right+p)/m;d=Lu(u,b),g=Lu(u,y)}d>f.from&&a(f.from,d,f,u),g<f.to&&a(g,f.to,f,u)};for(let f of this.viewportLines)Array.isArray(f.type)?f.type.forEach(c):c(f);return l}gapSize(e,t,i,s){let o=Iu(s,i)-Iu(s,t);return this.heightOracle.lineWrapping?e.height*o:s.total*this.heightOracle.charWidth*o}updateLineGaps(e){pm.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=rt.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];Tt.spans(e,this.viewport.from,this.viewport.to,{span(s,o){t.push({from:s,to:o})},point(){}},20);let i=t.length!=this.visibleRanges.length||this.visibleRanges.some((s,o)=>s.from!=t[o].from||s.to!=t[o].to);return this.visibleRanges=t,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Bc(this.heightMap.lineAt(e,cn.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||Bc(this.heightMap.lineAt(this.scaler.fromDOM(e),cn.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Bc(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Du{constructor(e,t){this.from=e,this.to=t}}function lH(n,e,t){let i=[],s=n,o=0;return Tt.spans(t,n,e,{span(){},point(r,l){r>s&&(i.push({from:s,to:r}),o+=r-s),s=l}},20),s<e&&(i.push({from:s,to:e}),o+=e-s),{total:o,ranges:i}}function Lu({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(n*t);for(let s=0;;s++){let{from:o,to:r}=e[s],l=r-o;if(i<=l)return o+i;i-=l}}function Iu(n,e){let t=0;for(let{from:i,to:s}of n.ranges){if(e<=s){t+=e-i;break}t+=s-i}return t/n.total}function aH(n,e){for(let t of n)if(e(t))return t}const Pv={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class Z0{constructor(e,t,i){let s=0,o=0,r=0;this.viewports=i.map(({from:l,to:a})=>{let c=t.lineAt(l,cn.ByPos,e,0,0).top,f=t.lineAt(a,cn.ByPos,e,0,0).bottom;return s+=f-c,{from:l,to:a,top:c,bottom:f,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(t.height-s);for(let l of this.viewports)l.domTop=r+(l.top-o)*this.scale,r=l.domBottom=l.domTop+(l.bottom-l.top),o=l.bottom}toDOM(e){for(let t=0,i=0,s=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.top)return s+(e-i)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);i=o.bottom,s=o.domBottom}}fromDOM(e){for(let t=0,i=0,s=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.domTop)return i+(e-s)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);i=o.bottom,s=o.domBottom}}eq(e){return e instanceof Z0?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,i)=>t.from==e.viewports[i].from&&t.to==e.viewports[i].to):!1}}function Bc(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),i=e.toDOM(n.bottom);return new $s(n.from,n.length,t,i-t,Array.isArray(n._content)?n._content.map(s=>Bc(s,e)):n._content)}const Nu=Ve.define({combine:n=>n.join(" ")}),o1=Ve.define({combine:n=>n.indexOf(!0)>-1}),r1=Er.newName(),Nx=Er.newName(),Bx=Er.newName(),jx={"&light":"."+Nx,"&dark":"."+Bx};function l1(n,e,t){return new Er(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,s=>{if(s=="&")return n;if(!t||!t[s])throw new RangeError(`Unsupported selector: ${s}`);return t[s]}):n+" "+i}})}const cH=l1("."+r1,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},jx),fH={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},bm=Je.ie&&Je.ie_version<=11;class uH{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new Xz,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(Je.ie&&Je.ie_version<=11||Je.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(Je.chrome&&Je.chrome_version<126)&&(this.editContext=new dH(e),e.state.facet(ar)&&(e.contentDOM.editContext=this.editContext.editContext)),bm&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,s=this.selectionRange;if(i.state.facet(ar)?i.root.activeElement!=this.dom:!Sh(i.dom,s))return;let o=s.anchorNode&&i.docView.nearest(s.anchorNode);if(o&&o.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(Je.ie&&Je.ie_version<=11||Je.android&&Je.chrome)&&!i.state.selection.main.empty&&s.focusNode&&Zc(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=Sf(e.root);if(!t)return!1;let i=Je.safari&&e.root.nodeType==11&&Uz(this.dom.ownerDocument)==this.dom&&hH(this.view,t)||t;if(!i||this.selectionRange.eq(i))return!1;let s=Sh(this.dom,i);return s&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&Qz(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),s&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,fH),bm&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),bm&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let s=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&Pa(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,s=!1;for(let o of e){let r=this.readMutation(o);r&&(r.typeOver&&(s=!0),t==-1?{from:t,to:i}=r:(t=Math.min(r.from,t),i=Math.max(r.to,i)))}return{from:t,to:i,typeOver:s}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),s=this.selectionChanged&&Sh(this.dom,this.selectionRange);if(e<0&&!s)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new TV(this.view,e,t,i);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,s=xx(this.view,t);return this.view.state==i&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),s}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let i=Tv(t,e.previousSibling||e.target.previousSibling,-1),s=Tv(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:s?t.posBefore(s):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(ar)!=e.state.facet(ar)&&(e.view.contentDOM.editContext=e.state.facet(ar)?this.editContext.editContext:null))}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Tv(n,e,t){for(;e;){let i=nn.get(e);if(i&&i.parent==n)return i;let s=e.parentNode;e=s!=n.dom?s:t>0?e.nextSibling:e.previousSibling}return null}function Ev(n,e){let t=e.startContainer,i=e.startOffset,s=e.endContainer,o=e.endOffset,r=n.docView.domAtPos(n.state.selection.main.anchor);return Zc(r.node,r.offset,s,o)&&([t,i,s,o]=[s,o,t,i]),{anchorNode:t,anchorOffset:i,focusNode:s,focusOffset:o}}function hH(n,e){if(e.getComposedRanges){let s=e.getComposedRanges(n.root)[0];if(s)return Ev(n,s)}let t=null;function i(s){s.preventDefault(),s.stopImmediatePropagation(),t=s.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",i,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",i,!0),t?Ev(n,t):null}class dH{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let{anchor:s}=e.state.selection.main,o={from:this.toEditorPos(i.updateRangeStart),to:this.toEditorPos(i.updateRangeEnd),insert:Bt.of(i.text.split(`
`))};o.from==this.from&&s<this.from?o.from=s:o.to==this.to&&s>this.to&&(o.to=s),!(o.from==o.to&&!o.insert.length)&&(this.pendingContextChange=o,e.state.readOnly||G0(e,o,_e.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd))),this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)))},this.handlers.characterboundsupdate=i=>{let s=[],o=null;for(let r=this.toEditorPos(i.rangeStart),l=this.toEditorPos(i.rangeEnd);r<l;r++){let a=e.coordsForChar(r);o=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||o||new DOMRect,s.push(o)}t.updateCharacterBounds(i.rangeStart,s)},this.handlers.textformatupdate=i=>{let s=[];for(let o of i.getTextFormats()){let r=o.underlineStyle,l=o.underlineThickness;if(r!="None"&&l!="None"){let a=`text-decoration: underline ${r=="Dashed"?"dashed ":r=="Squiggle"?"wavy ":""}${l=="Thin"?1:2}px`;s.push(rt.mark({attributes:{style:a}}).range(this.toEditorPos(o.rangeStart),this.toEditorPos(o.rangeEnd)))}}e.dispatch({effects:yx.of(rt.set(s))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{e.inputState.composing=-1,e.inputState.compositionFirstChange=null};for(let i in this.handlers)t.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let s=Sf(i.root);s&&s.rangeCount&&this.editContext.updateSelectionBounds(s.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,i=!1,s=this.pendingContextChange;return e.changes.iterChanges((o,r,l,a,c)=>{if(i)return;let f=c.length-(r-o);if(s&&r>=s.to)if(s.from==o&&s.to==r&&s.insert.eq(c)){s=this.pendingContextChange=null,t+=f,this.to+=f;return}else s=null,this.revertPending(e.state);if(o+=t,r+=t,r<=this.from)this.from+=f,this.to+=f;else if(o<this.to){if(o<this.from||r>this.to||this.to-this.from+c.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(o),this.toContextPos(r),c.toString()),this.to+=f}t+=f}),s&&!i&&this.revertPending(e.state),!i}update(e){let t=this.pendingContextChange;!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.resetRange(e.state),this.editContext.updateText(0,this.editContext.text.length,e.state.doc.sliceString(this.from,this.to)),this.setSelection(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),s=this.toContextPos(t.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=s)&&this.editContext.updateSelection(i,s)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e){return e+this.from}toContextPos(e){return e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class je{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(s=>s.forEach(o=>i(o,this)))||(s=>this.update(s)),this.dispatch=this.dispatch.bind(this),this._root=e.root||Gz(e.parent)||document,this.viewState=new Ov(e.state||xt.create(e)),e.scrollTo&&e.scrollTo.is(Tu)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Lc).map(s=>new dm(s));for(let s of this.plugins)s.update(this);this.observer=new uH(this),this.inputState=new IV(this),this.inputState.ensureHandlers(this.plugins),this.docView=new cv(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof Nn?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,s,o=this.state;for(let h of e){if(h.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=h.state}if(this.destroyed){this.viewState.state=o;return}let r=this.hasFocus,l=0,a=null;e.some(h=>h.annotation(Rx))?(this.inputState.notifiedFocused=r,l=1):r!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=r,a=Dx(o,r),a||(l=1));let c=this.observer.delayedAndroidKey,f=null;if(c?(this.observer.clearDelayedAndroidKey(),f=this.observer.readChange(),(f&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(f=null)):this.observer.clear(),o.facet(xt.phrases)!=this.state.facet(xt.phrases))return this.setState(o);s=hd.create(this,o,e),s.flags|=l;let u=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(u&&(u=u.map(h.changes)),h.scrollIntoView){let{main:d}=h.state.selection;u=new Ta(d.empty?d:_e.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of h.effects)d.is(Tu)&&(u=d.value.clip(this.state))}this.viewState.update(s,u),this.bidiCache=gd.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),t=this.docView.update(s),this.state.facet(Ic)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet(Nu)!=s.state.facet(Nu)&&(this.viewState.mustMeasureContent=!0),(t||i||u||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!s.empty)for(let h of this.state.facet(t1))try{h(s)}catch(d){Si(this.state,d,"update listener")}(a||f)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),f&&!xx(this,f)&&c.force&&Pa(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new Ov(e),this.plugins=e.facet(Lc).map(i=>new dm(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new cv(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Lc),i=e.state.facet(Lc);if(t!=i){let s=[];for(let o of i){let r=t.indexOf(o);if(r<0)s.push(new dm(o));else{let l=this.plugins[r];l.mustUpdate=e,s.push(l)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=s,this.pluginMap.clear()}else for(let s of this.plugins)s.mustUpdate=e;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(i){Si(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,s=i.scrollTop*this.scaleY,{scrollAnchorPos:o,scrollAnchorHeight:r}=this.viewState;Math.abs(s-this.viewState.scrollTop)>1&&(r=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(r<0)if(JM(i))o=-1,r=this.viewState.heightMap.height;else{let d=this.viewState.scrollAnchorAt(s);o=d.from,r=d.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];a&4||([this.measureRequests,c]=[c,this.measureRequests]);let f=c.map(d=>{try{return d.read(this)}catch(g){return Si(this.state,g),Rv}}),u=hd.create(this,this.state,[]),h=!1;u.flags|=a,t?t.flags|=a:t=u,this.updateState=2,u.empty||(this.updatePlugins(u),this.inputState.update(u),this.updateAttrs(),h=this.docView.update(u),h&&this.docViewUpdate());for(let d=0;d<c.length;d++)if(f[d]!=Rv)try{let g=c[d];g.write&&g.write(f[d],this)}catch(g){Si(this.state,g)}if(h&&this.docView.updateSelection(!0),!u.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,r=-1;continue}else{let g=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-r;if(g>1||g<-1){s=s+g,i.scrollTop=s/this.scaleY,r=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let l of this.state.facet(t1))l(t)}get themeClasses(){return r1+" "+(this.state.facet(o1)?Bx:Nx)+" "+this.state.facet(Nu)}updateAttrs(){let e=Dv(this,_x,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(ar)?"true":"false",class:"cm-content",style:`${Je.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),Dv(this,Y0,t);let i=this.observer.ignore(()=>{let s=Xp(this.contentDOM,this.contentAttrs,t),o=Xp(this.dom,this.editorAttrs,e);return s||o});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let s of i.effects)if(s.is(je.announce)){t&&(this.announceDOM.textContent=""),t=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=s.value}}mountStyles(){this.styleModules=this.state.facet(Ic);let e=this.state.facet(je.cspNonce);Er.mount(this.root,this.styleModules.concat(cH).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return mm(this,e,gv(this,e,t,i))}moveByGroup(e,t){return mm(this,e,gv(this,e,t,i=>xV(this,e.head,i)))}visualLineSide(e,t){let i=this.bidiSpans(e),s=this.textDirectionAt(e.from),o=i[t?i.length-1:0];return _e.cursor(o.side(t,s)+e.from,o.forward(!t,s)?1:-1)}moveToLineBoundary(e,t,i=!0){return MV(this,e,t,i)}moveVertically(e,t,i){return mm(this,e,AV(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),Mx(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let s=this.state.doc.lineAt(e),o=this.bidiSpans(s),r=o[dr.find(o,e-s.from,-1,t)];return kg(i,r.dir==un.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(mx)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>gH)return lx(e.length);let t=this.textDirectionAt(e.from),i;for(let o of this.bidiCache)if(o.from==e.from&&o.dir==t&&(o.fresh||rx(o.isolates,i=av(this,e))))return o.order;i||(i=av(this,e));let s=cV(e.text,t,i);return this.bidiCache.push(new gd(e.from,e.to,t,i,!0,s)),s}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Je.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{qM(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Tu.of(new Ta(typeof e=="number"?_e.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return Tu.of(new Ta(_e.cursor(i.from),"start","start",i.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return kn.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return kn.define(()=>({}),{eventObservers:e})}static theme(e,t){let i=Er.newName(),s=[Nu.of(i),Ic.of(l1(`.${i}`,e))];return t&&t.dark&&s.push(o1.of(!0)),s}static baseTheme(e){return Wl.lowest(Ic.of(l1("."+r1,e,jx)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),s=i&&nn.get(i)||nn.get(e);return((t=s==null?void 0:s.rootView)===null||t===void 0?void 0:t.view)||null}}je.styleModule=Ic;je.inputHandler=dx;je.clipboardInputFilter=J0;je.clipboardOutputFilter=K0;je.scrollHandler=bx;je.focusChangeEffect=gx;je.perLineTextDirection=mx;je.exceptionSink=hx;je.updateListener=t1;je.editable=ar;je.mouseSelectionStyle=ux;je.dragMovesSelection=fx;je.clickAddsSelectionRange=cx;je.decorations=Mf;je.outerDecorations=wx;je.atomicRanges=X0;je.bidiIsolatedRanges=vx;je.scrollMargins=kx;je.darkTheme=o1;je.cspNonce=Ve.define({combine:n=>n.length?n[0]:""});je.contentAttributes=Y0;je.editorAttributes=_x;je.lineWrapping=je.contentAttributes.of({class:"cm-lineWrapping"});je.announce=pt.define();const gH=4096,Rv={};class gd{constructor(e,t,i,s,o,r){this.from=e,this.to=t,this.dir=i,this.isolates=s,this.fresh=o,this.order=r}static update(e,t){if(t.empty&&!e.some(o=>o.fresh))return e;let i=[],s=e.length?e[e.length-1].dir:un.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let r=e[o];r.dir==s&&!t.touchesRange(r.from,r.to)&&i.push(new gd(t.mapPos(r.from,1),t.mapPos(r.to,-1),r.dir,r.isolates,!1,r.order))}return i}}function Dv(n,e,t){for(let i=n.state.facet(e),s=i.length-1;s>=0;s--){let o=i[s],r=typeof o=="function"?o(n):o;r&&Yp(r,t)}return t}const mH=Je.mac?"mac":Je.windows?"win":Je.linux?"linux":"key";function pH(n,e){const t=n.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let s,o,r,l;for(let a=0;a<t.length-1;++a){const c=t[a];if(/^(cmd|meta|m)$/i.test(c))l=!0;else if(/^a(lt)?$/i.test(c))s=!0;else if(/^(c|ctrl|control)$/i.test(c))o=!0;else if(/^s(hift)?$/i.test(c))r=!0;else if(/^mod$/i.test(c))e=="mac"?l=!0:o=!0;else throw new Error("Unrecognized modifier name: "+c)}return s&&(i="Alt-"+i),o&&(i="Ctrl-"+i),l&&(i="Meta-"+i),r&&(i="Shift-"+i),i}function Bu(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const bH=Wl.default(je.domEventHandlers({keydown(n,e){return zx(Fx(e.state),n,e,"editor")}})),md=Ve.define({enables:bH}),Lv=new WeakMap;function Fx(n){let e=n.facet(md),t=Lv.get(e);return t||Lv.set(e,t=wH(e.reduce((i,s)=>i.concat(s),[]))),t}function yH(n,e,t){return zx(Fx(n.state),e,n,t)}let cr=null;const _H=4e3;function wH(n,e=mH){let t=Object.create(null),i=Object.create(null),s=(r,l)=>{let a=i[r];if(a==null)i[r]=l;else if(a!=l)throw new Error("Key binding "+r+" is used both as a regular binding and as a multi-stroke prefix")},o=(r,l,a,c,f)=>{var u,h;let d=t[r]||(t[r]=Object.create(null)),g=l.split(/ (?!$)/).map(b=>pH(b,e));for(let b=1;b<g.length;b++){let y=g.slice(0,b).join(" ");s(y,!0),d[y]||(d[y]={preventDefault:!0,stopPropagation:!1,run:[v=>{let C=cr={view:v,prefix:y,scope:r};return setTimeout(()=>{cr==C&&(cr=null)},_H),!0}]})}let m=g.join(" ");s(m,!1);let p=d[m]||(d[m]={preventDefault:!1,stopPropagation:!1,run:((h=(u=d._any)===null||u===void 0?void 0:u.run)===null||h===void 0?void 0:h.slice())||[]});a&&p.run.push(a),c&&(p.preventDefault=!0),f&&(p.stopPropagation=!0)};for(let r of n){let l=r.scope?r.scope.split(" "):["editor"];if(r.any)for(let c of l){let f=t[c]||(t[c]=Object.create(null));f._any||(f._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:u}=r;for(let h in f)f[h].run.push(d=>u(d,a1))}let a=r[e]||r.key;if(a)for(let c of l)o(c,a,r.run,r.preventDefault,r.stopPropagation),r.shift&&o(c,"Shift-"+a,r.shift,r.preventDefault,r.stopPropagation)}return t}let a1=null;function zx(n,e,t,i){a1=e;let s=qz(e),o=Qn(s,0),r=is(o)==s.length&&s!=" ",l="",a=!1,c=!1,f=!1;cr&&cr.view==t&&cr.scope==i&&(l=cr.prefix+" ",Ox.indexOf(e.keyCode)<0&&(c=!0,cr=null));let u=new Set,h=p=>{if(p){for(let b of p.run)if(!u.has(b)&&(u.add(b),b(t)))return p.stopPropagation&&(f=!0),!0;p.preventDefault&&(p.stopPropagation&&(f=!0),c=!0)}return!1},d=n[i],g,m;return d&&(h(d[l+Bu(s,e,!r)])?a=!0:r&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Je.windows&&e.ctrlKey&&e.altKey)&&(g=Rr[e.keyCode])&&g!=s?(h(d[l+Bu(g,e,!0)])||e.shiftKey&&(m=kf[e.keyCode])!=s&&m!=g&&h(d[l+Bu(m,e,!1)]))&&(a=!0):r&&e.shiftKey&&h(d[l+Bu(s,e,!0)])&&(a=!0),!a&&h(d._any)&&(a=!0)),c&&(a=!0),a&&f&&e.stopPropagation(),a1=null,a}class iu{constructor(e,t,i,s,o){this.className=e,this.left=t,this.top=i,this.width=s,this.height=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let s=e.coordsAtPos(i.head,i.assoc||1);if(!s)return[];let o=Vx(e);return[new iu(t,s.left-o.left,s.top-o.top,null,s.bottom-s.top)]}else return vH(e,t,i)}}function Vx(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==un.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function Iv(n,e,t,i){let s=n.coordsAtPos(e,t*2);if(!s)return i;let o=n.dom.getBoundingClientRect(),r=(s.top+s.bottom)/2,l=n.posAtCoords({x:o.left+1,y:r}),a=n.posAtCoords({x:o.right-1,y:r});return l==null||a==null?i:{from:Math.max(i.from,Math.min(l,a)),to:Math.min(i.to,Math.max(l,a))}}function vH(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let i=Math.max(t.from,n.viewport.from),s=Math.min(t.to,n.viewport.to),o=n.textDirection==un.LTR,r=n.contentDOM,l=r.getBoundingClientRect(),a=Vx(n),c=r.querySelector(".cm-line"),f=c&&window.getComputedStyle(c),u=l.left+(f?parseInt(f.paddingLeft)+Math.min(0,parseInt(f.textIndent)):0),h=l.right-(f?parseInt(f.paddingRight):0),d=i1(n,i),g=i1(n,s),m=d.type==Mi.Text?d:null,p=g.type==Mi.Text?g:null;if(m&&(n.lineWrapping||d.widgetLineBreaks)&&(m=Iv(n,i,1,m)),p&&(n.lineWrapping||g.widgetLineBreaks)&&(p=Iv(n,s,-1,p)),m&&p&&m.from==p.from&&m.to==p.to)return y(v(t.from,t.to,m));{let _=m?v(t.from,null,m):C(d,!1),S=p?v(null,t.to,p):C(g,!0),x=[];return(m||d).to<(p||g).from-(m&&p?1:0)||d.widgetLineBreaks>1&&_.bottom+n.defaultLineHeight/2<S.top?x.push(b(u,_.bottom,h,S.top)):_.bottom<S.top&&n.elementAtHeight((_.bottom+S.top)/2).type==Mi.Text&&(_.bottom=S.top=(_.bottom+S.top)/2),y(_).concat(x).concat(y(S))}function b(_,S,x,D){return new iu(e,_-a.left,S-a.top-.01,x-_,D-S+.01)}function y({top:_,bottom:S,horizontal:x}){let D=[];for(let P=0;P<x.length;P+=2)D.push(b(x[P],_,x[P+1],S));return D}function v(_,S,x){let D=1e9,P=-1e9,E=[];function O(F,z,q,Q,X){let T=n.coordsAtPos(F,F==x.to?-2:2),U=n.coordsAtPos(q,q==x.from?2:-2);!T||!U||(D=Math.min(T.top,U.top,D),P=Math.max(T.bottom,U.bottom,P),X==un.LTR?E.push(o&&z?u:T.left,o&&Q?h:U.right):E.push(!o&&Q?u:U.left,!o&&z?h:T.right))}let I=_??x.from,N=S??x.to;for(let F of n.visibleRanges)if(F.to>I&&F.from<N)for(let z=Math.max(F.from,I),q=Math.min(F.to,N);;){let Q=n.state.doc.lineAt(z);for(let X of n.bidiSpans(Q)){let T=X.from+Q.from,U=X.to+Q.from;if(T>=q)break;U>z&&O(Math.max(T,z),_==null&&T<=I,Math.min(U,q),S==null&&U>=N,X.dir)}if(z=Q.to+1,z>=q)break}return E.length==0&&O(I,_==null,N,S==null,n.textDirection),{top:D,bottom:P,horizontal:E}}function C(_,S){let x=l.top+(S?_.top:_.bottom);return{top:x,bottom:x,horizontal:[]}}}function kH(n,e){return n.constructor==e.constructor&&n.eq(e)}class SH{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(xh)!=e.state.facet(xh)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(xh);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,i)=>!kH(t,this.drawn[i]))){let t=this.dom.firstChild,i=0;for(let s of e)s.update&&t&&s.constructor&&this.drawn[i].constructor&&s.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(s.draw(),t);for(;t;){let s=t.nextSibling;t.remove(),t=s}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const xh=Ve.define();function Hx(n){return[kn.define(e=>new SH(e,n)),xh.of(n)]}const Wx=!Je.ios,xf=Ve.define({combine(n){return ms(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function CH(n={}){return[xf.of(n),MH,xH,AH,px.of(!0)]}function qx(n){return n.startState.facet(xf)!=n.state.facet(xf)}const MH=Hx({above:!0,markers(n){let{state:e}=n,t=e.facet(xf),i=[];for(let s of e.selection.ranges){let o=s==e.selection.main;if(s.empty?!o||Wx:t.drawRangeCursor){let r=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=s.empty?s:_e.cursor(s.head,s.head>s.anchor?-1:1);for(let a of iu.forRange(n,r,l))i.push(a)}}return i},update(n,e){n.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=qx(n);return t&&Nv(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){Nv(e.state,n)},class:"cm-cursorLayer"});function Nv(n,e){e.style.animationDuration=n.facet(xf).cursorBlinkRate+"ms"}const xH=Hx({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:iu.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||qx(n)},class:"cm-selectionLayer"}),c1={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};Wx&&(c1[".cm-line"].caretColor=c1[".cm-content"].caretColor="transparent !important");const AH=Wl.highest(je.theme(c1)),Ux=pt.define({map(n,e){return n==null?null:e.mapPos(n)}}),jc=zn.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,i)=>i.is(Ux)?i.value:t,n)}}),OH=kn.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(jc);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(jc)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,e=n.state.field(jc),t=e!=null&&n.coordsAtPos(e);if(!t)return null;let i=n.scrollDOM.getBoundingClientRect();return{left:t.left-i.left+n.scrollDOM.scrollLeft*n.scaleX,top:t.top-i.top+n.scrollDOM.scrollTop*n.scaleY,height:t.bottom-t.top}}drawCursor(n){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;n?(this.cursor.style.left=n.left/e+"px",this.cursor.style.top=n.top/t+"px",this.cursor.style.height=n.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(jc)!=n&&this.view.dispatch({effects:Ux.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function PH(){return[jc,OH]}function Bv(n,e,t,i,s){e.lastIndex=0;for(let o=n.iterRange(t,i),r=t,l;!o.next().done;r+=o.value.length)if(!o.lineBreak)for(;l=e.exec(o.value);)s(r+l.index,l)}function TH(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let i=[];for(let{from:s,to:o}of t)s=Math.max(n.state.doc.lineAt(s).from,s-e),o=Math.min(n.state.doc.lineAt(o).to,o+e),i.length&&i[i.length-1].to>=s?i[i.length-1].to=o:i.push({from:s,to:o});return i}class EH{constructor(e){const{regexp:t,decoration:i,decorate:s,boundary:o,maxLength:r=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,s)this.addMatch=(l,a,c,f)=>s(f,c,c+l[0].length,l,a);else if(typeof i=="function")this.addMatch=(l,a,c,f)=>{let u=i(l,a,c);u&&f(c,c+l[0].length,u)};else if(i)this.addMatch=(l,a,c,f)=>f(c,c+l[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=r}createDeco(e){let t=new mo,i=t.add.bind(t);for(let{from:s,to:o}of TH(e,this.maxLength))Bv(e.state.doc,this.regexp,s,o,(r,l)=>this.addMatch(l,e,r,i));return t.finish()}updateDeco(e,t){let i=1e9,s=-1;return e.docChanged&&e.changes.iterChanges((o,r,l,a)=>{a>e.view.viewport.from&&l<e.view.viewport.to&&(i=Math.min(l,i),s=Math.max(a,s))}),e.viewportChanged||s-i>1e3?this.createDeco(e.view):s>-1?this.updateRange(e.view,t.map(e.changes),i,s):t}updateRange(e,t,i,s){for(let o of e.visibleRanges){let r=Math.max(o.from,i),l=Math.min(o.to,s);if(l>r){let a=e.state.doc.lineAt(r),c=a.to<l?e.state.doc.lineAt(l):a,f=Math.max(o.from,a.from),u=Math.min(o.to,c.to);if(this.boundary){for(;r>a.from;r--)if(this.boundary.test(a.text[r-1-a.from])){f=r;break}for(;l<c.to;l++)if(this.boundary.test(c.text[l-c.from])){u=l;break}}let h=[],d,g=(m,p,b)=>h.push(b.range(m,p));if(a==c)for(this.regexp.lastIndex=f-a.from;(d=this.regexp.exec(a.text))&&d.index<u-a.from;)this.addMatch(d,e,d.index+a.from,g);else Bv(e.state.doc,this.regexp,f,u,(m,p)=>this.addMatch(p,e,m,g));t=t.update({filterFrom:f,filterTo:u,filter:(m,p)=>m<f||p>u,add:h})}}return t}}const f1=/x/.unicode!=null?"gu":"g",RH=new RegExp(`[\0-\b
--ÂÂ­Øâââ\u2028\u2029â­â®â¦â§â©\uFEFFï¿¹-ï¿¼]`,f1),DH={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let ym=null;function LH(){var n;if(ym==null&&typeof document<"u"&&document.body){let e=document.body.style;ym=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return ym||!1}const Ah=Ve.define({combine(n){let e=ms(n,{render:null,specialChars:RH,addSpecialChars:null});return(e.replaceTabs=!LH())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,f1)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,f1)),e}});function IH(n={}){return[Ah.of(n),NH()]}let jv=null;function NH(){return jv||(jv=kn.fromClass(class{constructor(n){this.view=n,this.decorations=rt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(Ah)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new EH({regexp:n.specialChars,decoration:(e,t,i)=>{let{doc:s}=t.state,o=Qn(e[0],0);if(o==9){let r=s.lineAt(i),l=t.state.tabSize,a=cc(r.text,l,i-r.from);return rt.replace({widget:new zH((l-a%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=rt.replace({widget:new FH(n,o)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(Ah);n.startState.facet(Ah)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const BH="â¢";function jH(n){return n>=32?BH:n==10?"â¤":String.fromCharCode(9216+n)}class FH extends Vr{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=jH(this.code),i=e.state.phrase("Control character")+" "+(DH[this.code]||"0x"+this.code.toString(16)),s=this.options.render&&this.options.render(this.code,i,t);if(s)return s;let o=document.createElement("span");return o.textContent=t,o.title=i,o.setAttribute("aria-label",i),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class zH extends Vr{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function VH(){return WH}const HH=rt.line({class:"cm-activeLine"}),WH=kn.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let i of n.state.selection.ranges){let s=n.lineBlockAt(i.head);s.from>e&&(t.push(HH.range(s.from)),e=s.from)}return rt.set(t)}},{decorations:n=>n.decorations}),u1=2e3;function qH(n,e,t){let i=Math.min(e.line,t.line),s=Math.max(e.line,t.line),o=[];if(e.off>u1||t.off>u1||e.col<0||t.col<0){let r=Math.min(e.off,t.off),l=Math.max(e.off,t.off);for(let a=i;a<=s;a++){let c=n.doc.line(a);c.length<=l&&o.push(_e.range(c.from+r,c.to+l))}}else{let r=Math.min(e.col,t.col),l=Math.max(e.col,t.col);for(let a=i;a<=s;a++){let c=n.doc.line(a),f=Vp(c.text,r,n.tabSize,!0);if(f<0)o.push(_e.cursor(c.to));else{let u=Vp(c.text,l,n.tabSize);o.push(_e.range(c.from+f,c.from+u))}}}return o}function UH(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function Fv(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),i=n.state.doc.lineAt(t),s=t-i.from,o=s>u1?-1:s==i.length?UH(n,e.clientX):cc(i.text,n.state.tabSize,t-i.from);return{line:i.number,col:o,off:s}}function JH(n,e){let t=Fv(n,e),i=n.state.selection;return t?{update(s){if(s.docChanged){let o=s.changes.mapPos(s.startState.doc.line(t.line).from),r=s.state.doc.lineAt(o);t={line:r.number,col:t.col,off:Math.min(t.off,r.length)},i=i.map(s.changes)}},get(s,o,r){let l=Fv(n,s);if(!l)return i;let a=qH(n.state,t,l);return a.length?r?_e.create(a.concat(i.ranges)):_e.create(a):i}}:null}function KH(n){let e=t=>t.altKey&&t.button==0;return je.mouseSelectionStyle.of((t,i)=>e(i)?JH(t,i):null)}const YH={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},XH={style:"cursor: crosshair"};function GH(n={}){let[e,t]=YH[n.key||"Alt"],i=kn.fromClass(class{constructor(s){this.view=s,this.isDown=!1}set(s){this.isDown!=s&&(this.isDown=s,this.view.update([]))}},{eventObservers:{keydown(s){this.set(s.keyCode==e||t(s))},keyup(s){(s.keyCode==e||!t(s))&&this.set(!1)},mousemove(s){this.set(t(s))}}});return[i,je.contentAttributes.of(s=>{var o;return!((o=s.plugin(i))===null||o===void 0)&&o.isDown?XH:null})]}const Sc="-10000px";class Jx{constructor(e,t,i,s){this.facet=t,this.createTooltipView=i,this.removeTooltipView=s,this.input=e.state.facet(t),this.tooltips=this.input.filter(r=>r);let o=null;this.tooltipViews=this.tooltips.map(r=>o=i(r,o))}update(e,t){var i;let s=e.state.facet(this.facet),o=s.filter(a=>a);if(s===this.input){for(let a of this.tooltipViews)a.update&&a.update(e);return!1}let r=[],l=t?[]:null;for(let a=0;a<o.length;a++){let c=o[a],f=-1;if(c){for(let u=0;u<this.tooltips.length;u++){let h=this.tooltips[u];h&&h.create==c.create&&(f=u)}if(f<0)r[a]=this.createTooltipView(c,a?r[a-1]:null),l&&(l[a]=!!c.above);else{let u=r[a]=this.tooltipViews[f];l&&(l[a]=t[f]),u.update&&u.update(e)}}}for(let a of this.tooltipViews)r.indexOf(a)<0&&(this.removeTooltipView(a),(i=a.destroy)===null||i===void 0||i.call(a));return t&&(l.forEach((a,c)=>t[c]=a),t.length=l.length),this.input=s,this.tooltips=o,this.tooltipViews=r,!0}}function QH(n){let{win:e}=n;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const _m=Ve.define({combine:n=>{var e,t,i;return{position:Je.ios?"absolute":((e=n.find(s=>s.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(s=>s.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=n.find(s=>s.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||QH}}}),zv=new WeakMap,$0=kn.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(_m);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Jx(n,Mg,(t,i)=>this.createTooltip(t,i),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let t=e||n.geometryChanged,i=n.state.facet(_m);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let s of this.manager.tooltipViews)s.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let s of this.manager.tooltipViews)this.container.appendChild(s.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n,e){let t=n.create(this.view),i=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),n.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let s=document.createElement("div");s.className="cm-tooltip-arrow",t.dom.appendChild(s)}return t.dom.style.position=this.position,t.dom.style.top=Sc,t.dom.style.left="0px",this.container.insertBefore(t.dom,i),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var n,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(n=i.destroy)===null||n===void 0||n.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=this.view.dom.getBoundingClientRect(),e=1,t=1,i=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(Je.gecko)i=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==Sc&&s.style.left=="0px"){let o=s.getBoundingClientRect();i=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(i||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(e=s.width/this.parent.offsetWidth,t=s.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:t}=this.view.viewState);return{editor:n,parent:this.parent?this.container.getBoundingClientRect():n,pos:this.manager.tooltips.map((s,o)=>{let r=this.manager.tooltipViews[o];return r.getCoords?r.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(_m).tooltipSpace(this.view),scaleX:e,scaleY:t,makeAbsolute:i}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{editor:t,space:i,scaleX:s,scaleY:o}=n,r=[];for(let l=0;l<this.manager.tooltips.length;l++){let a=this.manager.tooltips[l],c=this.manager.tooltipViews[l],{dom:f}=c,u=n.pos[l],h=n.size[l];if(!u||u.bottom<=Math.max(t.top,i.top)||u.top>=Math.min(t.bottom,i.bottom)||u.right<Math.max(t.left,i.left)-.1||u.left>Math.min(t.right,i.right)+.1){f.style.top=Sc;continue}let d=a.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,g=d?7:0,m=h.right-h.left,p=(e=zv.get(c))!==null&&e!==void 0?e:h.bottom-h.top,b=c.offset||$H,y=this.view.textDirection==un.LTR,v=h.width>i.right-i.left?y?i.left:i.right-h.width:y?Math.max(i.left,Math.min(u.left-(d?14:0)+b.x,i.right-m)):Math.min(Math.max(i.left,u.left-m+(d?14:0)-b.x),i.right-m),C=this.above[l];!a.strictSide&&(C?u.top-(h.bottom-h.top)-b.y<i.top:u.bottom+(h.bottom-h.top)+b.y>i.bottom)&&C==i.bottom-u.bottom>u.top-i.top&&(C=this.above[l]=!C);let _=(C?u.top-i.top:i.bottom-u.bottom)-g;if(_<p&&c.resize!==!1){if(_<this.view.defaultLineHeight){f.style.top=Sc;continue}zv.set(c,p),f.style.height=(p=_)/o+"px"}else f.style.height&&(f.style.height="");let S=C?u.top-p-g-b.y:u.bottom+g+b.y,x=v+m;if(c.overlap!==!0)for(let D of r)D.left<x&&D.right>v&&D.top<S+p&&D.bottom>S&&(S=C?D.top-p-2-g:D.bottom+g+2);if(this.position=="absolute"?(f.style.top=(S-n.parent.top)/o+"px",f.style.left=(v-n.parent.left)/s+"px"):(f.style.top=S/o+"px",f.style.left=v/s+"px"),d){let D=u.left+(y?b.x:-b.x)-(v+14-7);d.style.left=D/s+"px"}c.overlap!==!0&&r.push({left:v,top:S,right:x,bottom:S+p}),f.classList.toggle("cm-tooltip-above",C),f.classList.toggle("cm-tooltip-below",!C),c.positioned&&c.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=Sc}},{eventObservers:{scroll(){this.maybeMeasure()}}}),ZH=je.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),$H={x:0,y:0},Mg=Ve.define({enables:[$0,ZH]}),pd=Ve.define({combine:n=>n.reduce((e,t)=>e.concat(t),[])});class xg{static create(e){return new xg(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Jx(e,pd,(t,i)=>this.createHostedView(t,i),t=>t.dom.remove())}createHostedView(e,t){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let i of this.manager.tooltipViews){let s=i[e];if(s!==void 0){if(t===void 0)t=s;else if(t!==s)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const eW=Mg.compute([pd],n=>{let e=n.facet(pd);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var i;return(i=t.end)!==null&&i!==void 0?i:t.pos})),create:xg.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class tW{constructor(e,t,i,s,o){this.view=e,this.source=t,this.field=i,this.setHover=s,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,i=e.docView.nearest(t.target);if(!i)return;let s,o=1;if(i instanceof hr)s=i.posAtStart;else{if(s=e.posAtCoords(t),s==null)return;let l=e.coordsAtPos(s);if(!l||t.y<l.top||t.y>l.bottom||t.x<l.left-e.defaultCharacterWidth||t.x>l.right+e.defaultCharacterWidth)return;let a=e.bidiSpans(e.state.doc.lineAt(s)).find(f=>f.from<=s&&f.to>=s),c=a&&a.dir==un.RTL?-1:1;o=t.x<l.left?-c:c}let r=this.source(e,s,o);if(r!=null&&r.then){let l=this.pending={pos:s};r.then(a=>{this.pending==l&&(this.pending=null,a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])}))},a=>Si(e.state,a,"hover tooltip"))}else r&&!(Array.isArray(r)&&!r.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(r)?r:[r])})}get tooltip(){let e=this.view.plugin($0),t=e?e.manager.tooltips.findIndex(i=>i.create==xg.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:s,tooltip:o}=this;if(s.length&&o&&!nW(o.dom,e)||this.pending){let{pos:r}=s[0]||this.pending,l=(i=(t=s[0])===null||t===void 0?void 0:t.end)!==null&&i!==void 0?i:r;(r==l?this.view.posAtCoords(this.lastMove)!=r:!iW(this.view,r,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=i=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const ju=4;function nW(n,e){let{left:t,right:i,top:s,bottom:o}=n.getBoundingClientRect(),r;if(r=n.querySelector(".cm-tooltip-arrow")){let l=r.getBoundingClientRect();s=Math.min(l.top,s),o=Math.max(l.bottom,o)}return e.clientX>=t-ju&&e.clientX<=i+ju&&e.clientY>=s-ju&&e.clientY<=o+ju}function iW(n,e,t,i,s,o){let r=n.scrollDOM.getBoundingClientRect(),l=n.documentTop+n.documentPadding.top+n.contentHeight;if(r.left>i||r.right<i||r.top>s||Math.min(r.bottom,l)<s)return!1;let a=n.posAtCoords({x:i,y:s},!1);return a>=e&&a<=t}function sW(n,e={}){let t=pt.define(),i=zn.define({create(){return[]},update(s,o){if(s.length&&(e.hideOnChange&&(o.docChanged||o.selection)?s=[]:e.hideOn&&(s=s.filter(r=>!e.hideOn(o,r))),o.docChanged)){let r=[];for(let l of s){let a=o.changes.mapPos(l.pos,-1,ki.TrackDel);if(a!=null){let c=Object.assign(Object.create(null),l);c.pos=a,c.end!=null&&(c.end=o.changes.mapPos(c.end)),r.push(c)}}s=r}for(let r of o.effects)r.is(t)&&(s=r.value),r.is(oW)&&(s=[]);return s},provide:s=>pd.from(s)});return{active:i,extension:[i,kn.define(s=>new tW(s,n,i,t,e.hoverTime||300)),eW]}}function Kx(n,e){let t=n.plugin($0);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}const oW=pt.define(),Vv=Ve.define({combine(n){let e,t;for(let i of n)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function Af(n,e){let t=n.plugin(Yx),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const Yx=kn.fromClass(class{constructor(n){this.input=n.state.facet(Of),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(Vv);this.top=new Fu(n,!0,e.topContainer),this.bottom=new Fu(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(Vv);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Fu(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Fu(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(Of);if(t!=this.input){let i=t.filter(a=>a),s=[],o=[],r=[],l=[];for(let a of i){let c=this.specs.indexOf(a),f;c<0?(f=a(n.view),l.push(f)):(f=this.panels[c],f.update&&f.update(n)),s.push(f),(f.top?o:r).push(f)}this.specs=i,this.panels=s,this.top.sync(o),this.bottom.sync(r);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let i of this.panels)i.update&&i.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>je.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Fu{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=Hv(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=Hv(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Hv(n){let e=n.nextSibling;return n.remove(),e}const Of=Ve.define({enables:Yx});class po extends El{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}po.prototype.elementClass="";po.prototype.toDOM=void 0;po.prototype.mapMode=ki.TrackBefore;po.prototype.startSide=po.prototype.endSide=-1;po.prototype.point=!0;const Oh=Ve.define(),rW=Ve.define(),lW={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Tt.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},ef=Ve.define();function Xx(n){return[Gx(),ef.of(Object.assign(Object.assign({},lW),n))]}const Wv=Ve.define({combine:n=>n.some(e=>e)});function Gx(n){return[aW]}const aW=kn.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(ef).map(e=>new Uv(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(Wv),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(Wv)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let t=Tt.iter(this.view.state.facet(Oh),this.view.viewport.from),i=[],s=this.gutters.map(o=>new cW(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(o.type)){let r=!0;for(let l of o.type)if(l.type==Mi.Text&&r){h1(t,i,l.from);for(let a of s)a.line(this.view,l,i);r=!1}else if(l.widget)for(let a of s)a.widget(this.view,l)}else if(o.type==Mi.Text){h1(t,i,o.from);for(let r of s)r.line(this.view,o,i)}else if(o.widget)for(let r of s)r.widget(this.view,o);for(let o of s)o.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(ef),t=n.state.facet(ef),i=n.docChanged||n.heightChanged||n.viewportChanged||!Tt.eq(n.startState.facet(Oh),n.state.facet(Oh),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let s of this.gutters)s.update(n)&&(i=!0);else{i=!0;let s=[];for(let o of t){let r=e.indexOf(o);r<0?s.push(new Uv(this.view,o)):(this.gutters[r].update(n),s.push(this.gutters[r]))}for(let o of this.gutters)o.dom.remove(),s.indexOf(o)<0&&o.destroy();for(let o of s)this.dom.appendChild(o.dom);this.gutters=s}return i}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>je.scrollMargins.of(e=>{let t=e.plugin(n);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==un.LTR?{left:t.dom.offsetWidth*e.scaleX}:{right:t.dom.offsetWidth*e.scaleX}})});function qv(n){return Array.isArray(n)?n:[n]}function h1(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class cW{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=Tt.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:s}=this,o=(t.top-this.height)/e.scaleY,r=t.height/e.scaleY;if(this.i==s.elements.length){let l=new Qx(e,r,o,i);s.elements.push(l),s.dom.appendChild(l.dom)}else s.elements[this.i].update(e,r,o,i);this.height=t.bottom,this.i++}line(e,t,i){let s=[];h1(this.cursor,s,t.from),i.length&&(s=s.concat(i));let o=this.gutter.config.lineMarker(e,t,s);o&&s.unshift(o);let r=this.gutter;s.length==0&&!r.config.renderEmptyElements||this.addElement(e,t,s)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t),s=i?[i]:null;for(let o of e.state.facet(rW)){let r=o(e,t.widget,t);r&&(s||(s=[])).push(r)}s&&this.addElement(e,t,s)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class Uv{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,s=>{let o=s.target,r;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let a=o.getBoundingClientRect();r=(a.top+a.bottom)/2}else r=s.clientY;let l=e.lineBlockAtHeight(r-e.documentTop);t.domEventHandlers[i](e,l,s)&&s.preventDefault()});this.markers=qv(t.markers(e)),t.initialSpacer&&(this.spacer=new Qx(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=qv(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let s=this.config.updateSpacer(this.spacer.markers[0],e);s!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[s])}let i=e.view.viewport;return!Tt.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Qx{constructor(e,t,i,s){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,s)}update(e,t,i,s){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),fW(this.markers,s)||this.setMarkers(e,s)}setMarkers(e,t){let i="cm-gutterElement",s=this.dom.firstChild;for(let o=0,r=0;;){let l=r,a=o<t.length?t[o++]:null,c=!1;if(a){let f=a.elementClass;f&&(i+=" "+f);for(let u=r;u<this.markers.length;u++)if(this.markers[u].compare(a)){l=u,c=!0;break}}else l=this.markers.length;for(;r<l;){let f=this.markers[r++];if(f.toDOM){f.destroy(s);let u=s.nextSibling;s.remove(),s=u}}if(!a)break;a.toDOM&&(c?s=s.nextSibling:this.dom.insertBefore(a.toDOM(e),s)),c&&r++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function fW(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const uW=Ve.define(),hW=Ve.define(),ba=Ve.define({combine(n){return ms(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let s in t){let o=i[s],r=t[s];i[s]=o?(l,a,c)=>o(l,a,c)||r(l,a,c):r}return i}})}});class wm extends po{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function vm(n,e){return n.state.facet(ba).formatNumber(e,n.state)}const dW=ef.compute([ba],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(uW)},lineMarker(e,t,i){return i.some(s=>s.toDOM)?null:new wm(vm(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,i)=>{for(let s of e.state.facet(hW)){let o=s(e,t,i);if(o)return o}return null},lineMarkerChange:e=>e.startState.facet(ba)!=e.state.facet(ba),initialSpacer(e){return new wm(vm(e,Jv(e.state.doc.lines)))},updateSpacer(e,t){let i=vm(t.view,Jv(t.view.state.doc.lines));return i==e.number?e:new wm(i)},domEventHandlers:n.facet(ba).domEventHandlers}));function gW(n={}){return[ba.of(n),Gx(),dW]}function Jv(n){let e=9;for(;e<n;)e=e*10+9;return e}const mW=new class extends po{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},pW=Oh.compute(["selection"],n=>{let e=[],t=-1;for(let i of n.selection.ranges){let s=n.doc.lineAt(i.head).from;s>t&&(t=s,e.push(mW.range(s)))}return Tt.of(e)});function bW(){return pW}const Zx=1024;let yW=0;class km{constructor(e,t){this.from=e,this.to=t}}class Mt{constructor(e={}){this.id=yW++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Ni.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}Mt.closedBy=new Mt({deserialize:n=>n.split(" ")});Mt.openedBy=new Mt({deserialize:n=>n.split(" ")});Mt.group=new Mt({deserialize:n=>n.split(" ")});Mt.isolate=new Mt({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});Mt.contextHash=new Mt({perNode:!0});Mt.lookAhead=new Mt({perNode:!0});Mt.mounted=new Mt({perNode:!0});class bd{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}static get(e){return e&&e.props&&e.props[Mt.mounted.id]}}const _W=Object.create(null);class Ni{constructor(e,t,i,s=0){this.name=e,this.props=t,this.id=i,this.flags=s}static define(e){let t=e.props&&e.props.length?Object.create(null):_W,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),s=new Ni(e.name||"",t,e.id,i);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(s)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[o[0].id]=o[1]}}return s}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Mt.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let s of i.split(" "))t[s]=e[i];return i=>{for(let s=i.prop(Mt.group),o=-1;o<(s?s.length:0);o++){let r=t[o<0?i.name:s[o]];if(r)return r}}}}Ni.none=new Ni("",Object.create(null),0,8);class eb{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let s=null;for(let o of e){let r=o(i);r&&(s||(s=Object.assign({},i.props)),s[r[0].id]=r[1])}t.push(s?new Ni(i.name,s,i.id,i.flags):i)}return new eb(t)}}const zu=new WeakMap,Kv=new WeakMap;var qn;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(qn||(qn={}));class Dn{constructor(e,t,i,s,o){if(this.type=e,this.children=t,this.positions=i,this.length=s,this.props=null,o&&o.length){this.props=Object.create(null);for(let[r,l]of o)this.props[typeof r=="number"?r:r.id]=l}}toString(){let e=bd.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let s=i.toString();s&&(t&&(t+=","),t+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new g1(this.topNode,e)}cursorAt(e,t=0,i=0){let s=zu.get(this)||this.topNode,o=new g1(s);return o.moveTo(e,t),zu.set(this,o._tree),o}get topNode(){return new fs(this,0,0,null)}resolve(e,t=0){let i=Pf(zu.get(this)||this.topNode,e,t,!1);return zu.set(this,i),i}resolveInner(e,t=0){let i=Pf(Kv.get(this)||this.topNode,e,t,!0);return Kv.set(this,i),i}resolveStack(e,t=0){return kW(this,e,t)}iterate(e){let{enter:t,leave:i,from:s=0,to:o=this.length}=e,r=e.mode||0,l=(r&qn.IncludeAnonymous)>0;for(let a=this.cursor(r|qn.IncludeAnonymous);;){let c=!1;if(a.from<=o&&a.to>=s&&(!l&&a.type.isAnonymous||t(a)!==!1)){if(a.firstChild())continue;c=!0}for(;c&&i&&(l||!a.type.isAnonymous)&&i(a),!a.nextSibling();){if(!a.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:ib(Ni.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,s)=>new Dn(this.type,t,i,s,this.propValues),e.makeTree||((t,i,s)=>new Dn(Ni.none,t,i,s)))}static build(e){return SW(e)}}Dn.empty=new Dn(Ni.none,[],[],0);class tb{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new tb(this.buffer,this.index)}}class Lr{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return Ni.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],s=this.set.types[t],o=s.name;if(/\W/.test(o)&&!s.isError&&(o=JSON.stringify(o)),e+=4,i==e)return o;let r=[];for(;e<i;)r.push(this.childString(e)),e=this.buffer[e+3];return o+"("+r.join(",")+")"}findChild(e,t,i,s,o){let{buffer:r}=this,l=-1;for(let a=e;a!=t&&!($x(o,s,r[a+1],r[a+2])&&(l=a,i>0));a=r[a+3]);return l}slice(e,t,i){let s=this.buffer,o=new Uint16Array(t-e),r=0;for(let l=e,a=0;l<t;){o[a++]=s[l++],o[a++]=s[l++]-i;let c=o[a++]=s[l++]-i;o[a++]=s[l++]-e,r=Math.max(r,c)}return new Lr(o,r,this.set)}}function $x(n,e,t,i){switch(n){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function Pf(n,e,t,i){for(var s;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let r=!i&&n instanceof fs&&n.index<0?null:n.parent;if(!r)return n;n=r}let o=i?0:qn.IgnoreOverlays;if(i)for(let r=n,l=r.parent;l;r=l,l=r.parent)r instanceof fs&&r.index<0&&((s=l.enter(e,t,o))===null||s===void 0?void 0:s.from)!=r.from&&(n=l);for(;;){let r=n.enter(e,t,o);if(!r)return n;n=r}}class eA{cursor(e=0){return new g1(this,e)}getChild(e,t=null,i=null){let s=Yv(this,e,t,i);return s.length?s[0]:null}getChildren(e,t=null,i=null){return Yv(this,e,t,i)}resolve(e,t=0){return Pf(this,e,t,!1)}resolveInner(e,t=0){return Pf(this,e,t,!0)}matchContext(e){return d1(this,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),i=this;for(;t;){let s=t.lastChild;if(!s||s.to!=t.to)break;s.type.isError&&s.from==s.to?(i=t,t=s.prevSibling):t=s}return i}get node(){return this}get next(){return this.parent}}class fs extends eA{constructor(e,t,i,s){super(),this._tree=e,this.from=t,this.index=i,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,s,o=0){for(let r=this;;){for(let{children:l,positions:a}=r._tree,c=t>0?l.length:-1;e!=c;e+=t){let f=l[e],u=a[e]+r.from;if($x(s,i,u,u+f.length)){if(f instanceof Lr){if(o&qn.ExcludeBuffers)continue;let h=f.findChild(0,f.buffer.length,t,i-u,s);if(h>-1)return new gr(new wW(r,f,e,u),null,h)}else if(o&qn.IncludeAnonymous||!f.type.isAnonymous||nb(f)){let h;if(!(o&qn.IgnoreMounts)&&(h=bd.get(f))&&!h.overlay)return new fs(h.tree,u,e,r);let d=new fs(f,u,e,r);return o&qn.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(t<0?f.children.length-1:0,t,i,s)}}}if(o&qn.IncludeAnonymous||!r.type.isAnonymous||(r.index>=0?e=r.index+t:e=t<0?-1:r._parent._tree.children.length,r=r._parent,!r))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let s;if(!(i&qn.IgnoreOverlays)&&(s=bd.get(this._tree))&&s.overlay){let o=e-this.from;for(let{from:r,to:l}of s.overlay)if((t>0?r<=o:r<o)&&(t<0?l>=o:l>o))return new fs(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Yv(n,e,t,i){let s=n.cursor(),o=[];if(!s.firstChild())return o;if(t!=null){for(let r=!1;!r;)if(r=s.type.is(t),!s.nextSibling())return o}for(;;){if(i!=null&&s.type.is(i))return o;if(s.type.is(e)&&o.push(s.node),!s.nextSibling())return i==null?o:[]}}function d1(n,e,t=e.length-1){for(let i=n.parent;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class wW{constructor(e,t,i,s){this.parent=e,this.buffer=t,this.index=i,this.start=s}}class gr extends eA{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){super(),this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:s}=this.context,o=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.context.start,i);return o<0?null:new gr(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&qn.ExcludeBuffers)return null;let{buffer:s}=this.context,o=s.findChild(this.index+4,s.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return o<0?null:new gr(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new gr(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new gr(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,s=this.index+4,o=i.buffer[this.index+3];if(o>s){let r=i.buffer[this.index+1];e.push(i.slice(s,o,r)),t.push(0)}return new Dn(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function tA(n){if(!n.length)return null;let e=0,t=n[0];for(let o=1;o<n.length;o++){let r=n[o];(r.from>t.from||r.to<t.to)&&(t=r,e=o)}let i=t instanceof fs&&t.index<0?null:t.parent,s=n.slice();return i?s[e]=i:s.splice(e,1),new vW(s,t)}class vW{constructor(e,t){this.heads=e,this.node=t}get next(){return tA(this.heads)}}function kW(n,e,t){let i=n.resolveInner(e,t),s=null;for(let o=i instanceof fs?i:i.context.parent;o;o=o.parent)if(o.index<0){let r=o.parent;(s||(s=[i])).push(r.resolve(e,t)),o=r}else{let r=bd.get(o.tree);if(r&&r.overlay&&r.overlay[0].from<=e&&r.overlay[r.overlay.length-1].to>=e){let l=new fs(r.tree,r.overlay[0].from+o.from,-1,o);(s||(s=[i])).push(Pf(l,e,t,!1))}}return s?tA(s):i}class g1{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof fs)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:s}=this.buffer;return this.type=t||s.set.types[s.buffer[e]],this.from=i+s.buffer[e+1],this.to=i+s.buffer[e+2],!0}yield(e){return e?e instanceof fs?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:s}=this.buffer,o=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.buffer.start,i);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&qn.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&qn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&qn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let s=i<0?0:this.stack[i]+4;if(this.index!=s)return this.yieldBuf(t.findChild(s,this.index,-1,0,4))}else{let s=t.buffer[this.index+3];if(s<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(s)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:s}=this;if(s){if(e>0){if(this.index<s.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(s.buffer.buffer[o+3]<this.index)return!1;({index:t,parent:i}=s)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let o=t+e,r=e<0?-1:i._tree.children.length;o!=r;o+=e){let l=i._tree.children[o];if(this.mode&qn.IncludeAnonymous||l instanceof Lr||!l.type.isAnonymous||nb(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let s=this.index,o=this.stack.length;o>=0;){for(let r=e;r;r=r._parent)if(r.index==s){if(s==this.index)return r;t=r,i=o+1;break e}s=this.stack[--o]}for(let s=i;s<this.stack.length;s++)t=new gr(this.buffer,t,this.stack[s]);return this.bufferNode=new gr(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let s=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(s=!0)}for(;s&&t&&t(this),s=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,s=!0}}}matchContext(e){if(!this.buffer)return d1(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let s=e.length-1,o=this.stack.length-1;s>=0;o--){if(o<0)return d1(this.node,e,s);let r=i[t.buffer[this.stack[o]]];if(!r.isAnonymous){if(e[s]&&e[s]!=r.name)return!1;s--}}return!0}}function nb(n){return n.children.some(e=>e instanceof Lr||!e.type.isAnonymous||nb(e))}function SW(n){var e;let{buffer:t,nodeSet:i,maxBufferLength:s=Zx,reused:o=[],minRepeatType:r=i.types.length}=n,l=Array.isArray(t)?new tb(t,t.length):t,a=i.types,c=0,f=0;function u(_,S,x,D,P,E){let{id:O,start:I,end:N,size:F}=l,z=f;for(;F<0;)if(l.next(),F==-1){let U=o[O];x.push(U),D.push(I-_);return}else if(F==-3){c=O;return}else if(F==-4){f=O;return}else throw new RangeError(`Unrecognized record size: ${F}`);let q=a[O],Q,X,T=I-_;if(N-I<=s&&(X=p(l.pos-S,P))){let U=new Uint16Array(X.size-X.skip),Y=l.pos-X.size,le=U.length;for(;l.pos>Y;)le=b(X.start,U,le);Q=new Lr(U,N-X.start,i),T=X.start-_}else{let U=l.pos-F;l.next();let Y=[],le=[],Z=O>=r?O:-1,ue=0,W=N;for(;l.pos>U;)Z>=0&&l.id==Z&&l.size>=0?(l.end<=W-s&&(g(Y,le,I,ue,l.end,W,Z,z),ue=Y.length,W=l.end),l.next()):E>2500?h(I,U,Y,le):u(I,U,Y,le,Z,E+1);if(Z>=0&&ue>0&&ue<Y.length&&g(Y,le,I,ue,I,W,Z,z),Y.reverse(),le.reverse(),Z>-1&&ue>0){let we=d(q);Q=ib(q,Y,le,0,Y.length,0,N-I,we,we)}else Q=m(q,Y,le,N-I,z-N)}x.push(Q),D.push(T)}function h(_,S,x,D){let P=[],E=0,O=-1;for(;l.pos>S;){let{id:I,start:N,end:F,size:z}=l;if(z>4)l.next();else{if(O>-1&&N<O)break;O<0&&(O=F-s),P.push(I,N,F),E++,l.next()}}if(E){let I=new Uint16Array(E*4),N=P[P.length-2];for(let F=P.length-3,z=0;F>=0;F-=3)I[z++]=P[F],I[z++]=P[F+1]-N,I[z++]=P[F+2]-N,I[z++]=z;x.push(new Lr(I,P[2]-N,i)),D.push(N-_)}}function d(_){return(S,x,D)=>{let P=0,E=S.length-1,O,I;if(E>=0&&(O=S[E])instanceof Dn){if(!E&&O.type==_&&O.length==D)return O;(I=O.prop(Mt.lookAhead))&&(P=x[E]+O.length+I)}return m(_,S,x,D,P)}}function g(_,S,x,D,P,E,O,I){let N=[],F=[];for(;_.length>D;)N.push(_.pop()),F.push(S.pop()+x-P);_.push(m(i.types[O],N,F,E-P,I-E)),S.push(P-x)}function m(_,S,x,D,P=0,E){if(c){let O=[Mt.contextHash,c];E=E?[O].concat(E):[O]}if(P>25){let O=[Mt.lookAhead,P];E=E?[O].concat(E):[O]}return new Dn(_,S,x,D,E)}function p(_,S){let x=l.fork(),D=0,P=0,E=0,O=x.end-s,I={size:0,start:0,skip:0};e:for(let N=x.pos-_;x.pos>N;){let F=x.size;if(x.id==S&&F>=0){I.size=D,I.start=P,I.skip=E,E+=4,D+=4,x.next();continue}let z=x.pos-F;if(F<0||z<N||x.start<O)break;let q=x.id>=r?4:0,Q=x.start;for(x.next();x.pos>z;){if(x.size<0)if(x.size==-3)q+=4;else break e;else x.id>=r&&(q+=4);x.next()}P=Q,D+=F,E+=q}return(S<0||D==_)&&(I.size=D,I.start=P,I.skip=E),I.size>4?I:void 0}function b(_,S,x){let{id:D,start:P,end:E,size:O}=l;if(l.next(),O>=0&&D<r){let I=x;if(O>4){let N=l.pos-(O-4);for(;l.pos>N;)x=b(_,S,x)}S[--x]=I,S[--x]=E-_,S[--x]=P-_,S[--x]=D}else O==-3?c=D:O==-4&&(f=D);return x}let y=[],v=[];for(;l.pos>0;)u(n.start||0,n.bufferStart||0,y,v,-1,0);let C=(e=n.length)!==null&&e!==void 0?e:y.length?v[0]+y[0].length:0;return new Dn(a[n.topID],y.reverse(),v.reverse(),C)}const Xv=new WeakMap;function Ph(n,e){if(!n.isAnonymous||e instanceof Lr||e.type!=n)return 1;let t=Xv.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=n||!(i instanceof Dn)){t=1;break}t+=Ph(n,i)}Xv.set(e,t)}return t}function ib(n,e,t,i,s,o,r,l,a){let c=0;for(let g=i;g<s;g++)c+=Ph(n,e[g]);let f=Math.ceil(c*1.5/8),u=[],h=[];function d(g,m,p,b,y){for(let v=p;v<b;){let C=v,_=m[v],S=Ph(n,g[v]);for(v++;v<b;v++){let x=Ph(n,g[v]);if(S+x>=f)break;S+=x}if(v==C+1){if(S>f){let x=g[C];d(x.children,x.positions,0,x.children.length,m[C]+y);continue}u.push(g[C])}else{let x=m[v-1]+g[v-1].length-_;u.push(ib(n,g,m,C,v,_,x,null,a))}h.push(_+y-o)}}return d(e,t,i,s,0),(l||a)(u,h,r)}class pl{constructor(e,t,i,s,o=!1,r=!1){this.from=e,this.to=t,this.tree=i,this.offset=s,this.open=(o?1:0)|(r?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let s=[new pl(0,e.length,e,0,!1,i)];for(let o of t)o.to>e.length&&s.push(o);return s}static applyChanges(e,t,i=128){if(!t.length)return e;let s=[],o=1,r=e.length?e[0]:null;for(let l=0,a=0,c=0;;l++){let f=l<t.length?t[l]:null,u=f?f.fromA:1e9;if(u-a>=i)for(;r&&r.from<u;){let h=r;if(a>=h.from||u<=h.to||c){let d=Math.max(h.from,a)-c,g=Math.min(h.to,u)-c;h=d>=g?null:new pl(d,g,h.tree,h.offset+c,l>0,!!f)}if(h&&s.push(h),r.to>u)break;r=o<e.length?e[o++]:null}if(!f)break;a=f.toA,c=f.toA-f.toB}return s}}class nA{startParse(e,t,i){return typeof e=="string"&&(e=new CW(e)),i=i?i.length?i.map(s=>new km(s.from,s.to)):[new km(0,0)]:[new km(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let s=this.startParse(e,t,i);for(;;){let o=s.advance();if(o)return o}}}class CW{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Mt({perNode:!0});let MW=0;class ns{constructor(e,t,i,s){this.name=e,this.set=t,this.base=i,this.modified=s,this.id=MW++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let i=typeof e=="string"?e:"?";if(e instanceof ns&&(t=e),t!=null&&t.base)throw new Error("Can not derive from a modified tag");let s=new ns(i,[],null,[]);if(s.set.push(s),t)for(let o of t.set)s.set.push(o);return s}static defineModifier(e){let t=new yd(e);return i=>i.modified.indexOf(t)>-1?i:yd.get(i.base||i,i.modified.concat(t).sort((s,o)=>s.id-o.id))}}let xW=0;class yd{constructor(e){this.name=e,this.instances=[],this.id=xW++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(l=>l.base==e&&AW(t,l.modified));if(i)return i;let s=[],o=new ns(e.name,s,e,t);for(let l of t)l.instances.push(o);let r=OW(t);for(let l of e.set)if(!l.modified.length)for(let a of r)s.push(yd.get(l,a));return o}}function AW(n,e){return n.length==e.length&&n.every((t,i)=>t==e[i])}function OW(n){let e=[[]];for(let t=0;t<n.length;t++)for(let i=0,s=e.length;i<s;i++)e.push(e[i].concat(n[t]));return e.sort((t,i)=>i.length-t.length)}function iA(n){let e=Object.create(null);for(let t in n){let i=n[t];Array.isArray(i)||(i=[i]);for(let s of t.split(" "))if(s){let o=[],r=2,l=s;for(let u=0;;){if(l=="..."&&u>0&&u+3==s.length){r=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!h)throw new RangeError("Invalid path: "+s);if(o.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),u+=h[0].length,u==s.length)break;let d=s[u++];if(u==s.length&&d=="!"){r=0;break}if(d!="/")throw new RangeError("Invalid path: "+s);l=s.slice(u)}let a=o.length-1,c=o[a];if(!c)throw new RangeError("Invalid path: "+s);let f=new _d(i,r,a>0?o.slice(0,a):null);e[c]=f.sort(e[c])}}return sA.add(e)}const sA=new Mt;class _d{constructor(e,t,i,s){this.tags=e,this.mode=t,this.context=i,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}_d.empty=new _d([],2,null);function oA(n,e){let t=Object.create(null);for(let o of n)if(!Array.isArray(o.tag))t[o.tag.id]=o.class;else for(let r of o.tag)t[r.id]=o.class;let{scope:i,all:s=null}=e||{};return{style:o=>{let r=s;for(let l of o)for(let a of l.set){let c=t[a.id];if(c){r=r?r+" "+c:c;break}}return r},scope:i}}function PW(n,e){let t=null;for(let i of n){let s=i.style(e);s&&(t=t?t+" "+s:s)}return t}function TW(n,e,t,i=0,s=n.length){let o=new EW(i,Array.isArray(e)?e:[e],t);o.highlightRange(n.cursor(),i,s,"",o.highlighters),o.flush(s)}class EW{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,s,o){let{type:r,from:l,to:a}=e;if(l>=i||a<=t)return;r.isTop&&(o=this.highlighters.filter(d=>!d.scope||d.scope(r)));let c=s,f=RW(e)||_d.empty,u=PW(o,f.tags);if(u&&(c&&(c+=" "),c+=u,f.mode==1&&(s+=(s?" ":"")+u)),this.startSpan(Math.max(t,l),c),f.opaque)return;let h=e.tree&&e.tree.prop(Mt.mounted);if(h&&h.overlay){let d=e.node.enter(h.overlay[0].from+l,1),g=this.highlighters.filter(p=>!p.scope||p.scope(h.tree.type)),m=e.firstChild();for(let p=0,b=l;;p++){let y=p<h.overlay.length?h.overlay[p]:null,v=y?y.from+l:a,C=Math.max(t,b),_=Math.min(i,v);if(C<_&&m)for(;e.from<_&&(this.highlightRange(e,C,_,s,o),this.startSpan(Math.min(_,e.to),c),!(e.to>=v||!e.nextSibling())););if(!y||v>i)break;b=y.to+l,b>t&&(this.highlightRange(d.cursor(),Math.max(t,y.from+l),Math.min(i,b),"",g),this.startSpan(Math.min(i,b),c))}m&&e.parent()}else if(e.firstChild()){h&&(s="");do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,s,o),this.startSpan(Math.min(i,e.to),c)}while(e.nextSibling());e.parent()}}}function RW(n){let e=n.type.prop(sA);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const Re=ns.define,Vu=Re(),or=Re(),Gv=Re(or),Qv=Re(or),rr=Re(),Hu=Re(rr),Sm=Re(rr),Xs=Re(),Qr=Re(Xs),Ks=Re(),Ys=Re(),m1=Re(),Cc=Re(m1),Wu=Re(),Me={comment:Vu,lineComment:Re(Vu),blockComment:Re(Vu),docComment:Re(Vu),name:or,variableName:Re(or),typeName:Gv,tagName:Re(Gv),propertyName:Qv,attributeName:Re(Qv),className:Re(or),labelName:Re(or),namespace:Re(or),macroName:Re(or),literal:rr,string:Hu,docString:Re(Hu),character:Re(Hu),attributeValue:Re(Hu),number:Sm,integer:Re(Sm),float:Re(Sm),bool:Re(rr),regexp:Re(rr),escape:Re(rr),color:Re(rr),url:Re(rr),keyword:Ks,self:Re(Ks),null:Re(Ks),atom:Re(Ks),unit:Re(Ks),modifier:Re(Ks),operatorKeyword:Re(Ks),controlKeyword:Re(Ks),definitionKeyword:Re(Ks),moduleKeyword:Re(Ks),operator:Ys,derefOperator:Re(Ys),arithmeticOperator:Re(Ys),logicOperator:Re(Ys),bitwiseOperator:Re(Ys),compareOperator:Re(Ys),updateOperator:Re(Ys),definitionOperator:Re(Ys),typeOperator:Re(Ys),controlOperator:Re(Ys),punctuation:m1,separator:Re(m1),bracket:Cc,angleBracket:Re(Cc),squareBracket:Re(Cc),paren:Re(Cc),brace:Re(Cc),content:Xs,heading:Qr,heading1:Re(Qr),heading2:Re(Qr),heading3:Re(Qr),heading4:Re(Qr),heading5:Re(Qr),heading6:Re(Qr),contentSeparator:Re(Xs),list:Re(Xs),quote:Re(Xs),emphasis:Re(Xs),strong:Re(Xs),link:Re(Xs),monospace:Re(Xs),strikethrough:Re(Xs),inserted:Re(),deleted:Re(),changed:Re(),invalid:Re(),meta:Wu,documentMeta:Re(Wu),annotation:Re(Wu),processingInstruction:Re(Wu),definition:ns.defineModifier("definition"),constant:ns.defineModifier("constant"),function:ns.defineModifier("function"),standard:ns.defineModifier("standard"),local:ns.defineModifier("local"),special:ns.defineModifier("special")};for(let n in Me){let e=Me[n];e instanceof ns&&(e.name=n)}oA([{tag:Me.link,class:"tok-link"},{tag:Me.heading,class:"tok-heading"},{tag:Me.emphasis,class:"tok-emphasis"},{tag:Me.strong,class:"tok-strong"},{tag:Me.keyword,class:"tok-keyword"},{tag:Me.atom,class:"tok-atom"},{tag:Me.bool,class:"tok-bool"},{tag:Me.url,class:"tok-url"},{tag:Me.labelName,class:"tok-labelName"},{tag:Me.inserted,class:"tok-inserted"},{tag:Me.deleted,class:"tok-deleted"},{tag:Me.literal,class:"tok-literal"},{tag:Me.string,class:"tok-string"},{tag:Me.number,class:"tok-number"},{tag:[Me.regexp,Me.escape,Me.special(Me.string)],class:"tok-string2"},{tag:Me.variableName,class:"tok-variableName"},{tag:Me.local(Me.variableName),class:"tok-variableName tok-local"},{tag:Me.definition(Me.variableName),class:"tok-variableName tok-definition"},{tag:Me.special(Me.variableName),class:"tok-variableName2"},{tag:Me.definition(Me.propertyName),class:"tok-propertyName tok-definition"},{tag:Me.typeName,class:"tok-typeName"},{tag:Me.namespace,class:"tok-namespace"},{tag:Me.className,class:"tok-className"},{tag:Me.macroName,class:"tok-macroName"},{tag:Me.propertyName,class:"tok-propertyName"},{tag:Me.operator,class:"tok-operator"},{tag:Me.comment,class:"tok-comment"},{tag:Me.meta,class:"tok-meta"},{tag:Me.invalid,class:"tok-invalid"},{tag:Me.punctuation,class:"tok-punctuation"}]);var Cm;const ya=new Mt;function DW(n){return Ve.define({combine:n?e=>e.concat(n):void 0})}const LW=new Mt;class Ss{constructor(e,t,i=[],s=""){this.data=e,this.name=s,xt.prototype.hasOwnProperty("tree")||Object.defineProperty(xt.prototype,"tree",{get(){return bi(this)}}),this.parser=t,this.extension=[Ir.of(this),xt.languageData.of((o,r,l)=>{let a=Zv(o,r,l),c=a.type.prop(ya);if(!c)return[];let f=o.facet(c),u=a.type.prop(LW);if(u){let h=a.resolve(r-a.from,l);for(let d of u)if(d.test(h,o)){let g=o.facet(d.facet);return d.type=="replace"?g:g.concat(f)}}return f})].concat(i)}isActiveAt(e,t,i=-1){return Zv(e,t,i).type.prop(ya)==this.data}findRegions(e){let t=e.facet(Ir);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],s=(o,r)=>{if(o.prop(ya)==this.data){i.push({from:r,to:r+o.length});return}let l=o.prop(Mt.mounted);if(l){if(l.tree.prop(ya)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+r,to:a.to+r});else i.push({from:r,to:r+o.length});return}else if(l.overlay){let a=i.length;if(s(l.tree,l.overlay[0].from+r),i.length>a)return}}for(let a=0;a<o.children.length;a++){let c=o.children[a];c instanceof Dn&&s(c,o.positions[a]+r)}};return s(bi(e),0),i}get allowsNesting(){return!0}}Ss.setState=pt.define();function Zv(n,e,t){let i=n.facet(Ir),s=bi(n).topNode;if(!i||i.allowsNesting)for(let o=s;o;o=o.enter(e,t,qn.ExcludeBuffers))o.type.isTop&&(s=o);return s}class wd extends Ss{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=DW(e.languageData);return new wd(t,e.parser.configure({props:[ya.add(i=>i.isTop?t:void 0)]}),e.name)}configure(e,t){return new wd(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function bi(n){let e=n.field(Ss.state,!1);return e?e.tree:Dn.empty}class IW{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let Mc=null;class vd{constructor(e,t,i=[],s,o,r,l,a){this.parser=e,this.state=t,this.fragments=i,this.tree=s,this.treeLen=o,this.viewport=r,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new vd(e,t,[],Dn.empty,0,i,[],null)}startParse(){return this.parser.startParse(new IW(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=Dn.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let s=Date.now()+e;e=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let s=this.parse.advance();if(s)if(this.fragments=this.withoutTempSkipped(pl.addTree(s,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=s,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(pl.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Mc;Mc=this;try{return e()}finally{Mc=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=$v(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:s,treeLen:o,viewport:r,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((c,f,u,h)=>a.push({fromA:c,toA:f,fromB:u,toB:h})),i=pl.applyChanges(i,a),s=Dn.empty,o=0,r={from:e.mapPos(r.from,-1),to:e.mapPos(r.to,1)},this.skipped.length){l=[];for(let c of this.skipped){let f=e.mapPos(c.from,1),u=e.mapPos(c.to,-1);f<u&&l.push({from:f,to:u})}}}return new vd(this.parser,t,i,s,o,r,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:s,to:o}=this.skipped[i];s<e.to&&o>e.from&&(this.fragments=$v(this.fragments,s,o),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends nA{createParse(t,i,s){let o=s[0].from,r=s[s.length-1].to;return{parsedPos:o,advance(){let a=Mc;if(a){for(let c of s)a.tempSkipped.push(c);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=r,new Dn(Ni.none,[],[],r-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Mc}}function $v(n,e,t){return pl.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class Xa{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new Xa(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=vd.create(e.facet(Ir).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new Xa(i)}}Ss.state=zn.define({create:Xa.init,update(n,e){for(let t of e.effects)if(t.is(Ss.setState))return t.value;return e.startState.facet(Ir)!=e.state.facet(Ir)?Xa.init(e.state):n.apply(e)}});let rA=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(rA=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Mm=typeof navigator<"u"&&(!((Cm=navigator.scheduling)===null||Cm===void 0)&&Cm.isInputPending)?()=>navigator.scheduling.isInputPending():null,NW=kn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Ss.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Ss.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=rA(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:s}}=this.view,o=i.field(Ss.state);if(o.tree==o.context.tree&&o.context.isDone(s+1e5))return;let r=Date.now()+Math.min(this.chunkBudget,100,e&&!Mm?Math.max(25,e.timeRemaining()-5):1e9),l=o.context.treeLen<s&&i.doc.length>s+1e3,a=o.context.work(()=>Mm&&Mm()||Date.now()>r,s+(l?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:Ss.setState.of(new Xa(o.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Si(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Ir=Ve.define({combine(n){return n.length?n[0]:null},enables:n=>[Ss.state,NW,je.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class BW{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const jW=Ve.define(),Ag=Ve.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function Nr(n){let e=n.facet(Ag);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function Tf(n,e){let t="",i=n.tabSize,s=n.facet(Ag)[0];if(s=="	"){for(;e>=i;)t+="	",e-=i;s=" "}for(let o=0;o<e;o++)t+=s;return t}function sb(n,e){n instanceof xt&&(n=new Og(n));for(let i of n.state.facet(jW)){let s=i(n,e);if(s!==void 0)return s}let t=bi(n.state);return t.length>=e?FW(n,t,e):null}class Og{constructor(e,t={}){this.state=e,this.options=t,this.unit=Nr(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:o}=this.options;return s!=null&&s>=i.from&&s<=i.to?o&&s==e?{text:"",from:e}:(t<0?s<e:s<=e)?{text:i.text.slice(s-i.from),from:s}:{text:i.text.slice(0,s-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:s}=this.lineAt(e,t);return i.slice(e-s,Math.min(i.length,e+100-s))}column(e,t=1){let{text:i,from:s}=this.lineAt(e,t),o=this.countColumn(i,e-s),r=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return r>-1&&(o+=r-this.countColumn(i,i.search(/\S|$/))),o}countColumn(e,t=e.length){return cc(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:s}=this.lineAt(e,t),o=this.options.overrideIndentation;if(o){let r=o(s);if(r>-1)return r}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const lA=new Mt;function FW(n,e,t){let i=e.resolveStack(t),s=i.node.enterUnfinishedNodesBefore(t);if(s!=i.node){let o=[];for(let r=s;r!=i.node;r=r.parent)o.push(r);for(let r=o.length-1;r>=0;r--)i={node:o[r],next:i}}return aA(i,n,t)}function aA(n,e,t){for(let i=n;i;i=i.next){let s=VW(i.node);if(s)return s(ob.create(e,t,i))}return 0}function zW(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function VW(n){let e=n.type.prop(lA);if(e)return e;let t=n.firstChild,i;if(t&&(i=t.type.prop(Mt.closedBy))){let s=n.lastChild,o=s&&i.indexOf(s.name)>-1;return r=>UW(r,!0,1,void 0,o&&!zW(r)?s.from:void 0)}return n.parent==null?HW:null}function HW(){return 0}class ob extends Og{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new ob(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(WW(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return aA(this.context.next,this.base,this.pos)}}function WW(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function qW(n){let e=n.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let s=n.options.simulateBreak,o=n.state.doc.lineAt(t.from),r=s==null||s<=o.from?o.to:Math.min(o.to,s);for(let l=t.to;;){let a=e.childAfter(l);if(!a||a==i)return null;if(!a.type.isSkipped)return a.from<r?t:null;l=a.to}}function UW(n,e,t,i,s){let o=n.textAfter,r=o.match(/^\s*/)[0].length,l=s==n.pos+r,a=qW(n);return a?l?n.column(a.from):n.column(a.to):n.baseIndent+(l?0:n.unit*t)}function ek({except:n,units:e=1}={}){return t=>{let i=n&&n.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const JW=200;function KW(){return xt.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:i}=n.newSelection.main,s=t.lineAt(i);if(i>s.from+JW)return n;let o=t.sliceString(s.from,i);if(!e.some(c=>c.test(o)))return n;let{state:r}=n,l=-1,a=[];for(let{head:c}of r.selection.ranges){let f=r.doc.lineAt(c);if(f.from==l)continue;l=f.from;let u=sb(r,f.from);if(u==null)continue;let h=/^\s*/.exec(f.text)[0],d=Tf(r,u);h!=d&&a.push({from:f.from,to:f.from+h.length,insert:d})}return a.length?[n,{changes:a,sequential:!0}]:n})}const YW=Ve.define(),cA=new Mt;function XW(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}function GW(n,e,t){let i=bi(n);if(i.length<t)return null;let s=i.resolveStack(t,1),o=null;for(let r=s;r;r=r.next){let l=r.node;if(l.to<=t||l.from>t)continue;if(o&&l.from<e)break;let a=l.type.prop(cA);if(a&&(l.to<i.length-50||i.length==n.doc.length||!QW(l))){let c=a(l,n);c&&c.from<=t&&c.from>=e&&c.to>t&&(o=c)}}return o}function QW(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function kd(n,e,t){for(let i of n.facet(YW)){let s=i(n,e,t);if(s)return s}return GW(n,e,t)}function fA(n,e){let t=e.mapPos(n.from,1),i=e.mapPos(n.to,-1);return t>=i?void 0:{from:t,to:i}}const Pg=pt.define({map:fA}),su=pt.define({map:fA});function uA(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(n.lineBlockAt(t));return e}const Il=zn.define({create(){return rt.none},update(n,e){n=n.map(e.changes);for(let t of e.effects)if(t.is(Pg)&&!ZW(n,t.value.from,t.value.to)){let{preparePlaceholder:i}=e.state.facet(gA),s=i?rt.replace({widget:new oq(i(e.state,t.value))}):tk;n=n.update({add:[s.range(t.value.from,t.value.to)]})}else t.is(su)&&(n=n.update({filter:(i,s)=>t.value.from!=i||t.value.to!=s,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:i}=e.selection.main;n.between(i,i,(s,o)=>{s<i&&o>i&&(t=!0)}),t&&(n=n.update({filterFrom:i,filterTo:i,filter:(s,o)=>o<=i||s>=i}))}return n},provide:n=>je.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(i,s)=>{t.push(i,s)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let i=n[t++],s=n[t++];if(typeof i!="number"||typeof s!="number")throw new RangeError("Invalid JSON for fold state");e.push(tk.range(i,s))}return rt.set(e,!0)}});function Sd(n,e,t){var i;let s=null;return(i=n.field(Il,!1))===null||i===void 0||i.between(e,t,(o,r)=>{(!s||s.from>o)&&(s={from:o,to:r})}),s}function ZW(n,e,t){let i=!1;return n.between(e,e,(s,o)=>{s==e&&o==t&&(i=!0)}),i}function hA(n,e){return n.field(Il,!1)?e:e.concat(pt.appendConfig.of(mA()))}const $W=n=>{for(let e of uA(n)){let t=kd(n.state,e.from,e.to);if(t)return n.dispatch({effects:hA(n.state,[Pg.of(t),dA(n,t)])}),!0}return!1},eq=n=>{if(!n.state.field(Il,!1))return!1;let e=[];for(let t of uA(n)){let i=Sd(n.state,t.from,t.to);i&&e.push(su.of(i),dA(n,i,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function dA(n,e,t=!0){let i=n.state.doc.lineAt(e.from).number,s=n.state.doc.lineAt(e.to).number;return je.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${n.state.phrase("to")} ${s}.`)}const tq=n=>{let{state:e}=n,t=[];for(let i=0;i<e.doc.length;){let s=n.lineBlockAt(i),o=kd(e,s.from,s.to);o&&t.push(Pg.of(o)),i=(o?n.lineBlockAt(o.to):s).to+1}return t.length&&n.dispatch({effects:hA(n.state,t)}),!!t.length},nq=n=>{let e=n.state.field(Il,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(i,s)=>{t.push(su.of({from:i,to:s}))}),n.dispatch({effects:t}),!0},iq=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:$W},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:eq},{key:"Ctrl-Alt-[",run:tq},{key:"Ctrl-Alt-]",run:nq}],sq={placeholderDOM:null,preparePlaceholder:null,placeholderText:"â¦"},gA=Ve.define({combine(n){return ms(n,sq)}});function mA(n){return[Il,aq]}function pA(n,e){let{state:t}=n,i=t.facet(gA),s=r=>{let l=n.lineBlockAt(n.posAtDOM(r.target)),a=Sd(n.state,l.from,l.to);a&&n.dispatch({effects:su.of(a)}),r.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(n,s,e);let o=document.createElement("span");return o.textContent=i.placeholderText,o.setAttribute("aria-label",t.phrase("folded code")),o.title=t.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=s,o}const tk=rt.replace({widget:new class extends Vr{toDOM(n){return pA(n,null)}}});class oq extends Vr{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return pA(e,this.value)}}const rq={openText:"â",closedText:"âº",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class xm extends po{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function lq(n={}){let e=Object.assign(Object.assign({},rq),n),t=new xm(e,!0),i=new xm(e,!1),s=kn.fromClass(class{constructor(r){this.from=r.viewport.from,this.markers=this.buildMarkers(r)}update(r){(r.docChanged||r.viewportChanged||r.startState.facet(Ir)!=r.state.facet(Ir)||r.startState.field(Il,!1)!=r.state.field(Il,!1)||bi(r.startState)!=bi(r.state)||e.foldingChanged(r))&&(this.markers=this.buildMarkers(r.view))}buildMarkers(r){let l=new mo;for(let a of r.viewportLineBlocks){let c=Sd(r.state,a.from,a.to)?i:kd(r.state,a.from,a.to)?t:null;c&&l.add(a.from,a.from,c)}return l.finish()}}),{domEventHandlers:o}=e;return[s,Xx({class:"cm-foldGutter",markers(r){var l;return((l=r.plugin(s))===null||l===void 0?void 0:l.markers)||Tt.empty},initialSpacer(){return new xm(e,!1)},domEventHandlers:Object.assign(Object.assign({},o),{click:(r,l,a)=>{if(o.click&&o.click(r,l,a))return!0;let c=Sd(r.state,l.from,l.to);if(c)return r.dispatch({effects:su.of(c)}),!0;let f=kd(r.state,l.from,l.to);return f?(r.dispatch({effects:Pg.of(f)}),!0):!1}})}),mA()]}const aq=je.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class ou{constructor(e,t){this.specs=e;let i;function s(l){let a=Er.newName();return(i||(i=Object.create(null)))["."+a]=l,a}const o=typeof t.all=="string"?t.all:t.all?s(t.all):void 0,r=t.scope;this.scope=r instanceof Ss?l=>l.prop(ya)==r.data:r?l=>l==r:void 0,this.style=oA(e.map(l=>({tag:l.tag,class:l.class||s(Object.assign({},l,{tag:null}))})),{all:o}).style,this.module=i?new Er(i):null,this.themeType=t.themeType}static define(e,t){return new ou(e,t||{})}}const p1=Ve.define(),bA=Ve.define({combine(n){return n.length?[n[0]]:null}});function Am(n){let e=n.facet(p1);return e.length?e:n.facet(bA)}function yA(n,e){let t=[fq],i;return n instanceof ou&&(n.module&&t.push(je.styleModule.of(n.module)),i=n.themeType),e!=null&&e.fallback?t.push(bA.of(n)):i?t.push(p1.computeN([je.darkTheme],s=>s.facet(je.darkTheme)==(i=="dark")?[n]:[])):t.push(p1.of(n)),t}class cq{constructor(e){this.markCache=Object.create(null),this.tree=bi(e.state),this.decorations=this.buildDeco(e,Am(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=bi(e.state),i=Am(e.state),s=i!=Am(e.startState),{viewport:o}=e.view,r=e.changes.mapPos(this.decoratedTo,1);t.length<o.to&&!s&&t.type==this.tree.type&&r>=o.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=r):(t!=this.tree||e.viewportChanged||s)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=o.to)}buildDeco(e,t){if(!t||!this.tree.length)return rt.none;let i=new mo;for(let{from:s,to:o}of e.visibleRanges)TW(this.tree,t,(r,l,a)=>{i.add(r,l,this.markCache[a]||(this.markCache[a]=rt.mark({class:a})))},s,o);return i.finish()}}const fq=Wl.high(kn.fromClass(cq,{decorations:n=>n.decorations})),uq=ou.define([{tag:Me.meta,color:"#404740"},{tag:Me.link,textDecoration:"underline"},{tag:Me.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Me.emphasis,fontStyle:"italic"},{tag:Me.strong,fontWeight:"bold"},{tag:Me.strikethrough,textDecoration:"line-through"},{tag:Me.keyword,color:"#708"},{tag:[Me.atom,Me.bool,Me.url,Me.contentSeparator,Me.labelName],color:"#219"},{tag:[Me.literal,Me.inserted],color:"#164"},{tag:[Me.string,Me.deleted],color:"#a11"},{tag:[Me.regexp,Me.escape,Me.special(Me.string)],color:"#e40"},{tag:Me.definition(Me.variableName),color:"#00f"},{tag:Me.local(Me.variableName),color:"#30a"},{tag:[Me.typeName,Me.namespace],color:"#085"},{tag:Me.className,color:"#167"},{tag:[Me.special(Me.variableName),Me.macroName],color:"#256"},{tag:Me.definition(Me.propertyName),color:"#00c"},{tag:Me.comment,color:"#940"},{tag:Me.invalid,color:"#f00"}]),hq=je.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),_A=1e4,wA="()[]{}",vA=Ve.define({combine(n){return ms(n,{afterCursor:!0,brackets:wA,maxScanDistance:_A,renderMatch:mq})}}),dq=rt.mark({class:"cm-matchingBracket"}),gq=rt.mark({class:"cm-nonmatchingBracket"});function mq(n){let e=[],t=n.matched?dq:gq;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const pq=zn.define({create(){return rt.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],i=e.state.facet(vA);for(let s of e.state.selection.ranges){if(!s.empty)continue;let o=to(e.state,s.head,-1,i)||s.head>0&&to(e.state,s.head-1,1,i)||i.afterCursor&&(to(e.state,s.head,1,i)||s.head<e.state.doc.length&&to(e.state,s.head+1,-1,i));o&&(t=t.concat(i.renderMatch(o,e.state)))}return rt.set(t,!0)},provide:n=>je.decorations.from(n)}),bq=[pq,hq];function yq(n={}){return[vA.of(n),bq]}const _q=new Mt;function b1(n,e,t){let i=n.prop(e<0?Mt.openedBy:Mt.closedBy);if(i)return i;if(n.name.length==1){let s=t.indexOf(n.name);if(s>-1&&s%2==(e<0?1:0))return[t[s+e]]}return null}function y1(n){let e=n.type.prop(_q);return e?e(n.node):n}function to(n,e,t,i={}){let s=i.maxScanDistance||_A,o=i.brackets||wA,r=bi(n),l=r.resolveInner(e,t);for(let a=l;a;a=a.parent){let c=b1(a.type,t,o);if(c&&a.from<a.to){let f=y1(a);if(f&&(t>0?e>=f.from&&e<f.to:e>f.from&&e<=f.to))return wq(n,e,t,a,f,c,o)}}return vq(n,e,t,r,l.type,s,o)}function wq(n,e,t,i,s,o,r){let l=i.parent,a={from:s.from,to:s.to},c=0,f=l==null?void 0:l.cursor();if(f&&(t<0?f.childBefore(i.from):f.childAfter(i.to)))do if(t<0?f.to<=i.from:f.from>=i.to){if(c==0&&o.indexOf(f.type.name)>-1&&f.from<f.to){let u=y1(f);return{start:a,end:u?{from:u.from,to:u.to}:void 0,matched:!0}}else if(b1(f.type,t,r))c++;else if(b1(f.type,-t,r)){if(c==0){let u=y1(f);return{start:a,end:u&&u.from<u.to?{from:u.from,to:u.to}:void 0,matched:!1}}c--}}while(t<0?f.prevSibling():f.nextSibling());return{start:a,matched:!1}}function vq(n,e,t,i,s,o,r){let l=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),a=r.indexOf(l);if(a<0||a%2==0!=t>0)return null;let c={from:t<0?e-1:e,to:t>0?e+1:e},f=n.doc.iterRange(e,t>0?n.doc.length:0),u=0;for(let h=0;!f.next().done&&h<=o;){let d=f.value;t<0&&(h+=d.length);let g=e+h*t;for(let m=t>0?0:d.length-1,p=t>0?d.length:-1;m!=p;m+=t){let b=r.indexOf(d[m]);if(!(b<0||i.resolveInner(g+m,1).type!=s))if(b%2==0==t>0)u++;else{if(u==1)return{start:c,end:{from:g+m,to:g+m+1},matched:b>>1==a>>1};u--}}t>0&&(h+=d.length)}return f.done?{start:c,matched:!1}:null}const kq=Object.create(null),nk=[Ni.none],ik=[],sk=Object.create(null),Sq=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Sq[n]=Cq(kq,e);function Om(n,e){ik.indexOf(n)>-1||(ik.push(n),console.warn(e))}function Cq(n,e){let t=[];for(let l of e.split(" ")){let a=[];for(let c of l.split(".")){let f=n[c]||Me[c];f?typeof f=="function"?a.length?a=a.map(f):Om(c,`Modifier ${c} used at start of tag`):a.length?Om(c,`Tag ${c} used as modifier`):a=Array.isArray(f)?f:[f]:Om(c,`Unknown highlighting tag ${c}`)}for(let c of a)t.push(c)}if(!t.length)return 0;let i=e.replace(/ /g,"_"),s=i+" "+t.map(l=>l.id),o=sk[s];if(o)return o.id;let r=sk[s]=Ni.define({id:nk.length,name:i,props:[iA({[i]:t})]});return nk.push(r),r.id}un.RTL,un.LTR;const Mq=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),i=lb(n.state,t.from);return i.line?xq(n):i.block?Oq(n):!1};function rb(n,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let s=n(e,t);return s?(i(t.update(s)),!0):!1}}const xq=rb(Eq,0),Aq=rb(kA,0),Oq=rb((n,e)=>kA(n,e,Tq(e)),0);function lb(n,e){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const xc=50;function Pq(n,{open:e,close:t},i,s){let o=n.sliceDoc(i-xc,i),r=n.sliceDoc(s,s+xc),l=/\s*$/.exec(o)[0].length,a=/^\s*/.exec(r)[0].length,c=o.length-l;if(o.slice(c-e.length,c)==e&&r.slice(a,a+t.length)==t)return{open:{pos:i-l,margin:l&&1},close:{pos:s+a,margin:a&&1}};let f,u;s-i<=2*xc?f=u=n.sliceDoc(i,s):(f=n.sliceDoc(i,i+xc),u=n.sliceDoc(s-xc,s));let h=/^\s*/.exec(f)[0].length,d=/\s*$/.exec(u)[0].length,g=u.length-d-t.length;return f.slice(h,h+e.length)==e&&u.slice(g,g+t.length)==t?{open:{pos:i+h+e.length,margin:/\s/.test(f.charAt(h+e.length))?1:0},close:{pos:s-d-t.length,margin:/\s/.test(u.charAt(g-1))?1:0}}:null}function Tq(n){let e=[];for(let t of n.selection.ranges){let i=n.doc.lineAt(t.from),s=t.to<=i.to?i:n.doc.lineAt(t.to),o=e.length-1;o>=0&&e[o].to>i.from?e[o].to=s.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:s.to})}return e}function kA(n,e,t=e.selection.ranges){let i=t.map(o=>lb(e,o.from).block);if(!i.every(o=>o))return null;let s=t.map((o,r)=>Pq(e,i[r],o.from,o.to));if(n!=2&&!s.every(o=>o))return{changes:e.changes(t.map((o,r)=>s[r]?[]:[{from:o.from,insert:i[r].open+" "},{from:o.to,insert:" "+i[r].close}]))};if(n!=1&&s.some(o=>o)){let o=[];for(let r=0,l;r<s.length;r++)if(l=s[r]){let a=i[r],{open:c,close:f}=l;o.push({from:c.pos-a.open.length,to:c.pos+c.margin},{from:f.pos-f.margin,to:f.pos+a.close.length})}return{changes:o}}return null}function Eq(n,e,t=e.selection.ranges){let i=[],s=-1;for(let{from:o,to:r}of t){let l=i.length,a=1e9,c=lb(e,o).line;if(c){for(let f=o;f<=r;){let u=e.doc.lineAt(f);if(u.from>s&&(o==r||r>u.from)){s=u.from;let h=/^\s*/.exec(u.text)[0].length,d=h==u.length,g=u.text.slice(h,h+c.length)==c?h:-1;h<u.text.length&&h<a&&(a=h),i.push({line:u,comment:g,token:c,indent:h,empty:d,single:!1})}f=u.to+1}if(a<1e9)for(let f=l;f<i.length;f++)i[f].indent<i[f].line.text.length&&(i[f].indent=a);i.length==l+1&&(i[l].single=!0)}}if(n!=2&&i.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:l,token:a,indent:c,empty:f,single:u}of i)(u||!f)&&o.push({from:l.from+c,insert:a+" "});let r=e.changes(o);return{changes:r,selection:e.selection.map(r,1)}}else if(n!=1&&i.some(o=>o.comment>=0)){let o=[];for(let{line:r,comment:l,token:a}of i)if(l>=0){let c=r.from+l,f=c+a.length;r.text[f-r.from]==" "&&f++,o.push({from:c,to:f})}return{changes:o}}return null}const _1=Qo.define(),Rq=Qo.define(),Dq=Ve.define(),SA=Ve.define({combine(n){return ms(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,s)=>e(i,s)||t(i,s)})}}),ab=zn.define({create(){return no.empty},update(n,e){let t=e.state.facet(SA),i=e.annotation(_1);if(i){let a=Di.fromTransaction(e,i.selection),c=i.side,f=c==0?n.undone:n.done;return a?f=Md(f,f.length,t.minDepth,a):f=xA(f,e.startState.selection),new no(c==0?i.rest:f,c==0?f:i.rest)}let s=e.annotation(Rq);if((s=="full"||s=="before")&&(n=n.isolate()),e.annotation(Nn.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let o=Di.fromTransaction(e),r=e.annotation(Nn.time),l=e.annotation(Nn.userEvent);return o?n=n.addChanges(o,r,l,t,e):e.selection&&(n=n.addSelection(e.startState.selection,r,l,t.newGroupDelay)),(s=="full"||s=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new no(n.done.map(Di.fromJSON),n.undone.map(Di.fromJSON))}});function Lq(n={}){return[ab,SA.of(n),je.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?cb:e.inputType=="historyRedo"?Cd:null;return i?(e.preventDefault(),i(t)):!1}})]}function Tg(n,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let s=t.field(ab,!1);if(!s)return!1;let o=s.pop(n,t,e);return o?(i(o),!0):!1}}const cb=Tg(0,!1),Cd=Tg(1,!1),Iq=Tg(0,!0),Nq=Tg(1,!0);function CA(n){return function(e){let t=e.field(ab,!1);if(!t)return 0;let i=n==0?t.done:t.undone;return i.length-(i.length&&!i[0].changes?1:0)}}const Bq=CA(0),jq=CA(1);class Di{constructor(e,t,i,s,o){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=s,this.selectionsAfter=o}setSelAfter(e){return new Di(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(s=>s.toJSON())}}static fromJSON(e){return new Di(e.changes&&In.fromJSON(e.changes),[],e.mapped&&lo.fromJSON(e.mapped),e.startSelection&&_e.fromJSON(e.startSelection),e.selectionsAfter.map(_e.fromJSON))}static fromTransaction(e,t){let i=os;for(let s of e.startState.facet(Dq)){let o=s(e);o.length&&(i=i.concat(o))}return!i.length&&e.changes.empty?null:new Di(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,os)}static selection(e){return new Di(void 0,os,void 0,void 0,e)}}function Md(n,e,t,i){let s=e+1>t+20?e-t-1:0,o=n.slice(s,e);return o.push(i),o}function Fq(n,e){let t=[],i=!1;return n.iterChangedRanges((s,o)=>t.push(s,o)),e.iterChangedRanges((s,o,r,l)=>{for(let a=0;a<t.length;){let c=t[a++],f=t[a++];l>=c&&r<=f&&(i=!0)}}),i}function zq(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function MA(n,e){return n.length?e.length?n.concat(e):n:e}const os=[],Vq=200;function xA(n,e){if(n.length){let t=n[n.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-Vq));return i.length&&i[i.length-1].eq(e)?n:(i.push(e),Md(n,n.length-1,1e9,t.setSelAfter(i)))}else return[Di.selection([e])]}function Hq(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function Pm(n,e){if(!n.length)return n;let t=n.length,i=os;for(;t;){let s=Wq(n[t-1],e,i);if(s.changes&&!s.changes.empty||s.effects.length){let o=n.slice(0,t);return o[t-1]=s,o}else e=s.mapped,t--,i=s.selectionsAfter}return i.length?[Di.selection(i)]:os}function Wq(n,e,t){let i=MA(n.selectionsAfter.length?n.selectionsAfter.map(l=>l.map(e)):os,t);if(!n.changes)return Di.selection(i);let s=n.changes.map(e),o=e.mapDesc(n.changes,!0),r=n.mapped?n.mapped.composeDesc(o):o;return new Di(s,pt.mapEffects(n.effects,e),r,n.startSelection.map(o),i)}const qq=/^(input\.type|delete)($|\.)/;class no{constructor(e,t,i=0,s=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=s}isolate(){return this.prevTime?new no(this.done,this.undone):this}addChanges(e,t,i,s,o){let r=this.done,l=r[r.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!i||qq.test(i))&&(!l.selectionsAfter.length&&t-this.prevTime<s.newGroupDelay&&s.joinToEvent(o,Fq(l.changes,e.changes))||i=="input.type.compose")?r=Md(r,r.length-1,s.minDepth,new Di(e.changes.compose(l.changes),MA(pt.mapEffects(e.effects,l.changes),l.effects),l.mapped,l.startSelection,os)):r=Md(r,r.length,s.minDepth,e),new no(r,os,t,i)}addSelection(e,t,i,s){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:os;return o.length>0&&t-this.prevTime<s&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&zq(o[o.length-1],e)?this:new no(xA(this.done,e),this.undone,t,i)}addMapping(e){return new no(Pm(this.done,e),Pm(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let s=e==0?this.done:this.undone;if(s.length==0)return null;let o=s[s.length-1],r=o.selectionsAfter[0]||t.selection;if(i&&o.selectionsAfter.length)return t.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:_1.of({side:e,rest:Hq(s),selection:r}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let l=s.length==1?os:s.slice(0,s.length-1);return o.mapped&&(l=Pm(l,o.mapped)),t.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:_1.of({side:e,rest:l,selection:r}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}no.empty=new no(os,os);const Uq=[{key:"Mod-z",run:cb,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Cd,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Cd,preventDefault:!0},{key:"Mod-u",run:Iq,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Nq,preventDefault:!0}];function fc(n,e){return _e.create(n.ranges.map(e),n.mainIndex)}function bo(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Bs({state:n,dispatch:e},t){let i=fc(n.selection,t);return i.eq(n.selection,!0)?!1:(e(bo(n,i)),!0)}function Eg(n,e){return _e.cursor(e?n.to:n.from)}function AA(n,e){return Bs(n,t=>t.empty?n.moveByChar(t,e):Eg(t,e))}function _i(n){return n.textDirectionAt(n.state.selection.main.head)==un.LTR}const OA=n=>AA(n,!_i(n)),PA=n=>AA(n,_i(n));function TA(n,e){return Bs(n,t=>t.empty?n.moveByGroup(t,e):Eg(t,e))}const Jq=n=>TA(n,!_i(n)),Kq=n=>TA(n,_i(n));function Yq(n,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function Rg(n,e,t){let i=bi(n).resolveInner(e.head),s=t?Mt.closedBy:Mt.openedBy;for(let a=e.head;;){let c=t?i.childAfter(a):i.childBefore(a);if(!c)break;Yq(n,c,s)?i=c:a=t?c.to:c.from}let o=i.type.prop(s),r,l;return o&&(r=t?to(n,i.from,1):to(n,i.to,-1))&&r.matched?l=t?r.end.to:r.end.from:l=t?i.to:i.from,_e.cursor(l,t?-1:1)}const Xq=n=>Bs(n,e=>Rg(n.state,e,!_i(n))),Gq=n=>Bs(n,e=>Rg(n.state,e,_i(n)));function EA(n,e){return Bs(n,t=>{if(!t.empty)return Eg(t,e);let i=n.moveVertically(t,e);return i.head!=t.head?i:n.moveToLineBoundary(t,e)})}const RA=n=>EA(n,!1),DA=n=>EA(n,!0);function LA(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,i=0,s;if(e){for(let o of n.state.facet(je.scrollMargins)){let r=o(n);r!=null&&r.top&&(t=Math.max(r==null?void 0:r.top,t)),r!=null&&r.bottom&&(i=Math.max(r==null?void 0:r.bottom,i))}s=n.scrollDOM.clientHeight-t-i}else s=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(n.defaultLineHeight,s-5)}}function IA(n,e){let t=LA(n),{state:i}=n,s=fc(i.selection,r=>r.empty?n.moveVertically(r,e,t.height):Eg(r,e));if(s.eq(i.selection))return!1;let o;if(t.selfScroll){let r=n.coordsAtPos(i.selection.main.head),l=n.scrollDOM.getBoundingClientRect(),a=l.top+t.marginTop,c=l.bottom-t.marginBottom;r&&r.top>a&&r.bottom<c&&(o=je.scrollIntoView(s.main.head,{y:"start",yMargin:r.top-a}))}return n.dispatch(bo(i,s),{effects:o}),!0}const ok=n=>IA(n,!1),w1=n=>IA(n,!0);function Hr(n,e,t){let i=n.lineBlockAt(e.head),s=n.moveToLineBoundary(e,t);if(s.head==e.head&&s.head!=(t?i.to:i.from)&&(s=n.moveToLineBoundary(e,t,!1)),!t&&s.head==i.from&&i.length){let o=/^\s*/.exec(n.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;o&&e.head!=i.from+o&&(s=_e.cursor(i.from+o))}return s}const Qq=n=>Bs(n,e=>Hr(n,e,!0)),Zq=n=>Bs(n,e=>Hr(n,e,!1)),$q=n=>Bs(n,e=>Hr(n,e,!_i(n))),eU=n=>Bs(n,e=>Hr(n,e,_i(n))),tU=n=>Bs(n,e=>_e.cursor(n.lineBlockAt(e.head).from,1)),nU=n=>Bs(n,e=>_e.cursor(n.lineBlockAt(e.head).to,-1));function iU(n,e,t){let i=!1,s=fc(n.selection,o=>{let r=to(n,o.head,-1)||to(n,o.head,1)||o.head>0&&to(n,o.head-1,1)||o.head<n.doc.length&&to(n,o.head+1,-1);if(!r||!r.end)return o;i=!0;let l=r.start.from==o.head?r.end.to:r.end.from;return _e.cursor(l)});return i?(e(bo(n,s)),!0):!1}const sU=({state:n,dispatch:e})=>iU(n,e);function ps(n,e){let t=fc(n.state.selection,i=>{let s=e(i);return _e.range(i.anchor,s.head,s.goalColumn,s.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(bo(n.state,t)),!0)}function NA(n,e){return ps(n,t=>n.moveByChar(t,e))}const BA=n=>NA(n,!_i(n)),jA=n=>NA(n,_i(n));function FA(n,e){return ps(n,t=>n.moveByGroup(t,e))}const oU=n=>FA(n,!_i(n)),rU=n=>FA(n,_i(n)),lU=n=>ps(n,e=>Rg(n.state,e,!_i(n))),aU=n=>ps(n,e=>Rg(n.state,e,_i(n)));function zA(n,e){return ps(n,t=>n.moveVertically(t,e))}const VA=n=>zA(n,!1),HA=n=>zA(n,!0);function WA(n,e){return ps(n,t=>n.moveVertically(t,e,LA(n).height))}const rk=n=>WA(n,!1),lk=n=>WA(n,!0),cU=n=>ps(n,e=>Hr(n,e,!0)),fU=n=>ps(n,e=>Hr(n,e,!1)),uU=n=>ps(n,e=>Hr(n,e,!_i(n))),hU=n=>ps(n,e=>Hr(n,e,_i(n))),dU=n=>ps(n,e=>_e.cursor(n.lineBlockAt(e.head).from)),gU=n=>ps(n,e=>_e.cursor(n.lineBlockAt(e.head).to)),ak=({state:n,dispatch:e})=>(e(bo(n,{anchor:0})),!0),ck=({state:n,dispatch:e})=>(e(bo(n,{anchor:n.doc.length})),!0),fk=({state:n,dispatch:e})=>(e(bo(n,{anchor:n.selection.main.anchor,head:0})),!0),uk=({state:n,dispatch:e})=>(e(bo(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),mU=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),pU=({state:n,dispatch:e})=>{let t=Dg(n).map(({from:i,to:s})=>_e.range(i,Math.min(s+1,n.doc.length)));return e(n.update({selection:_e.create(t),userEvent:"select"})),!0},bU=({state:n,dispatch:e})=>{let t=fc(n.selection,i=>{var s;let o=bi(n).resolveStack(i.from,1);for(let r=o;r;r=r.next){let{node:l}=r;if((l.from<i.from&&l.to>=i.to||l.to>i.to&&l.from<=i.from)&&(!((s=l.parent)===null||s===void 0)&&s.parent))return _e.range(l.to,l.from)}return i});return e(bo(n,t)),!0},yU=({state:n,dispatch:e})=>{let t=n.selection,i=null;return t.ranges.length>1?i=_e.create([t.main]):t.main.empty||(i=_e.create([_e.cursor(t.main.head)])),i?(e(bo(n,i)),!0):!1};function ru(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:i}=n,s=i.changeByRange(o=>{let{from:r,to:l}=o;if(r==l){let a=e(o);a<r?(t="delete.backward",a=qu(n,a,!1)):a>r&&(t="delete.forward",a=qu(n,a,!0)),r=Math.min(r,a),l=Math.max(l,a)}else r=qu(n,r,!1),l=qu(n,l,!0);return r==l?{range:o}:{changes:{from:r,to:l},range:_e.cursor(r,r<o.head?-1:1)}});return s.changes.empty?!1:(n.dispatch(i.update(s,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?je.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function qu(n,e,t){if(n instanceof je)for(let i of n.state.facet(je.atomicRanges).map(s=>s(n)))i.between(e,e,(s,o)=>{s<e&&o>e&&(e=t?o:s)});return e}const qA=(n,e,t)=>ru(n,i=>{let s=i.from,{state:o}=n,r=o.doc.lineAt(s),l,a;if(t&&!e&&s>r.from&&s<r.from+200&&!/[^ \t]/.test(l=r.text.slice(0,s-r.from))){if(l[l.length-1]=="	")return s-1;let c=cc(l,o.tabSize),f=c%Nr(o)||Nr(o);for(let u=0;u<f&&l[l.length-1-u]==" ";u++)s--;a=s}else a=ei(r.text,s-r.from,e,e)+r.from,a==s&&r.number!=(e?o.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(r.text.slice(a-r.from,s-r.from))&&(a=ei(r.text,a-r.from,!1,!1)+r.from);return a}),v1=n=>qA(n,!1,!0),UA=n=>qA(n,!0,!1),JA=(n,e)=>ru(n,t=>{let i=t.head,{state:s}=n,o=s.doc.lineAt(i),r=s.charCategorizer(i);for(let l=null;;){if(i==(e?o.to:o.from)){i==t.head&&o.number!=(e?s.doc.lines:1)&&(i+=e?1:-1);break}let a=ei(o.text,i-o.from,e)+o.from,c=o.text.slice(Math.min(i,a)-o.from,Math.max(i,a)-o.from),f=r(c);if(l!=null&&f!=l)break;(c!=" "||i!=t.head)&&(l=f),i=a}return i}),KA=n=>JA(n,!1),_U=n=>JA(n,!0),wU=n=>ru(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),vU=n=>ru(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),kU=n=>ru(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),SU=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:Bt.of(["",""])},range:_e.cursor(i.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},CU=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>{if(!i.empty||i.from==0||i.from==n.doc.length)return{range:i};let s=i.from,o=n.doc.lineAt(s),r=s==o.from?s-1:ei(o.text,s-o.from,!1)+o.from,l=s==o.to?s+1:ei(o.text,s-o.from,!0)+o.from;return{changes:{from:r,to:l,insert:n.doc.slice(s,l).append(n.doc.slice(r,s))},range:_e.cursor(l)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Dg(n){let e=[],t=-1;for(let i of n.selection.ranges){let s=n.doc.lineAt(i.from),o=n.doc.lineAt(i.to);if(!i.empty&&i.to==o.from&&(o=n.doc.lineAt(i.to-1)),t>=s.number){let r=e[e.length-1];r.to=o.to,r.ranges.push(i)}else e.push({from:s.from,to:o.to,ranges:[i]});t=o.number+1}return e}function YA(n,e,t){if(n.readOnly)return!1;let i=[],s=[];for(let o of Dg(n)){if(t?o.to==n.doc.length:o.from==0)continue;let r=n.doc.lineAt(t?o.to+1:o.from-1),l=r.length+1;if(t){i.push({from:o.to,to:r.to},{from:o.from,insert:r.text+n.lineBreak});for(let a of o.ranges)s.push(_e.range(Math.min(n.doc.length,a.anchor+l),Math.min(n.doc.length,a.head+l)))}else{i.push({from:r.from,to:o.from},{from:o.to,insert:n.lineBreak+r.text});for(let a of o.ranges)s.push(_e.range(a.anchor-l,a.head-l))}}return i.length?(e(n.update({changes:i,scrollIntoView:!0,selection:_e.create(s,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const MU=({state:n,dispatch:e})=>YA(n,e,!1),xU=({state:n,dispatch:e})=>YA(n,e,!0);function XA(n,e,t){if(n.readOnly)return!1;let i=[];for(let s of Dg(n))t?i.push({from:s.from,insert:n.doc.slice(s.from,s.to)+n.lineBreak}):i.push({from:s.to,insert:n.lineBreak+n.doc.slice(s.from,s.to)});return e(n.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const AU=({state:n,dispatch:e})=>XA(n,e,!1),OU=({state:n,dispatch:e})=>XA(n,e,!0),PU=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(Dg(e).map(({from:s,to:o})=>(s>0?s--:o<e.doc.length&&o++,{from:s,to:o}))),i=fc(e.selection,s=>{let o;if(n.lineWrapping){let r=n.lineBlockAt(s.head),l=n.coordsAtPos(s.head,s.assoc||1);l&&(o=r.bottom+n.documentTop-l.bottom+n.defaultLineHeight/2)}return n.moveVertically(s,!0,o)}).map(t);return n.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function TU(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=bi(n).resolveInner(e),i=t.childBefore(e),s=t.childAfter(e),o;return i&&s&&i.to<=e&&s.from>=e&&(o=i.type.prop(Mt.closedBy))&&o.indexOf(s.name)>-1&&n.doc.lineAt(i.to).from==n.doc.lineAt(s.from).from&&!/\S/.test(n.sliceDoc(i.to,s.from))?{from:i.to,to:s.from}:null}const EU=GA(!1),RU=GA(!0);function GA(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(s=>{let{from:o,to:r}=s,l=e.doc.lineAt(o),a=!n&&o==r&&TU(e,o);n&&(o=r=(r<=l.to?l:e.doc.lineAt(r)).to);let c=new Og(e,{simulateBreak:o,simulateDoubleBreak:!!a}),f=sb(c,o);for(f==null&&(f=cc(/^\s*/.exec(e.doc.lineAt(o).text)[0],e.tabSize));r<l.to&&/\s/.test(l.text[r-l.from]);)r++;a?{from:o,to:r}=a:o>l.from&&o<l.from+100&&!/\S/.test(l.text.slice(0,o))&&(o=l.from);let u=["",Tf(e,f)];return a&&u.push(Tf(e,c.lineIndent(l.from,-1))),{changes:{from:o,to:r,insert:Bt.of(u)},range:_e.cursor(o+1+u[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function fb(n,e){let t=-1;return n.changeByRange(i=>{let s=[];for(let r=i.from;r<=i.to;){let l=n.doc.lineAt(r);l.number>t&&(i.empty||i.to>l.from)&&(e(l,s,i),t=l.number),r=l.to+1}let o=n.changes(s);return{changes:s,range:_e.range(o.mapPos(i.anchor,1),o.mapPos(i.head,1))}})}const DU=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),i=new Og(n,{overrideIndentation:o=>{let r=t[o];return r??-1}}),s=fb(n,(o,r,l)=>{let a=sb(i,o.from);if(a==null)return;/\S/.test(o.text)||(a=0);let c=/^\s*/.exec(o.text)[0],f=Tf(n,a);(c!=f||l.from<o.from+c.length)&&(t[o.from]=a,r.push({from:o.from,to:o.from+c.length,insert:f}))});return s.changes.empty||e(n.update(s,{userEvent:"indent"})),!0},QA=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(fb(n,(t,i)=>{i.push({from:t.from,insert:n.facet(Ag)})}),{userEvent:"input.indent"})),!0),ZA=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(fb(n,(t,i)=>{let s=/^\s*/.exec(t.text)[0];if(!s)return;let o=cc(s,n.tabSize),r=0,l=Tf(n,Math.max(0,o-Nr(n)));for(;r<s.length&&r<l.length&&s.charCodeAt(r)==l.charCodeAt(r);)r++;i.push({from:t.from+r,to:t.from+s.length,insert:l.slice(r)})}),{userEvent:"delete.dedent"})),!0),LU=n=>(n.setTabFocusMode(),!0),IU=[{key:"Ctrl-b",run:OA,shift:BA,preventDefault:!0},{key:"Ctrl-f",run:PA,shift:jA},{key:"Ctrl-p",run:RA,shift:VA},{key:"Ctrl-n",run:DA,shift:HA},{key:"Ctrl-a",run:tU,shift:dU},{key:"Ctrl-e",run:nU,shift:gU},{key:"Ctrl-d",run:UA},{key:"Ctrl-h",run:v1},{key:"Ctrl-k",run:wU},{key:"Ctrl-Alt-h",run:KA},{key:"Ctrl-o",run:SU},{key:"Ctrl-t",run:CU},{key:"Ctrl-v",run:w1}],NU=[{key:"ArrowLeft",run:OA,shift:BA,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Jq,shift:oU,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:$q,shift:uU,preventDefault:!0},{key:"ArrowRight",run:PA,shift:jA,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Kq,shift:rU,preventDefault:!0},{mac:"Cmd-ArrowRight",run:eU,shift:hU,preventDefault:!0},{key:"ArrowUp",run:RA,shift:VA,preventDefault:!0},{mac:"Cmd-ArrowUp",run:ak,shift:fk},{mac:"Ctrl-ArrowUp",run:ok,shift:rk},{key:"ArrowDown",run:DA,shift:HA,preventDefault:!0},{mac:"Cmd-ArrowDown",run:ck,shift:uk},{mac:"Ctrl-ArrowDown",run:w1,shift:lk},{key:"PageUp",run:ok,shift:rk},{key:"PageDown",run:w1,shift:lk},{key:"Home",run:Zq,shift:fU,preventDefault:!0},{key:"Mod-Home",run:ak,shift:fk},{key:"End",run:Qq,shift:cU,preventDefault:!0},{key:"Mod-End",run:ck,shift:uk},{key:"Enter",run:EU},{key:"Mod-a",run:mU},{key:"Backspace",run:v1,shift:v1},{key:"Delete",run:UA},{key:"Mod-Backspace",mac:"Alt-Backspace",run:KA},{key:"Mod-Delete",mac:"Alt-Delete",run:_U},{mac:"Mod-Backspace",run:vU},{mac:"Mod-Delete",run:kU}].concat(IU.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),BU=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Xq,shift:lU},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Gq,shift:aU},{key:"Alt-ArrowUp",run:MU},{key:"Shift-Alt-ArrowUp",run:AU},{key:"Alt-ArrowDown",run:xU},{key:"Shift-Alt-ArrowDown",run:OU},{key:"Escape",run:yU},{key:"Mod-Enter",run:RU},{key:"Alt-l",mac:"Ctrl-l",run:pU},{key:"Mod-i",run:bU,preventDefault:!0},{key:"Mod-[",run:ZA},{key:"Mod-]",run:QA},{key:"Mod-Alt-\\",run:DU},{key:"Shift-Mod-k",run:PU},{key:"Shift-Mod-\\",run:sU},{key:"Mod-/",run:Mq},{key:"Alt-A",run:Aq},{key:"Ctrl-m",mac:"Shift-Alt-m",run:LU}].concat(NU),jU={key:"Tab",run:QA,shift:ZA};function on(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var s=t[i];typeof s=="string"?n.setAttribute(i,s):s!=null&&(n[i]=s)}e++}for(;e<arguments.length;e++)$A(n,arguments[e]);return n}function $A(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)$A(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}class FU{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class ll{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let s=e,o=i.facet(io).markerFilter;o&&(s=o(s,i));let r=rt.set(s.map(l=>l.from==l.to||l.from==l.to-1&&i.doc.lineAt(l.from).to==l.from?rt.widget({widget:new YU(l),diagnostic:l}).range(l.from):rt.mark({attributes:{class:"cm-lintRange cm-lintRange-"+l.severity+(l.markClass?" "+l.markClass:"")},diagnostic:l}).range(l.from,l.to)),!0);return new ll(r,t,Ga(r))}}function Ga(n,e=null,t=0){let i=null;return n.between(t,1e9,(s,o,{spec:r})=>{if(!(e&&r.diagnostic!=e))return i=new FU(s,o,r.diagnostic),!1}),i}function e6(n,e){let t=e.pos,i=e.end||t,s=n.state.facet(io).hideOn(n,t,i);if(s!=null)return s;let o=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(r=>r.is(Lg))||n.changes.touchesRange(o.from,Math.max(o.to,i)))}function t6(n,e){return n.field(Ki,!1)?e:e.concat(pt.appendConfig.of(a6))}function zU(n,e){return{effects:t6(n,[Lg.of(e)])}}const Lg=pt.define(),ub=pt.define(),n6=pt.define(),Ki=zn.define({create(){return new ll(rt.none,null,null)},update(n,e){if(e.docChanged&&n.diagnostics.size){let t=n.diagnostics.map(e.changes),i=null,s=n.panel;if(n.selected){let o=e.changes.mapPos(n.selected.from,1);i=Ga(t,n.selected.diagnostic,o)||Ga(t,null,o)}!t.size&&s&&e.state.facet(io).autoPanel&&(s=null),n=new ll(t,s,i)}for(let t of e.effects)if(t.is(Lg)){let i=e.state.facet(io).autoPanel?t.value.length?Ef.open:null:n.panel;n=ll.init(t.value,i,e.state)}else t.is(ub)?n=new ll(n.diagnostics,t.value?Ef.open:null,n.selected):t.is(n6)&&(n=new ll(n.diagnostics,n.panel,t.value));return n},provide:n=>[Of.from(n,e=>e.panel),je.decorations.from(n,e=>e.diagnostics)]}),VU=rt.mark({class:"cm-lintRange cm-lintRange-active"});function HU(n,e,t){let{diagnostics:i}=n.state.field(Ki),s=[],o=2e8,r=0;i.between(e-(t<0?1:0),e+(t>0?1:0),(a,c,{spec:f})=>{e>=a&&e<=c&&(a==c||(e>a||t>0)&&(e<c||t<0))&&(s.push(f.diagnostic),o=Math.min(a,o),r=Math.max(c,r))});let l=n.state.facet(io).tooltipFilter;return l&&(s=l(s,n.state)),s.length?{pos:o,end:r,above:n.state.doc.lineAt(o).to<r,create(){return{dom:i6(n,s)}}}:null}function i6(n,e){return on("ul",{class:"cm-tooltip-lint"},e.map(t=>o6(n,t,!1)))}const WU=n=>{let e=n.state.field(Ki,!1);(!e||!e.panel)&&n.dispatch({effects:t6(n.state,[ub.of(!0)])});let t=Af(n,Ef.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},hk=n=>{let e=n.state.field(Ki,!1);return!e||!e.panel?!1:(n.dispatch({effects:ub.of(!1)}),!0)},qU=n=>{let e=n.state.field(Ki,!1);if(!e)return!1;let t=n.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},UU=[{key:"Mod-Shift-m",run:WU,preventDefault:!0},{key:"F8",run:qU}],JU=kn.fromClass(class{constructor(n){this.view=n,this.timeout=-1,this.set=!0;let{delay:e}=n.state.facet(io);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){clearTimeout(this.timeout);let n=Date.now();if(n<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-n);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(io);t.length&&Promise.all(t.map(i=>Promise.resolve(i(this.view)))).then(i=>{let s=i.reduce((o,r)=>o.concat(r));this.view.state.doc==e.doc&&this.view.dispatch(zU(this.view.state,s))},i=>{Si(this.view.state,i)})}}update(n){let e=n.state.facet(io);(n.docChanged||e!=n.startState.facet(io)||e.needsRefresh&&e.needsRefresh(n))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),io=Ve.define({combine(n){return Object.assign({sources:n.map(e=>e.source).filter(e=>e!=null)},ms(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,t)=>e?t?i=>e(i)||t(i):e:t}))}});function KU(n,e={}){return[io.of({source:n,config:e}),JU,a6]}function s6(n){let e=[];if(n)e:for(let{name:t}of n){for(let i=0;i<t.length;i++){let s=t[i];if(/[a-zA-Z]/.test(s)&&!e.some(o=>o.toLowerCase()==s.toLowerCase())){e.push(s);continue e}}e.push("")}return e}function o6(n,e,t){var i;let s=t?s6(e.actions):[];return on("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},on("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(n):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((o,r)=>{let l=!1,a=h=>{if(h.preventDefault(),l)return;l=!0;let d=Ga(n.state.field(Ki).diagnostics,e);d&&o.apply(n,d.from,d.to)},{name:c}=o,f=s[r]?c.indexOf(s[r]):-1,u=f<0?c:[c.slice(0,f),on("u",c.slice(f,f+1)),c.slice(f+1)];return on("button",{type:"button",class:"cm-diagnosticAction",onclick:a,onmousedown:a,"aria-label":` Action: ${c}${f<0?"":` (access key "${s[r]})"`}.`},u)}),e.source&&on("div",{class:"cm-diagnosticSource"},e.source))}class YU extends Vr{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return on("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class dk{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=o6(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Ef{constructor(e){this.view=e,this.items=[];let t=s=>{if(s.keyCode==27)hk(this.view),this.view.focus();else if(s.keyCode==38||s.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(s.keyCode==40||s.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(s.keyCode==36)this.moveSelection(0);else if(s.keyCode==35)this.moveSelection(this.items.length-1);else if(s.keyCode==13)this.view.focus();else if(s.keyCode>=65&&s.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],r=s6(o.actions);for(let l=0;l<r.length;l++)if(r[l].toUpperCase().charCodeAt(0)==s.keyCode){let a=Ga(this.view.state.field(Ki).diagnostics,o);a&&o.actions[l].apply(e,a.from,a.to)}}else return;s.preventDefault()},i=s=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(s.target)&&this.moveSelection(o)};this.list=on("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=on("div",{class:"cm-panel-lint"},this.list,on("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>hk(this.view)},"Ã")),this.update()}get selectedIndex(){let e=this.view.state.field(Ki).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Ki),i=0,s=!1,o=null;for(e.between(0,this.view.state.doc.length,(r,l,{spec:a})=>{let c=-1,f;for(let u=i;u<this.items.length;u++)if(this.items[u].diagnostic==a.diagnostic){c=u;break}c<0?(f=new dk(this.view,a.diagnostic),this.items.splice(i,0,f),s=!0):(f=this.items[c],c>i&&(this.items.splice(i,c-i),s=!0)),t&&f.diagnostic==t.diagnostic?f.dom.hasAttribute("aria-selected")||(f.dom.setAttribute("aria-selected","true"),o=f):f.dom.hasAttribute("aria-selected")&&f.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)s=!0,this.items.pop();this.items.length==0&&(this.items.push(new dk(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),s=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:r,panel:l})=>{let a=l.height/this.list.offsetHeight;r.top<l.top?this.list.scrollTop-=(l.top-r.top)/a:r.bottom>l.bottom&&(this.list.scrollTop+=(r.bottom-l.bottom)/a)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),s&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(Ki),i=Ga(t.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:n6.of(i)})}static open(e){return new Ef(e)}}function Th(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function Uu(n){return Th(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const XU=je.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Uu("#d11")},".cm-lintRange-warning":{backgroundImage:Uu("orange")},".cm-lintRange-info":{backgroundImage:Uu("#999")},".cm-lintRange-hint":{backgroundImage:Uu("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function gk(n){return n=="error"?4:n=="warning"?3:n=="info"?2:1}class GU extends po{constructor(e){super(),this.diagnostics=e,this.severity=e.reduce((t,i)=>gk(t)<gk(i.severity)?i.severity:t,"hint")}toDOM(e){let t=document.createElement("div");t.className="cm-lint-marker cm-lint-marker-"+this.severity;let i=this.diagnostics,s=e.state.facet(Ig).tooltipFilter;return s&&(i=s(i,e.state)),i.length&&(t.onmouseover=()=>ZU(e,t,i)),t}}function QU(n,e){let t=i=>{let s=e.getBoundingClientRect();if(!(i.clientX>s.left-10&&i.clientX<s.right+10&&i.clientY>s.top-10&&i.clientY<s.bottom+10)){for(let o=i.target;o;o=o.parentNode)if(o.nodeType==1&&o.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",t),n.state.field(l6)&&n.dispatch({effects:hb.of(null)})}};window.addEventListener("mousemove",t)}function ZU(n,e,t){function i(){let r=n.elementAtHeight(e.getBoundingClientRect().top+5-n.documentTop);n.coordsAtPos(r.from)&&n.dispatch({effects:hb.of({pos:r.from,above:!1,create(){return{dom:i6(n,t),getCoords:()=>e.getBoundingClientRect()}}})}),e.onmouseout=e.onmousemove=null,QU(n,e)}let{hoverTime:s}=n.state.facet(Ig),o=setTimeout(i,s);e.onmouseout=()=>{clearTimeout(o),e.onmouseout=e.onmousemove=null},e.onmousemove=()=>{clearTimeout(o),o=setTimeout(i,s)}}function $U(n,e){let t=Object.create(null);for(let s of e){let o=n.lineAt(s.from);(t[o.from]||(t[o.from]=[])).push(s)}let i=[];for(let s in t)i.push(new GU(t[s]).range(+s));return Tt.of(i,!0)}const eJ=Xx({class:"cm-gutter-lint",markers:n=>n.state.field(r6)}),r6=zn.define({create(){return Tt.empty},update(n,e){n=n.map(e.changes);let t=e.state.facet(Ig).markerFilter;for(let i of e.effects)if(i.is(Lg)){let s=i.value;t&&(s=t(s||[],e.state)),n=$U(e.state.doc,s.slice(0))}return n}}),hb=pt.define(),l6=zn.define({create(){return null},update(n,e){return n&&e.docChanged&&(n=e6(e,n)?null:Object.assign(Object.assign({},n),{pos:e.changes.mapPos(n.pos)})),e.effects.reduce((t,i)=>i.is(hb)?i.value:t,n)},provide:n=>Mg.from(n)}),tJ=je.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:Th('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:Th('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error":{content:Th('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),a6=[Ki,je.decorations.compute([Ki],n=>{let{selected:e,panel:t}=n.field(Ki);return!e||!t||e.from==e.to?rt.none:rt.set([VU.range(e.from,e.to)])}),sW(HU,{hideOn:e6}),XU],Ig=Ve.define({combine(n){return ms(n,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function nJ(n={}){return[Ig.of(n),r6,eJ,tJ,l6]}var mk={};class xd{constructor(e,t,i,s,o,r,l,a,c,f=0,u){this.p=e,this.stack=t,this.state=i,this.reducePos=s,this.pos=o,this.score=r,this.buffer=l,this.bufferBase=a,this.curContext=c,this.lookAhead=f,this.parent=u}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let s=e.parser.context;return new xd(e,[],t,i,i,0,[],0,s?new pk(s,s.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,s=e&65535,{parser:o}=this.p,r=this.reducePos<this.pos-25;r&&this.setLookAhead(this.pos);let l=o.dynamicPrecedence(s);if(l&&(this.score+=l),i==0){this.pushState(o.getGoto(this.state,s,!0),this.reducePos),s<o.minRepeatTerm&&this.storeNode(s,this.reducePos,this.reducePos,r?8:4,!0),this.reduceContext(s,this.reducePos);return}let a=this.stack.length-(i-1)*3-(e&262144?6:0),c=a?this.stack[a-2]:this.p.ranges[0].from,f=this.reducePos-c;f>=2e3&&!(!((t=this.p.parser.nodeSet.types[s])===null||t===void 0)&&t.isAnonymous)&&(c==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=f):this.p.lastBigReductionSize<f&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=c,this.p.lastBigReductionSize=f));let u=a?this.stack[a-1]:0,h=this.bufferBase+this.buffer.length-u;if(s<o.minRepeatTerm||e&131072){let d=o.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(s,c,d,h+4,!0)}if(e&262144)this.state=this.stack[a];else{let d=this.stack[a-3];this.state=o.getGoto(d,s,!0)}for(;this.stack.length>a;)this.stack.pop();this.reduceContext(s,c)}storeNode(e,t,i,s=4,o=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let r=this,l=this.buffer.length;if(l==0&&r.parent&&(l=r.bufferBase-r.parent.bufferBase,r=r.parent),l>0&&r.buffer[l-4]==0&&r.buffer[l-1]>-1){if(t==i)return;if(r.buffer[l-2]>=t){r.buffer[l-2]=i;return}}}if(!o||this.pos==i)this.buffer.push(e,t,i,s);else{let r=this.buffer.length;if(r>0&&this.buffer[r-4]!=0){let l=!1;for(let a=r;a>0&&this.buffer[a-2]>i;a-=4)if(this.buffer[a-1]>=0){l=!0;break}if(l)for(;r>0&&this.buffer[r-2]>i;)this.buffer[r]=this.buffer[r-4],this.buffer[r+1]=this.buffer[r-3],this.buffer[r+2]=this.buffer[r-2],this.buffer[r+3]=this.buffer[r-1],r-=4,s>4&&(s-=4)}this.buffer[r]=e,this.buffer[r+1]=t,this.buffer[r+2]=i,this.buffer[r+3]=s}}shift(e,t,i,s){if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=s,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,s,4);else{let o=e,{parser:r}=this.p;(s>this.pos||t<=r.maxNode)&&(this.pos=s,r.stateFlag(o,1)||(this.reducePos=s)),this.pushState(o,i),this.shiftContext(t,i),t<=r.maxNode&&this.buffer.push(t,i,s,4)}}apply(e,t,i,s){e&65536?this.reduce(e):this.shift(e,t,i,s)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let s=this.pos;this.reducePos=this.pos=s+e.length,this.pushState(t,s),this.buffer.push(i,s,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),s=e.bufferBase+t;for(;e&&s==e.bufferBase;)e=e.parent;return new xd(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,s,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new iJ(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(i==0)return!1;if(!(i&65536))return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let s=[];for(let o=0,r;o<t.length;o+=2)(r=t[o+1])!=this.state&&this.p.parser.hasAction(r,e)&&s.push(t[o],r);if(this.stack.length<120)for(let o=0;s.length<8&&o<t.length;o+=2){let r=t[o+1];s.some((l,a)=>a&1&&l==r)||s.push(t[o],r)}t=s}let i=[];for(let s=0;s<t.length&&i.length<4;s+=2){let o=t[s+1];if(o==this.state)continue;let r=this.split();r.pushState(o,this.pos),r.storeNode(0,r.pos,r.pos,4,!0),r.shiftContext(t[s],this.pos),r.reducePos=this.pos,r.score-=200,i.push(r)}return i}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(!(t&65536))return!1;if(!e.validAction(this.state,t)){let i=t>>19,s=t&65535,o=this.stack.length-i*3;if(o<0||e.getGoto(this.stack[o],s,!1)<0){let r=this.findForcedReduction();if(r==null)return!1;t=r}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],i=(s,o)=>{if(!t.includes(s))return t.push(s),e.allActions(s,r=>{if(!(r&393216))if(r&65536){let l=(r>>19)-o;if(l>1){let a=r&65535,c=this.stack.length-l*3;if(c>=0&&e.getGoto(this.stack[c],a,!1)>=0)return l<<19|65536|a}}else{let l=i(r,o+1);if(l!=null)return l}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new pk(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class pk{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class iJ{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let s=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=s}}class Ad{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new Ad(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new Ad(this.stack,this.pos,this.index)}}function Ju(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let i=0,s=0;i<n.length;){let o=0;for(;;){let r=n.charCodeAt(i++),l=!1;if(r==126){o=65535;break}r>=92&&r--,r>=34&&r--;let a=r-32;if(a>=46&&(a-=46,l=!0),o+=a,l)break;o*=46}t?t[s++]=o:t=new e(o)}return t}class Eh{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const bk=new Eh;class sJ{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=bk,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,s=this.rangeIndex,o=this.pos+e;for(;o<i.from;){if(!s)return null;let r=this.ranges[--s];o-=i.from-r.to,i=r}for(;t<0?o>i.to:o>=i.to;){if(s==this.ranges.length-1)return null;let r=this.ranges[++s];o+=r.from-i.to,i=r}return o}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,i,s;if(t>=0&&t<this.chunk.length)i=this.pos+e,s=this.chunk.charCodeAt(t);else{let o=this.resolveOffset(e,1);if(o==null)return-1;if(i=o,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)s=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let r=this.rangeIndex,l=this.range;for(;l.to<=i;)l=this.ranges[++r];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-i)),s=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),s}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=bk,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let s of this.ranges){if(s.from>=t)break;s.to>e&&(i+=this.input.read(Math.max(s.from,e),Math.min(s.to,t)))}return i}}class Ea{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;oJ(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}Ea.prototype.contextual=Ea.prototype.fallback=Ea.prototype.extend=!1;Ea.prototype.fallback=Ea.prototype.extend=!1;function oJ(n,e,t,i,s,o){let r=0,l=1<<i,{dialect:a}=t.p.parser;e:for(;l&n[r];){let c=n[r+1];for(let d=r+3;d<c;d+=2)if((n[d+1]&l)>0){let g=n[d];if(a.allows(g)&&(e.token.value==-1||e.token.value==g||rJ(g,e.token.value,s,o))){e.acceptToken(g);break}}let f=e.next,u=0,h=n[r+2];if(e.next<0&&h>u&&n[c+h*3-3]==65535){r=n[c+h*3-1];continue e}for(;u<h;){let d=u+h>>1,g=c+d+(d<<1),m=n[g],p=n[g+1]||65536;if(f<m)h=d;else if(f>=p)u=d+1;else{r=n[g+2],e.advance();continue e}}break}}function yk(n,e,t){for(let i=e,s;(s=n[i])!=65535;i++)if(s==t)return i-e;return-1}function rJ(n,e,t,i){let s=yk(t,i,e);return s<0||yk(t,i,n)<s}const Vi=typeof process<"u"&&mk&&/\bparse\b/.test(mk.LOG);let Tm=null;function _k(n,e,t){let i=n.cursor(qn.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(n.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:n.length}}class lJ{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?_k(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?_k(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],s=this.index[t];if(s==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let o=i.children[s],r=this.start[t]+i.positions[s];if(r>e)return this.nextStart=r,null;if(o instanceof Dn){if(r==e){if(r<this.safeFrom)return null;let l=r+o.length;if(l<=this.safeTo){let a=o.prop(Mt.lookAhead);if(!a||l+a<this.fragment.to)return o}}this.index[t]++,r+o.length>=Math.max(this.safeFrom,e)&&(this.trees.push(o),this.start.push(r),this.index.push(0))}else this.index[t]++,this.nextStart=r+o.length}}}class aJ{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new Eh)}getActions(e){let t=0,i=null,{parser:s}=e.p,{tokenizers:o}=s,r=s.stateSlot(e.state,3),l=e.curContext?e.curContext.hash:0,a=0;for(let c=0;c<o.length;c++){if(!(1<<c&r))continue;let f=o[c],u=this.tokens[c];if(!(i&&!f.fallback)&&((f.contextual||u.start!=e.pos||u.mask!=r||u.context!=l)&&(this.updateCachedToken(u,f,e),u.mask=r,u.context=l),u.lookAhead>u.end+25&&(a=Math.max(u.lookAhead,a)),u.value!=0)){let h=t;if(u.extended>-1&&(t=this.addActions(e,u.extended,u.end,t)),t=this.addActions(e,u.value,u.end,t),!f.extend&&(i=u,t>h))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),!i&&e.pos==this.stream.end&&(i=new Eh,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Eh,{pos:i,p:s}=e;return t.start=i,t.end=Math.min(i+1,s.stream.end),t.value=i==s.stream.end?s.parser.eofTerm:0,t}updateCachedToken(e,t,i){let s=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(s,e),i),e.value>-1){let{parser:o}=i.p;for(let r=0;r<o.specialized.length;r++)if(o.specialized[r]==e.value){let l=o.specializers[r](this.stream.read(e.start,e.end),i);if(l>=0&&i.p.parser.dialect.allows(l>>1)){l&1?e.extended=l>>1:e.value=l>>1;break}}}else e.value=0,e.end=this.stream.clipPos(s+1)}putAction(e,t,i,s){for(let o=0;o<s;o+=3)if(this.actions[o]==e)return s;return this.actions[s++]=e,this.actions[s++]=t,this.actions[s++]=i,s}addActions(e,t,i,s){let{state:o}=e,{parser:r}=e.p,{data:l}=r;for(let a=0;a<2;a++)for(let c=r.stateSlot(o,a?2:1);;c+=3){if(l[c]==65535)if(l[c+1]==1)c=Mo(l,c+2);else{s==0&&l[c+1]==2&&(s=this.putAction(Mo(l,c+2),t,i,s));break}l[c]==t&&(s=this.putAction(Mo(l,c+1),t,i,s))}return s}}class cJ{constructor(e,t,i,s){this.parser=e,this.input=t,this.ranges=s,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new sJ(t,s),this.tokens=new aJ(e,this.stream),this.topTerm=e.top[1];let{from:o}=s[0];this.stacks=[xd.start(this,e.top[0],o)],this.fragments=i.length&&this.stream.end-o>e.bufferLength*4?new lJ(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],s,o;if(this.bigReductionCount>300&&e.length==1){let[r]=e;for(;r.forceReduce()&&r.stack.length&&r.stack[r.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let r=0;r<e.length;r++){let l=e[r];for(;;){if(this.tokens.mainToken=null,l.pos>t)i.push(l);else{if(this.advanceStack(l,i,e))continue;{s||(s=[],o=[]),s.push(l);let a=this.tokens.getMainToken(l);o.push(a.value,a.end)}}break}}if(!i.length){let r=s&&uJ(s);if(r)return Vi&&console.log("Finish with "+this.stackID(r)),this.stackToTree(r);if(this.parser.strict)throw Vi&&s&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&s){let r=this.stoppedAt!=null&&s[0].pos>this.stoppedAt?s[0]:this.runRecovery(s,o,i);if(r)return Vi&&console.log("Force-finish "+this.stackID(r)),this.stackToTree(r.forceAll())}if(this.recovering){let r=this.recovering==1?1:this.recovering*3;if(i.length>r)for(i.sort((l,a)=>a.score-l.score);i.length>r;)i.pop();i.some(l=>l.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let r=0;r<i.length-1;r++){let l=i[r];for(let a=r+1;a<i.length;a++){let c=i[a];if(l.sameState(c)||l.buffer.length>500&&c.buffer.length>500)if((l.score-c.score||l.buffer.length-c.buffer.length)>0)i.splice(a--,1);else{i.splice(r--,1);continue e}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let r=1;r<i.length;r++)i[r].pos<this.minStackPos&&(this.minStackPos=i[r].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let s=e.pos,{parser:o}=this,r=Vi?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&s>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let c=e.curContext&&e.curContext.tracker.strict,f=c?e.curContext.hash:0;for(let u=this.fragments.nodeAt(s);u;){let h=this.parser.nodeSet.types[u.type.id]==u.type?o.getGoto(e.state,u.type.id):-1;if(h>-1&&u.length&&(!c||(u.prop(Mt.contextHash)||0)==f))return e.useNode(u,h),Vi&&console.log(r+this.stackID(e)+` (via reuse of ${o.getName(u.type.id)})`),!0;if(!(u instanceof Dn)||u.children.length==0||u.positions[0]>0)break;let d=u.children[0];if(d instanceof Dn&&u.positions[0]==0)u=d;else break}}let l=o.stateSlot(e.state,4);if(l>0)return e.reduce(l),Vi&&console.log(r+this.stackID(e)+` (via always-reduce ${o.getName(l&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let c=0;c<a.length;){let f=a[c++],u=a[c++],h=a[c++],d=c==a.length||!i,g=d?e:e.split(),m=this.tokens.mainToken;if(g.apply(f,u,m?m.start:g.pos,h),Vi&&console.log(r+this.stackID(g)+` (via ${f&65536?`reduce of ${o.getName(f&65535)}`:"shift"} for ${o.getName(u)} @ ${s}${g==e?"":", split"})`),d)return!0;g.pos>s?t.push(g):i.push(g)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return wk(e,t),!0}}runRecovery(e,t,i){let s=null,o=!1;for(let r=0;r<e.length;r++){let l=e[r],a=t[r<<1],c=t[(r<<1)+1],f=Vi?this.stackID(l)+" -> ":"";if(l.deadEnd&&(o||(o=!0,l.restart(),Vi&&console.log(f+this.stackID(l)+" (restarted)"),this.advanceFully(l,i))))continue;let u=l.split(),h=f;for(let d=0;u.forceReduce()&&d<10&&(Vi&&console.log(h+this.stackID(u)+" (via force-reduce)"),!this.advanceFully(u,i));d++)Vi&&(h=this.stackID(u)+" -> ");for(let d of l.recoverByInsert(a))Vi&&console.log(f+this.stackID(d)+" (via recover-insert)"),this.advanceFully(d,i);this.stream.end>l.pos?(c==l.pos&&(c++,a=0),l.recoverByDelete(a,c),Vi&&console.log(f+this.stackID(l)+` (via recover-delete ${this.parser.getName(a)})`),wk(l,i)):(!s||s.score<l.score)&&(s=l)}return s}stackToTree(e){return e.close(),Dn.build({buffer:Ad.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(Tm||(Tm=new WeakMap)).get(e);return t||Tm.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function wk(n,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==n.pos&&i.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class fJ{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}class Od extends nA{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let l=0;l<e.repeatNodeCount;l++)t.push("");let i=Object.keys(e.topRules).map(l=>e.topRules[l][1]),s=[];for(let l=0;l<t.length;l++)s.push([]);function o(l,a,c){s[l].push([a,a.deserialize(String(c))])}if(e.nodeProps)for(let l of e.nodeProps){let a=l[0];typeof a=="string"&&(a=Mt[a]);for(let c=1;c<l.length;){let f=l[c++];if(f>=0)o(f,a,l[c++]);else{let u=l[c+-f];for(let h=-f;h>0;h--)o(l[c++],a,u);c++}}}this.nodeSet=new eb(t.map((l,a)=>Ni.define({name:a>=this.minRepeatTerm?void 0:l,id:a,props:s[a],top:i.indexOf(a)>-1,error:a==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(a)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=Zx;let r=Ju(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let l=0;l<this.specializerSpecs.length;l++)this.specialized[l]=this.specializerSpecs[l].term;this.specializers=this.specializerSpecs.map(vk),this.states=Ju(e.states,Uint32Array),this.data=Ju(e.stateData),this.goto=Ju(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new Ea(r,l):l),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let s=new cJ(this,e,t,i);for(let o of this.wrappers)s=o(s,e,t,i);return s}getGoto(e,t,i=!1){let s=this.goto;if(t>=s[0])return-1;for(let o=s[t+1];;){let r=s[o++],l=r&1,a=s[o++];if(l&&i)return a;for(let c=o+(r>>1);o<c;o++)if(s[o]==e)return a;if(l)return-1}}hasAction(e,t){let i=this.data;for(let s=0;s<2;s++)for(let o=this.stateSlot(e,s?2:1),r;;o+=3){if((r=i[o])==65535)if(i[o+1]==1)r=i[o=Mo(i,o+2)];else{if(i[o+1]==2)return Mo(i,o+2);break}if(r==t||r==0)return Mo(i,o+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,i=>i==t?!0:null)}allActions(e,t){let i=this.stateSlot(e,4),s=i?t(i):void 0;for(let o=this.stateSlot(e,1);s==null;o+=3){if(this.data[o]==65535)if(this.data[o+1]==1)o=Mo(this.data,o+2);else break;s=t(Mo(this.data,o+1))}return s}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=Mo(this.data,i+2);else break;if(!(this.data[i+2]&1)){let s=this.data[i+1];t.some((o,r)=>r&1&&o==s)||t.push(this.data[i],s)}}return t}configure(e){let t=Object.assign(Object.create(Od.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let s=e.tokenizers.find(o=>o.from==i);return s?s.to:i})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((i,s)=>{let o=e.specializers.find(l=>l.from==i.external);if(!o)return i;let r=Object.assign(Object.assign({},i),{external:o.to});return t.specializers[s]=vk(r),r})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let o of e.split(" ")){let r=t.indexOf(o);r>=0&&(i[r]=!0)}let s=null;for(let o=0;o<t.length;o++)if(!i[o])for(let r=this.dialects[t[o]],l;(l=this.data[r++])!=65535;)(s||(s=new Uint8Array(this.maxTerm+1)))[l]=1;return new fJ(e,i,s)}static deserialize(e){return new Od(e)}}function Mo(n,e){return n[e]|n[e+1]<<16}function uJ(n){let e=null;for(let t of n){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function vk(n){if(n.external){let e=n.extend?1:0;return(t,i)=>n.external(t,i)<<1|e}return n.get}const hJ=iA({String:Me.string,Number:Me.number,"True False":Me.bool,PropertyName:Me.propertyName,Null:Me.null,",":Me.separator,"[ ]":Me.squareBracket,"{ }":Me.brace}),dJ=Od.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",stateData:"#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",goto:"!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:"â  JsonText True False Null Number String } { Object Property PropertyName ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",12,"["],["closedBy",8,"}",13,"]"]],propSources:[hJ],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oc~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Oe~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zOh~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yOg~~'OO]~~'TO[~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),gJ=wd.define({name:"json",parser:dJ.configure({props:[lA.add({Object:ek({except:/^\s*\}/}),Array:ek({except:/^\s*\]/})}),cA.add({"Object Array":XW})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function mJ(){return new BW(gJ)}const kk=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class Qa{constructor(e,t,i=0,s=e.length,o,r){this.test=r,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,s),this.bufferStart=i,this.normalize=o?l=>o(kk(l)):kk,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Qn(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=z0(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=is(e);let s=this.normalize(t);for(let o=0,r=i;;o++){let l=s.charCodeAt(o),a=this.match(l,r,this.bufferPos+this.bufferStart);if(o==s.length-1){if(a)return this.value=a,this;break}r==i&&o<t.length&&t.charCodeAt(o)==l&&r++}}}match(e,t,i){let s=null;for(let o=0;o<this.matches.length;o+=2){let r=this.matches[o],l=!1;this.query.charCodeAt(r)==e&&(r==this.query.length-1?s={from:this.matches[o+1],to:i}:(this.matches[o]++,l=!0)),l||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?s={from:t,to:i}:this.matches.push(1,t)),s&&this.test&&!this.test(s.from,s.to,this.buffer,this.bufferStart)&&(s=null),s}}typeof Symbol<"u"&&(Qa.prototype[Symbol.iterator]=function(){return this});const c6={from:-1,to:-1,match:/.*/.exec("")},db="gm"+(/x/.unicode==null?"":"u");class f6{constructor(e,t,i,s=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=c6,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new u6(e,t,i,s,o);this.re=new RegExp(t,db+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let r=e.lineAt(s);this.curLineStart=r.from,this.matchPos=Pd(e,s),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,s=i+t[0].length;if(this.matchPos=Pd(this.text,s+(i==s?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<s||i>this.value.to)&&(!this.test||this.test(i,s,t)))return this.value={from:i,to:s,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Em=new WeakMap;class Ra{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let s=Em.get(e);if(!s||s.from>=i||s.to<=t){let l=new Ra(t,e.sliceString(t,i));return Em.set(e,l),l}if(s.from==t&&s.to==i)return s;let{text:o,from:r}=s;return r>t&&(o=e.sliceString(t,r)+o,r=t),s.to<i&&(o+=e.sliceString(s.to,i)),Em.set(e,new Ra(r,o)),new Ra(t,o.slice(t-r,i-r))}}class u6{constructor(e,t,i,s,o){this.text=e,this.to=o,this.done=!1,this.value=c6,this.matchPos=Pd(e,s),this.re=new RegExp(t,db+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=Ra.get(e,s,this.chunkEnd(s+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let i=this.flat.from+t.index,s=i+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,s,t)))return this.value={from:i,to:s,match:t},this.matchPos=Pd(this.text,s+(i==s?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Ra.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(f6.prototype[Symbol.iterator]=u6.prototype[Symbol.iterator]=function(){return this});function pJ(n){try{return new RegExp(n,db),!0}catch{return!1}}function Pd(n,e){if(e>=n.length)return e;let t=n.lineAt(e),i;for(;e<t.to&&(i=t.text.charCodeAt(e-t.from))>=56320&&i<57344;)e++;return e}function k1(n){let e=String(n.state.doc.lineAt(n.state.selection.main.head).number),t=on("input",{class:"cm-textfield",name:"line",value:e}),i=on("form",{class:"cm-gotoLine",onkeydown:o=>{o.keyCode==27?(o.preventDefault(),n.dispatch({effects:Td.of(!1)}),n.focus()):o.keyCode==13&&(o.preventDefault(),s())},onsubmit:o=>{o.preventDefault(),s()}},on("label",n.state.phrase("Go to line"),": ",t)," ",on("button",{class:"cm-button",type:"submit"},n.state.phrase("go")));function s(){let o=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!o)return;let{state:r}=n,l=r.doc.lineAt(r.selection.main.head),[,a,c,f,u]=o,h=f?+f.slice(1):0,d=c?+c:l.number;if(c&&u){let p=d/100;a&&(p=p*(a=="-"?-1:1)+l.number/r.doc.lines),d=Math.round(r.doc.lines*p)}else c&&a&&(d=d*(a=="-"?-1:1)+l.number);let g=r.doc.line(Math.max(1,Math.min(r.doc.lines,d))),m=_e.cursor(g.from+Math.max(0,Math.min(h,g.length)));n.dispatch({effects:[Td.of(!1),je.scrollIntoView(m.from,{y:"center"})],selection:m}),n.focus()}return{dom:i}}const Td=pt.define(),Sk=zn.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(Td)&&(n=t.value);return n},provide:n=>Of.from(n,e=>e?k1:null)}),bJ=n=>{let e=Af(n,k1);if(!e){let t=[Td.of(!0)];n.state.field(Sk,!1)==null&&t.push(pt.appendConfig.of([Sk,yJ])),n.dispatch({effects:t}),e=Af(n,k1)}return e&&e.dom.querySelector("input").select(),!0},yJ=je.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),_J={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},wJ=Ve.define({combine(n){return ms(n,_J,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function vJ(n){return[xJ,MJ]}const kJ=rt.mark({class:"cm-selectionMatch"}),SJ=rt.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Ck(n,e,t,i){return(t==0||n(e.sliceDoc(t-1,t))!=yn.Word)&&(i==e.doc.length||n(e.sliceDoc(i,i+1))!=yn.Word)}function CJ(n,e,t,i){return n(e.sliceDoc(t,t+1))==yn.Word&&n(e.sliceDoc(i-1,i))==yn.Word}const MJ=kn.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(wJ),{state:t}=n,i=t.selection;if(i.ranges.length>1)return rt.none;let s=i.main,o,r=null;if(s.empty){if(!e.highlightWordAroundCursor)return rt.none;let a=t.wordAt(s.head);if(!a)return rt.none;r=t.charCategorizer(s.head),o=t.sliceDoc(a.from,a.to)}else{let a=s.to-s.from;if(a<e.minSelectionLength||a>200)return rt.none;if(e.wholeWords){if(o=t.sliceDoc(s.from,s.to),r=t.charCategorizer(s.head),!(Ck(r,t,s.from,s.to)&&CJ(r,t,s.from,s.to)))return rt.none}else if(o=t.sliceDoc(s.from,s.to),!o)return rt.none}let l=[];for(let a of n.visibleRanges){let c=new Qa(t.doc,o,a.from,a.to);for(;!c.next().done;){let{from:f,to:u}=c.value;if((!r||Ck(r,t,f,u))&&(s.empty&&f<=s.from&&u>=s.to?l.push(SJ.range(f,u)):(f>=s.to||u<=s.from)&&l.push(kJ.range(f,u)),l.length>e.maxMatches))return rt.none}}return rt.set(l)}},{decorations:n=>n.decorations}),xJ=je.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),AJ=({state:n,dispatch:e})=>{let{selection:t}=n,i=_e.create(t.ranges.map(s=>n.wordAt(s.head)||_e.cursor(s.head)),t.mainIndex);return i.eq(t)?!1:(e(n.update({selection:i})),!0)};function OJ(n,e){let{main:t,ranges:i}=n.selection,s=n.wordAt(t.head),o=s&&s.from==t.from&&s.to==t.to;for(let r=!1,l=new Qa(n.doc,e,i[i.length-1].to);;)if(l.next(),l.done){if(r)return null;l=new Qa(n.doc,e,0,Math.max(0,i[i.length-1].from-1)),r=!0}else{if(r&&i.some(a=>a.from==l.value.from))continue;if(o){let a=n.wordAt(l.value.from);if(!a||a.from!=l.value.from||a.to!=l.value.to)continue}return l.value}}const PJ=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(o=>o.from===o.to))return AJ({state:n,dispatch:e});let i=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(o=>n.sliceDoc(o.from,o.to)!=i))return!1;let s=OJ(n,i);return s?(e(n.update({selection:n.selection.addRange(_e.range(s.from,s.to),!1),effects:je.scrollIntoView(s.to)})),!0):!1},ql=Ve.define({combine(n){return ms(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new HJ(e),scrollToMatch:e=>je.scrollIntoView(e)})}});function TJ(n){return n?[ql.of(n),C1]:C1}class h6{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||pJ(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new LJ(this):new RJ(this)}getCursor(e,t=0,i){let s=e.doc?e:xt.create({doc:e});return i==null&&(i=s.doc.length),this.regexp?ua(this,s,t,i):fa(this,s,t,i)}}class d6{constructor(e){this.spec=e}}function fa(n,e,t,i){return new Qa(e.doc,n.unquoted,t,i,n.caseSensitive?void 0:s=>s.toLowerCase(),n.wholeWord?EJ(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function EJ(n,e){return(t,i,s,o)=>((o>t||o+s.length<i)&&(o=Math.max(0,t-2),s=n.sliceString(o,Math.min(n.length,i+2))),(e(Ed(s,t-o))!=yn.Word||e(Rd(s,t-o))!=yn.Word)&&(e(Rd(s,i-o))!=yn.Word||e(Ed(s,i-o))!=yn.Word))}class RJ extends d6{constructor(e){super(e)}nextMatch(e,t,i){let s=fa(this.spec,e,i,e.doc.length).nextOverlapping();return s.done&&(s=fa(this.spec,e,0,t).nextOverlapping()),s.done?null:s.value}prevMatchInRange(e,t,i){for(let s=i;;){let o=Math.max(t,s-1e4-this.spec.unquoted.length),r=fa(this.spec,e,o,s),l=null;for(;!r.nextOverlapping().done;)l=r.value;if(l)return l;if(o==t)return null;s-=1e4}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=fa(this.spec,e,0,e.doc.length),s=[];for(;!i.next().done;){if(s.length>=t)return null;s.push(i.value)}return s}highlight(e,t,i,s){let o=fa(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)s(o.value.from,o.value.to)}}function ua(n,e,t,i){return new f6(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?DJ(e.charCategorizer(e.selection.main.head)):void 0},t,i)}function Ed(n,e){return n.slice(ei(n,e,!1),e)}function Rd(n,e){return n.slice(e,ei(n,e))}function DJ(n){return(e,t,i)=>!i[0].length||(n(Ed(i.input,i.index))!=yn.Word||n(Rd(i.input,i.index))!=yn.Word)&&(n(Rd(i.input,i.index+i[0].length))!=yn.Word||n(Ed(i.input,i.index+i[0].length))!=yn.Word)}class LJ extends d6{nextMatch(e,t,i){let s=ua(this.spec,e,i,e.doc.length).next();return s.done&&(s=ua(this.spec,e,0,t).next()),s.done?null:s.value}prevMatchInRange(e,t,i){for(let s=1;;s++){let o=Math.max(t,i-s*1e4),r=ua(this.spec,e,o,i),l=null;for(;!r.next().done;)l=r.value;if(l&&(o==t||l.from>o+10))return l;if(o==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(t,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:t)}matchAll(e,t){let i=ua(this.spec,e,0,e.doc.length),s=[];for(;!i.next().done;){if(s.length>=t)return null;s.push(i.value)}return s}highlight(e,t,i,s){let o=ua(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!o.next().done;)s(o.value.from,o.value.to)}}const Rf=pt.define(),gb=pt.define(),vr=zn.define({create(n){return new Rm(S1(n).create(),null)},update(n,e){for(let t of e.effects)t.is(Rf)?n=new Rm(t.value.create(),n.panel):t.is(gb)&&(n=new Rm(n.query,t.value?mb:null));return n},provide:n=>Of.from(n,e=>e.panel)});class Rm{constructor(e,t){this.query=e,this.panel=t}}const IJ=rt.mark({class:"cm-searchMatch"}),NJ=rt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),BJ=kn.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(vr))}update(n){let e=n.state.field(vr);(e!=n.startState.field(vr)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return rt.none;let{view:t}=this,i=new mo;for(let s=0,o=t.visibleRanges,r=o.length;s<r;s++){let{from:l,to:a}=o[s];for(;s<r-1&&a>o[s+1].from-2*250;)a=o[++s].to;n.highlight(t.state,l,a,(c,f)=>{let u=t.state.selection.ranges.some(h=>h.from==c&&h.to==f);i.add(c,f,u?NJ:IJ)})}return i.finish()}},{decorations:n=>n.decorations});function lu(n){return e=>{let t=e.state.field(vr,!1);return t&&t.query.spec.valid?n(e,t):pb(e)}}const Dd=lu((n,{query:e})=>{let{to:t}=n.state.selection.main,i=e.nextMatch(n.state,t,t);if(!i)return!1;let s=_e.single(i.from,i.to),o=n.state.facet(ql);return n.dispatch({selection:s,effects:[yb(n,i),o.scrollToMatch(s.main,n)],userEvent:"select.search"}),m6(n),!0}),Ld=lu((n,{query:e})=>{let{state:t}=n,{from:i}=t.selection.main,s=e.prevMatch(t,i,i);if(!s)return!1;let o=_e.single(s.from,s.to),r=n.state.facet(ql);return n.dispatch({selection:o,effects:[yb(n,s),r.scrollToMatch(o.main,n)],userEvent:"select.search"}),m6(n),!0}),jJ=lu((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:_e.create(t.map(i=>_e.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),FJ=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:s}=t.main,o=[],r=0;for(let l=new Qa(n.doc,n.sliceDoc(i,s));!l.next().done;){if(o.length>1e3)return!1;l.value.from==i&&(r=o.length),o.push(_e.range(l.value.from,l.value.to))}return e(n.update({selection:_e.create(o,r),userEvent:"select.search.matches"})),!0},Mk=lu((n,{query:e})=>{let{state:t}=n,{from:i,to:s}=t.selection.main;if(t.readOnly)return!1;let o=e.nextMatch(t,i,i);if(!o)return!1;let r=[],l,a,c=[];if(o.from==i&&o.to==s&&(a=t.toText(e.getReplacement(o)),r.push({from:o.from,to:o.to,insert:a}),o=e.nextMatch(t,o.from,o.to),c.push(je.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+"."))),o){let f=r.length==0||r[0].from>=o.to?0:o.to-o.from-a.length;l=_e.single(o.from-f,o.to-f),c.push(yb(n,o)),c.push(t.facet(ql).scrollToMatch(l.main,n))}return n.dispatch({changes:r,selection:l,effects:c,userEvent:"input.replace"}),!0}),zJ=lu((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(s=>{let{from:o,to:r}=s;return{from:o,to:r,insert:e.getReplacement(s)}});if(!t.length)return!1;let i=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:je.announce.of(i),userEvent:"input.replace.all"}),!0});function mb(n){return n.state.facet(ql).createPanel(n)}function S1(n,e){var t,i,s,o,r;let l=n.selection.main,a=l.empty||l.to>l.from+100?"":n.sliceDoc(l.from,l.to);if(e&&!a)return e;let c=n.facet(ql);return new h6({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:c.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:c.caseSensitive,literal:(s=e==null?void 0:e.literal)!==null&&s!==void 0?s:c.literal,regexp:(o=e==null?void 0:e.regexp)!==null&&o!==void 0?o:c.regexp,wholeWord:(r=e==null?void 0:e.wholeWord)!==null&&r!==void 0?r:c.wholeWord})}function g6(n){let e=Af(n,mb);return e&&e.dom.querySelector("[main-field]")}function m6(n){let e=g6(n);e&&e==n.root.activeElement&&e.select()}const pb=n=>{let e=n.state.field(vr,!1);if(e&&e.panel){let t=g6(n);if(t&&t!=n.root.activeElement){let i=S1(n.state,e.query.spec);i.valid&&n.dispatch({effects:Rf.of(i)}),t.focus(),t.select()}}else n.dispatch({effects:[gb.of(!0),e?Rf.of(S1(n.state,e.query.spec)):pt.appendConfig.of(C1)]});return!0},bb=n=>{let e=n.state.field(vr,!1);if(!e||!e.panel)return!1;let t=Af(n,mb);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:gb.of(!1)}),!0},VJ=[{key:"Mod-f",run:pb,scope:"editor search-panel"},{key:"F3",run:Dd,shift:Ld,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Dd,shift:Ld,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:bb,scope:"editor search-panel"},{key:"Mod-Shift-l",run:FJ},{key:"Mod-Alt-g",run:bJ},{key:"Mod-d",run:PJ,preventDefault:!0}];class HJ{constructor(e){this.view=e;let t=this.query=e.state.field(vr).query.spec;this.commit=this.commit.bind(this),this.searchField=on("input",{value:t.search,placeholder:Hi(e,"Find"),"aria-label":Hi(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=on("input",{value:t.replace,placeholder:Hi(e,"Replace"),"aria-label":Hi(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=on("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=on("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=on("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function i(s,o,r){return on("button",{class:"cm-button",name:s,onclick:o,type:"button"},r)}this.dom=on("div",{onkeydown:s=>this.keydown(s),class:"cm-search"},[this.searchField,i("next",()=>Dd(e),[Hi(e,"next")]),i("prev",()=>Ld(e),[Hi(e,"previous")]),i("select",()=>jJ(e),[Hi(e,"all")]),on("label",null,[this.caseField,Hi(e,"match case")]),on("label",null,[this.reField,Hi(e,"regexp")]),on("label",null,[this.wordField,Hi(e,"by word")]),...e.state.readOnly?[]:[on("br"),this.replaceField,i("replace",()=>Mk(e),[Hi(e,"replace")]),i("replaceAll",()=>zJ(e),[Hi(e,"replace all")])],on("button",{name:"close",onclick:()=>bb(e),"aria-label":Hi(e,"close"),type:"button"},["Ã"])])}commit(){let e=new h6({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Rf.of(e)}))}keydown(e){yH(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Ld:Dd)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),Mk(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(Rf)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(ql).top}}function Hi(n,e){return n.state.phrase(e)}const Ku=30,Yu=/[\s\.,:;?!]/;function yb(n,{from:e,to:t}){let i=n.state.doc.lineAt(e),s=n.state.doc.lineAt(t).to,o=Math.max(i.from,e-Ku),r=Math.min(s,t+Ku),l=n.state.sliceDoc(o,r);if(o!=i.from){for(let a=0;a<Ku;a++)if(!Yu.test(l[a+1])&&Yu.test(l[a])){l=l.slice(a);break}}if(r!=s){for(let a=l.length-1;a>l.length-Ku;a--)if(!Yu.test(l[a-1])&&Yu.test(l[a])){l=l.slice(0,a);break}}return je.announce.of(`${n.state.phrase("current match")}. ${l} ${n.state.phrase("on line")} ${i.number}.`)}const WJ=je.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),C1=[vr,Wl.low(BJ),WJ];class p6{constructor(e,t,i,s){this.state=e,this.pos=t,this.explicit=i,this.view=s,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=bi(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),s=t.text.slice(i-t.from,this.pos-t.from),o=s.search(b6(e,!1));return o<0?null:{from:i+o,to:this.pos,text:s.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function xk(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function qJ(n){let e=Object.create(null),t=Object.create(null);for(let{label:s}of n){e[s[0]]=!0;for(let o=1;o<s.length;o++)t[s[o]]=!0}let i=xk(e)+xk(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function UJ(n){let e=n.map(s=>typeof s=="string"?{label:s}:s),[t,i]=e.every(s=>/^\w+$/.test(s.label))?[/\w*$/,/\w+$/]:qJ(e);return s=>{let o=s.matchBefore(i);return o||s.explicit?{from:o?o.from:s.pos,options:e,validFor:t}:null}}class Ak{constructor(e,t,i,s){this.completion=e,this.source=t,this.match=i,this.score=s}}function kr(n){return n.selection.main.from}function b6(n,e){var t;let{source:i}=n,s=e&&i[0]!="^",o=i[i.length-1]!="$";return!s&&!o?n:new RegExp(`${s?"^":""}(?:${i})${o?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const y6=Qo.define();function JJ(n,e,t,i){let{main:s}=n.selection,o=t-s.from,r=i-s.from;return Object.assign(Object.assign({},n.changeByRange(l=>l!=s&&t!=i&&n.sliceDoc(l.from+o,l.from+r)!=n.sliceDoc(t,i)?{range:l}:{changes:{from:l.from+o,to:i==s.from?l.to:l.from+r,insert:e},range:_e.cursor(l.from+o+e.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const Ok=new WeakMap;function KJ(n){if(!Array.isArray(n))return n;let e=Ok.get(n);return e||Ok.set(n,e=UJ(n)),e}const Id=pt.define(),Df=pt.define();class YJ{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let i=Qn(e,t),s=is(i);this.chars.push(i);let o=e.slice(t,t+s),r=o.toUpperCase();this.folded.push(Qn(r==o?o.toLowerCase():r,0)),t+=s}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:s,precise:o,byWord:r}=this;if(t.length==1){let y=Qn(e,0),v=is(y),C=v==e.length?0:-100;if(y!=t[0])if(y==i[0])C+=-200;else return null;return this.ret(C,[0,v])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=t.length,c=0;if(l<0){for(let y=0,v=Math.min(e.length,200);y<v&&c<a;){let C=Qn(e,y);(C==t[c]||C==i[c])&&(s[c++]=y),y+=is(C)}if(c<a)return null}let f=0,u=0,h=!1,d=0,g=-1,m=-1,p=/[a-z]/.test(e),b=!0;for(let y=0,v=Math.min(e.length,200),C=0;y<v&&u<a;){let _=Qn(e,y);l<0&&(f<a&&_==t[f]&&(o[f++]=y),d<a&&(_==t[d]||_==i[d]?(d==0&&(g=y),m=y+1,d++):d=0));let S,x=_<255?_>=48&&_<=57||_>=97&&_<=122?2:_>=65&&_<=90?1:0:(S=z0(_))!=S.toLowerCase()?1:S!=S.toUpperCase()?2:0;(!y||x==1&&p||C==0&&x!=0)&&(t[u]==_||i[u]==_&&(h=!0)?r[u++]=y:r.length&&(b=!1)),C=x,y+=is(_)}return u==a&&r[0]==0&&b?this.result(-100+(h?-200:0),r,e):d==a&&g==0?this.ret(-200-e.length+(m==e.length?0:-100),[0,m]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):d==a?this.ret(-900-e.length,[g,m]):u==a?this.result(-100+(h?-200:0)+-700+(b?0:-1100),r,e):t.length==2?null:this.result((s[0]?-700:0)+-200+-1100,s,e)}result(e,t,i){let s=[],o=0;for(let r of t){let l=r+(this.astral?is(Qn(i,r)):1);o&&s[o-1]==r?s[o-1]=l:(s[o++]=r,s[o++]=l)}return this.ret(e-i.length,s)}}class XJ{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),i=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,t.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const $n=Ve.define({combine(n){return ms(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:GJ,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>Pk(e(i),t(i)),optionClass:(e,t)=>i=>Pk(e(i),t(i)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function Pk(n,e){return n?e?n+" "+e:n:e}function GJ(n,e,t,i,s,o){let r=n.textDirection==un.RTL,l=r,a=!1,c="top",f,u,h=e.left-s.left,d=s.right-e.right,g=i.right-i.left,m=i.bottom-i.top;if(l&&h<Math.min(g,d)?l=!1:!l&&d<Math.min(g,h)&&(l=!0),g<=(l?h:d))f=Math.max(s.top,Math.min(t.top,s.bottom-m))-e.top,u=Math.min(400,l?h:d);else{a=!0,u=Math.min(400,(r?e.right:s.right-e.left)-30);let y=s.bottom-e.bottom;y>=m||y>e.top?f=t.bottom-e.top:(c="bottom",f=e.bottom-t.top)}let p=(e.bottom-e.top)/o.offsetHeight,b=(e.right-e.left)/o.offsetWidth;return{style:`${c}: ${f/p}px; max-width: ${u/b}px`,class:"cm-completionInfo-"+(a?r?"left-narrow":"right-narrow":l?"left":"right")}}function QJ(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(s=>"cm-completionIcon-"+s)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,s,o){let r=document.createElement("span");r.className="cm-completionLabel";let l=t.displayLabel||t.label,a=0;for(let c=0;c<o.length;){let f=o[c++],u=o[c++];f>a&&r.appendChild(document.createTextNode(l.slice(a,f)));let h=r.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(l.slice(f,u))),h.className="cm-completionMatchedText",a=u}return a<l.length&&r.appendChild(document.createTextNode(l.slice(a))),r},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function Dm(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let s=Math.floor(e/t);return{from:s*t,to:(s+1)*t}}let i=Math.floor((n-e)/t);return{from:n-(i+1)*t,to:n-i*t}}class ZJ{constructor(e,t,i){this.view=e,this.stateField=t,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:a=>this.placeInfo(a),key:this},this.space=null,this.currentClass="";let s=e.state.field(t),{options:o,selected:r}=s.open,l=e.state.facet($n);this.optionContent=QJ(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=Dm(o.length,r,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",a=>{let{options:c}=e.state.field(t).open;for(let f=a.target,u;f&&f!=this.dom;f=f.parentNode)if(f.nodeName=="LI"&&(u=/-(\d+)$/.exec(f.id))&&+u[1]<c.length){this.applyCompletion(e,c[+u[1]]),a.preventDefault();return}}),this.dom.addEventListener("focusout",a=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet($n).closeOnBlur&&a.relatedTarget!=e.contentDOM&&e.dispatch({effects:Df.of(null)})}),this.showOptions(o,s.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let i=e.state.field(this.stateField),s=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=s){let{options:o,selected:r,disabled:l}=i.open;(!s.open||s.open.options!=o)&&(this.range=Dm(o.length,r,e.state.facet($n).maxRenderedOptions),this.showOptions(o,i.id)),this.updateSel(),l!=((t=s.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of t.split(" "))i&&this.dom.classList.add(i);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=Dm(t.options.length,t.selected,this.view.state.facet($n).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:i}=t.options[t.selected],{info:s}=i;if(!s)return;let o=typeof s=="string"?document.createTextNode(s):s(i);if(!o)return;"then"in o?o.then(r=>{r&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(r,i)}).catch(r=>Si(this.view.state,r,"completion info")):this.addInfoPane(o,i)}}addInfoPane(e,t){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:s,destroy:o}=e;i.appendChild(s),this.infoDestroy=o||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,s=this.range.from;i;i=i.nextSibling,s++)i.nodeName!="LI"||!i.id?s--:s==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return t&&eK(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),s=e.getBoundingClientRect(),o=this.space;if(!o){let r=this.dom.ownerDocument.defaultView||window;o={left:0,top:0,right:r.innerWidth,bottom:r.innerHeight}}return s.top>Math.min(o.bottom,t.bottom)-10||s.bottom<Math.max(o.top,t.top)+10?null:this.view.state.facet($n).positionInfo(this.view,t,s,i,o,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,i){const s=document.createElement("ul");s.id=t,s.setAttribute("role","listbox"),s.setAttribute("aria-expanded","true"),s.setAttribute("aria-label",this.view.state.phrase("Completions"));let o=null;for(let r=i.from;r<i.to;r++){let{completion:l,match:a}=e[r],{section:c}=l;if(c){let h=typeof c=="string"?c:c.name;if(h!=o&&(r>i.from||i.from==0))if(o=h,typeof c!="string"&&c.header)s.appendChild(c.header(c));else{let d=s.appendChild(document.createElement("completion-section"));d.textContent=h}}const f=s.appendChild(document.createElement("li"));f.id=t+"-"+r,f.setAttribute("role","option");let u=this.optionClass(l);u&&(f.className=u);for(let h of this.optionContent){let d=h(l,this.view.state,this.view,a);d&&f.appendChild(d)}}return i.from&&s.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&s.classList.add("cm-completionListIncompleteBottom"),s}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function $J(n,e){return t=>new ZJ(t,n,e)}function eK(n,e){let t=n.getBoundingClientRect(),i=e.getBoundingClientRect(),s=t.height/n.offsetHeight;i.top<t.top?n.scrollTop-=(t.top-i.top)/s:i.bottom>t.bottom&&(n.scrollTop+=(i.bottom-t.bottom)/s)}function Tk(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function tK(n,e){let t=[],i=null,s=c=>{t.push(c);let{section:f}=c.completion;if(f){i||(i=[]);let u=typeof f=="string"?f:f.name;i.some(h=>h.name==u)||i.push(typeof f=="string"?{name:u}:f)}},o=e.facet($n);for(let c of n)if(c.hasResult()){let f=c.result.getMatch;if(c.result.filter===!1)for(let u of c.result.options)s(new Ak(u,c.source,f?f(u):[],1e9-t.length));else{let u=e.sliceDoc(c.from,c.to),h,d=o.filterStrict?new XJ(u):new YJ(u);for(let g of c.result.options)if(h=d.match(g.label)){let m=g.displayLabel?f?f(g,h.matched):[]:h.matched;s(new Ak(g,c.source,m,h.score+(g.boost||0)))}}}if(i){let c=Object.create(null),f=0,u=(h,d)=>{var g,m;return((g=h.rank)!==null&&g!==void 0?g:1e9)-((m=d.rank)!==null&&m!==void 0?m:1e9)||(h.name<d.name?-1:1)};for(let h of i.sort(u))f-=1e5,c[h.name]=f;for(let h of t){let{section:d}=h.completion;d&&(h.score+=c[typeof d=="string"?d:d.name])}}let r=[],l=null,a=o.compareCompletions;for(let c of t.sort((f,u)=>u.score-f.score||a(f.completion,u.completion))){let f=c.completion;!l||l.label!=f.label||l.detail!=f.detail||l.type!=null&&f.type!=null&&l.type!=f.type||l.apply!=f.apply||l.boost!=f.boost?r.push(c):Tk(c.completion)>Tk(l)&&(r[r.length-1]=c),l=c.completion}return r}class _a{constructor(e,t,i,s,o,r){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=s,this.selected=o,this.disabled=r}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new _a(this.options,Ek(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,s,o){let r=tK(e,t);if(!r.length)return s&&e.some(a=>a.state==1)?new _a(s.options,s.attrs,s.tooltip,s.timestamp,s.selected,!0):null;let l=t.facet($n).selectOnOpen?0:-1;if(s&&s.selected!=l&&s.selected!=-1){let a=s.options[s.selected].completion;for(let c=0;c<r.length;c++)if(r[c].completion==a){l=c;break}}return new _a(r,Ek(i,l),{pos:e.reduce((a,c)=>c.hasResult()?Math.min(a,c.from):a,1e8),create:lK,above:o.aboveCursor},s?s.timestamp:Date.now(),l,!1)}map(e){return new _a(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class Nd{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new Nd(oK,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet($n),o=(i.override||t.languageDataAt("autocomplete",kr(t)).map(KJ)).map(l=>(this.active.find(c=>c.source==l)||new Ji(l,this.active.some(c=>c.state!=0)?1:0)).update(e,i));o.length==this.active.length&&o.every((l,a)=>l==this.active[a])&&(o=this.active);let r=this.open;r&&e.docChanged&&(r=r.map(e.changes)),e.selection||o.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!nK(o,this.active)?r=_a.build(o,t,this.id,r,i):r&&r.disabled&&!o.some(l=>l.state==1)&&(r=null),!r&&o.every(l=>l.state!=1)&&o.some(l=>l.hasResult())&&(o=o.map(l=>l.hasResult()?new Ji(l.source,0):l));for(let l of e.effects)l.is(v6)&&(r=r&&r.setSelected(l.value,this.id));return o==this.active&&r==this.open?this:new Nd(o,this.id,r)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?iK:sK}}function nK(n,e){if(n==e)return!0;for(let t=0,i=0;;){for(;t<n.length&&!n[t].hasResult;)t++;for(;i<e.length&&!e[i].hasResult;)i++;let s=t==n.length,o=i==e.length;if(s||o)return s==o;if(n[t++].result!=e[i++].result)return!1}}const iK={"aria-autocomplete":"list"},sK={};function Ek(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const oK=[];function _6(n,e){if(n.isUserEvent("input.complete")){let i=n.annotation(y6);if(i&&e.activateOnCompletion(i))return 12}let t=n.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:n.isUserEvent("delete.backward")?2:n.selection?8:n.docChanged?16:0}class Ji{constructor(e,t,i=-1){this.source=e,this.state=t,this.explicitPos=i}hasResult(){return!1}update(e,t){let i=_6(e,t),s=this;(i&8||i&16&&this.touches(e))&&(s=new Ji(s.source,0)),i&4&&s.state==0&&(s=new Ji(this.source,1)),s=s.updateFor(e,i);for(let o of e.effects)if(o.is(Id))s=new Ji(s.source,1,o.value?kr(e.state):-1);else if(o.is(Df))s=new Ji(s.source,0);else if(o.is(w6))for(let r of o.value)r.source==s.source&&(s=r);return s}updateFor(e,t){return this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Ji(this.source,this.state,e.mapPos(this.explicitPos))}touches(e){return e.changes.touchesRange(kr(e.state))}}class Da extends Ji{constructor(e,t,i,s,o){super(e,2,t),this.result=i,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,t){var i;if(!(t&3))return this.map(e.changes);let s=this.result;s.map&&!e.changes.empty&&(s=s.map(s,e.changes));let o=e.changes.mapPos(this.from),r=e.changes.mapPos(this.to,1),l=kr(e.state);if((this.explicitPos<0?l<=o:l<this.from)||l>r||!s||t&2&&kr(e.startState)==this.from)return new Ji(this.source,t&4?1:0);let a=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return rK(s.validFor,e.state,o,r)?new Da(this.source,a,s,o,r):s.update&&(s=s.update(s,o,r,new p6(e.state,l,a>=0)))?new Da(this.source,a,s,s.from,(i=s.to)!==null&&i!==void 0?i:kr(e.state)):new Ji(this.source,1,a)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Da(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Ji(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function rK(n,e,t,i){if(!n)return!1;let s=e.sliceDoc(t,i);return typeof n=="function"?n(s,t,i,e):b6(n,!0).test(s)}const w6=pt.define({map(n,e){return n.map(t=>t.map(e))}}),v6=pt.define(),Ti=zn.define({create(){return Nd.start()},update(n,e){return n.update(e)},provide:n=>[Mg.from(n,e=>e.tooltip),je.contentAttributes.from(n,e=>e.attrs)]});function _b(n,e){const t=e.completion.apply||e.completion.label;let i=n.state.field(Ti).active.find(s=>s.source==e.source);return i instanceof Da?(typeof t=="string"?n.dispatch(Object.assign(Object.assign({},JJ(n.state,t,i.from,i.to)),{annotations:y6.of(e.completion)})):t(n,e.completion,i.from,i.to),!0):!1}const lK=$J(Ti,_b);function Xu(n,e="option"){return t=>{let i=t.state.field(Ti,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<t.state.facet($n).interactionDelay)return!1;let s=1,o;e=="page"&&(o=Kx(t,i.open.tooltip))&&(s=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:r}=i.open.options,l=i.open.selected>-1?i.open.selected+s*(n?1:-1):n?0:r-1;return l<0?l=e=="page"?0:r-1:l>=r&&(l=e=="page"?r-1:0),t.dispatch({effects:v6.of(l)}),!0}}const aK=n=>{let e=n.state.field(Ti,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet($n).interactionDelay?!1:_b(n,e.open.options[e.open.selected])},cK=n=>n.state.field(Ti,!1)?(n.dispatch({effects:Id.of(!0)}),!0):!1,fK=n=>{let e=n.state.field(Ti,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:Df.of(null)}),!0)};class uK{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const hK=50,dK=1e3,gK=kn.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of n.state.field(Ti).active)e.state==1&&this.startQuery(e)}update(n){let e=n.state.field(Ti),t=n.state.facet($n);if(!n.selectionSet&&!n.docChanged&&n.startState.field(Ti)==e)return;let i=n.transactions.some(o=>{let r=_6(o,t);return r&8||(o.selection||o.docChanged)&&!(r&3)});for(let o=0;o<this.running.length;o++){let r=this.running[o];if(i||r.context.abortOnDocChange&&n.docChanged||r.updates.length+n.transactions.length>hK&&Date.now()-r.time>dK){for(let l of r.context.abortListeners)try{l()}catch(a){Si(this.view.state,a)}r.context.abortListeners=null,this.running.splice(o--,1)}else r.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(o=>o.effects.some(r=>r.is(Id)))&&(this.pendingStart=!0);let s=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(o=>o.state==1&&!this.running.some(r=>r.active.source==o.source))?setTimeout(()=>this.startUpdate(),s):-1,this.composing!=0)for(let o of n.transactions)o.isUserEvent("input.type")?this.composing=2:this.composing==2&&o.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,e=n.field(Ti);for(let t of e.active)t.state==1&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t)}startQuery(n){let{state:e}=this.view,t=kr(e),i=new p6(e,t,n.explicitPos==t,this.view),s=new uK(n,i);this.running.push(s),Promise.resolve(n.source(i)).then(o=>{s.context.aborted||(s.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:Df.of(null)}),Si(this.view.state,o)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet($n).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet($n);for(let i=0;i<this.running.length;i++){let s=this.running[i];if(s.done===void 0)continue;if(this.running.splice(i--,1),s.done){let r=new Da(s.active.source,s.active.explicitPos,s.done,s.done.from,(n=s.done.to)!==null&&n!==void 0?n:kr(s.updates.length?s.updates[0].startState:this.view.state));for(let l of s.updates)r=r.update(l,t);if(r.hasResult()){e.push(r);continue}}let o=this.view.state.field(Ti).active.find(r=>r.source==s.active.source);if(o&&o.state==1)if(s.done==null){let r=new Ji(s.active.source,0);for(let l of s.updates)r=r.update(l,t);r.state!=1&&e.push(r)}else this.startQuery(o)}e.length&&this.view.dispatch({effects:w6.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(Ti,!1);if(e&&e.tooltip&&this.view.state.facet($n).closeOnBlur){let t=e.open&&Kx(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Df.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Id.of(!1)}),20),this.composing=0}}}),mK=typeof navigator=="object"&&/Win/.test(navigator.platform),pK=Wl.highest(je.domEventHandlers({keydown(n,e){let t=e.state.field(Ti,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||n.key.length>1||n.ctrlKey&&!(mK&&n.altKey)||n.metaKey)return!1;let i=t.open.options[t.open.selected],s=t.active.find(r=>r.source==i.source),o=i.completion.commitCharacters||s.result.commitCharacters;return o&&o.indexOf(n.key)>-1&&_b(e,i),!1}})),bK=je.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"Â·Â·Â·"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'Æ'"}},".cm-completionIcon-class":{"&:after":{content:"'â'"}},".cm-completionIcon-interface":{"&:after":{content:"'â'"}},".cm-completionIcon-variable":{"&:after":{content:"'ð¥'"}},".cm-completionIcon-constant":{"&:after":{content:"'ð¶'"}},".cm-completionIcon-type":{"&:after":{content:"'ð¡'"}},".cm-completionIcon-enum":{"&:after":{content:"'âª'"}},".cm-completionIcon-property":{"&:after":{content:"'â¡'"}},".cm-completionIcon-keyword":{"&:after":{content:"'ðï¸'"}},".cm-completionIcon-namespace":{"&:after":{content:"'â¢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Lf={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},hl=pt.define({map(n,e){let t=e.mapPos(n,-1,ki.TrackAfter);return t??void 0}}),wb=new class extends El{};wb.startSide=1;wb.endSide=-1;const k6=zn.define({create(){return Tt.empty},update(n,e){if(n=n.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:i=>i>=t.from&&i<=t.to})}for(let t of e.effects)t.is(hl)&&(n=n.update({add:[wb.range(t.value,t.value+1)]}));return n}});function yK(){return[wK,k6]}const Lm="()[]{}<>";function S6(n){for(let e=0;e<Lm.length;e+=2)if(Lm.charCodeAt(e)==n)return Lm.charAt(e+1);return z0(n<128?n:n+1)}function C6(n,e){return n.languageDataAt("closeBrackets",e)[0]||Lf}const _K=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),wK=je.inputHandler.of((n,e,t,i)=>{if((_K?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let s=n.state.selection.main;if(i.length>2||i.length==2&&is(Qn(i,0))==1||e!=s.from||t!=s.to)return!1;let o=SK(n.state,i);return o?(n.dispatch(o),!0):!1}),vK=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let i=C6(n,n.selection.main.head).brackets||Lf.brackets,s=null,o=n.changeByRange(r=>{if(r.empty){let l=CK(n.doc,r.head);for(let a of i)if(a==l&&Ng(n.doc,r.head)==S6(Qn(a,0)))return{changes:{from:r.head-a.length,to:r.head+a.length},range:_e.cursor(r.head-a.length)}}return{range:s=r}});return s||e(n.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!s},kK=[{key:"Backspace",run:vK}];function SK(n,e){let t=C6(n,n.selection.main.head),i=t.brackets||Lf.brackets;for(let s of i){let o=S6(Qn(s,0));if(e==s)return o==s?AK(n,s,i.indexOf(s+s+s)>-1,t):MK(n,s,o,t.before||Lf.before);if(e==o&&M6(n,n.selection.main.from))return xK(n,s,o)}return null}function M6(n,e){let t=!1;return n.field(k6).between(0,n.doc.length,i=>{i==e&&(t=!0)}),t}function Ng(n,e){let t=n.sliceString(e,e+2);return t.slice(0,is(Qn(t,0)))}function CK(n,e){let t=n.sliceString(e-2,e);return is(Qn(t,0))==t.length?t:t.slice(1)}function MK(n,e,t,i){let s=null,o=n.changeByRange(r=>{if(!r.empty)return{changes:[{insert:e,from:r.from},{insert:t,from:r.to}],effects:hl.of(r.to+e.length),range:_e.range(r.anchor+e.length,r.head+e.length)};let l=Ng(n.doc,r.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:e+t,from:r.head},effects:hl.of(r.head+e.length),range:_e.cursor(r.head+e.length)}:{range:s=r}});return s?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function xK(n,e,t){let i=null,s=n.changeByRange(o=>o.empty&&Ng(n.doc,o.head)==t?{changes:{from:o.head,to:o.head+t.length,insert:t},range:_e.cursor(o.head+t.length)}:i={range:o});return i?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function AK(n,e,t,i){let s=i.stringPrefixes||Lf.stringPrefixes,o=null,r=n.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:hl.of(l.to+e.length),range:_e.range(l.anchor+e.length,l.head+e.length)};let a=l.head,c=Ng(n.doc,a),f;if(c==e){if(Rk(n,a))return{changes:{insert:e+e,from:a},effects:hl.of(a+e.length),range:_e.cursor(a+e.length)};if(M6(n,a)){let h=t&&n.sliceDoc(a,a+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:a,to:a+h.length,insert:h},range:_e.cursor(a+h.length)}}}else{if(t&&n.sliceDoc(a-2*e.length,a)==e+e&&(f=Dk(n,a-2*e.length,s))>-1&&Rk(n,f))return{changes:{insert:e+e+e+e,from:a},effects:hl.of(a+e.length),range:_e.cursor(a+e.length)};if(n.charCategorizer(a)(c)!=yn.Word&&Dk(n,a,s)>-1&&!OK(n,a,e,s))return{changes:{insert:e+e,from:a},effects:hl.of(a+e.length),range:_e.cursor(a+e.length)}}return{range:o=l}});return o?null:n.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function Rk(n,e){let t=bi(n).resolveInner(e+1);return t.parent&&t.from==e}function OK(n,e,t,i){let s=bi(n).resolveInner(e,-1),o=i.reduce((r,l)=>Math.max(r,l.length),0);for(let r=0;r<5;r++){let l=n.sliceDoc(s.from,Math.min(s.to,s.from+t.length+o)),a=l.indexOf(t);if(!a||a>-1&&i.indexOf(l.slice(0,a))>-1){let f=s.firstChild;for(;f&&f.from==s.from&&f.to-f.from>t.length+a;){if(n.sliceDoc(f.to-t.length,f.to)==t)return!1;f=f.firstChild}return!0}let c=s.to==e&&s.parent;if(!c)break;s=c}return!1}function Dk(n,e,t){let i=n.charCategorizer(e);if(i(n.sliceDoc(e-1,e))!=yn.Word)return e;for(let s of t){let o=e-s.length;if(n.sliceDoc(o,e)==s&&i(n.sliceDoc(o-1,o))!=yn.Word)return o}return-1}function PK(n={}){return[pK,Ti,$n.of(n),gK,TK,bK]}const x6=[{key:"Ctrl-Space",run:cK},{key:"Escape",run:fK},{key:"ArrowDown",run:Xu(!0)},{key:"ArrowUp",run:Xu(!1)},{key:"PageDown",run:Xu(!0,"page")},{key:"PageUp",run:Xu(!1,"page")},{key:"Enter",run:aK}],TK=Wl.highest(md.computeN([$n],n=>n.facet($n).defaultKeymap?[x6]:[]));function Lk(n){let e,t,i;return{c(){e=R("div"),t=Se("Line: "),i=Se(n[0]),w(e,"class","jse-status-bar-info svelte-hhcn0f")},m(s,o){j(s,e,o),A(e,t),A(e,i)},p(s,o){o&1&&Xe(i,s[0])},d(s){s&&B(e)}}}function Ik(n){let e,t,i;return{c(){e=R("div"),t=Se("Column: "),i=Se(n[1]),w(e,"class","jse-status-bar-info svelte-hhcn0f")},m(s,o){j(s,e,o),A(e,t),A(e,i)},p(s,o){o&2&&Xe(i,s[1])},d(s){s&&B(e)}}}function Nk(n){let e,t,i,s;return{c(){e=R("div"),t=Se("Selection: "),i=Se(n[2]),s=Se(" characters"),w(e,"class","jse-status-bar-info svelte-hhcn0f")},m(o,r){j(o,e,r),A(e,t),A(e,i),A(e,s)},p(o,r){r&4&&Xe(i,o[2])},d(o){o&&B(e)}}}function EK(n){let e,t,i,s=n[0]!==void 0&&Lk(n),o=n[1]!==void 0&&Ik(n),r=n[2]!==void 0&&n[2]>0&&Nk(n);return{c(){e=R("div"),s&&s.c(),t=G(),o&&o.c(),i=G(),r&&r.c(),w(e,"class","jse-status-bar svelte-hhcn0f")},m(l,a){j(l,e,a),s&&s.m(e,null),A(e,t),o&&o.m(e,null),A(e,i),r&&r.m(e,null)},p(l,[a]){l[0]!==void 0?s?s.p(l,a):(s=Lk(l),s.c(),s.m(e,t)):s&&(s.d(1),s=null),l[1]!==void 0?o?o.p(l,a):(o=Ik(l),o.c(),o.m(e,i)):o&&(o.d(1),o=null),l[2]!==void 0&&l[2]>0?r?r.p(l,a):(r=Nk(l),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i:ge,o:ge,d(l){l&&B(e),s&&s.d(),o&&o.d(),r&&r.d()}}}function RK(n,e,t){let{editorState:i}=e,s,o,r,l,a;return n.$$set=c=>{"editorState"in c&&t(3,i=c.editorState)},n.$$.update=()=>{var c,f,u,h,d;n.$$.dirty&8&&t(4,s=(f=(c=i==null?void 0:i.selection)==null?void 0:c.main)==null?void 0:f.head),n.$$.dirty&24&&t(5,o=s!==void 0?(u=i==null?void 0:i.doc)==null?void 0:u.lineAt(s):void 0),n.$$.dirty&32&&t(0,r=o!==void 0?o.number:void 0),n.$$.dirty&48&&t(1,l=o!==void 0&&s!==void 0?s-o.from+1:void 0),n.$$.dirty&8&&t(2,a=(d=(h=i==null?void 0:i.selection)==null?void 0:h.ranges)==null?void 0:d.reduce((g,m)=>g+m.to-m.from,0))},[r,l,a,i,s,o]}class DK extends ze{constructor(e){super(),Fe(this,e,RK,EK,Qt,{editorState:3})}}const vb=ou.define([{tag:Me.propertyName,color:"var(--internal-key-color)"},{tag:Me.number,color:"var(--internal-value-color-number)"},{tag:Me.bool,color:"var(--internal-value-color-boolean)"},{tag:Me.string,color:"var(--internal-value-color-string)"},{tag:Me.keyword,color:"var(--internal-value-color-null)"}]),LK=yA(vb),IK=vb.style;vb.style=n=>IK(n||[]);function NK(n,e=n.state){const t=new Set;for(const{from:i,to:s}of n.visibleRanges){let o=i;for(;o<=s;){const r=e.doc.lineAt(o);t.has(r)||t.add(r),o=r.to+1}}return t}function M1(n){const e=n.selection.main.head;return n.doc.lineAt(e)}function Bk(n,e){let t=0;e:for(let i=0;i<n.length;i++)switch(n[i]){case" ":case"Â ":{t+=1;continue e}case"	":{t+=e-t%e;continue e}case"\r":continue e;default:break e}return t}const Bd=Ve.define({combine(n){return ms(n,{highlightActiveBlock:!0,hideFirstIndent:!1,markerType:"fullScope",thickness:1})}});class BK{constructor(e,t,i,s){this.lines=e,this.state=t,this.map=new Map,this.unitWidth=i,this.markerType=s;for(const o of this.lines)this.add(o);this.state.facet(Bd).highlightActiveBlock&&this.findAndSetActiveLines()}has(e){return this.map.has(typeof e=="number"?e:e.number)}get(e){const t=this.map.get(typeof e=="number"?e:e.number);if(!t)throw new Error("Line not found in indentation map");return t}set(e,t,i){const s=!e.text.trim().length,o={line:e,col:t,level:i,empty:s};return this.map.set(o.line.number,o),o}add(e){if(this.has(e))return this.get(e);if(!e.length||!e.text.trim().length){if(e.number===1)return this.set(e,0,0);if(e.number===this.state.doc.lines){const r=this.closestNonEmpty(e,-1);return this.set(e,0,r.level)}const s=this.closestNonEmpty(e,-1),o=this.closestNonEmpty(e,1);return s.level>=o.level&&this.markerType!=="codeOnly"?this.set(e,0,s.level):s.empty&&s.level===0&&o.level!==0?this.set(e,0,0):o.level>s.level?this.set(e,0,s.level+1):this.set(e,0,o.level)}const t=Bk(e.text,this.state.tabSize),i=Math.floor(t/this.unitWidth);return this.set(e,t,i)}closestNonEmpty(e,t){let i=e.number+t;for(;t===-1?i>=1:i<=this.state.doc.lines;){if(this.has(i)){const r=this.get(i);if(!r.empty)return r}const o=this.state.doc.line(i);if(o.text.trim().length){const r=Bk(o.text,this.state.tabSize),l=Math.floor(r/this.unitWidth);return this.set(o,r,l)}i+=t}const s=this.state.doc.line(t===-1?1:this.state.doc.lines);return this.set(s,0,0)}findAndSetActiveLines(){const e=M1(this.state);if(!this.has(e))return;let t=this.get(e);if(this.has(t.line.number+1)){const o=this.get(t.line.number+1);o.level>t.level&&(t=o)}if(this.has(t.line.number-1)){const o=this.get(t.line.number-1);o.level>t.level&&(t=o)}if(t.level===0)return;t.active=t.level;let i,s;for(i=t.line.number;i>1;i--){if(!this.has(i-1))continue;const o=this.get(i-1);if(o.level<t.level)break;o.active=t.level}for(s=t.line.number;s<this.state.doc.lines;s++){if(!this.has(s+1))continue;const o=this.get(s+1);if(o.level<t.level)break;o.active=t.level}}}function jK(n){const e={light:"#F0F1F2",dark:"#2B3245",activeLight:"#E4E5E6",activeDark:"#3C445C"};let t=e;return n&&(t=Object.assign(Object.assign({},e),n)),je.baseTheme({"&light":{"--indent-marker-bg-color":t.light,"--indent-marker-active-bg-color":t.activeLight},"&dark":{"--indent-marker-bg-color":t.dark,"--indent-marker-active-bg-color":t.activeDark},".cm-line":{position:"relative"},".cm-indent-markers::before":{content:'""',position:"absolute",top:0,left:"2px",right:0,bottom:0,background:"var(--indent-markers)",pointerEvents:"none",zIndex:"-1"}})}function Gu(n,e,t,i,s){return`${`repeating-linear-gradient(to right, var(${n}) 0 ${e}px, transparent ${e}px ${t}ch)`} ${i*t}.5ch/calc(${t*s}ch - 1px) no-repeat`}function FK(n,e,t,i,s){const{level:o,active:r}=n;if(s=s??i,t&&o===0)return[];const l=t?1:0,a=[];if(r!==void 0){const c=r-l-1;c>0&&a.push(Gu("--indent-marker-bg-color",i,e,l,c)),a.push(Gu("--indent-marker-active-bg-color",s,e,r-1,1)),r!==o&&a.push(Gu("--indent-marker-bg-color",i,e,r,o-r))}else a.push(Gu("--indent-marker-bg-color",i,e,l,o-l));return a.join(",")}class zK{constructor(e){this.view=e,this.unitWidth=Nr(e.state),this.currentLineNumber=M1(e.state).number,this.generate(e.state)}update(e){const t=Nr(e.state),i=t!==this.unitWidth;i&&(this.unitWidth=t);const s=M1(e.state).number,o=s!==this.currentLineNumber;this.currentLineNumber=s;const r=e.state.facet(Bd).highlightActiveBlock&&o;(e.docChanged||e.viewportChanged||i||r)&&this.generate(e.state)}generate(e){const t=new mo,i=NK(this.view,e),{hideFirstIndent:s,markerType:o,thickness:r,activeThickness:l}=e.facet(Bd),a=new BK(i,e,this.unitWidth,o);for(const c of i){const f=a.get(c.number);if(!(f!=null&&f.level))continue;const u=FK(f,this.unitWidth,s,r,l);t.add(c.from,c.from,rt.line({class:"cm-indent-markers",attributes:{style:`--indent-markers: ${u}`}}))}this.decorations=t.finish()}}function VK(n={}){return[Bd.of(n),jK(n.colors),kn.fromClass(zK,{decorations:e=>e.decorations})]}class HK{constructor(e){this.view=e,this.indentUnit=Nr(e.state),this.initialPaddingLeft=null,this.isChrome=window==null?void 0:window.navigator.userAgent.includes("Chrome"),this.generate(e.state)}update(e){const t=Nr(e.state);(t!==this.indentUnit||e.docChanged||e.viewportChanged)&&(this.indentUnit=t,this.generate(e.state))}generate(e){const t=new mo;this.initialPaddingLeft?this.addStyleToBuilder(t,e,this.initialPaddingLeft):this.view.requestMeasure({read:i=>{const s=i.contentDOM.querySelector(".cm-line");s&&(this.initialPaddingLeft=window.getComputedStyle(s).getPropertyValue("padding-left"),this.addStyleToBuilder(t,i.state,this.initialPaddingLeft)),this.decorations=t.finish()}}),this.decorations=t.finish()}addStyleToBuilder(e,t,i){const s=this.getVisibleLines(t);for(const o of s){const{numColumns:r,containsTab:l}=this.numColumns(o.text,t.tabSize),a=`calc(${r+this.indentUnit}ch + ${i})`,c=this.isChrome?`calc(-${r+this.indentUnit}ch - ${l?1:0}px)`:`-${r+this.indentUnit}ch`;e.add(o.from,o.from,rt.line({attributes:{style:`padding-left: ${a}; text-indent: ${c};`}}))}}getVisibleLines(e){const t=new Set;let i=null;for(const{from:s,to:o}of this.view.visibleRanges){let r=s;for(;r<=o;){const l=e.doc.lineAt(r);i!==l&&(t.add(l),i=l),r=l.to+1}}return t}numColumns(e,t){let i=0,s=!1;e:for(let o=0;o<e.length;o++)switch(e[o]){case" ":{i+=1;continue e}case"	":{i+=t-i%t,s=!0;continue e}case"\r":continue e;default:break e}return{numColumns:i,containsTab:s}}}const WK=[kn.fromClass(HK,{decorations:n=>n.decorations})];function qK(n){const e=n.slice(),t=e[28](e[11],e[9]);return e[99]=t,e}function Im(n){const e=n.slice(),t=e[11].length===0;return e[100]=t,e}function jk(n){let e,t;return e=new Cz({props:{readOnly:n[1],onFormat:n[17],onCompact:n[18],onSort:n[19],onTransform:n[20],onToggleSearch:n[21],onUndo:n[22],onRedo:n[23],canFormat:!n[100],canCompact:!n[100],canSort:!n[100],canTransform:!n[100],canUndo:n[12],canRedo:n[13],onRenderMenu:n[4]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s[0]&2&&(o.readOnly=i[1]),s[0]&2048&&(o.canFormat=!i[100]),s[0]&2048&&(o.canCompact=!i[100]),s[0]&2048&&(o.canSort=!i[100]),s[0]&2048&&(o.canTransform=!i[100]),s[0]&4096&&(o.canUndo=i[12]),s[0]&8192&&(o.canRedo=i[13]),s[0]&16&&(o.onRenderMenu=i[4]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function UK(n){let e;return{c(){e=R("div"),e.innerHTML='<div class="jse-loading-space svelte-a0poeb"></div> <div class="jse-loading svelte-a0poeb">loading...</div>',w(e,"class","jse-contents svelte-a0poeb")},m(t,i){j(t,e,i)},p:ge,i:ge,o:ge,d(t){t&&B(e)}}}function JK(n){let e,t,i,s,o,r=n[99]&&Fk(n),l=!n[99]&&zk(n);return{c(){e=R("div"),t=G(),r&&r.c(),i=G(),l&&l.c(),s=bt(),w(e,"class","jse-contents svelte-a0poeb"),te(e,"jse-hidden",n[99])},m(a,c){j(a,e,c),n[53](e),j(a,t,c),r&&r.m(a,c),j(a,i,c),l&&l.m(a,c),j(a,s,c),o=!0},p(a,c){(!o||c[0]&268438016)&&te(e,"jse-hidden",a[99]),a[99]?r?(r.p(a,c),c[0]&2560&&k(r,1)):(r=Fk(a),r.c(),k(r,1),r.m(i.parentNode,i)):r&&(me(),M(r,1,1,()=>{r=null}),pe()),a[99]?l&&(me(),M(l,1,1,()=>{l=null}),pe()):l?(l.p(a,c),c[0]&2560&&k(l,1)):(l=zk(a),l.c(),k(l,1),l.m(s.parentNode,s))},i(a){o||(k(r),k(l),o=!0)},o(a){M(r),M(l),o=!1},d(a){a&&(B(e),B(t),B(i),B(s)),n[53](null),r&&r.d(a),l&&l.d(a)}}}function Fk(n){let e,t,i,s=zo(n[11]||"",$m)+"",o,r;return e=new Ns({props:{icon:Vl,type:"error",message:`The JSON document is larger than ${xu(ep,1024)}, and may crash your browser when loading it in text mode. Actual size: ${xu(n[11].length,1024)}.`,actions:[{text:"Open anyway",title:"Open the document in text mode. This may freeze or crash your browser.",onClick:n[24]},{text:"Open in tree mode",title:"Open the document in tree mode. Tree mode can handle large documents.",onClick:n[25]},{text:"Cancel",title:"Cancel opening this large document.",onClick:n[26]}],onClose:n[5]}}),{c(){se(e.$$.fragment),t=G(),i=R("div"),o=Se(s),w(i,"class","jse-contents jse-preview svelte-a0poeb")},m(l,a){ne(e,l,a),j(l,t,a),j(l,i,a),A(i,o),r=!0},p(l,a){const c={};a[0]&2048&&(c.message=`The JSON document is larger than ${xu(ep,1024)}, and may crash your browser when loading it in text mode. Actual size: ${xu(l[11].length,1024)}.`),e.$set(c),(!r||a[0]&2048)&&s!==(s=zo(l[11]||"",$m)+"")&&Xe(o,s)},i(l){r||(k(e.$$.fragment,l),r=!0)},o(l){M(e.$$.fragment,l),r=!1},d(l){l&&(B(t),B(i)),ie(e,l)}}}function zk(n){let e,t,i=!n[14]&&n[0]&&G2(n[11]),s,o,r,l=n[3]&&Vk(n),a=n[14]&&Hk(n),c=i&&Wk(n);return o=new E0({props:{validationErrors:n[10],selectError:n[27]}}),{c(){l&&l.c(),e=G(),a&&a.c(),t=G(),c&&c.c(),s=G(),se(o.$$.fragment)},m(f,u){l&&l.m(f,u),j(f,e,u),a&&a.m(f,u),j(f,t,u),c&&c.m(f,u),j(f,s,u),ne(o,f,u),r=!0},p(f,u){f[3]?l?(l.p(f,u),u[0]&8&&k(l,1)):(l=Vk(f),l.c(),k(l,1),l.m(e.parentNode,e)):l&&(me(),M(l,1,1,()=>{l=null}),pe()),f[14]?a?(a.p(f,u),u[0]&16384&&k(a,1)):(a=Hk(f),a.c(),k(a,1),a.m(t.parentNode,t)):a&&(me(),M(a,1,1,()=>{a=null}),pe()),u[0]&18433&&(i=!f[14]&&f[0]&&G2(f[11])),i?c?(c.p(f,u),u[0]&18433&&k(c,1)):(c=Wk(f),c.c(),k(c,1),c.m(s.parentNode,s)):c&&(me(),M(c,1,1,()=>{c=null}),pe());const h={};u[0]&1024&&(h.validationErrors=f[10]),o.$set(h)},i(f){r||(k(l),k(a),k(c),k(o.$$.fragment,f),r=!0)},o(f){M(l),M(a),M(c),M(o.$$.fragment,f),r=!1},d(f){f&&(B(e),B(t),B(s)),l&&l.d(f),a&&a.d(f),c&&c.d(f),ie(o,f)}}}function Vk(n){let e,t;return e=new DK({props:{editorState:n[8]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s[0]&256&&(o.editorState=i[8]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Hk(n){let e,t;return e=new Ns({props:{type:"error",icon:Vl,message:n[14].message,actions:n[15],onClick:n[29],onClose:n[5]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s[0]&16384&&(o.message=i[14].message),s[0]&32768&&(o.actions=i[15]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function Wk(n){let e,t;return e=new Ns({props:{type:"success",message:"Do you want to format the JSON?",actions:[{icon:Pp,text:"Format",title:"Format JSON: add proper indentation and new lines (Ctrl+I)",onClick:n[17]},{icon:pf,text:"No thanks",title:"Close this message",onClick:n[54]}],onClose:n[5]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s[0]&1&&(o.actions=[{icon:Pp,text:"Format",title:"Format JSON: add proper indentation and new lines (Ctrl+I)",onClick:i[17]},{icon:pf,text:"No thanks",title:"Close this message",onClick:i[54]}]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function KK(n){let e,t,i,s,o,r=n[2]&&jk(Im(n));const l=[JK,UK],a=[];function c(u,h){return u[16]?1:0}function f(u,h){return h===0?qK(u):u}return i=c(n),s=a[i]=l[i](f(n,i)),{c(){e=R("div"),r&&r.c(),t=G(),s.c(),w(e,"class","jse-text-mode svelte-a0poeb"),te(e,"no-main-menu",!n[2])},m(u,h){j(u,e,h),r&&r.m(e,null),A(e,t),a[i].m(e,null),n[55](e),o=!0},p(u,h){u[2]?r?(r.p(Im(u),h),h[0]&4&&k(r,1)):(r=jk(Im(u)),r.c(),k(r,1),r.m(e,t)):r&&(me(),M(r,1,1,()=>{r=null}),pe()),s.p(f(u,i),h),(!o||h[0]&4)&&te(e,"no-main-menu",!u[2])},i(u){o||(k(r),k(s),o=!0)},o(u){M(r),M(s),o=!1},d(u){u&&B(e),r&&r.d(),a[i].d(),n[55](null)}}}function qk(n){return{from:n.from||0,to:n.to||0,message:n.message||"",actions:n.actions,severity:n.severity}}function YK(n,e,t){let i,s,{readOnly:o}=e,{mainMenuBar:r}=e,{statusBar:l}=e,{askToFormat:a}=e,{externalContent:c}=e,{externalSelection:f}=e,{indentation:u}=e,{tabSize:h}=e,{escapeUnicodeCharacters:d}=e,{parser:g}=e,{validator:m}=e,{validationParser:p}=e,{onChange:b}=e,{onChangeMode:y}=e,{onSelect:v}=e,{onError:C}=e,{onFocus:_}=e,{onBlur:S}=e,{onRenderMenu:x}=e,{onSortModal:D}=e,{onTransformModal:P}=e;const E=Fn("jsoneditor:TextMode"),O={key:"Mod-i",run:Le,shift:Ie,preventDefault:!0},I=typeof window>"u";E("isSSR:",I);let N,F,z,q,Q=!1,X=[];const T=new Oo,U=new Oo,Y=new Oo,le=new Oo,Z=new Oo;let ue=c,W=pp(ue,u,g),we=d;Ai(async()=>{if(!I)try{z=$({target:N,initialText:si(W,Q)?"":i.escapeValue(W),readOnly:o,indentation:u})}catch(oe){console.error(oe)}}),Ci(()=>{z&&(E("Destroy CodeMirror editor"),z.destroy())});let ee=!1,be=!1;const tt=Ba(),re=Ba();function Qe(){z&&(E("focus"),z.focus())}let H=!1;Ci(()=>{zs()}),T0({onMount:Ai,onDestroy:Ci,getWindow:()=>oc(F),hasFocus:()=>H&&document.hasFocus()||b0(F),onFocus:_,onBlur:()=>{zs(),S()}});function ae(oe){return De(oe,!1)}function De(oe,$e){E("handlePatch",oe,$e);const ht=g.parse(W),$t=As(ht,oe),Rt=g3(ht,oe),Xt={text:g.stringify($t,null,u)};return Pt(Xt,$e,!1),{json:$t,previousJson:ht,undo:Rt,redo:oe}}function Le(){if(E("format"),o)return!1;try{const oe=g.parse(W),$e={text:g.stringify(oe,null,u)};return Pt($e,!0,!1),!0}catch(oe){C(oe)}return!1}function Ie(){if(E("compact"),o)return!1;try{const oe=g.parse(W),$e={text:g.stringify(oe)};return Pt($e,!0,!1),!0}catch(oe){C(oe)}return!1}function Te(){if(E("repair"),!o)try{const oe={text:oo(W)};Pt(oe,!0,!1),t(52,oi=Ug),t(14,Xn=null)}catch(oe){C(oe)}}function de(){if(!o)try{const oe=g.parse(W);H=!0,D({id:tt,json:oe,rootPath:[],onSort:async({operations:$e})=>{E("onSort",$e),De($e,!0)},onClose:()=>{H=!1,Qe()}})}catch(oe){C(oe)}}function lt({id:oe,rootPath:$e,onTransform:ht,onClose:$t}){try{const Rt=g.parse(W);H=!0,P({id:oe||re,json:Rt,rootPath:$e||[],onTransform:Xt=>{ht?ht({operations:Xt,json:Rt,transformedJson:As(Rt,Xt)}):(E("onTransform",Xt),De(Xt,!0))},onClose:()=>{H=!1,Qe(),$t&&$t()}})}catch(Rt){C(Rt)}}function wt(){o||lt({rootPath:[]})}function Ee(){z&&(N&&N.querySelector(".cm-search")?bb(z):pb(z))}function st(){o||z&&(cb(z),Qe())}function dt(){o||z&&(Cd(z),Qe())}function Ze(){t(9,Q=!0),Pt(c,!0,!0)}function It(){y(Wn.tree)}function We(){wi()}function ct(oe){E("select validation error",oe);const{from:$e,to:ht}=ot(oe);$e===null||ht===null||(ke($e,ht),Qe())}function K(oe){E("select parse error",oe);const $e=fe(oe,!1),ht=$e.from!=null?$e.from:0,$t=$e.to!=null?$e.to:0;ke(ht,$t),Qe()}function ke(oe,$e){E("setSelection",{anchor:oe,head:$e}),z&&z.dispatch(z.state.update({selection:{anchor:oe,head:$e},scrollIntoView:!0}))}function qe(oe,$e){if($e.state.selection.ranges.length===1){const ht=$e.state.selection.ranges[0],$t=W.slice(ht.from,ht.to);if($t==="{"||$t==="["){const Rt=Yd.parse(W),Xt=Object.keys(Rt.pointers).find(vi=>{var qs;return((qs=Rt.pointers[vi].value)==null?void 0:qs.pos)===ht.from}),Vn=Rt.pointers[Xt];if(Xt&&Vn&&Vn.value&&Vn.valueEnd){E("pointer found, selecting inner contents of path:",Xt,Vn);const vi=Vn.value.pos+1,ln=Vn.valueEnd.pos-1;ke(vi,ln)}}}}function Ce(){return KU(_s,{delay:$b})}function $({target:oe,initialText:$e,readOnly:ht,indentation:$t}){E("Create CodeMirror editor",{readOnly:ht,indentation:$t});const Rt=xt.create({doc:$e,selection:Ge(f,$e)?nt(f):void 0,extensions:[md.of([jU,O]),T.of(Ce()),nJ(),gW(),bW(),IH(),Lq(),lq(),CH(),PH(),xt.allowMultipleSelections.of(!0),KW(),yA(uq,{fallback:!0}),yq(),yK(),PK(),KH(),GH(),VH(),vJ(),md.of([...kK,...BU,...VJ,...Uq,...iq,...x6,...UU]),LK,VK({hideFirstIndent:!0}),je.domEventHandlers({dblclick:qe}),je.updateListener.of(Xt=>{t(8,q=Xt.state),Xt.docChanged?ys():Xt.selectionSet&&ii()}),mJ(),TJ({top:!0}),je.lineWrapping,U.of(xt.readOnly.of(ht)),le.of(xt.tabSize.of(h)),Y.of(Fs($t)),Z.of(je.theme({},{dark:Pe()}))]});return z=new je({state:Rt,parent:oe}),z}function xe(){return z?i.unescapeValue(z.state.doc.toString()):""}function Pe(){return N?getComputedStyle(N).getPropertyValue("--jse-theme").includes("dark"):!1}function Ge(oe,$e){return om(oe)?oe.ranges.every(ht=>ht.anchor<$e.length&&ht.head<$e.length):!1}function ot(oe){const{path:$e,message:ht,severity:$t}=oe,{line:Rt,column:Xt,from:Vn,to:vi}=W7(i.escapeValue(W),$e);return{path:$e,line:Rt,column:Xt,from:Vn,to:vi,message:ht,severity:$t,actions:[]}}function fe(oe,$e){const{line:ht,column:$t,position:Rt,message:Xt}=oe;return{path:[],line:ht,column:$t,from:Rt,to:Rt,severity:Ms.error,message:Xt,actions:$e&&!o?[{name:"Auto repair",apply:()=>Te()}]:null}}function Pt(oe,$e,ht){const $t=pp(oe,u,g),Rt=!yt(oe,ue),Xt=ue;E("setCodeMirrorContent",{isChanged:Rt,emitChange:$e,forceUpdate:ht}),!(!z||!Rt&&!ht)&&(ue=oe,t(11,W=$t),si(W,Q)||z.dispatch({changes:{from:0,to:z.state.doc.length,insert:i.escapeValue(W)}}),yo(),Rt&&$e&&Bi(ue,Xt))}function At(oe){if(!om(oe))return;const $e=nt(oe);z&&$e&&(!q||!q.selection.eq($e))&&(E("applyExternalSelection",$e),z.dispatch({selection:$e}))}function nt(oe){return om(oe)?_e.fromJSON(oe):void 0}async function Kt(){E("refresh"),await js()}function Yt(){E("forceUpdateText",{escapeUnicodeCharacters:d}),z&&z.dispatch({changes:{from:0,to:z.state.doc.length,insert:i.escapeValue(W)}})}function wi(){if(!z)return;const oe=xe(),$e=oe!==W;if(E("onChangeCodeMirrorValue",{isChanged:$e}),!$e)return;const ht=ue;t(11,W=oe),ue={text:W},yo(),Bi(ue,ht),wn().then(ii)}function bs(oe){E("updateLinter",oe),z&&z.dispatch({effects:T.reconfigure(Ce())})}function $o(oe){z&&(E("updateIndentation",oe),z.dispatch({effects:Y.reconfigure(Fs(oe))}))}function qr(oe){z&&(E("updateTabSize",oe),z.dispatch({effects:le.reconfigure(xt.tabSize.of(oe))}))}function Zt(oe){z&&(E("updateReadOnly",oe),z.dispatch({effects:[U.reconfigure(xt.readOnly.of(oe))]}))}async function js(){if(await wn(),z){const oe=Pe();E("updateTheme",{dark:oe}),z.dispatch({effects:[Z.reconfigure(je.theme({},{dark:oe}))]})}}function Fs(oe){const $e=Ag.of(typeof oe=="number"?" ".repeat(oe):oe);return oe==="	"?[$e]:[$e,WK]}function yo(){t(12,ee=Bq(z.state)>0),t(13,be=jq(z.state)>0),E({canUndo:ee,canRedo:be})}const ys=Kh(wi,$b);function zs(){ys.flush()}function Bi(oe,$e){b&&b(oe,$e,{contentErrors:Vs(),patchResult:null})}function ii(){v({type:qt.text,...q.selection.toJSON()})}function si(oe,$e){return(oe?oe.length>ep:!1)&&!$e}let oi=Ug,Xn=null;function _s(){if(si(W,Q))return[];const oe=Vs();if(b_(oe)){const{parseError:$e,isRepairable:ht}=oe;return[qk(fe($e,ht))]}return hB(oe)?oe.validationErrors.map(ot).map(qk):[]}function Vs(){E("validate:start"),zs();const oe=mn(i.escapeValue(W),m,g,p);return b_(oe)?(t(52,oi=oe.isRepairable?i2:zO),t(14,Xn=oe.parseError),t(10,X=[])):(t(52,oi=Ug),t(14,Xn=null),t(10,X=(oe==null?void 0:oe.validationErrors)||[])),E("validate:end"),oe}const mn=eu($N);function Hs(){Xn&&K(Xn)}const Ws={icon:QI,text:"Show me",title:"Move to the parse error location",onClick:Hs};function er(oe){it[oe?"unshift":"push"](()=>{N=oe,t(6,N)})}const _o=()=>t(0,a=!1);function wo(oe){it[oe?"unshift":"push"](()=>{F=oe,t(7,F)})}return n.$$set=oe=>{"readOnly"in oe&&t(1,o=oe.readOnly),"mainMenuBar"in oe&&t(2,r=oe.mainMenuBar),"statusBar"in oe&&t(3,l=oe.statusBar),"askToFormat"in oe&&t(0,a=oe.askToFormat),"externalContent"in oe&&t(30,c=oe.externalContent),"externalSelection"in oe&&t(31,f=oe.externalSelection),"indentation"in oe&&t(32,u=oe.indentation),"tabSize"in oe&&t(33,h=oe.tabSize),"escapeUnicodeCharacters"in oe&&t(34,d=oe.escapeUnicodeCharacters),"parser"in oe&&t(35,g=oe.parser),"validator"in oe&&t(36,m=oe.validator),"validationParser"in oe&&t(37,p=oe.validationParser),"onChange"in oe&&t(38,b=oe.onChange),"onChangeMode"in oe&&t(39,y=oe.onChangeMode),"onSelect"in oe&&t(40,v=oe.onSelect),"onError"in oe&&t(41,C=oe.onError),"onFocus"in oe&&t(42,_=oe.onFocus),"onBlur"in oe&&t(43,S=oe.onBlur),"onRenderMenu"in oe&&t(4,x=oe.onRenderMenu),"onSortModal"in oe&&t(44,D=oe.onSortModal),"onTransformModal"in oe&&t(45,P=oe.onTransformModal)},n.$$.update=()=>{n.$$.dirty[1]&8&&(i=m0({escapeControlCharacters:!1,escapeUnicodeCharacters:d})),n.$$.dirty[0]&1073741824&&Pt(c,!1,!1),n.$$.dirty[1]&1&&At(f),n.$$.dirty[1]&32&&bs(m),n.$$.dirty[1]&2&&$o(u),n.$$.dirty[1]&4&&qr(h),n.$$.dirty[0]&2&&Zt(o),n.$$.dirty[1]&1048584&&we!==d&&(t(51,we=d),Yt()),n.$$.dirty[0]&2|n.$$.dirty[1]&2097152&&t(15,s=oi===i2&&!o?[{icon:hg,text:"Auto repair",title:"Automatically repair JSON",onClick:Te},Ws]:[Ws])},[a,o,r,l,x,Qe,N,F,q,Q,X,W,ee,be,Xn,s,I,Le,Ie,de,wt,Ee,st,dt,Ze,It,We,ct,si,Hs,c,f,u,h,d,g,m,p,b,y,v,C,_,S,D,P,ae,De,lt,Kt,Vs,we,oi,er,_o,wo]}class XK extends ze{constructor(e){super(),Fe(this,e,YK,KK,ft,{readOnly:1,mainMenuBar:2,statusBar:3,askToFormat:0,externalContent:30,externalSelection:31,indentation:32,tabSize:33,escapeUnicodeCharacters:34,parser:35,validator:36,validationParser:37,onChange:38,onChangeMode:39,onSelect:40,onError:41,onFocus:42,onBlur:43,onRenderMenu:4,onSortModal:44,onTransformModal:45,focus:5,patch:46,handlePatch:47,openTransformModal:48,refresh:49,validate:50},null,[-1,-1,-1,-1])}get focus(){return this.$$.ctx[5]}get patch(){return this.$$.ctx[46]}get handlePatch(){return this.$$.ctx[47]}get openTransformModal(){return this.$$.ctx[48]}get refresh(){return this.$$.ctx[49]}get validate(){return this.$$.ctx[50]}}function GK(n){let e,t;return e=new vg({props:{items:n[0]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,[s]){const o={};s&1&&(o.items=i[0]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function QK(n,e,t){let{containsValidArray:i}=e,{readOnly:s}=e,{showSearch:o=!1}=e,{historyState:r}=e,{onSort:l}=e,{onTransform:a}=e,{onContextMenu:c}=e,{onUndo:f}=e,{onRedo:u}=e,{onRenderMenu:h}=e;function d(){t(1,o=!o)}let g,m;return n.$$set=p=>{"containsValidArray"in p&&t(2,i=p.containsValidArray),"readOnly"in p&&t(3,s=p.readOnly),"showSearch"in p&&t(1,o=p.showSearch),"historyState"in p&&t(4,r=p.historyState),"onSort"in p&&t(5,l=p.onSort),"onTransform"in p&&t(6,a=p.onTransform),"onContextMenu"in p&&t(7,c=p.onContextMenu),"onUndo"in p&&t(8,f=p.onUndo),"onRedo"in p&&t(9,u=p.onRedo),"onRenderMenu"in p&&t(10,h=p.onRenderMenu)},n.$$.update=()=>{n.$$.dirty&1020&&t(11,g=s?[{type:"space"}]:[{type:"button",icon:dg,title:"Sort",className:"jse-sort",onClick:l,disabled:s||!i},{type:"button",icon:ug,title:"Transform contents (filter, sort, project)",className:"jse-transform",onClick:a,disabled:s||!i},{type:"button",icon:gg,title:"Search (Ctrl+F)",className:"jse-search",onClick:d,disabled:!i},{type:"button",icon:q4,title:G1,className:"jse-contextmenu",onClick:c},{type:"separator"},{type:"button",icon:x0,title:"Undo (Ctrl+Z)",className:"jse-undo",onClick:f,disabled:!r.canUndo},{type:"button",icon:M0,title:"Redo (Ctrl+Shift+Z)",className:"jse-redo",onClick:u,disabled:!r.canRedo},{type:"space"}]),n.$$.dirty&3072&&t(0,m=h(g))},[m,o,i,s,r,l,a,c,f,u,h,g]}class ZK extends ze{constructor(e){super(),Fe(this,e,QK,GK,ft,{containsValidArray:2,readOnly:3,showSearch:1,historyState:4,onSort:5,onTransform:6,onContextMenu:7,onUndo:8,onRedo:9,onRenderMenu:10})}}function Uk(n,e,t){const i=n.slice();return i[9]=e[t],i}function $K(n){const e=n.slice(),t=e[9].action;return e[12]=t,e}function eY(n){let e=n[9].component,t,i,s=Jk(n);return{c(){s.c(),t=bt()},m(o,r){s.m(o,r),j(o,t,r),i=!0},p(o,r){r&1&&ft(e,e=o[9].component)?(me(),M(s,1,1,ge),pe(),s=Jk(o),s.c(),k(s,1),s.m(t.parentNode,t)):s.p(o,r)},i(o){i||(k(s),i=!0)},o(o){M(s),i=!1},d(o){o&&B(t),s.d(o)}}}function tY(n){let e=n[9].action,t,i=Kk(n);return{c(){i.c(),t=bt()},m(s,o){i.m(s,o),j(s,t,o)},p(s,o){o&1&&ft(e,e=s[9].action)?(i.d(1),i=Kk(s),i.c(),i.m(t.parentNode,t)):i.p(s,o)},i:ge,o:ge,d(s){s&&B(t),i.d(s)}}}function Jk(n){let e,t,i;const s=[n[9].props];var o=n[9].component;function r(l,a){let c={};for(let f=0;f<s.length;f+=1)c=Ht(c,s[f]);return a!==void 0&&a&1&&(c=Ht(c,ni(s,[vl(l[9].props)]))),{props:c}}return o&&(e=us(o,r(n))),{c(){e&&se(e.$$.fragment),t=bt()},m(l,a){e&&ne(e,l,a),j(l,t,a),i=!0},p(l,a){if(a&1&&o!==(o=l[9].component)){if(e){me();const c=e;M(c.$$.fragment,1,0,()=>{ie(c,1)}),pe()}o?(e=us(o,r(l,a)),se(e.$$.fragment),k(e.$$.fragment,1),ne(e,t.parentNode,t)):e=null}else if(o){const c=a&1?ni(s,[vl(l[9].props)]):{};e.$set(c)}},i(l){i||(e&&k(e.$$.fragment,l),i=!0)},o(l){e&&M(e.$$.fragment,l),i=!1},d(l){l&&B(t),e&&ie(e,l)}}}function Kk(n){let e,t,i,s;return{c(){e=R("div"),w(e,"role","button"),w(e,"tabindex","-1"),w(e,"class","jse-value"),w(e,"data-type","selectable-value")},m(o,r){j(o,e,r),i||(s=En(t=n[12].call(null,e,n[9].props)),i=!0)},p(o,r){n=o,t&&Kn(t.update)&&r&1&&t.update.call(null,n[9].props)},d(o){o&&B(e),i=!1,s()}}}function Yk(n){let e,t,i,s,o;const r=[tY,eY],l=[];function a(f,u){return u&1&&(e=null),e==null&&(e=!!cM(f[9])),e?0:1}function c(f,u){return u===0?$K(f):f}return t=a(n,-1),i=l[t]=r[t](c(n,t)),{c(){i.c(),s=bt()},m(f,u){l[t].m(f,u),j(f,s,u),o=!0},p(f,u){let h=t;t=a(f,u),t===h?l[t].p(c(f,t),u):(me(),M(l[h],1,1,()=>{l[h]=null}),pe(),i=l[t],i?i.p(c(f,t),u):(i=l[t]=r[t](c(f,t)),i.c()),k(i,1),i.m(s.parentNode,s))},i(f){o||(k(i),o=!0)},o(f){M(i),o=!1},d(f){f&&B(s),l[t].d(f)}}}function nY(n){let e,t,i=at(n[0]),s=[];for(let r=0;r<i.length;r+=1)s[r]=Yk(Uk(n,i,r));const o=r=>M(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=bt()},m(r,l){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(r,l);j(r,e,l),t=!0},p(r,[l]){if(l&1){i=at(r[0]);let a;for(a=0;a<i.length;a+=1){const c=Uk(r,i,a);s[a]?(s[a].p(c,l),k(s[a],1)):(s[a]=Yk(c),s[a].c(),k(s[a],1),s[a].m(e.parentNode,e))}for(me(),a=i.length;a<s.length;a+=1)o(a);pe()}},i(r){if(!t){for(let l=0;l<i.length;l+=1)k(s[l]);t=!0}},o(r){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)M(s[l]);t=!1},d(r){r&&B(e),xn(s,r)}}}function iY(n,e,t){let i,s,{path:o}=e,{value:r}=e,{context:l}=e,{enforceString:a}=e,{selection:c}=e,{searchResultItems:f}=e;function u(h,d){return l.onPatch(yI(h,l.getJson()),d)}return n.$$set=h=>{"path"in h&&t(1,o=h.path),"value"in h&&t(2,r=h.value),"context"in h&&t(3,l=h.context),"enforceString"in h&&t(4,a=h.enforceString),"selection"in h&&t(5,c=h.selection),"searchResultItems"in h&&t(6,f=h.searchResultItems)},n.$$.update=()=>{n.$$.dirty&40&&t(7,i=!l.readOnly&&St(c)&&pi(c)),n.$$.dirty&254&&t(0,s=l.onRenderValue({path:o,value:r,readOnly:l.readOnly,enforceString:a,isEditing:i,parser:l.parser,normalization:l.normalization,selection:c,searchResultItems:f,onPatch:u,onPasteJson:l.onPasteJson,onSelect:l.onSelect,onFind:l.onFind,findNextInside:l.findNextInside,focus:l.focus}))},[s,o,r,l,a,c,f,i]}class sY extends ze{constructor(e){super(),Fe(this,e,iY,nY,ft,{path:1,value:2,context:3,enforceString:4,selection:5,searchResultItems:6})}}function oY(n){let e,t=zo(n[2].stringify(n[1])??"",t2)+"",i,s,o;return{c(){e=R("button"),i=Se(t),w(e,"type","button"),w(e,"class","jse-inline-value svelte-1dhomzn"),te(e,"jse-selected",n[3]),te(e,"jse-highlight",n[4]),te(e,"jse-active",n[5])},m(r,l){j(r,e,l),A(e,i),s||(o=he(e,"dblclick",n[7]),s=!0)},p(r,[l]){l&6&&t!==(t=zo(r[2].stringify(r[1])??"",t2)+"")&&Xe(i,t),l&8&&te(e,"jse-selected",r[3]),l&16&&te(e,"jse-highlight",r[4]),l&32&&te(e,"jse-active",r[5])},i:ge,o:ge,d(r){r&&B(e),s=!1,o()}}}function rY(n,e,t){let{path:i}=e,{value:s}=e,{parser:o}=e,{isSelected:r}=e,{containsSearchResult:l}=e,{containsActiveSearchResult:a}=e,{onEdit:c}=e;const f=()=>c(i);return n.$$set=u=>{"path"in u&&t(0,i=u.path),"value"in u&&t(1,s=u.value),"parser"in u&&t(2,o=u.parser),"isSelected"in u&&t(3,r=u.isSelected),"containsSearchResult"in u&&t(4,l=u.containsSearchResult),"containsActiveSearchResult"in u&&t(5,a=u.containsActiveSearchResult),"onEdit"in u&&t(6,c=u.onEdit)},[i,s,o,r,l,a,c,f]}class lY extends ze{constructor(e){super(),Fe(this,e,rY,oY,ft,{path:0,value:1,parser:2,isSelected:3,containsSearchResult:4,containsActiveSearchResult:5,onEdit:6})}}function Xk(n){let e,t,i,s;return t=new vt({props:{data:n[1]===rs.asc?ss:wy}}),{c(){e=R("span"),se(t.$$.fragment),w(e,"class","jse-column-sort-icon svelte-2v0aqj"),w(e,"title",i=`Currently sorted in ${n[2]} order`)},m(o,r){j(o,e,r),ne(t,e,null),s=!0},p(o,r){const l={};r&2&&(l.data=o[1]===rs.asc?ss:wy),t.$set(l),(!s||r&4&&i!==(i=`Currently sorted in ${o[2]} order`))&&w(e,"title",i)},i(o){s||(k(t.$$.fragment,o),s=!0)},o(o){M(t.$$.fragment,o),s=!1},d(o){o&&B(e),ie(t)}}}function aY(n){let e,t,i=zo(n[3],n2)+"",s,o,r,l,a,c,f=n[1]!==void 0&&Xk(n);return{c(){e=R("button"),t=R("span"),s=Se(i),o=G(),f&&f.c(),w(t,"class","jse-column-name"),w(e,"type","button"),w(e,"class","jse-column-header svelte-2v0aqj"),w(e,"title",r=n[0]?n[3]:n[3]+" (Click to sort the data by this column)"),te(e,"jse-readonly",n[0])},m(u,h){j(u,e,h),A(e,t),A(t,s),A(e,o),f&&f.m(e,null),l=!0,a||(c=he(e,"click",n[4]),a=!0)},p(u,[h]){(!l||h&8)&&i!==(i=zo(u[3],n2)+"")&&Xe(s,i),u[1]!==void 0?f?(f.p(u,h),h&2&&k(f,1)):(f=Xk(u),f.c(),k(f,1),f.m(e,null)):f&&(me(),M(f,1,1,()=>{f=null}),pe()),(!l||h&9&&r!==(r=u[0]?u[3]:u[3]+" (Click to sort the data by this column)"))&&w(e,"title",r),(!l||h&1)&&te(e,"jse-readonly",u[0])},i(u){l||(k(f),l=!0)},o(u){M(f),l=!1},d(u){u&&B(e),f&&f.d(),a=!1,c()}}}function cY(n,e,t){let i,s,o,{path:r}=e,{sortedColumn:l}=e,{readOnly:a}=e,{onSort:c}=e;function f(){a||c({path:r,sortDirection:s===rs.asc?rs.desc:rs.asc})}return n.$$set=u=>{"path"in u&&t(5,r=u.path),"sortedColumn"in u&&t(6,l=u.sortedColumn),"readOnly"in u&&t(0,a=u.readOnly),"onSort"in u&&t(7,c=u.onSort)},n.$$.update=()=>{n.$$.dirty&32&&t(3,i=Ct(r)?"values":Ii(r)),n.$$.dirty&96&&t(1,s=l&&yt(r,l==null?void 0:l.path)?l.sortDirection:void 0),n.$$.dirty&2&&t(2,o=s?VO[s]:void 0)},[a,s,o,i,f,r,l,c]}class fY extends ze{constructor(e){super(),Fe(this,e,cY,aY,ft,{path:5,sortedColumn:6,readOnly:0,onSort:7})}}let Qu,Zu;function A6(n,e){return Qu||(Zu=new WeakMap,Qu=new ResizeObserver(t=>{for(const i of t){const s=Zu.get(i.target);s&&s(i.target)}})),Zu.set(n,e),Qu.observe(n),{destroy:()=>{Zu.delete(n),Qu.unobserve(n)}}}function Gk(n,e,t){const i=n.slice();i[16]=e[t];const s=i[9](i[16]);return i[17]=s,i}function uY(n){let e,t;return{c(){e=Se(n[7]),t=Se(" cannot be opened in table mode.")},m(i,s){j(i,e,s),j(i,t,s)},p(i,s){s&128&&Xe(e,i[7])},d(i){i&&(B(e),B(t))}}}function hY(n){let e;return{c(){e=Se(`An object cannot be opened in table mode. You can open a nested array instead, or open the
        document in tree mode.`)},m(t,i){j(t,e,i)},p:ge,d(t){t&&B(e)}}}function dY(n){let e;return{c(){e=Se("You can open the document in tree mode instead.")},m(t,i){j(t,e,i)},d(t){t&&B(e)}}}function gY(n){let e,t,i;return{c(){e=Se("You can open the document in tree mode instead, or paste a JSON Array using "),t=R("b"),t.textContent="Ctrl+V",i=Se(".")},m(s,o){j(s,e,o),j(s,t,o),j(s,i,o)},d(s){s&&(B(e),B(t),B(i))}}}function Qk(n){let e,t,i,s=Ii(n[16])+"",o,r,l,a,c=n[17]+"",f,u,h=n[17]!==1?"items":"item",d,g,m,p;function b(){return n[13](n[16])}return{c(){e=R("button"),t=Se(n[8]),i=Se(' "'),o=Se(s),r=Se(`"
        `),l=R("span"),a=Se("("),f=Se(c),u=G(),d=Se(h),g=Se(")"),w(l,"class","jse-nested-array-count svelte-fxr3ye"),w(e,"type","button"),w(e,"class","jse-nested-array-action svelte-fxr3ye")},m(y,v){j(y,e,v),A(e,t),A(e,i),A(e,o),A(e,r),A(e,l),A(l,a),A(l,f),A(l,u),A(l,d),A(l,g),m||(p=he(e,"click",b),m=!0)},p(y,v){n=y,v&256&&Xe(t,n[8]),v&16&&s!==(s=Ii(n[16])+"")&&Xe(o,s),v&16&&c!==(c=n[17]+"")&&Xe(f,c),v&16&&h!==(h=n[17]!==1?"items":"item")&&Xe(d,h)},d(y){y&&B(e),m=!1,p()}}}function mY(n){let e,t,i,s,o,r,l,a,c,f,u,h,d,g,m,p,b,y;function v(O,I){return O[6]?hY:uY}let C=v(n),_=C(n);function S(O,I){return O[5]&&!O[0]?gY:dY}let x=S(n),D=x(n),P=at(n[4]),E=[];for(let O=0;O<P.length;O+=1)E[O]=Qk(Gk(n,P,O));return{c(){e=R("div"),t=R("div"),i=G(),s=R("div"),o=R("div"),r=Se(n[7]),l=G(),a=R("div"),_.c(),c=G(),D.c(),f=G();for(let O=0;O<E.length;O+=1)E[O].c();u=G(),h=R("button"),d=Se(n[8]),g=Se(" in tree mode"),m=G(),p=R("div"),w(t,"class","jse-space jse-before svelte-fxr3ye"),w(o,"class","jse-nested-arrays-title"),w(a,"class","jse-nested-arrays-info svelte-fxr3ye"),w(h,"type","button"),w(h,"class","jse-nested-array-action svelte-fxr3ye"),w(s,"class","jse-nested-arrays svelte-fxr3ye"),w(p,"class","jse-space jse-after svelte-fxr3ye"),w(e,"class","jse-table-mode-welcome svelte-fxr3ye"),w(e,"role","none")},m(O,I){j(O,e,I),A(e,t),A(e,i),A(e,s),A(s,o),A(o,r),A(s,l),A(s,a),_.m(a,null),A(a,c),D.m(a,null),A(s,f);for(let N=0;N<E.length;N+=1)E[N]&&E[N].m(s,null);A(s,u),A(s,h),A(h,d),A(h,g),A(e,m),A(e,p),b||(y=[he(h,"click",n[14]),he(e,"click",n[15])],b=!0)},p(O,[I]){if(I&128&&Xe(r,O[7]),C===(C=v(O))&&_?_.p(O,I):(_.d(1),_=C(O),_&&(_.c(),_.m(a,c))),x!==(x=S(O))&&(D.d(1),D=x(O),D&&(D.c(),D.m(a,null))),I&786){P=at(O[4]);let N;for(N=0;N<P.length;N+=1){const F=Gk(O,P,N);E[N]?E[N].p(F,I):(E[N]=Qk(F),E[N].c(),E[N].m(s,u))}for(;N<E.length;N+=1)E[N].d(1);E.length=P.length}I&256&&Xe(d,O[8])},i:ge,o:ge,d(O){O&&B(e),_.d(),D.d(),xn(E,O),b=!1,Et(y)}}}function pY(n,e,t){let i,s,o,r,{text:l}=e,{json:a}=e,{readOnly:c}=e,{parser:f}=e,{openJSONEditorModal:u}=e,{onChangeMode:h}=e,{onClick:d}=e,g;function m(v){return Be(a,v).length}const p=v=>u(v),b=()=>h(Wn.tree),y=()=>d();return n.$$set=v=>{"text"in v&&t(10,l=v.text),"json"in v&&t(11,a=v.json),"readOnly"in v&&t(0,c=v.readOnly),"parser"in v&&t(12,f=v.parser),"openJSONEditorModal"in v&&t(1,u=v.openJSONEditorModal),"onChangeMode"in v&&t(2,h=v.onChangeMode),"onClick"in v&&t(3,d=v.onClick)},n.$$.update=()=>{n.$$.dirty&1&&t(8,i=c?"View":"Edit"),n.$$.dirty&2048&&t(4,g=a?yF(a).slice(0,99).filter(v=>v.length>0):[]),n.$$.dirty&16&&t(6,s=!Ct(g)),n.$$.dirty&3072&&t(5,o=a===void 0&&(l===""||l===void 0)),n.$$.dirty&6240&&t(7,r=s?"Object with nested arrays":o?"An empty document":gn(a)?"An object":Jt(a)?"An empty array":`A ${o0(a,f)}`)},[c,u,h,d,g,o,s,r,i,m,l,a,f,p,b,y]}class bY extends ze{constructor(e){super(),Fe(this,e,pY,mY,ft,{text:10,json:11,readOnly:0,parser:12,openJSONEditorModal:1,onChangeMode:2,onClick:3})}}function yY(n){let e,t,i,s,o,r;return t=new vt({props:{data:f9}}),{c(){e=R("button"),se(t.$$.fragment),w(e,"type","button"),w(e,"class","jse-column-header svelte-1nml1r3"),w(e,"title",i=`The Columns are created by sampling ${n[1]} items out of ${n[0]}. If you're missing a column, click here to sample all of the items instead of a subset. This is slower.`)},m(l,a){j(l,e,a),ne(t,e,null),s=!0,o||(r=he(e,"click",n[3]),o=!0)},p(l,[a]){(!s||a&3&&i!==(i=`The Columns are created by sampling ${l[1]} items out of ${l[0]}. If you're missing a column, click here to sample all of the items instead of a subset. This is slower.`))&&w(e,"title",i)},i(l){s||(k(t.$$.fragment,l),s=!0)},o(l){M(t.$$.fragment,l),s=!1},d(l){l&&B(e),ie(t),o=!1,r()}}}function _Y(n,e,t){let{count:i}=e,{maxSampleCount:s}=e,{onRefresh:o}=e;const r=()=>o();return n.$$set=l=>{"count"in l&&t(0,i=l.count),"maxSampleCount"in l&&t(1,s=l.maxSampleCount),"onRefresh"in l&&t(2,o=l.onRefresh)},[i,s,o,r]}class wY extends ze{constructor(e){super(),Fe(this,e,_Y,yY,ft,{count:0,maxSampleCount:1,onRefresh:2})}}function vY({json:n,documentState:e,readOnly:t,parser:i,onEditValue:s,onEditRow:o,onToggleEnforceString:r,onCut:l,onCopy:a,onPaste:c,onRemove:f,onDuplicateRow:u,onInsertBeforeRow:h,onInsertAfterRow:d,onRemoveRow:g}){const m=e.selection,p=n!==void 0,b=!!m,y=n!==void 0&&m?Be(n,Ye(m)):void 0,v=p&&(Wt(m)||vn(m)||St(m)),C=!t&&p&&m!=null&&Zh(m),_=C&&!fn(y),S=!t&&v,x=m!=null&&y!==void 0?Vo(y,e.enforceStringMap,Oe(Ye(m)),i):!1;return[{type:"separator"},{type:"row",items:[{type:"column",items:[{type:"label",text:"Table cell:"},{type:"dropdown-button",main:{type:"button",onClick:()=>s(),icon:Ma,text:"Edit",title:"Edit the value (Double-click on the value)",disabled:!C},width:"11em",items:[{type:"button",icon:Ma,text:"Edit",title:"Edit the value (Double-click on the value)",onClick:()=>s(),disabled:!C},{type:"button",icon:x?V4:W4,text:"Enforce string",title:"Enforce keeping the value as string when it contains a numeric value",onClick:()=>r(),disabled:!_}]},{type:"dropdown-button",main:{type:"button",onClick:()=>l(!0),icon:Ca,text:"Cut",title:"Cut selected contents, formatted with indentation (Ctrl+X)",disabled:!S},width:"10em",items:[{type:"button",icon:Ca,text:"Cut formatted",title:"Cut selected contents, formatted with indentation (Ctrl+X)",onClick:()=>l(!0),disabled:t||!v},{type:"button",icon:Ca,text:"Cut compacted",title:"Cut selected contents, without indentation (Ctrl+Shift+X)",onClick:()=>l(!1),disabled:t||!v}]},{type:"dropdown-button",main:{type:"button",onClick:()=>a(!0),icon:wr,text:"Copy",title:"Copy selected contents, formatted with indentation (Ctrl+C)",disabled:!v},width:"12em",items:[{type:"button",icon:wr,text:"Copy formatted",title:"Copy selected contents, formatted with indentation (Ctrl+C)",onClick:()=>a(!1),disabled:!v},{type:"button",icon:wr,text:"Copy compacted",title:"Copy selected contents, without indentation (Ctrl+Shift+C)",onClick:()=>a(!1),disabled:!v}]},{type:"button",onClick:()=>c(),icon:z4,text:"Paste",title:"Paste clipboard contents (Ctrl+V)",disabled:t||!b},{type:"button",onClick:()=>f(),icon:xp,text:"Remove",title:"Remove selected contents (Delete)",disabled:t||!v}]},{type:"column",items:[{type:"label",text:"Table row:"},{type:"button",onClick:()=>o(),icon:Ma,text:"Edit row",title:"Edit the current row",disabled:t||!b||!p},{type:"button",onClick:()=>u(),icon:J4,text:"Duplicate row",title:"Duplicate the current row",disabled:t||!b||!p},{type:"button",onClick:()=>h(),icon:ma,text:"Insert before",title:"Insert a row before the current row",disabled:t||!b||!p},{type:"button",onClick:()=>d(),icon:ma,text:"Insert after",title:"Insert a row after the current row",disabled:t||!b||!p},{type:"button",onClick:()=>g(),icon:xp,text:"Remove row",title:"Remove current row",disabled:t||!b||!p}]}]}]}function Zk(n,e,t){var a,c,f;const i=n.slice();i[132]=e[t],i[138]=t;const s=i[27].startIndex+i[138];i[133]=s;const o=i[26].rows[i[133]];i[134]=o;const r=N0([String(i[133])],(a=i[134])==null?void 0:a.row);i[135]=r;const l=(c=i[20])!=null&&c.itemsMap?$i((f=i[20])==null?void 0:f.itemsMap,n0(i[133])):void 0;return i[136]=l,i}function $k(n,e,t){var f;const i=n.slice();i[139]=e[t],i[146]=t;const s=[String(i[133])].concat(i[139]);i[140]=s;const o=Oe(i[140]);i[141]=o;const r=Be(i[132],i[139]);i[142]=r;const l=St(i[12].selection)&&Wo(i[12].selection.path,i[140]);i[143]=l;const a=(f=i[134])==null?void 0:f.columns[i[146]];i[144]=a;const c=N0(i[140],i[144]);return i[135]=c,i}function kY(n){var i,s;const e=n.slice(),t=(i=e[20])!=null&&i.itemsMap?Mp((s=e[20])==null?void 0:s.itemsMap,e[141]):void 0;return e[147]=t,e}function SY(n){const e=n.slice(),t=e[136]?$i(e[136],e[141]):void 0;e[147]=t;const i=e[147]?Object.values(e[147]).some(s=>s.some(o=>o.active)):!1;return e[148]=i,e}function eS(n,e,t){const i=n.slice();return i[139]=e[t],i}function Nm(n){var i;const e=n.slice(),t=N0([],(i=e[26])==null?void 0:i.root);return e[135]=t,e}function tS(n){let e,t,i;function s(r){n[79](r)}let o={containsValidArray:n[22],readOnly:n[0],historyState:n[24],onSort:n[47],onTransform:n[48],onUndo:n[49],onRedo:n[50],onContextMenu:n[39],onRenderMenu:n[5]};return n[9]!==void 0&&(o.showSearch=n[9]),e=new ZK({props:o}),it.push(()=>Jn(e,"showSearch",s)),{c(){se(e.$$.fragment)},m(r,l){ne(e,r,l),i=!0},p(r,l){const a={};l[0]&4194304&&(a.containsValidArray=r[22]),l[0]&1&&(a.readOnly=r[0]),l[0]&16777216&&(a.historyState=r[24]),l[0]&32&&(a.onRenderMenu=r[5]),!t&&l[0]&512&&(t=!0,a.showSearch=r[9],Un(()=>t=!1)),e.$set(a)},i(r){i||(k(e.$$.fragment,r),i=!0)},o(r){M(e.$$.fragment,r),i=!1},d(r){ie(e,r)}}}function CY(n){let e;return{c(){e=R("div"),e.innerHTML='<div class="jse-loading-space svelte-12ygzbc"></div> <div class="jse-loading svelte-12ygzbc">loading...</div>',w(e,"class","jse-contents jse-contents-loading svelte-12ygzbc")},m(t,i){j(t,e,i)},p:ge,i:ge,o:ge,d(t){t&&B(e)}}}function MY(n){let e,t,i,s,o,r,l,a,c;const f=[OY,AY,xY],u=[];function h(d,g){return d[22]?0:d[18]&&d[17]!==void 0&&d[17]!==""?1:2}return s=h(n),o=u[s]=f[s](n),{c(){e=R("label"),t=R("input"),i=G(),o.c(),r=bt(),w(t,"type","text"),t.readOnly=!0,w(t,"tabindex","-1"),w(t,"class","jse-hidden-input svelte-12ygzbc"),w(e,"class","jse-hidden-input-label svelte-12ygzbc")},m(d,g){j(d,e,g),A(e,t),n[80](t),j(d,i,g),u[s].m(d,g),j(d,r,g),l=!0,a||(c=he(t,"paste",n[44]),a=!0)},p(d,g){let m=s;s=h(d),s===m?u[s].p(d,g):(me(),M(u[m],1,1,()=>{u[m]=null}),pe(),o=u[s],o?o.p(d,g):(o=u[s]=f[s](d),o.c()),k(o,1),o.m(r.parentNode,r))},i(d){l||(k(o),l=!0)},o(d){M(o),l=!1},d(d){d&&(B(e),B(i),B(r)),n[80](null),u[s].d(d),a=!1,c()}}}function xY(n){let e,t;return e=new bY({props:{text:n[17],json:n[8],readOnly:n[0],parser:n[2],openJSONEditorModal:n[46],onChangeMode:n[4],onClick:n[84]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s[0]&131072&&(o.text=i[17]),s[0]&256&&(o.json=i[8]),s[0]&1&&(o.readOnly=i[0]),s[0]&4&&(o.parser=i[2]),s[0]&16&&(o.onChangeMode=i[4]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function AY(n){let e,t,i,s;return e=new Ns({props:{type:"error",message:"The loaded JSON document is invalid and could not be repaired automatically.",actions:n[0]?[]:[{icon:Or,text:"Repair manually",title:'Open the document in "code" mode and repair it manually',onClick:n[42]}]}}),i=new kM({props:{text:n[17],json:n[8],indentation:n[3],parser:n[2]}}),{c(){se(e.$$.fragment),t=G(),se(i.$$.fragment)},m(o,r){ne(e,o,r),j(o,t,r),ne(i,o,r),s=!0},p(o,r){const l={};r[0]&1&&(l.actions=o[0]?[]:[{icon:Or,text:"Repair manually",title:'Open the document in "code" mode and repair it manually',onClick:o[42]}]),e.$set(l);const a={};r[0]&131072&&(a.text=o[17]),r[0]&256&&(a.json=o[8]),r[0]&8&&(a.indentation=o[3]),r[0]&4&&(a.parser=o[2]),i.$set(a)},i(o){s||(k(e.$$.fragment,o),k(i.$$.fragment,o),s=!0)},o(o){M(e.$$.fragment,o),M(i.$$.fragment,o),s=!1},d(o){o&&B(t),ie(e,o),ie(i,o)}}}function OY(n){var le;let e,t,i,s,o,r,l,a,c=!Ct((le=n[26])==null?void 0:le.root),f,u,h,d,g,m,p,b,y,v,C,_,S,x,D,P,E,O;t=new gM({props:{json:n[8],documentState:n[12],parser:n[2],showSearch:n[9],showReplace:n[21],readOnly:n[0],columns:n[11],onSearch:n[30],onFocus:n[31],onPatch:n[34],onClose:n[32]}});let I=c&&nS(Nm(n)),N=at(n[11]),F=[];for(let Z=0;Z<N.length;Z+=1)F[Z]=sS(eS(n,N,Z));const z=Z=>M(F[Z],1,1,()=>{F[Z]=null});let q=n[28]&&oS(n),Q=at(n[27].visibleItems),X=[];for(let Z=0;Z<Q.length;Z+=1)X[Z]=hS(Zk(n,Q,Z));const T=Z=>M(X[Z],1,1,()=>{X[Z]=null});let U=n[19]&&dS(n),Y=n[23]&&gS(n);return D=new E0({props:{validationErrors:n[13],selectError:n[45]}}),{c(){e=R("div"),se(t.$$.fragment),i=G(),s=R("div"),o=R("table"),r=R("tbody"),l=R("tr"),a=R("th"),I&&I.c(),f=G();for(let Z=0;Z<F.length;Z+=1)F[Z].c();u=G(),q&&q.c(),h=G(),d=R("tr"),g=R("td"),p=G();for(let Z=0;Z<X.length;Z+=1)X[Z].c();b=G(),y=R("tr"),v=R("td"),_=G(),U&&U.c(),S=G(),Y&&Y.c(),x=G(),se(D.$$.fragment),w(e,"class","jse-search-box-container svelte-12ygzbc"),w(a,"class","jse-table-cell jse-table-cell-header svelte-12ygzbc"),w(l,"class","jse-table-row jse-table-row-header svelte-12ygzbc"),w(g,"colspan",m=n[11].length),w(g,"class","svelte-12ygzbc"),fi(g,"height",n[27].startHeight+"px"),w(d,"class","jse-table-invisible-start-section"),w(v,"colspan",C=n[11].length),w(v,"class","svelte-12ygzbc"),fi(v,"height",n[27].endHeight+"px"),w(y,"class","jse-table-invisible-end-section"),w(o,"class","jse-table-main svelte-12ygzbc"),w(s,"class","jse-contents svelte-12ygzbc")},m(Z,ue){j(Z,e,ue),ne(t,e,null),j(Z,i,ue),j(Z,s,ue),A(s,o),A(o,r),A(r,l),A(l,a),I&&I.m(a,null),A(l,f);for(let W=0;W<F.length;W+=1)F[W]&&F[W].m(l,null);A(l,u),q&&q.m(l,null),A(r,h),A(r,d),A(d,g),A(r,p);for(let W=0;W<X.length;W+=1)X[W]&&X[W].m(r,null);A(r,b),A(r,y),A(y,v),n[83](s),j(Z,_,ue),U&&U.m(Z,ue),j(Z,S,ue),Y&&Y.m(Z,ue),j(Z,x,ue),ne(D,Z,ue),P=!0,E||(O=[En(A6.call(null,s,n[51])),he(s,"scroll",n[35])],E=!0)},p(Z,ue){var ee;const W={};if(ue[0]&256&&(W.json=Z[8]),ue[0]&4096&&(W.documentState=Z[12]),ue[0]&4&&(W.parser=Z[2]),ue[0]&512&&(W.showSearch=Z[9]),ue[0]&2097152&&(W.showReplace=Z[21]),ue[0]&1&&(W.readOnly=Z[0]),ue[0]&2048&&(W.columns=Z[11]),t.$set(W),ue[0]&67108864&&(c=!Ct((ee=Z[26])==null?void 0:ee.root)),c?I?(I.p(Nm(Z),ue),ue[0]&67108864&&k(I,1)):(I=nS(Nm(Z)),I.c(),k(I,1),I.m(a,null)):I&&(me(),M(I,1,1,()=>{I=null}),pe()),ue[0]&6145|ue[1]&4){N=at(Z[11]);let be;for(be=0;be<N.length;be+=1){const tt=eS(Z,N,be);F[be]?(F[be].p(tt,ue),k(F[be],1)):(F[be]=sS(tt),F[be].c(),k(F[be],1),F[be].m(l,u))}for(me(),be=N.length;be<F.length;be+=1)z(be);pe()}if(Z[28]?q?(q.p(Z,ue),ue[0]&268435456&&k(q,1)):(q=oS(Z),q.c(),k(q,1),q.m(l,null)):q&&(me(),M(q,1,1,()=>{q=null}),pe()),(!P||ue[0]&2048&&m!==(m=Z[11].length))&&w(g,"colspan",m),ue[0]&134217728&&fi(g,"height",Z[27].startHeight+"px"),ue[0]&504371205|ue[1]&2129984){Q=at(Z[27].visibleItems);let be;for(be=0;be<Q.length;be+=1){const tt=Zk(Z,Q,be);X[be]?(X[be].p(tt,ue),k(X[be],1)):(X[be]=hS(tt),X[be].c(),k(X[be],1),X[be].m(r,b))}for(me(),be=Q.length;be<X.length;be+=1)T(be);pe()}(!P||ue[0]&2048&&C!==(C=Z[11].length))&&w(v,"colspan",C),ue[0]&134217728&&fi(v,"height",Z[27].endHeight+"px"),Z[19]?U?(U.p(Z,ue),ue[0]&524288&&k(U,1)):(U=dS(Z),U.c(),k(U,1),U.m(S.parentNode,S)):U&&(me(),M(U,1,1,()=>{U=null}),pe()),Z[23]?Y?(Y.p(Z,ue),ue[0]&8388608&&k(Y,1)):(Y=gS(Z),Y.c(),k(Y,1),Y.m(x.parentNode,x)):Y&&(me(),M(Y,1,1,()=>{Y=null}),pe());const we={};ue[0]&8192&&(we.validationErrors=Z[13]),D.$set(we)},i(Z){if(!P){k(t.$$.fragment,Z),k(I);for(let ue=0;ue<N.length;ue+=1)k(F[ue]);k(q);for(let ue=0;ue<Q.length;ue+=1)k(X[ue]);k(U),k(Y),k(D.$$.fragment,Z),P=!0}},o(Z){M(t.$$.fragment,Z),M(I),F=F.filter(Boolean);for(let ue=0;ue<F.length;ue+=1)M(F[ue]);M(q),X=X.filter(Boolean);for(let ue=0;ue<X.length;ue+=1)M(X[ue]);M(U),M(Y),M(D.$$.fragment,Z),P=!1},d(Z){Z&&(B(e),B(i),B(s),B(_),B(S),B(x)),ie(t),I&&I.d(),xn(F,Z),q&&q.d(),xn(X,Z),n[83](null),U&&U.d(Z),Y&&Y.d(Z),ie(D,Z),E=!1,Et(O)}}}function nS(n){let e,t,i=n[135]&&iS(n);return{c(){i&&i.c(),e=bt()},m(s,o){i&&i.m(s,o),j(s,e,o),t=!0},p(s,o){s[135]?i?(i.p(s,o),o[0]&67108864&&k(i,1)):(i=iS(s),i.c(),k(i,1),i.m(e.parentNode,e)):i&&(me(),M(i,1,1,()=>{i=null}),pe())},i(s){t||(k(i),t=!0)},o(s){M(i),t=!1},d(s){s&&B(e),i&&i.d(s)}}}function iS(n){let e,t,i;return t=new ac({props:{validationError:n[135],onExpand:vs}}),{c(){e=R("div"),se(t.$$.fragment),w(e,"class","jse-table-root-error svelte-12ygzbc")},m(s,o){j(s,e,o),ne(t,e,null),i=!0},p(s,o){const r={};o[0]&67108864&&(r.validationError=s[135]),t.$set(r)},i(s){i||(k(t.$$.fragment,s),i=!0)},o(s){M(t.$$.fragment,s),i=!1},d(s){s&&B(e),ie(t)}}}function sS(n){let e,t,i;return t=new fY({props:{path:n[139],sortedColumn:n[12].sortedColumn,readOnly:n[0],onSort:n[33]}}),{c(){e=R("th"),se(t.$$.fragment),w(e,"class","jse-table-cell jse-table-cell-header svelte-12ygzbc")},m(s,o){j(s,e,o),ne(t,e,null),i=!0},p(s,o){const r={};o[0]&2048&&(r.path=s[139]),o[0]&4096&&(r.sortedColumn=s[12].sortedColumn),o[0]&1&&(r.readOnly=s[0]),t.$set(r)},i(s){i||(k(t.$$.fragment,s),i=!0)},o(s){M(t.$$.fragment,s),i=!1},d(s){s&&B(e),ie(t)}}}function oS(n){let e,t,i;return t=new wY({props:{count:Array.isArray(n[8])?n[8].length:0,maxSampleCount:n[10],onRefresh:n[81]}}),{c(){e=R("th"),se(t.$$.fragment),w(e,"class","jse-table-cell jse-table-cell-header svelte-12ygzbc")},m(s,o){j(s,e,o),ne(t,e,null),i=!0},p(s,o){const r={};o[0]&256&&(r.count=Array.isArray(s[8])?s[8].length:0),o[0]&1024&&(r.maxSampleCount=s[10]),o[0]&1024&&(r.onRefresh=s[81]),t.$set(r)},i(s){i||(k(t.$$.fragment,s),i=!0)},o(s){M(t.$$.fragment,s),i=!1},d(s){s&&B(e),ie(t)}}}function rS(n){let e,t;return e=new ac({props:{validationError:n[135],onExpand:vs}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s[0]&201326592&&(o.validationError=i[135]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function lS(n){let e,t=n[133]+"",i,s,o,r,l,a,c=n[135]&&rS(n);function f(...u){return n[82](n[133],...u)}return{c(){e=R("th"),i=Se(t),s=G(),c&&c.c(),w(e,"class","jse-table-cell jse-table-cell-gutter svelte-12ygzbc")},m(u,h){j(u,e,h),A(e,i),A(e,s),c&&c.m(e,null),r=!0,l||(a=En(o=A6.call(null,e,f)),l=!0)},p(u,h){n=u,(!r||h[0]&134217728)&&t!==(t=n[133]+"")&&Xe(i,t),n[135]?c?(c.p(n,h),h[0]&201326592&&k(c,1)):(c=rS(n),c.c(),k(c,1),c.m(e,null)):c&&(me(),M(c,1,1,()=>{c=null}),pe()),o&&Kn(o.update)&&h[0]&134217728&&o.update.call(null,f)},i(u){r||(k(c),r=!0)},o(u){M(c),r=!1},d(u){u&&B(e),c&&c.d(),l=!1,a()}}}function PY(n){let e,t;return e=new sY({props:{path:n[140],value:n[142]!==void 0?n[142]:"",enforceString:Vo(n[142],n[12].enforceStringMap,n[141],n[25].parser),selection:n[143]?n[12].selection:null,searchResultItems:n[147],context:n[25]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s[0]&134219776&&(o.path=i[140]),s[0]&134219776&&(o.value=i[142]!==void 0?i[142]:""),s[0]&167778304&&(o.enforceString=Vo(i[142],i[12].enforceStringMap,i[141],i[25].parser)),s[0]&134223872&&(o.selection=i[143]?i[12].selection:null),s[0]&135268352&&(o.searchResultItems=i[147]),s[0]&33554432&&(o.context=i[25]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function TY(n){let e,t;return e=new lY({props:{path:n[140],value:n[142],parser:n[2],isSelected:n[143],containsSearchResult:!Ct(n[147]),containsActiveSearchResult:n[148],onEdit:n[46]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s[0]&134219776&&(o.path=i[140]),s[0]&134219776&&(o.value=i[142]),s[0]&4&&(o.parser=i[2]),s[0]&134223872&&(o.isSelected=i[143]),s[0]&135268352&&(o.containsSearchResult=!Ct(i[147])),s[0]&135268352&&(o.containsActiveSearchResult=i[148]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function aS(n){let e,t,i,s;return t=new zr({props:{selected:!0,onContextMenu:n[37]}}),{c(){e=R("div"),se(t.$$.fragment),i=G(),w(e,"class","jse-context-menu-anchor svelte-12ygzbc")},m(o,r){j(o,e,r),ne(t,e,null),j(o,i,r),s=!0},p:ge,i(o){s||(k(t.$$.fragment,o),s=!0)},o(o){M(t.$$.fragment,o),s=!1},d(o){o&&(B(e),B(i)),ie(t)}}}function cS(n){let e,t;return e=new ac({props:{validationError:n[135],onExpand:vs}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s[0]&201328640&&(o.validationError=i[135]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function fS(n){let e,t,i,s,o,r=!n[0]&&n[143]&&!pi(n[12].selection),l,a,c;const f=[TY,PY],u=[];function h(p,b){return b[0]&134219776&&(t=null),t==null&&(t=!!fn(p[142])),t?0:1}function d(p,b){return b===0?SY(p):kY(p)}i=h(n,[-1,-1,-1,-1,-1]),s=u[i]=f[i](d(n,i));let g=r&&aS(n),m=n[135]&&cS(n);return{c(){e=R("td"),s.c(),o=bt(),g&&g.c(),l=bt(),m&&m.c(),w(e,"class","jse-table-cell svelte-12ygzbc"),w(e,"data-path",a=za(n[140])),te(e,"jse-selected-value",n[143])},m(p,b){j(p,e,b),u[i].m(e,null),A(e,o),g&&g.m(e,null),A(e,l),m&&m.m(e,null),c=!0},p(p,b){let y=i;i=h(p,b),i===y?u[i].p(d(p,i),b):(me(),M(u[y],1,1,()=>{u[y]=null}),pe(),s=u[i],s?s.p(d(p,i),b):(s=u[i]=f[i](d(p,i)),s.c()),k(s,1),s.m(e,o)),b[0]&134223873&&(r=!p[0]&&p[143]&&!pi(p[12].selection)),r?g?(g.p(p,b),b[0]&134223873&&k(g,1)):(g=aS(p),g.c(),k(g,1),g.m(e,l)):g&&(me(),M(g,1,1,()=>{g=null}),pe()),p[135]?m?(m.p(p,b),b[0]&201328640&&k(m,1)):(m=cS(p),m.c(),k(m,1),m.m(e,null)):m&&(me(),M(m,1,1,()=>{m=null}),pe()),(!c||b[0]&134219776&&a!==(a=za(p[140])))&&w(e,"data-path",a),(!c||b[0]&134223872)&&te(e,"jse-selected-value",p[143])},i(p){c||(k(s),k(g),k(m),c=!0)},o(p){M(s),M(g),M(m),c=!1},d(p){p&&B(e),u[i].d(),g&&g.d(),m&&m.d()}}}function uS(n){let e;return{c(){e=R("td"),w(e,"class","jse-table-cell svelte-12ygzbc")},m(t,i){j(t,e,i)},d(t){t&&B(e)}}}function hS(n){let e,t=n[133],i,s,o,r=lS(n),l=at(n[11]),a=[];for(let u=0;u<l.length;u+=1)a[u]=fS($k(n,l,u));const c=u=>M(a[u],1,1,()=>{a[u]=null});let f=n[28]&&uS();return{c(){e=R("tr"),r.c(),i=G();for(let u=0;u<a.length;u+=1)a[u].c();s=G(),f&&f.c(),w(e,"class","jse-table-row svelte-12ygzbc")},m(u,h){j(u,e,h),r.m(e,null),A(e,i);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(e,null);A(e,s),f&&f.m(e,null),o=!0},p(u,h){if(h[0]&134217728&&ft(t,t=u[133])?(me(),M(r,1,1,ge),pe(),r=lS(u),r.c(),k(r,1),r.m(e,i)):r.p(u,h),h[0]&235935749|h[1]&32832){l=at(u[11]);let d;for(d=0;d<l.length;d+=1){const g=$k(u,l,d);a[d]?(a[d].p(g,h),k(a[d],1)):(a[d]=fS(g),a[d].c(),k(a[d],1),a[d].m(e,s))}for(me(),d=l.length;d<a.length;d+=1)c(d);pe()}u[28]?f||(f=uS(),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},i(u){if(!o){k(r);for(let h=0;h<l.length;h+=1)k(a[h]);o=!0}},o(u){M(r),a=a.filter(Boolean);for(let h=0;h<a.length;h+=1)M(a[h]);o=!1},d(u){u&&B(e),r.d(u),xn(a,u),f&&f.d()}}}function dS(n){let e,t;return e=new Ns({props:{type:"info",message:`You pasted a JSON ${Array.isArray(n[19].contents)?"array":"object"} as text`,actions:[{icon:hg,text:"Paste as JSON instead",title:"Paste the text as JSON instead of a single value",onMouseDown:n[40]},{text:"Leave as is",title:"Keep the pasted content as a single value",onClick:n[41]}]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s[0]&524288&&(o.message=`You pasted a JSON ${Array.isArray(i[19].contents)?"array":"object"} as text`),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function gS(n){let e,t;return e=new Ns({props:{type:"success",message:"The loaded JSON document was invalid but is successfully repaired.",actions:n[0]?[]:[{icon:bf,text:"Ok",title:"Accept the repaired document",onClick:n[7]},{icon:Or,text:"Repair manually instead",title:"Leave the document unchanged and repair it manually instead",onClick:n[42]}],onClose:n[6]}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s[0]&1&&(o.actions=i[0]?[]:[{icon:bf,text:"Ok",title:"Accept the repaired document",onClick:i[7]},{icon:Or,text:"Repair manually instead",title:"Leave the document unchanged and repair it manually instead",onClick:i[42]}]),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function EY(n){let e,t,i,s,o,r,l,a=n[1]&&tS(n);const c=[MY,CY],f=[];function u(h,d){return h[29]?1:0}return i=u(n),s=f[i]=c[i](n),{c(){e=R("div"),a&&a.c(),t=G(),s.c(),w(e,"role","table"),w(e,"class","jse-table-mode svelte-12ygzbc"),te(e,"no-main-menu",!n[1])},m(h,d){j(h,e,d),a&&a.m(e,null),A(e,t),f[i].m(e,null),n[85](e),o=!0,r||(l=[he(e,"mousedown",n[36]),he(e,"keydown",n[43]),he(e,"contextmenu",n[38])],r=!0)},p(h,d){h[1]?a?(a.p(h,d),d[0]&2&&k(a,1)):(a=tS(h),a.c(),k(a,1),a.m(e,t)):a&&(me(),M(a,1,1,()=>{a=null}),pe()),s.p(h,d),(!o||d[0]&2)&&te(e,"no-main-menu",!h[1])},i(h){o||(k(a),k(s),o=!0)},o(h){M(a),M(s),o=!1},d(h){h&&B(e),a&&a.d(),f[i].d(),n[85](null),r=!1,Et(l)}}}let Zr=18;function RY(n,e,t){let i,s,o;const r=Fn("jsoneditor:TableMode"),{open:l}=jn("simple-modal"),{openAbsolutePopup:a,closeAbsolutePopup:c}=jn("absolute-popup"),f=sM(),u=Ba(),h=Ba(),d=typeof window>"u";r("isSSR:",d);let{readOnly:g}=e,{externalContent:m}=e,{externalSelection:p}=e,{mainMenuBar:b}=e,{escapeControlCharacters:y}=e,{escapeUnicodeCharacters:v}=e,{flattenColumns:C}=e,{parser:_}=e,{parseMemoizeOne:S}=e,{validator:x}=e,{validationParser:D}=e,{indentation:P}=e,{onChange:E}=e,{onChangeMode:O}=e,{onSelect:I}=e,{onRenderValue:N}=e,{onRenderMenu:F}=e,{onRenderContextMenu:z}=e,{onFocus:q}=e,{onBlur:Q}=e,{onSortModal:X}=e,{onTransformModal:T}=e,{onJSONEditorModal:U}=e,Y,le,Z,ue;T0({onMount:Ai,onDestroy:Ci,getWindow:()=>oc(le),hasFocus:()=>lt&&document.hasFocus()||b0(le),onFocus:()=>{wt=!0,q&&q()},onBlur:()=>{wt=!1,Q&&Q()}});let W,we,ee,be,tt,re=!1,Qe=!1;function H(V){if(!Z)return;const ve=V?cl:-cl;Z.scrollTo({top:t(15,Z.scrollTop+=ve,Z),left:Z.scrollLeft})}function ae(V){t(20,tt=V)}async function De(V){t(12,K={...K,selection:null}),await Bi(V)}function Le(){t(9,re=!1),t(21,Qe=!1),Zt()}let Ie=1e4,Te=[],de,lt=!1,wt=!1,Ee={},st=600,dt=0;function Ze(V){Z&&Z.scrollTo({top:Z.scrollTop,left:Z.scrollLeft})}function It(){K.sortedColumn&&t(12,K={...K,sortedColumn:null})}function We(V){r("updateSelection",V);const ve=typeof V=="function"?V(K.selection)||null:V;yt(ve,K.selection)||(t(12,K={...K,selection:ve}),I(ve))}function ct(V){!K.selection||V===void 0||ls(V,Al(K.selection))&&ls(V,Ye(K.selection))||(r("clearing selection: path does not exist anymore",K.selection),t(12,K={...K,selection:null}))}let K=Qh(),ke=!1;function qe(V){if(g)return;r("onSortByHeader",V);const ve=[],Ne=V.sortDirection===rs.desc?-1:1,He=hM(W,ve,V.path,Ne);Yt(He,(kt,Dt)=>({state:{...Dt,sortedColumn:V}}))}const Ce=oM({onChange:V=>{t(24,$=V)}});let $=Ce.getState(),xe;function Pe(V){const ve={json:W},Ne=Fa(V)?V.text!==we:!yt(ve.json,V.json);if(r("update external content",{isChanged:Ne}),!Ne)return;const He=W,kt=K,Dt=we,L=ke;if(Fa(V))try{t(8,W=S(V.text)),t(17,we=V.text),t(23,ke=!1),t(18,ee=void 0)}catch(ce){try{t(8,W=S(oo(V.text))),t(17,we=V.text),t(23,ke=!0),t(18,ee=void 0)}catch{t(8,W=void 0),t(17,we=V.text),t(23,ke=!1),t(18,ee=we!==""?ja(we,ce.message||String(ce)):void 0)}}else t(8,W=V.json),t(17,we=void 0),t(23,ke=!1),t(18,ee=void 0);ct(W),It(),ot({previousJson:He,previousState:kt,previousText:Dt,previousTextIsRepaired:L})}function Ge(V){yt(K.selection,V)||(r("applyExternalSelection",V),(k0(V)||V===null)&&We(V))}function ot({previousJson:V,previousState:ve,previousText:Ne,previousTextIsRepaired:He}){V===void 0&&Ne===void 0||(W!==void 0?V!==void 0?Ce.add({undo:{patch:[{op:"replace",path:"",value:V}],state:li(ve),json:void 0,text:Ne,textIsRepaired:He},redo:{patch:[{op:"replace",path:"",value:W}],state:li(K),json:void 0,text:we,textIsRepaired:ke}}):Ce.add({undo:{patch:void 0,json:void 0,text:Ne,state:li(ve),textIsRepaired:He},redo:{patch:void 0,json:W,state:li(K),text:we,textIsRepaired:ke}}):V!==void 0&&Ce.add({undo:{patch:void 0,json:V,state:li(ve),text:Ne,textIsRepaired:He},redo:{patch:void 0,json:void 0,text:we,textIsRepaired:ke,state:li(K)}}))}let fe=[];const Pt=eu(rM);function At(V,ve,Ne,He){pa(()=>{let kt;try{kt=Pt(V,ve,Ne,He)}catch(Dt){kt=[{path:[],message:"Failed to validate: "+Dt.message,severity:Ms.warning}]}yt(kt,fe)||(r("validationErrors changed:",kt),t(13,fe=kt))},kt=>r(`validationErrors updated in ${kt} ms`))}function nt(){return r("validate"),ee?{parseError:ee,isRepairable:!1}:(At(W,x,_,D),Ct(fe)?null:{validationErrors:fe})}function Kt(V,ve){if(r("patch",V,ve),W===void 0)throw new Error("Cannot apply patch: no JSON");const Ne=W,He=K,kt=ke,Dt=B4(W,V),ce=S4(W,K,V).json,ye=pF(K,V,Te),et=typeof ve=="function"?ve(ce,ye):void 0;t(8,W=et&&et.json!==void 0?et.json:ce);const Ke=et&&et.state!==void 0?et.state:ye;return t(12,K=Ke),t(17,we=void 0),t(23,ke=!1),t(19,be=void 0),t(18,ee=void 0),Ce.add({undo:{patch:Dt,json:void 0,text:void 0,state:li(He),textIsRepaired:kt},redo:{patch:V,json:void 0,state:li(Ke),text:void 0,textIsRepaired:ke}}),{json:W,previousJson:Ne,undo:Dt,redo:V}}function Yt(V,ve){r("handlePatch",V,ve);const Ne={json:W,text:we},He=Kt(V,ve);return wi(Ne,He),He}function wi(V,ve){V.json===void 0&&(V==null?void 0:V.text)===void 0||E&&(we!==void 0?E({text:we,json:void 0},V,{contentErrors:nt(),patchResult:ve}):W!==void 0&&E({text:void 0,json:W},V,{contentErrors:nt(),patchResult:ve}))}function bs(V){r("handleFind",V)}function $o(V){r("pasted json as text",V),t(19,be=V)}function qr(V){const ve=parseInt(V[0],10),Ne=[String(ve+1),...V.slice(1)];return ls(W,Ne)?ut(Ne,!1):ut(V,!1)}function Zt(){r("focus"),ue&&(ue.focus(),ue.select())}function js(V){t(78,dt=V.target.scrollTop)}function Fs(V){if(V.buttons!==1&&V.buttons!==2)return;const ve=V.target,Ne=p4(ve);if(Ne){if(pi(K.selection)&&mf(W,K.selection,Ne))return;We(ut(Ne,!1)),V.preventDefault()}!ve.isContentEditable&&!wt&&setTimeout(Zt)}function yo(){if(Jt(W)&&!Ct(W)&&!Ct(Te)){const V=["0",...Te[0]];return ut(V,!1)}else return null}function ys(){K.selection||We(yo())}function zs(){if(ke&&W!==void 0){const V=K,ve=W,Ne=we,He={json:W,text:we},kt=ke;t(17,we=void 0),t(23,ke=!1),ct(W),ot({previousJson:ve,previousState:V,previousText:Ne,previousTextIsRepaired:kt}),wi(He,null)}return{json:W,text:we}}function Bi(V,ve=!0){const Ne=re?cl:0,He=vw(V,Te,Ee,Zr),kt=He-dt+Ne+Zr,Dt=Xn(V);if(r("scrollTo",{path:V,top:He,scrollTop:dt,elem:Dt}),!Z)return Promise.resolve();const L=Z.getBoundingClientRect();if(Dt&&!ve){const ye=Dt.getBoundingClientRect();if(ye.bottom>L.top&&ye.top<L.bottom)return Promise.resolve()}const ce=-Math.max(Ne+2*Zr,L.height/4);return Dt?new Promise(ye=>{f(Dt,{container:Z,offset:ce,duration:Qm,callback:()=>{si(V),ye()}})}):new Promise(ye=>{f(kt,{container:Z,offset:ce,duration:Qm,callback:async()=>{await wn(),si(V),ye()}})})}function ii(V){if(!Z)return;const{rowIndex:ve}=gs(V,Te),Ne=vw(V,Te,Ee,Zr),He=Ne+(Ee[ve]||Zr),kt=Zr,Dt=Z.getBoundingClientRect(),L=dt,ce=dt+Dt.height-kt;if(He>ce){const ye=He-ce;t(15,Z.scrollTop+=ye,Z)}if(Ne<L){const ye=L-Ne;t(15,Z.scrollTop-=ye,Z)}}function si(V){const ve=Xn(V);if(!ve||!Z)return;const Ne=Z.getBoundingClientRect(),He=ve.getBoundingClientRect();if(He.right>Ne.right){const kt=He.right-Ne.right;t(15,Z.scrollLeft+=kt,Z)}if(He.left<Ne.left){const kt=Ne.left-He.left;t(15,Z.scrollLeft-=kt,Z)}}function oi(V){ii(V),si(V)}function Xn(V){const ve=Te.find(He=>Wo(V.slice(1),He)),Ne=ve?V.slice(0,1).concat(ve):V;return Z?Z.querySelector(`td[data-path="${za(Ne)}"]`):null}function _s({anchor:V,left:ve,top:Ne,width:He,height:kt,offsetTop:Dt,offsetLeft:L,showTip:ce}){const ye=vY({json:W,documentState:K,readOnly:g,parser:_,onEditValue:Hs,onEditRow:Ws,onToggleEnforceString:er,onCut:ht,onCopy:$t,onPaste:wo,onRemove:Rt,onDuplicateRow:Xt,onInsertBeforeRow:Vn,onInsertAfterRow:vi,onRemoveRow:ln}),et=z(ye);if(et===!1)return;const Ke={tip:ce?"Tip: you can open this context menu via right-click or with Ctrl+Q":void 0,items:et,onRequestClose(){c(An),Zt()}},Nt={left:ve,top:Ne,offsetTop:Dt,offsetLeft:L,width:He,height:kt,anchor:V,closeOnOuterClick:!0,onClose:()=>{lt=!1,Zt()}};lt=!0;const An=a(SM,Ke,Nt)}function Vs(V){if(!pi(K.selection)){if(V&&(V.stopPropagation(),V.preventDefault()),V&&V.type==="contextmenu"&&V.target!==ue)_s({left:V.clientX,top:V.clientY,width:Eo,height:To,showTip:!1});else{const ve=Z==null?void 0:Z.querySelector(".jse-table-cell.jse-selected-value");if(ve)_s({anchor:ve,offsetTop:2,width:Eo,height:To,showTip:!1});else{const Ne=Z==null?void 0:Z.getBoundingClientRect();Ne&&_s({top:Ne.top+2,left:Ne.left+2,width:Eo,height:To,showTip:!1})}}return!1}}function mn(V){_s({anchor:m4(V.target,"BUTTON"),offsetTop:0,width:Eo,height:To,showTip:!0})}function Hs(){if(g||!K.selection)return;const V=Ye(K.selection),ve=Be(W,V);fn(ve)?nr(V):We(ut(V,!0))}function Ws(){if(g||!K.selection)return;const ve=Ye(K.selection).slice(0,1);nr(ve)}function er(){if(g||!St(K.selection))return;const V=K.selection.path,ve=Oe(V),Ne=Be(W,V),He=!Vo(Ne,K.enforceStringMap,ve,_),kt=He?String(Ne):tc(String(Ne),_);r("handleToggleEnforceString",{enforceString:He,value:Ne,updatedValue:kt}),Yt([{op:"replace",path:ve,value:kt}],(Dt,L)=>({state:k4(L,ve,He)}))}async function _o(){if(r("apply pasted json",be),!be)return;const{path:V,contents:ve}=be,Ne=(Z==null?void 0:Z.querySelector(".jse-editable-div"))||null;b4(Ne)&&Ne.cancel();const He=[{op:"replace",path:Oe(V),value:ve}];Yt(He),setTimeout(Zt)}function wo(){l(lM,{},{...Sl,styleWindow:{width:"450px"}},{onClose:()=>Zt()})}function oe(){r("clear pasted json"),t(19,be=void 0),Zt()}function $e(){O(Wn.text)}async function ht(V){await bM({json:W,documentState:K,indentation:V?P:void 0,readOnly:g,parser:_,onPatch:Yt})}async function $t(V=!0){W!==void 0&&await yM({json:W,documentState:K,indentation:V?P:void 0,parser:_})}function Rt(){wM({json:W,text:we,documentState:K,keepSelection:!0,readOnly:g,onChange:E,onPatch:Yt})}function Xt(){_F({json:W,documentState:K,columns:Te,readOnly:g,onPatch:Yt})}function Vn(){wF({json:W,documentState:K,columns:Te,readOnly:g,onPatch:Yt})}function vi(){vF({json:W,documentState:K,columns:Te,readOnly:g,onPatch:Yt})}function ln(){kF({json:W,documentState:K,columns:Te,readOnly:g,onPatch:Yt})}async function qs(V){await vM({char:V,selectInside:!1,refJsonEditor:le,json:W,selection:K.selection,readOnly:g,parser:_,onPatch:Yt,onReplaceJson:Ur,onSelect:We})}function uc(V){const ve=Fo(V);if(r("keydown",{combo:ve,key:V.key}),ve==="Ctrl+X"&&(V.preventDefault(),ht(!0)),ve==="Ctrl+Shift+X"&&(V.preventDefault(),ht(!1)),ve==="Ctrl+C"&&(V.preventDefault(),$t(!0)),ve==="Ctrl+Shift+C"&&(V.preventDefault(),$t(!1)),ve==="Ctrl+D"&&V.preventDefault(),(ve==="Delete"||ve==="Backspace")&&(V.preventDefault(),Rt()),ve==="Insert"&&V.preventDefault(),ve==="Ctrl+A"&&V.preventDefault(),ve==="Ctrl+Q"&&Vs(V),ve==="ArrowLeft"&&(V.preventDefault(),ys(),K.selection)){const He=uF(Te,K.selection);We(He),oi(Ye(He))}if(ve==="ArrowRight"&&(V.preventDefault(),ys(),K.selection)){const He=hF(Te,K.selection);We(He),oi(Ye(He))}if(ve==="ArrowUp"&&(V.preventDefault(),ys(),K.selection)){const He=cF(Te,K.selection);We(He),oi(Ye(He))}if(ve==="ArrowDown"&&(V.preventDefault(),ys(),K.selection)){const He=fF(W,Te,K.selection);We(He),oi(Ye(He))}if(ve==="Enter"&&K.selection&&St(K.selection)){V.preventDefault();const He=K.selection.path,kt=Be(W,He);fn(kt)?nr(He):g||We({...K.selection,edit:!0})}if(ve.replace(/^Shift\+/,"").length===1&&K.selection){V.preventDefault(),qs(V.key);return}if(ve==="Ctrl+Enter"&&St(K.selection)){const He=Be(W,K.selection.path);Xd(He)&&window.open(String(He),"_blank")}ve==="Escape"&&K.selection&&(V.preventDefault(),We(null)),ve==="Ctrl+F"&&(V.preventDefault(),Kl(!1)),ve==="Ctrl+H"&&(V.preventDefault(),Kl(!0)),ve==="Ctrl+Z"&&(V.preventDefault(),Yl()),ve==="Ctrl+Shift+Z"&&(V.preventDefault(),Xl())}function tr(V){var Ne;V.preventDefault();const ve=(Ne=V.clipboardData)==null?void 0:Ne.getData("text/plain");ve!==void 0&&_M({clipboardText:ve,json:W,selection:K.selection,readOnly:g,parser:_,onPatch:Yt,onChangeText:hc,openRepairModal:gc})}function Ur(V,ve){const Ne=K,He=W,kt=we,Dt={json:W,text:we},L=ke,ce=ts(W,K,[],eo),ye=typeof ve=="function"?ve(V,ce):void 0;t(8,W=ye&&ye.json!==void 0?ye.json:V),t(12,K=ye&&ye.state!==void 0?ye.state:ce),t(17,we=void 0),t(23,ke=!1),t(18,ee=void 0),ct(W),ot({previousJson:He,previousState:Ne,previousText:kt,previousTextIsRepaired:L}),wi(Dt,null)}function hc(V,ve){r("handleChangeText");const Ne=K,He=W,kt=we,Dt={json:W,text:we},L=ke;try{t(8,W=S(V)),t(12,K=ts(W,K,[],eo)),t(17,we=void 0),t(23,ke=!1),t(18,ee=void 0)}catch(ye){try{t(8,W=S(oo(V))),t(12,K=ts(W,K,[],eo)),t(17,we=V),t(23,ke=!0),t(18,ee=void 0)}catch{t(8,W=void 0),t(12,K=Qh({json:W,expand:eo})),t(17,we=V),t(23,ke=!1),t(18,ee=we!==""?ja(we,ye.message||String(ye)):void 0)}}if(typeof ve=="function"){const ye=ve(W,K);t(8,W=ye&&ye.json?ye.json:W),t(12,K=ye&&ye.state?ye.state:K)}ct(W),ot({previousJson:He,previousState:Ne,previousText:kt,previousTextIsRepaired:L}),wi(Dt,null)}function Jr(V){r("select validation error",V),We(ut(V.path,!1)),Bi(V.path)}function dc(V){g||W===void 0||(lt=!0,X({id:u,json:W,rootPath:V,onSort:({operations:ve,itemPath:Ne,direction:He})=>{r("onSort",ve,V,Ne,He),Yt(ve,(kt,Dt)=>({state:{...Dt,sortedColumn:{path:Ne,sortDirection:He===-1?rs.desc:rs.asc}}}))},onClose:()=>{lt=!1,Zt()}}))}function Jl(V){if(W===void 0)return;const{id:ve,onTransform:Ne,onClose:He}=V,kt=V.rootPath||[];lt=!0,T({id:ve||h,json:W,rootPath:kt||[],onTransform:Dt=>{Ne?Ne({operations:Dt,json:W,transformedJson:As(W,Dt)}):(r("onTransform",kt,Dt),Yt(Dt))},onClose:()=>{lt=!1,Zt(),He&&He()}})}function nr(V){r("openJSONEditorModal",{path:V}),lt=!0,U({content:{json:Be(W,V)},path:V,onPatch:xe.onPatch,onClose:()=>{lt=!1,Zt()}})}function gc(V,ve){l(fM,{text:V,onParse:Ne=>ag(Ne,He=>Jf(He,_)),onRepair:o4,onApply:ve},{...Sl,styleWindow:{width:"600px",height:"500px"},styleContent:{padding:0,height:"100%"}},{onClose:()=>Zt()})}function vo(){dc([])}function ir(){Jl({rootPath:[]})}function Kl(V){r("openFind",{findAndReplace:V}),t(9,re=!1),t(21,Qe=!1),wn().then(()=>{t(9,re=!0),t(21,Qe=V)})}function Yl(){if(g||!Ce.getState().canUndo)return;const V=Ce.undo();if(!V)return;const ve={json:W,text:we};t(8,W=V.undo.patch?As(W,V.undo.patch):V.undo.json),t(12,K=V.undo.state),t(17,we=V.undo.text),t(23,ke=V.undo.textIsRepaired),t(18,ee=void 0),r("undo",{item:V,json:W});const Ne=V.undo.patch&&V.redo.patch?{json:W,previousJson:ve.json,redo:V.undo.patch,undo:V.redo.patch}:null;wi(ve,Ne),Zt(),K.selection&&Bi(Ye(K.selection),!1)}function Xl(){if(g||!Ce.getState().canRedo)return;const V=Ce.redo();if(!V)return;const ve={json:W,text:we};t(8,W=V.redo.patch?As(W,V.redo.patch):V.redo.json),t(12,K=V.redo.state),t(17,we=V.redo.text),t(23,ke=V.redo.textIsRepaired),t(18,ee=void 0),r("redo",{item:V,json:W});const Ne=V.undo.patch&&V.redo.patch?{json:W,previousJson:ve.json,redo:V.redo.patch,undo:V.undo.patch}:null;wi(ve,Ne),Zt(),K.selection&&Bi(Ye(K.selection),!1)}function mc(V){t(77,st=V.getBoundingClientRect().height)}function Gl(V,ve){t(76,Ee[ve]=V.getBoundingClientRect().height,Ee)}function _n(V){re=V,t(9,re)}function J(V){it[V?"unshift":"push"](()=>{ue=V,t(16,ue)})}const Ue=()=>t(10,Ie=1/0),en=(V,ve)=>Gl(ve,V);function ji(V){it[V?"unshift":"push"](()=>{Z=V,t(15,Z)})}const Fi=()=>{Zt()};function zi(V){it[V?"unshift":"push"](()=>{le=V,t(14,le)})}return n.$$set=V=>{"readOnly"in V&&t(0,g=V.readOnly),"externalContent"in V&&t(53,m=V.externalContent),"externalSelection"in V&&t(54,p=V.externalSelection),"mainMenuBar"in V&&t(1,b=V.mainMenuBar),"escapeControlCharacters"in V&&t(55,y=V.escapeControlCharacters),"escapeUnicodeCharacters"in V&&t(56,v=V.escapeUnicodeCharacters),"flattenColumns"in V&&t(57,C=V.flattenColumns),"parser"in V&&t(2,_=V.parser),"parseMemoizeOne"in V&&t(58,S=V.parseMemoizeOne),"validator"in V&&t(59,x=V.validator),"validationParser"in V&&t(60,D=V.validationParser),"indentation"in V&&t(3,P=V.indentation),"onChange"in V&&t(61,E=V.onChange),"onChangeMode"in V&&t(4,O=V.onChangeMode),"onSelect"in V&&t(62,I=V.onSelect),"onRenderValue"in V&&t(63,N=V.onRenderValue),"onRenderMenu"in V&&t(5,F=V.onRenderMenu),"onRenderContextMenu"in V&&t(64,z=V.onRenderContextMenu),"onFocus"in V&&t(65,q=V.onFocus),"onBlur"in V&&t(66,Q=V.onBlur),"onSortModal"in V&&t(67,X=V.onSortModal),"onTransformModal"in V&&t(68,T=V.onTransformModal),"onJSONEditorModal"in V&&t(69,U=V.onJSONEditorModal)},n.$$.update=()=>{n.$$.dirty[1]&50331648&&t(75,Y=m0({escapeControlCharacters:y,escapeUnicodeCharacters:v})),n.$$.dirty[0]&512&&H(re),n.$$.dirty[1]&4194304&&Pe(m),n.$$.dirty[1]&8388608&&Ge(p),n.$$.dirty[0]&3328|n.$$.dirty[1]&67108864&&t(11,Te=Jt(W)?rF(oF(W,C,Ie),Te):[]),n.$$.dirty[0]&2304&&t(22,de=!!(W&&!Ct(Te))),n.$$.dirty[0]&1280&&t(28,i=Array.isArray(W)&&W.length>Ie),n.$$.dirty[0]&768|n.$$.dirty[2]&114688&&t(27,s=lF(dt,st,W,Ee,Zr,re?cl:0)),n.$$.dirty[0]&256&&Ze(),n.$$.dirty[0]&4357|n.$$.dirty[2]&8194&&t(25,xe={readOnly:g,parser:_,normalization:Y,getJson:()=>W,getDocumentState:()=>K,findElement:Xn,findNextInside:qr,focus:Zt,onPatch:Yt,onSelect:We,onFind:bs,onPasteJson:$o,onRenderValue:N}),n.$$.dirty[0]&260|n.$$.dirty[1]&805306368&&At(W,x,_,D),n.$$.dirty[0]&10240&&t(26,o=dF(fe,Te))},[g,b,_,P,O,F,Zt,zs,W,re,Ie,Te,K,fe,le,Z,ue,we,ee,be,tt,Qe,de,ke,$,xe,o,s,i,d,ae,De,Le,qe,Yt,js,Fs,_s,Vs,mn,_o,oe,$e,uc,tr,Jr,nr,vo,ir,Yl,Xl,mc,Gl,m,p,y,v,C,S,x,D,E,I,N,z,q,Q,X,T,U,nt,Kt,Bi,Xn,Jl,Y,Ee,st,dt,_n,J,Ue,en,ji,Fi,zi]}class DY extends ze{constructor(e){super(),Fe(this,e,RY,EY,ft,{readOnly:0,externalContent:53,externalSelection:54,mainMenuBar:1,escapeControlCharacters:55,escapeUnicodeCharacters:56,flattenColumns:57,parser:2,parseMemoizeOne:58,validator:59,validationParser:60,indentation:3,onChange:61,onChangeMode:4,onSelect:62,onRenderValue:63,onRenderMenu:5,onRenderContextMenu:64,onFocus:65,onBlur:66,onSortModal:67,onTransformModal:68,onJSONEditorModal:69,validate:70,patch:71,focus:6,acceptAutoRepair:7,scrollTo:72,findElement:73,openTransformModal:74},null,[-1,-1,-1,-1,-1])}get validate(){return this.$$.ctx[70]}get patch(){return this.$$.ctx[71]}get focus(){return this.$$.ctx[6]}get acceptAutoRepair(){return this.$$.ctx[7]}get scrollTo(){return this.$$.ctx[72]}get findElement(){return this.$$.ctx[73]}get openTransformModal(){return this.$$.ctx[74]}}function LY(n){let e,t,i={externalContent:n[0],externalSelection:n[1],readOnly:n[2],indentation:n[3],mainMenuBar:n[6],navigationBar:n[7],escapeControlCharacters:n[10],escapeUnicodeCharacters:n[11],parser:n[13],parseMemoizeOne:n[14],validator:n[15],validationParser:n[16],pathParser:n[17],onError:n[23],onChange:n[18],onChangeMode:n[19],onSelect:n[20],onRenderValue:n[21],onClassName:n[22],onFocus:n[24],onBlur:n[25],onRenderMenu:n[32],onRenderContextMenu:n[33],onSortModal:n[26],onTransformModal:n[27],onJSONEditorModal:n[28]};return e=new F0({props:i}),n[49](e),{c(){se(e.$$.fragment)},m(s,o){ne(e,s,o),t=!0},p(s,o){const r={};o[0]&1&&(r.externalContent=s[0]),o[0]&2&&(r.externalSelection=s[1]),o[0]&4&&(r.readOnly=s[2]),o[0]&8&&(r.indentation=s[3]),o[0]&64&&(r.mainMenuBar=s[6]),o[0]&128&&(r.navigationBar=s[7]),o[0]&1024&&(r.escapeControlCharacters=s[10]),o[0]&2048&&(r.escapeUnicodeCharacters=s[11]),o[0]&8192&&(r.parser=s[13]),o[0]&16384&&(r.parseMemoizeOne=s[14]),o[0]&32768&&(r.validator=s[15]),o[0]&65536&&(r.validationParser=s[16]),o[0]&131072&&(r.pathParser=s[17]),o[0]&8388608&&(r.onError=s[23]),o[0]&262144&&(r.onChange=s[18]),o[0]&524288&&(r.onChangeMode=s[19]),o[0]&1048576&&(r.onSelect=s[20]),o[0]&2097152&&(r.onRenderValue=s[21]),o[0]&4194304&&(r.onClassName=s[22]),o[0]&16777216&&(r.onFocus=s[24]),o[0]&33554432&&(r.onBlur=s[25]),o[1]&2&&(r.onRenderMenu=s[32]),o[1]&4&&(r.onRenderContextMenu=s[33]),o[0]&67108864&&(r.onSortModal=s[26]),o[0]&134217728&&(r.onTransformModal=s[27]),o[0]&268435456&&(r.onJSONEditorModal=s[28]),e.$set(r)},i(s){t||(k(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){n[49](null),ie(e,s)}}}function IY(n){let e,t,i={externalContent:n[0],externalSelection:n[1],readOnly:n[2],mainMenuBar:n[6],escapeControlCharacters:n[10],escapeUnicodeCharacters:n[11],flattenColumns:n[12],parser:n[13],parseMemoizeOne:n[14],validator:n[15],validationParser:n[16],indentation:n[3],onChange:n[18],onChangeMode:n[19],onSelect:n[20],onRenderValue:n[21],onFocus:n[24],onBlur:n[25],onRenderMenu:n[32],onRenderContextMenu:n[33],onSortModal:n[26],onTransformModal:n[27],onJSONEditorModal:n[28]};return e=new DY({props:i}),n[48](e),{c(){se(e.$$.fragment)},m(s,o){ne(e,s,o),t=!0},p(s,o){const r={};o[0]&1&&(r.externalContent=s[0]),o[0]&2&&(r.externalSelection=s[1]),o[0]&4&&(r.readOnly=s[2]),o[0]&64&&(r.mainMenuBar=s[6]),o[0]&1024&&(r.escapeControlCharacters=s[10]),o[0]&2048&&(r.escapeUnicodeCharacters=s[11]),o[0]&4096&&(r.flattenColumns=s[12]),o[0]&8192&&(r.parser=s[13]),o[0]&16384&&(r.parseMemoizeOne=s[14]),o[0]&32768&&(r.validator=s[15]),o[0]&65536&&(r.validationParser=s[16]),o[0]&8&&(r.indentation=s[3]),o[0]&262144&&(r.onChange=s[18]),o[0]&524288&&(r.onChangeMode=s[19]),o[0]&1048576&&(r.onSelect=s[20]),o[0]&2097152&&(r.onRenderValue=s[21]),o[0]&16777216&&(r.onFocus=s[24]),o[0]&33554432&&(r.onBlur=s[25]),o[1]&2&&(r.onRenderMenu=s[32]),o[1]&4&&(r.onRenderContextMenu=s[33]),o[0]&67108864&&(r.onSortModal=s[26]),o[0]&134217728&&(r.onTransformModal=s[27]),o[0]&268435456&&(r.onJSONEditorModal=s[28]),e.$set(r)},i(s){t||(k(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){n[48](null),ie(e,s)}}}function NY(n){let e,t,i={externalContent:n[0],externalSelection:n[1],readOnly:n[2],indentation:n[3],tabSize:n[4],mainMenuBar:n[6],statusBar:n[8],askToFormat:n[9],escapeUnicodeCharacters:n[11],parser:n[13],validator:n[15],validationParser:n[16],onChange:n[18],onSelect:n[20],onChangeMode:n[19],onError:n[23],onFocus:n[24],onBlur:n[25],onRenderMenu:n[32],onSortModal:n[26],onTransformModal:n[27]};return e=new XK({props:i}),n[47](e),{c(){se(e.$$.fragment)},m(s,o){ne(e,s,o),t=!0},p(s,o){const r={};o[0]&1&&(r.externalContent=s[0]),o[0]&2&&(r.externalSelection=s[1]),o[0]&4&&(r.readOnly=s[2]),o[0]&8&&(r.indentation=s[3]),o[0]&16&&(r.tabSize=s[4]),o[0]&64&&(r.mainMenuBar=s[6]),o[0]&256&&(r.statusBar=s[8]),o[0]&512&&(r.askToFormat=s[9]),o[0]&2048&&(r.escapeUnicodeCharacters=s[11]),o[0]&8192&&(r.parser=s[13]),o[0]&32768&&(r.validator=s[15]),o[0]&65536&&(r.validationParser=s[16]),o[0]&262144&&(r.onChange=s[18]),o[0]&1048576&&(r.onSelect=s[20]),o[0]&524288&&(r.onChangeMode=s[19]),o[0]&8388608&&(r.onError=s[23]),o[0]&16777216&&(r.onFocus=s[24]),o[0]&33554432&&(r.onBlur=s[25]),o[1]&2&&(r.onRenderMenu=s[32]),o[0]&67108864&&(r.onSortModal=s[26]),o[0]&134217728&&(r.onTransformModal=s[27]),e.$set(r)},i(s){t||(k(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){n[47](null),ie(e,s)}}}function BY(n){let e,t,i,s,o;const r=[NY,IY,LY],l=[];function a(c,f){return f[0]&32&&(e=null),e==null&&(e=c[5]===Wn.text||String(c[5])==="code"),e?0:c[5]===Wn.table?1:2}return t=a(n,[-1,-1]),i=l[t]=r[t](n),{c(){i.c(),s=bt()},m(c,f){l[t].m(c,f),j(c,s,f),o=!0},p(c,f){let u=t;t=a(c,f),t===u?l[t].p(c,f):(me(),M(l[u],1,1,()=>{l[u]=null}),pe(),i=l[t],i?i.p(c,f):(i=l[t]=r[t](c),i.c()),k(i,1),i.m(s.parentNode,s))},i(c){o||(k(i),o=!0)},o(c){M(i),o=!1},d(c){c&&B(s),l[t].d(c)}}}function jY(n,e,t){let{content:i}=e,{selection:s}=e,{readOnly:o}=e,{indentation:r}=e,{tabSize:l}=e,{mode:a}=e,{mainMenuBar:c}=e,{navigationBar:f}=e,{statusBar:u}=e,{askToFormat:h}=e,{escapeControlCharacters:d}=e,{escapeUnicodeCharacters:g}=e,{flattenColumns:m}=e,{parser:p}=e,{parseMemoizeOne:b}=e,{validator:y}=e,{validationParser:v}=e,{pathParser:C}=e,{insideModal:_}=e,{onChange:S}=e,{onChangeMode:x}=e,{onSelect:D}=e,{onRenderValue:P}=e,{onClassName:E}=e,{onRenderMenu:O}=e,{onRenderContextMenu:I}=e,{onError:N}=e,{onFocus:F}=e,{onBlur:z}=e,{onSortModal:q}=e,{onTransformModal:Q}=e,{onJSONEditorModal:X}=e,T,U,Y,le;const Z={type:"separator"};let ue,W;function we(de){if(T)return T.patch(de);if(U)return U.patch(de);if(Y)return Y.patch(de);throw new Error(`Method patch is not available in mode "${a}"`)}function ee(de){if(T)return T.expand(de);throw new Error(`Method expand is not available in mode "${a}"`)}function be(de){if(Y)Y.openTransformModal(de);else if(T)T.openTransformModal(de);else if(U)U.openTransformModal(de);else throw new Error(`Method transform is not available in mode "${a}"`)}function tt(){if(Y)return Y.validate();if(T)return T.validate();if(U)return U.validate();throw new Error(`Method validate is not available in mode "${a}"`)}function re(){return T?T.acceptAutoRepair():i}function Qe(de){if(T)return T.scrollTo(de);if(U)return U.scrollTo(de);throw new Error(`Method scrollTo is not available in mode "${a}"`)}function H(de){if(T)return T.findElement(de);if(U)return U.findElement(de);throw new Error(`Method findElement is not available in mode "${a}"`)}function ae(){Y?Y.focus():T?T.focus():U&&U.focus()}async function De(){Y&&await Y.refresh()}function Le(de){it[de?"unshift":"push"](()=>{Y=de,t(31,Y)})}function Ie(de){it[de?"unshift":"push"](()=>{U=de,t(30,U)})}function Te(de){it[de?"unshift":"push"](()=>{T=de,t(29,T)})}return n.$$set=de=>{"content"in de&&t(0,i=de.content),"selection"in de&&t(1,s=de.selection),"readOnly"in de&&t(2,o=de.readOnly),"indentation"in de&&t(3,r=de.indentation),"tabSize"in de&&t(4,l=de.tabSize),"mode"in de&&t(5,a=de.mode),"mainMenuBar"in de&&t(6,c=de.mainMenuBar),"navigationBar"in de&&t(7,f=de.navigationBar),"statusBar"in de&&t(8,u=de.statusBar),"askToFormat"in de&&t(9,h=de.askToFormat),"escapeControlCharacters"in de&&t(10,d=de.escapeControlCharacters),"escapeUnicodeCharacters"in de&&t(11,g=de.escapeUnicodeCharacters),"flattenColumns"in de&&t(12,m=de.flattenColumns),"parser"in de&&t(13,p=de.parser),"parseMemoizeOne"in de&&t(14,b=de.parseMemoizeOne),"validator"in de&&t(15,y=de.validator),"validationParser"in de&&t(16,v=de.validationParser),"pathParser"in de&&t(17,C=de.pathParser),"insideModal"in de&&t(34,_=de.insideModal),"onChange"in de&&t(18,S=de.onChange),"onChangeMode"in de&&t(19,x=de.onChangeMode),"onSelect"in de&&t(20,D=de.onSelect),"onRenderValue"in de&&t(21,P=de.onRenderValue),"onClassName"in de&&t(22,E=de.onClassName),"onRenderMenu"in de&&t(35,O=de.onRenderMenu),"onRenderContextMenu"in de&&t(36,I=de.onRenderContextMenu),"onError"in de&&t(23,N=de.onError),"onFocus"in de&&t(24,F=de.onFocus),"onBlur"in de&&t(25,z=de.onBlur),"onSortModal"in de&&t(26,q=de.onSortModal),"onTransformModal"in de&&t(27,Q=de.onTransformModal),"onJSONEditorModal"in de&&t(28,X=de.onJSONEditorModal)},n.$$.update=()=>{n.$$.dirty[0]&524320&&t(46,le=[{type:"button",text:"text",title:`Switch to text mode (current mode: ${a})`,className:"jse-group-button jse-first"+(a===Wn.text||a==="code"?" jse-selected":""),onClick:()=>x(Wn.text)},{type:"button",text:"tree",title:`Switch to tree mode (current mode: ${a})`,className:"jse-group-button "+(a===Wn.tree?" jse-selected":""),onClick:()=>x(Wn.tree)},{type:"button",text:"table",title:`Switch to table mode (current mode: ${a})`,className:"jse-group-button jse-last"+(a===Wn.table?" jse-selected":""),onClick:()=>x(Wn.table)}]),n.$$.dirty[0]&36|n.$$.dirty[1]&32792&&t(32,ue=de=>{const lt=aM(de[0])?le.concat(de):le.concat(Z,de),wt=gp(lt);return O(lt,{mode:a,modal:_,readOnly:o})||wt}),n.$$.dirty[0]&38|n.$$.dirty[1]&40&&t(33,W=de=>{const lt=gp(de);return I(de,{mode:a,modal:_,readOnly:o,selection:s})??(o?!1:lt)})},[i,s,o,r,l,a,c,f,u,h,d,g,m,p,b,y,v,C,S,x,D,P,E,N,F,z,q,Q,X,T,U,Y,ue,W,_,O,I,we,ee,be,tt,re,Qe,H,ae,De,le,Le,Ie,Te]}class O6 extends ze{constructor(e){super(),Fe(this,e,jY,BY,Qt,{content:0,selection:1,readOnly:2,indentation:3,tabSize:4,mode:5,mainMenuBar:6,navigationBar:7,statusBar:8,askToFormat:9,escapeControlCharacters:10,escapeUnicodeCharacters:11,flattenColumns:12,parser:13,parseMemoizeOne:14,validator:15,validationParser:16,pathParser:17,insideModal:34,onChange:18,onChangeMode:19,onSelect:20,onRenderValue:21,onClassName:22,onRenderMenu:35,onRenderContextMenu:36,onError:23,onFocus:24,onBlur:25,onSortModal:26,onTransformModal:27,onJSONEditorModal:28,patch:37,expand:38,transform:39,validate:40,acceptAutoRepair:41,scrollTo:42,findElement:43,focus:44,refresh:45},null,[-1,-1])}get patch(){return this.$$.ctx[37]}get expand(){return this.$$.ctx[38]}get transform(){return this.$$.ctx[39]}get validate(){return this.$$.ctx[40]}get acceptAutoRepair(){return this.$$.ctx[41]}get scrollTo(){return this.$$.ctx[42]}get findElement(){return this.$$.ctx[43]}get focus(){return this.$$.ctx[44]}get refresh(){return this.$$.ctx[45]}}function mS(n){let e,t;return{c(){e=R("div"),t=Se(n[23]),w(e,"class","jse-error svelte-1m281k0")},m(i,s){j(i,e,s),A(e,t)},p(i,s){s[0]&8388608&&Xe(t,i[23])},d(i){i&&B(e)}}}function pS(n){let e,t,i,s,o,r;return t=new vt({props:{data:UI}}),{c(){e=R("button"),se(t.$$.fragment),i=Se(" Back"),w(e,"type","button"),w(e,"class","jse-secondary svelte-1m281k0")},m(l,a){j(l,e,a),ne(t,e,null),A(e,i),s=!0,o||(r=he(e,"click",n[28]),o=!0)},p:ge,i(l){s||(k(t.$$.fragment,l),s=!0)},o(l){M(t.$$.fragment,l),s=!1},d(l){l&&B(e),ie(t),o=!1,r()}}}function FY(n){let e,t,i;return{c(){e=R("button"),e.textContent="Close",w(e,"type","button"),w(e,"class","jse-primary svelte-1m281k0")},m(s,o){j(s,e,o),t||(i=[he(e,"click",n[28]),En(P6.call(null,e))],t=!0)},p:ge,d(s){s&&B(e),t=!1,Et(i)}}}function zY(n){let e,t,i;return{c(){e=R("button"),e.textContent="Apply",w(e,"type","button"),w(e,"class","jse-primary svelte-1m281k0")},m(s,o){j(s,e,o),t||(i=[he(e,"click",n[27]),En(P6.call(null,e))],t=!0)},p:ge,d(s){s&&B(e),t=!1,Et(i)}}}function VY(n){let e,t,i,s,o,r,l,a,c,f,u,h,d,g,m,p,b,y,v,C;function _(N){n[39](N)}let S={title:"Edit nested content "+(n[20].length>1?` (${n[20].length})`:""),fullScreenButton:!0,onClose:n[28]};n[22]!==void 0&&(S.fullscreen=n[22]),t=new _g({props:S}),it.push(()=>Jn(t,"fullscreen",_));let x={mode:n[24].mode,content:n[24].content,selection:n[24].selection,readOnly:n[0],indentation:n[1],tabSize:n[2],statusBar:n[5],askToFormat:n[6],mainMenuBar:n[3],navigationBar:n[4],escapeControlCharacters:n[7],escapeUnicodeCharacters:n[8],flattenColumns:n[9],parser:n[10],parseMemoizeOne:n[25],validator:n[11],validationParser:n[12],pathParser:n[13],insideModal:!0,onError:n[33],onChange:n[30],onChangeMode:n[32],onSelect:n[31],onRenderValue:n[14],onClassName:n[15],onFocus:vs,onBlur:vs,onRenderMenu:n[16],onRenderContextMenu:n[17],onSortModal:n[18],onTransformModal:n[19],onJSONEditorModal:n[34]};d=new O6({props:x}),n[40](d);let D=n[23]&&mS(n),P=n[20].length>1&&pS(n);function E(N,F){return N[0]?FY:zY}let O=E(n),I=O(n);return{c(){e=R("div"),se(t.$$.fragment),s=G(),o=R("div"),r=R("div"),r.innerHTML='<div class="jse-label-inner svelte-1m281k0">Path</div>',l=G(),a=R("input"),c=G(),f=R("div"),f.innerHTML='<div class="jse-label-inner svelte-1m281k0">Contents</div>',u=G(),h=R("div"),se(d.$$.fragment),g=G(),m=R("div"),D&&D.c(),p=G(),P&&P.c(),b=G(),I.c(),w(r,"class","jse-label svelte-1m281k0"),w(a,"class","jse-path svelte-1m281k0"),w(a,"type","text"),a.readOnly=!0,w(a,"title","Selected path"),a.value=n[26],w(f,"class","jse-label svelte-1m281k0"),w(h,"class","jse-modal-inline-editor svelte-1m281k0"),w(m,"class","jse-actions svelte-1m281k0"),w(o,"class","jse-modal-contents svelte-1m281k0"),w(e,"class","jse-modal jse-jsoneditor-modal svelte-1m281k0"),te(e,"fullscreen",n[22])},m(N,F){j(N,e,F),ne(t,e,null),A(e,s),A(e,o),A(o,r),A(o,l),A(o,a),A(o,c),A(o,f),A(o,u),A(o,h),ne(d,h,null),A(o,g),A(o,m),D&&D.m(m,null),A(m,p),P&&P.m(m,null),A(m,b),I.m(m,null),y=!0,v||(C=En(Zf.call(null,e,n[29])),v=!0)},p(N,F){const z={};F[0]&1048576&&(z.title="Edit nested content "+(N[20].length>1?` (${N[20].length})`:"")),!i&&F[0]&4194304&&(i=!0,z.fullscreen=N[22],Un(()=>i=!1)),t.$set(z),(!y||F[0]&67108864&&a.value!==N[26])&&(a.value=N[26]);const q={};F[0]&16777216&&(q.mode=N[24].mode),F[0]&16777216&&(q.content=N[24].content),F[0]&16777216&&(q.selection=N[24].selection),F[0]&1&&(q.readOnly=N[0]),F[0]&2&&(q.indentation=N[1]),F[0]&4&&(q.tabSize=N[2]),F[0]&32&&(q.statusBar=N[5]),F[0]&64&&(q.askToFormat=N[6]),F[0]&8&&(q.mainMenuBar=N[3]),F[0]&16&&(q.navigationBar=N[4]),F[0]&128&&(q.escapeControlCharacters=N[7]),F[0]&256&&(q.escapeUnicodeCharacters=N[8]),F[0]&512&&(q.flattenColumns=N[9]),F[0]&1024&&(q.parser=N[10]),F[0]&33554432&&(q.parseMemoizeOne=N[25]),F[0]&2048&&(q.validator=N[11]),F[0]&4096&&(q.validationParser=N[12]),F[0]&8192&&(q.pathParser=N[13]),F[0]&16384&&(q.onRenderValue=N[14]),F[0]&32768&&(q.onClassName=N[15]),F[0]&65536&&(q.onRenderMenu=N[16]),F[0]&131072&&(q.onRenderContextMenu=N[17]),F[0]&262144&&(q.onSortModal=N[18]),F[0]&524288&&(q.onTransformModal=N[19]),d.$set(q),N[23]?D?D.p(N,F):(D=mS(N),D.c(),D.m(m,p)):D&&(D.d(1),D=null),N[20].length>1?P?(P.p(N,F),F[0]&1048576&&k(P,1)):(P=pS(N),P.c(),k(P,1),P.m(m,b)):P&&(me(),M(P,1,1,()=>{P=null}),pe()),O===(O=E(N))&&I?I.p(N,F):(I.d(1),I=O(N),I&&(I.c(),I.m(m,null))),(!y||F[0]&4194304)&&te(e,"fullscreen",N[22])},i(N){y||(k(t.$$.fragment,N),k(d.$$.fragment,N),k(P),y=!0)},o(N){M(t.$$.fragment,N),M(d.$$.fragment,N),M(P),y=!1},d(N){N&&B(e),ie(t),n[40](null),ie(d),D&&D.d(),P&&P.d(),I.d(),v=!1,C()}}}function P6(n){n.focus()}function HY(n,e,t){let i,s,o,r;const l=Fn("jsoneditor:JSONEditorModal");let{content:a}=e,{path:c}=e,{onPatch:f}=e,{readOnly:u}=e,{indentation:h}=e,{tabSize:d}=e,{mainMenuBar:g}=e,{navigationBar:m}=e,{statusBar:p}=e,{askToFormat:b}=e,{escapeControlCharacters:y}=e,{escapeUnicodeCharacters:v}=e,{flattenColumns:C}=e,{parser:_}=e,{validator:S}=e,{validationParser:x}=e,{pathParser:D}=e,{onRenderValue:P}=e,{onClassName:E}=e,{onRenderMenu:O}=e,{onRenderContextMenu:I}=e,{onSortModal:N}=e,{onTransformModal:F}=e;const{close:z}=jn("simple-modal");let q,Q;const X={mode:Y(a),content:a,selection:null,relativePath:c};let T=[X],U;function Y(ae){return df(ae)&&Jt(ae.json)?Wn.table:Wn.tree}function le(){var De;const ae=((De=mt(T))==null?void 0:De.selection)||null;k0(ae)&&q.scrollTo(Ye(ae))}function Z(){if(l("handleApply"),!u)try{t(23,U=void 0);const ae=i.relativePath,De=i.content,Le=[{op:"replace",path:Oe(ae),value:Y2(De,_).json}];if(T.length>1){const Ie=T[T.length-2].content,Te=Y2(Ie,_).json,de={json:As(Te,Le)},wt={...T[T.length-2]||X,content:de};t(20,T=[...T.slice(0,T.length-2),wt]),wn().then(le)}else f(Le),z()}catch(ae){t(23,U=String(ae))}}function ue(){l("handleClose"),T.length>1?(t(20,T=_t(T)),wn().then(le),t(23,U=void 0)):z()}function W(){Q?t(22,Q=!1):ue()}function we(ae){l("handleChange",ae);const De={...i,content:ae};t(20,T=[..._t(T),De])}function ee(ae){l("handleChangeSelection",ae);const De={...i,selection:ae};t(20,T=[..._t(T),De])}function be(ae){l("handleChangeMode",ae);const De={...i,mode:ae};t(20,T=[..._t(T),De])}function tt(ae){t(23,U=ae.toString()),console.error(ae)}function re({content:ae,path:De}){l("handleJSONEditorModal",{content:ae,path:De});const Le={mode:Y(ae),content:ae,selection:null,relativePath:De};t(20,T=[...T,Le])}function Qe(ae){Q=ae,t(22,Q)}function H(ae){it[ae?"unshift":"push"](()=>{q=ae,t(21,q)})}return n.$$set=ae=>{"content"in ae&&t(35,a=ae.content),"path"in ae&&t(36,c=ae.path),"onPatch"in ae&&t(37,f=ae.onPatch),"readOnly"in ae&&t(0,u=ae.readOnly),"indentation"in ae&&t(1,h=ae.indentation),"tabSize"in ae&&t(2,d=ae.tabSize),"mainMenuBar"in ae&&t(3,g=ae.mainMenuBar),"navigationBar"in ae&&t(4,m=ae.navigationBar),"statusBar"in ae&&t(5,p=ae.statusBar),"askToFormat"in ae&&t(6,b=ae.askToFormat),"escapeControlCharacters"in ae&&t(7,y=ae.escapeControlCharacters),"escapeUnicodeCharacters"in ae&&t(8,v=ae.escapeUnicodeCharacters),"flattenColumns"in ae&&t(9,C=ae.flattenColumns),"parser"in ae&&t(10,_=ae.parser),"validator"in ae&&t(11,S=ae.validator),"validationParser"in ae&&t(12,x=ae.validationParser),"pathParser"in ae&&t(13,D=ae.pathParser),"onRenderValue"in ae&&t(14,P=ae.onRenderValue),"onClassName"in ae&&t(15,E=ae.onClassName),"onRenderMenu"in ae&&t(16,O=ae.onRenderMenu),"onRenderContextMenu"in ae&&t(17,I=ae.onRenderContextMenu),"onSortModal"in ae&&t(18,N=ae.onSortModal),"onTransformModal"in ae&&t(19,F=ae.onTransformModal)},n.$$.update=()=>{n.$$.dirty[0]&1048576&&t(24,i=mt(T)||X),n.$$.dirty[0]&1048576&&t(38,s=T.flatMap(ae=>ae.relativePath)),n.$$.dirty[1]&128&&t(26,o=Ct(s)?"(document root)":Ii(s)),n.$$.dirty[0]&1024&&t(25,r=eu(_.parse))},[u,h,d,g,m,p,b,y,v,C,_,S,x,D,P,E,O,I,N,F,T,q,Q,U,i,r,o,Z,ue,W,we,ee,be,tt,re,a,c,f,s,Qe,H]}class WY extends ze{constructor(e){super(),Fe(this,e,HY,VY,ft,{content:35,path:36,onPatch:37,readOnly:0,indentation:1,tabSize:2,mainMenuBar:3,navigationBar:4,statusBar:5,askToFormat:6,escapeControlCharacters:7,escapeUnicodeCharacters:8,flattenColumns:9,parser:10,validator:11,validationParser:12,pathParser:13,onRenderValue:14,onClassName:15,onRenderMenu:16,onRenderContextMenu:17,onSortModal:18,onTransformModal:19},null,[-1,-1])}}function qY(n,e,t){const i=jn("simple-modal"),s=i.open,o=i.close;return[s,o]}class UY extends ze{constructor(e){super(),Fe(this,e,qY,null,ft,{open:0,close:1})}get open(){return this.$$.ctx[0]}get close(){return this.$$.ctx[1]}}function bS(n){let e,t,i={mode:n[1],content:n[0],selection:n[2],readOnly:n[3],indentation:n[4],tabSize:n[5],statusBar:n[8],askToFormat:n[9],mainMenuBar:n[6],navigationBar:n[7],escapeControlCharacters:n[10],escapeUnicodeCharacters:n[11],flattenColumns:n[12],parser:n[13],parseMemoizeOne:n[27],validator:n[14],validationParser:n[15],pathParser:n[16],insideModal:!1,onError:n[21],onChange:n[28],onChangeMode:n[32],onSelect:n[29],onRenderValue:n[17],onClassName:n[18],onFocus:n[30],onBlur:n[31],onRenderMenu:n[19],onRenderContextMenu:n[20],onSortModal:n[34],onTransformModal:n[33],onJSONEditorModal:n[35]};return e=new O6({props:i}),n[62](e),{c(){se(e.$$.fragment)},m(s,o){ne(e,s,o),t=!0},p(s,o){const r={};o[0]&2&&(r.mode=s[1]),o[0]&1&&(r.content=s[0]),o[0]&4&&(r.selection=s[2]),o[0]&8&&(r.readOnly=s[3]),o[0]&16&&(r.indentation=s[4]),o[0]&32&&(r.tabSize=s[5]),o[0]&256&&(r.statusBar=s[8]),o[0]&512&&(r.askToFormat=s[9]),o[0]&64&&(r.mainMenuBar=s[6]),o[0]&128&&(r.navigationBar=s[7]),o[0]&1024&&(r.escapeControlCharacters=s[10]),o[0]&2048&&(r.escapeUnicodeCharacters=s[11]),o[0]&4096&&(r.flattenColumns=s[12]),o[0]&8192&&(r.parser=s[13]),o[0]&134217728&&(r.parseMemoizeOne=s[27]),o[0]&16384&&(r.validator=s[14]),o[0]&32768&&(r.validationParser=s[15]),o[0]&65536&&(r.pathParser=s[16]),o[0]&2097152&&(r.onError=s[21]),o[0]&131072&&(r.onRenderValue=s[17]),o[0]&262144&&(r.onClassName=s[18]),o[0]&524288&&(r.onRenderMenu=s[19]),o[0]&1048576&&(r.onRenderContextMenu=s[20]),e.$set(r)},i(s){t||(k(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){n[62](null),ie(e,s)}}}function JY(n){let e,t,i,s,o=n[22],r;function l(f){n[61](f)}let a={};n[25]!==void 0&&(a.open=n[25]),e=new UY({props:a}),it.push(()=>Jn(e,"open",l));let c=bS(n);return{c(){se(e.$$.fragment),i=G(),s=R("div"),c.c(),w(s,"class","jse-main svelte-ybuk0j"),te(s,"jse-focus",n[23])},m(f,u){ne(e,f,u),j(f,i,u),j(f,s,u),c.m(s,null),r=!0},p(f,u){const h={};!t&&u[0]&33554432&&(t=!0,h.open=f[25],Un(()=>t=!1)),e.$set(h),u[0]&4194304&&ft(o,o=f[22])?(me(),M(c,1,1,ge),pe(),c=bS(f),c.c(),k(c,1),c.m(s,null)):c.p(f,u),(!r||u[0]&8388608)&&te(s,"jse-focus",f[23])},i(f){r||(k(e.$$.fragment,f),k(c),r=!0)},o(f){M(e.$$.fragment,f),M(c),r=!1},d(f){f&&(B(i),B(s)),ie(e,f),c.d(f)}}}function KY(n){let e,t;return e=new l3({props:{closeOnEsc:!1,$$slots:{default:[JY]},$$scope:{ctx:n}}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s[0]&201326591|s[2]&8&&(o.$$scope={dirty:s,ctx:i}),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function YY(n){var o;let e,t;const i=[{show:(o=n[26])==null?void 0:o.component},FO,{closeOnEsc:!1}];let s={$$slots:{default:[KY]},$$scope:{ctx:n}};for(let r=0;r<i.length;r+=1)s=Ht(s,i[r]);return e=new l3({props:s}),e.$on("close",n[36]),{c(){se(e.$$.fragment)},m(r,l){ne(e,r,l),t=!0},p(r,l){var c;const a=l[0]&67108864?ni(i,[{show:(c=r[26])==null?void 0:c.component},i[1],i[2]]):{};l[0]&201326591|l[2]&8&&(a.$$scope={dirty:l,ctx:r}),e.$set(a)},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){ie(e,r)}}}function XY(n){let e,t;return e=new y4({props:{$$slots:{default:[YY]},$$scope:{ctx:n}}}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},p(i,s){const o={};s[0]&268435455|s[2]&8&&(o.$$scope={dirty:s,ctx:i}),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function GY(n,e,t){let i;const s=Fn("jsoneditor:JSONEditor");let{content:o={text:""}}=e,{selection:r=null}=e,{readOnly:l=!1}=e,{indentation:a=2}=e,{tabSize:c=4}=e,{mode:f=Wn.tree}=e,{mainMenuBar:u=!0}=e,{navigationBar:h=!0}=e,{statusBar:d=!0}=e,{askToFormat:g=!0}=e,{escapeControlCharacters:m=!1}=e,{escapeUnicodeCharacters:p=!1}=e,{flattenColumns:b=!0}=e,{parser:y=JSON}=e,{validator:v=null}=e,{validationParser:C=JSON}=e,{pathParser:_={parse:mL,stringify:Ii}}=e,{queryLanguages:S=[wL]}=e,{queryLanguageId:x=S[0].id}=e,{onChangeQueryLanguage:D=vs}=e,{onChange:P=null}=e,{onSelect:E=null}=e,{onRenderValue:O=zI}=e,{onClassName:I=()=>{}}=e,{onRenderMenu:N=vs}=e,{onRenderContextMenu:F=vs}=e,{onChangeMode:z=vs}=e,{onError:q=$=>{console.error($),alert($.toString())}}=e,{onFocus:Q=vs}=e,{onBlur:X=vs}=e,T=Jc(),U=!1,Y,le,Z=null,ue=y;function W(){return o}async function we($){s("set");const xe=Zg($);if(xe)throw new Error(xe);t(22,T=Jc()),t(0,o=$)}async function ee($){s("update");const xe=Zg($);if(xe)throw new Error(xe);t(0,o=$),await wn()}async function be($){if(Fa(o))try{t(0,o={json:y.parse(o.text),text:void 0})}catch{throw new Error("Cannot apply patch: current document contains invalid JSON")}const xe=Y.patch($);return await wn(),xe}async function tt($){t(2,r=$),await wn()}async function re($){Y.expand($),await wn()}function Qe($){Y.transform($)}function H(){return Y.validate()}async function ae(){const $=Y.acceptAutoRepair();return await wn(),$}async function De($){await Y.scrollTo($)}function Le($){return Y.findElement($)}async function Ie(){Y.focus(),await wn()}async function Te(){await Y.refresh()}async function de($){this.$set($),await wn()}async function lt(){this.$destroy(),await wn()}function wt($,xe,Pe){t(0,o=$),P&&P($,xe,Pe)}function Ee($){t(2,r=$),E&&E(gp($))}function st(){t(23,U=!0),Q&&Q()}function dt(){t(23,U=!1),X&&X()}async function Ze($){f!==$&&(t(1,f=$),await wn(),await Ie(),z($))}function It($){s("handleChangeQueryLanguage",$),t(37,x=$),D($)}function We({id:$,json:xe,rootPath:Pe,onTransform:Ge,onClose:ot}){l||le(bz,{id:$,json:xe,rootPath:Pe,indentation:a,escapeControlCharacters:m,escapeUnicodeCharacters:p,parser:y,parseMemoizeOne:i,validationParser:C,pathParser:_,queryLanguages:S,queryLanguageId:x,onChangeQueryLanguage:It,onRenderValue:O,onRenderMenu:N,onRenderContextMenu:F,onClassName:I,onTransform:Ge},jO,{onClose:ot})}function ct({id:$,json:xe,rootPath:Pe,onSort:Ge,onClose:ot}){l||le(vz,{id:$,json:xe,rootPath:Pe,onSort:Ge},BO,{onClose:ot})}function K({content:$,path:xe,onPatch:Pe,onClose:Ge}){s("onJSONEditorModal",{content:$,path:xe}),t(26,Z={component:r3(WY,{content:$,path:xe,onPatch:Pe,readOnly:l,indentation:a,tabSize:c,mainMenuBar:u,navigationBar:h,statusBar:d,askToFormat:g,escapeControlCharacters:m,escapeUnicodeCharacters:p,flattenColumns:b,parser:y,validator:void 0,validationParser:C,pathParser:_,onRenderValue:O,onClassName:I,onRenderMenu:N,onRenderContextMenu:F,onSortModal:ct,onTransformModal:We}),callbacks:{onClose:Ge}})}function ke(){var $,xe;(xe=($=Z==null?void 0:Z.callbacks)==null?void 0:$.onClose)==null||xe.call($),t(26,Z=null)}function qe($){le=$,t(25,le)}function Ce($){it[$?"unshift":"push"](()=>{Y=$,t(24,Y)})}return n.$$set=$=>{"content"in $&&t(0,o=$.content),"selection"in $&&t(2,r=$.selection),"readOnly"in $&&t(3,l=$.readOnly),"indentation"in $&&t(4,a=$.indentation),"tabSize"in $&&t(5,c=$.tabSize),"mode"in $&&t(1,f=$.mode),"mainMenuBar"in $&&t(6,u=$.mainMenuBar),"navigationBar"in $&&t(7,h=$.navigationBar),"statusBar"in $&&t(8,d=$.statusBar),"askToFormat"in $&&t(9,g=$.askToFormat),"escapeControlCharacters"in $&&t(10,m=$.escapeControlCharacters),"escapeUnicodeCharacters"in $&&t(11,p=$.escapeUnicodeCharacters),"flattenColumns"in $&&t(12,b=$.flattenColumns),"parser"in $&&t(13,y=$.parser),"validator"in $&&t(14,v=$.validator),"validationParser"in $&&t(15,C=$.validationParser),"pathParser"in $&&t(16,_=$.pathParser),"queryLanguages"in $&&t(38,S=$.queryLanguages),"queryLanguageId"in $&&t(37,x=$.queryLanguageId),"onChangeQueryLanguage"in $&&t(39,D=$.onChangeQueryLanguage),"onChange"in $&&t(40,P=$.onChange),"onSelect"in $&&t(41,E=$.onSelect),"onRenderValue"in $&&t(17,O=$.onRenderValue),"onClassName"in $&&t(18,I=$.onClassName),"onRenderMenu"in $&&t(19,N=$.onRenderMenu),"onRenderContextMenu"in $&&t(20,F=$.onRenderContextMenu),"onChangeMode"in $&&t(42,z=$.onChangeMode),"onError"in $&&t(21,q=$.onError),"onFocus"in $&&t(43,Q=$.onFocus),"onBlur"in $&&t(44,X=$.onBlur)},n.$$.update=()=>{if(n.$$.dirty[0]&8193|n.$$.dirty[1]&536870912&&!X7(y,ue)){if(s("parser changed, recreate editor"),df(o)){const $=ue.stringify(o.json);t(0,o={json:$!==void 0?y.parse($):void 0})}t(60,ue=y),t(22,T=Jc())}if(n.$$.dirty[0]&1){const $=Zg(o);$&&console.error("Error: "+$)}n.$$.dirty[0]&8192&&t(27,i=eu(y.parse)),n.$$.dirty[0]&2&&(s("mode changed to",f),f==="code"&&console.warn('Deprecation warning: "code" mode is renamed to "text". Please use mode="text" instead.'))},[o,f,r,l,a,c,u,h,d,g,m,p,b,y,v,C,_,O,I,N,F,q,T,U,Y,le,Z,i,wt,Ee,st,dt,Ze,We,ct,K,ke,x,S,D,P,E,z,Q,X,W,we,ee,be,tt,re,Qe,H,ae,De,Le,Ie,Te,de,lt,ue,qe,Ce]}class QY extends ze{constructor(e){super(),Fe(this,e,GY,XY,ft,{content:0,selection:2,readOnly:3,indentation:4,tabSize:5,mode:1,mainMenuBar:6,navigationBar:7,statusBar:8,askToFormat:9,escapeControlCharacters:10,escapeUnicodeCharacters:11,flattenColumns:12,parser:13,validator:14,validationParser:15,pathParser:16,queryLanguages:38,queryLanguageId:37,onChangeQueryLanguage:39,onChange:40,onSelect:41,onRenderValue:17,onClassName:18,onRenderMenu:19,onRenderContextMenu:20,onChangeMode:42,onError:21,onFocus:43,onBlur:44,get:45,set:46,update:47,patch:48,select:49,expand:50,transform:51,validate:52,acceptAutoRepair:53,scrollTo:54,findElement:55,focus:56,refresh:57,updateProps:58,destroy:59},null,[-1,-1,-1])}get get(){return this.$$.ctx[45]}get set(){return this.$$.ctx[46]}get update(){return this.$$.ctx[47]}get patch(){return this.$$.ctx[48]}get select(){return this.$$.ctx[49]}get expand(){return this.$$.ctx[50]}get transform(){return this.$$.ctx[51]}get validate(){return this.$$.ctx[52]}get acceptAutoRepair(){return this.$$.ctx[53]}get scrollTo(){return this.$$.ctx[54]}get findElement(){return this.$$.ctx[55]}get focus(){return this.$$.ctx[56]}get refresh(){return this.$$.ctx[57]}get updateProps(){return this.$$.ctx[58]}get destroy(){return this.$$.ctx[59]}}const T6=!0;function $u(n){if(!(n!=null&&n.endsWith("px")))return;const e=parseFloat(n.slice(0,n.length-2));return isNaN(e)?void 0:e}const E6=n=>n?"height":"width",x1=n=>window.getComputedStyle(n),A1=n=>n.getBoundingClientRect(),ZY=(n,e=!0)=>{if(n.getPropertyValue("box-sizing")==="border-box")return;const t=$u(n.getPropertyValue("border-left-width"));if(t===void 0){console.error("Splitpanes Error: Fail to parse container `border-left-width`.");return}const i=$u(n.getPropertyValue("border-top-width"));if(i===void 0){console.error("Splitpanes Error: Fail to parse container `border-top-width`.");return}const s={left:t,top:i};if(e){const o=$u(n.getPropertyValue("border-right-width"));if(o===void 0){console.error("Splitpanes Error: Fail to parse container `border-right-width`.");return}const r=$u(n.getPropertyValue("border-bottom-width"));if(r===void 0){console.error("Splitpanes Error: Fail to parse container `border-bottom-width`.");return}const l=s;l.right=o,l.bottom=r}return s};function $Y(n,e){e||(e=x1(n));const t=A1(n),i=ZY(e,!0)||{left:0,top:0,right:0,bottom:0};return{width:t.width-i.left-i.right,height:t.height-i.top-i.bottom,left:t.left+i.left,top:t.top+i.top}}const yS=(n,e)=>({left:n.left-e.left,top:n.top-e.top});function _S(n){const e=n,t=n,{clientX:i,clientY:s}="ontouchstart"in window&&t.touches?t.touches[0]:e;return{left:i,top:s}}function wS(n,e,t,i){let s=0;for(let o=e;o<t;o++)s+=i(n[o],o);return s}function eh(n,e,t,i){for(let s=e;s<t;s++)i(n[s],s)}function eX(n){let e,t,i,s,o=!T6;const r=n[16].default,l=jt(r,n,n[18],null);return{c(){e=R("div"),t=G(),l&&l.c(),w(e,"id",n[0]),w(e,"class",i=`splitpanes ${n[3]||""} ${n[4]||""}`),w(e,"style",n[2]),te(e,"splitpanes--horizontal",n[1]),te(e,"splitpanes--vertical",!n[1]),te(e,"splitpanes--dragging",n[7]||n[8]),te(e,"splitpanes--freeze",!n[6])},m(a,c){j(a,e,c),A(e,t),l&&l.m(e,null),n[17](e),s=!0},p(a,c){l&&l.p&&(!s||c[0]&262144)&&zt(l,r,a,a[18],s?Ft(r,a[18],c,null):Vt(a[18]),null),(!s||c[0]&1)&&w(e,"id",a[0]),(!s||c[0]&24&&i!==(i=`splitpanes ${a[3]||""} ${a[4]||""}`))&&w(e,"class",i),(!s||c[0]&4)&&w(e,"style",a[2]),(!s||c[0]&26)&&te(e,"splitpanes--horizontal",a[1]),(!s||c[0]&26)&&te(e,"splitpanes--vertical",!a[1]),(!s||c[0]&408)&&te(e,"splitpanes--dragging",a[7]||a[8]),(!s||c[0]&88)&&te(e,"splitpanes--freeze",!a[6])},i(a){s||(k(o),k(l,a),s=!0)},o(a){M(o),M(l,a),s=!1},d(a){a&&B(e),l&&l.d(a),n[17](null)}}}const R6={},vS=(()=>{let n=!1;try{const e=Object.defineProperty({},"passive",{get(){return n={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return n})();function tX(n,e,t){let i,s,o,{$$slots:r={},$$scope:l}=e,{id:a=void 0}=e,{horizontal:c=!1}=e,{pushOtherPanes:f=!0}=e,{dblClickSplitter:u=!0}=e,{rtl:h="auto"}=e,{firstSplitter:d=!1}=e,{style:g=null}=e,{theme:m="default-theme"}=e,{class:p=""}=e;const b=J1();let y,v=!1,C=!1,_=!1,S=!1,x=!1,D=-1,P=-1,E,O=new Array;const I=bh(c);gl(n,I,K=>t(31,o=K));const N=bh(d);gl(n,N,K=>t(30,s=K));const F=bh(void 0);gl(n,F,K=>t(29,i=K));let z,q;K1(R6,{showFirstSplitter:N,veryFirstPaneKey:F,isHorizontal:I,ssrRegisterPaneSize:void 0,onPaneInit:K=>(i===void 0&&Ql(F,i=K,i),{undefinedPaneInitSize:0}),clientOnly:{onPaneAdd:X,onPaneRemove:T}});function X(K){let ke=-1;K.element.parentNode&&Array.from(K.element.parentNode.children).some(Ce=>(Ce.className.includes("splitpanes__pane")&&ke++,Ce===K.element)),ke===0&&Ql(F,i=K.key,i),O.splice(ke,0,K);for(let Ce=0;Ce<O.length;Ce++)O[Ce].index=Ce;v&&st().then(()=>{K.isReady=!0,b("pane-add",{index:ke,panes:ae()})});const qe=(Ce,$=!0)=>xe=>{($||K.index>0)&&Ce(xe,K)};return{onSplitterDown:qe(be,!1),onSplitterClick:qe(Qe,!1),onSplitterDblClick:qe(H),onPaneClick:qe(U),reportGivenSizeChange:qe(Y)}}async function T(K){const ke=O.findIndex(qe=>qe.key===K);if(ke>=0){const qe=O.splice(ke,1)[0];for(let Ce=0;Ce<O.length;Ce++)O[Ce].index=Ce;ke===0&&Ql(F,i=O.length>0?O[0].key:void 0,i),v&&(await st(),b("pane-remove",{removed:qe,panes:ae()}))}}function U(K,ke){b("pane-click",ke)}function Y(K,ke){ke.setSz(K),st()}Ai(()=>{We(),dt();for(let K=0;K<O.length;K++)O[K].isReady=!0;v=!0,b("ready"),setTimeout(()=>{t(6,_=!0)},0)}),Ci(()=>{v&&ue(),v=!1}),U5(()=>{We()});function le(K){if(h==="auto")try{return(K??x1(y)).direction==="rtl"}catch{}return h===!0}function Z(){document.body.style.cursor=I?"col-resize":"row-resize",document.addEventListener("mousemove",tt,vS),document.addEventListener("mouseup",re),"ontouchstart"in window&&(document.addEventListener("touchmove",tt,vS),document.addEventListener("touchend",re))}function ue(){document.body.style.cursor="",document.removeEventListener("mousemove",tt),document.removeEventListener("mouseup",re),"ontouchstart"in window&&(document.removeEventListener("touchmove",tt),document.removeEventListener("touchend",re))}const W=K=>K.nodeType===Node.ELEMENT_NODE&&K.classList.contains("splitpanes__splitter");function we(K,ke,qe){let Ce=K[c?"top":"left"];return qe&&!c&&(Ce=ke-Ce),Ce}const ee=()=>E6(c);function be(K,ke){t(7,S=!0),D=ke.index,ke.setSplitterActive(!0);let Ce=ke.element;for(;Ce!=null&&(Ce=Ce.previousSibling,!(Ce&&W(Ce))););if(Ce==null){console.error("Splitpane Error: Active splitter wasn't found!");return}z=Ce;const $=_S(K),xe=A1(z);q=we(yS($,xe),xe[ee()],le()),Z()}function tt(K){if(S){t(8,x=!0);const ke=_S(K),qe=x1(y),Ce=$Y(y,qe),$=Ce[ee()],xe=le(qe),Pe=yS(ke,Ce),Ge=we(Pe,$,xe);Le(Ge,$),b("resize",ae())}}function re(){x&&b("resized",ae()),t(7,S=!1),O[D].setSplitterActive(!1),setTimeout(()=>{t(8,x=!1),ue()},100)}function Qe(K,ke){if("ontouchstart"in window){const qe=ke.index;u&&(P===qe?(E&&clearTimeout(E),E=null,H(K,ke),P=-1):(P=qe,E=setTimeout(()=>{P=-1},500)))}x||b("splitter-click",ke)}function H(K,ke){if(u){const qe=ke.index;let Ce=0;for(let Pe=0;Pe<O.length;Pe++){const Ge=O[Pe];Pe!==qe&&(Ce+=Ge.min())}const $=Math.min(Math.max(0,100-Ce),ke.max()),xe=Ce+$;if(xe>=100)for(let Pe=0;Pe<O.length;Pe++){const Ge=O[Pe];Ge!==ke?Ge.setSz(Ge.min()):Ge.setSz(100-Ce)}else{let Pe=100-xe;ke.setSz($);const Ge=ot=>{const fe=ot.min(),Pt=ot.max(),At=Math.min(Math.max(0,Pe),Pt-fe);ot.setSz(fe+At),Pe-=At};for(let ot=qe-1;ot>=0;ot--)Ge(O[ot]);for(let ot=qe+1;ot<O.length;ot++)Ge(O[ot]);Pe!=0&&console.warn("Splitpanes: there is a left spare size after computation of splitter double click, which means there are issues on the size constains of the panes.")}b("pane-maximize",ke),b("resized",ae())}t(7,S=!1)}const ae=()=>O.map(K=>({min:K.min(),max:K.max(),size:K.sz(),snap:K.snap()}));function De(K,ke){const qe=Pt=>A1(Pt)[ee()],Ce=qe(z);let $=0,xe=z.previousSibling;for(;xe!=null;)W(xe)&&($+=qe(xe)),xe=xe.previousSibling;let Pe=0,Ge=z.nextSibling;for(;Ge!=null;)W(Ge)&&(Pe+=qe(Ge)),Ge=Ge.nextSibling;const ot=$+q,fe=$+Ce+Pe;return(K-ot)/(ke-fe)*100}function Le(K,ke){let qe=D-1,Ce=O[qe],$=D,xe=O[$],Pe={prevPanesSize:de(qe),nextPanesSize:lt($),prevReachedMinPanes:0,nextReachedMinPanes:0};const Ge=0+(f?0:Pe.prevPanesSize),ot=100-(f?0:Pe.nextPanesSize),fe=Math.max(Math.min(De(K,ke),ot),Ge),Pt=Pe.prevPanesSize+Ce.min()+Ce.snap(),At=100-(Pe.nextPanesSize+xe.min()+xe.snap());let nt=fe,Kt=!1;fe<=Pt?fe>Pe.prevPanesSize+Ce.min()&&(nt=Math.max(Ce.min()+Pe.prevPanesSize,100-(xe.max()+Pe.nextPanesSize)),Kt=!0):fe>=At&&fe<100-Pe.nextPanesSize-xe.min()&&(nt=Math.min(100-(xe.min()+Pe.nextPanesSize),Ce.max()+Pe.prevPanesSize),Kt=!0);const Yt=Ce.max()<100&&nt>=Ce.max()+Pe.prevPanesSize,wi=xe.max()<100&&nt<=100-(xe.max()+Pe.nextPanesSize);if(Yt||wi)Yt?(Ce.setSz(Ce.max()),xe.setSz(Math.max(100-Ce.max()-Pe.prevPanesSize-Pe.nextPanesSize,0))):(Ce.setSz(Math.max(100-xe.max()-Pe.prevPanesSize-Pe.nextPanesSize,0)),xe.setSz(xe.max()));else{if(f&&!Kt){const bs=Ie(Pe,nt);if(!bs)return;({sums:Pe,paneBeforeIndex:qe,paneAfterIndex:$}=bs),Ce=O[qe],xe=O[$]}qe!=null&&Ce.setSz(Math.min(Math.max(nt-Pe.prevPanesSize-Pe.prevReachedMinPanes,Ce.min()),Ce.max())),$!=null&&xe.setSz(Math.min(Math.max(100-nt-Pe.nextPanesSize-Pe.nextReachedMinPanes,xe.min()),xe.max()))}}function Ie(K,ke){var xe,Pe;const qe=D-1;let Ce=qe,$=qe+1;if(ke<K.prevPanesSize+O[Ce].min()&&(Ce=((xe=wt(qe))==null?void 0:xe.index)||0,K.prevReachedMinPanes=0,Ce<qe&&eh(O,Ce+1,qe+1,Ge=>{Ge.setSz(Ge.min()),K.prevReachedMinPanes+=Ge.min()}),K.prevPanesSize=de(Ce),Ce==null))return K.prevReachedMinPanes=0,O[0].setSz(O[0].min()),eh(O,1,qe+1,Ge=>{Ge.setSz(Ge.min()),K.prevReachedMinPanes+=Ge.min()}),O[$].setSz(100-K.prevReachedMinPanes-O[0].min()-K.prevPanesSize-K.nextPanesSize),null;if(ke>100-K.nextPanesSize-O[$].min()){$=((Pe=Ee(qe))==null?void 0:Pe.index)||0,K.nextReachedMinPanes=0,$>qe+1&&eh(O,qe+1,$,ot=>{ot.setSz(ot.min()),K.nextReachedMinPanes+=ot.min()}),K.nextPanesSize=lt($);const Ge=O.length;if($==null)return K.nextReachedMinPanes=0,O[Ge-1].setSz(O[Ge-1].min()),eh(O,qe+1,Ge-1,ot=>{ot.setSz(ot.min()),K.nextReachedMinPanes+=ot.min()}),O[Ce].setSz(100-K.prevPanesSize-K.nextReachedMinPanes-O[Ge-1].min()-K.nextPanesSize),null}return{sums:K,paneBeforeIndex:Ce,paneAfterIndex:$}}const Te=K=>K.sz(),de=K=>wS(O,0,K,Te),lt=K=>wS(O,K+1,O.length,Te),wt=K=>[...O].reverse().find(ke=>ke.index<K&&ke.sz()>ke.min()),Ee=K=>O.find(ke=>ke.index>K+1&&ke.sz()>ke.min());async function st(){C=!0,await wn(),C&&(dt(),C=!1)}function dt(){Ze(),v&&b("resized",ae())}function Ze(){if(O.length===0)return;const K=O.length;let ke=100,qe=0,Ce=0,$=0;const xe=[],Pe=[];for(let At=0;At<K;At++){const nt=O[At],Kt=nt.sz();nt.givenSize==null?nt.isReady?($+=Kt,Kt>=nt.max()&&xe.push(nt),Kt<=nt.min()&&Pe.push(nt)):Ce+=1:(ke-=Kt,qe++,xe.push(nt),Pe.push(nt))}const Ge=K-qe,ot=Ge-Ce;let fe,Pt;if(ot>0?(fe=$/ot,fe>.1&&ke>.1?($+=Ce*fe,Pt=ke/$):(fe=0,Pt=1)):(fe=ke/Ge,Pt=1),ke+$>.1){ke=100;for(let At=0;At<K;At++){const nt=O[At];if(nt.givenSize==null){const Kt=nt.isReady?nt.sz():fe,Yt=Math.max(Math.min(Kt*Pt,nt.max()),nt.min());nt.setSz(Yt)}ke-=nt.sz()}Math.abs(ke)>.1&&(ke=It(ke,xe,Pe))}isFinite(ke)?Math.abs(ke)>.1&&console.warn("Splitpanes: Could not resize panes correctly due to their constraints."):console.warn("Splitpanes: Internal error, sizes might be NaN as a result.")}function It(K,ke,qe){const $=O.length-(K>0?ke.length:qe.length);if($<=0)return K;const xe=K/$;if(O.length===1)O[0].setSz(100),K=0;else for(let Pe=0;Pe<O.length;Pe++){const Ge=O[Pe],ot=Ge.sz();if(K>0&&!ke.includes(Ge)){const fe=Math.max(Math.min(ot+xe,Ge.max()),Ge.min()),Pt=fe-ot;K-=Pt,Ge.setSz(fe)}else if(!qe.includes(Ge)){const fe=Math.max(Math.min(ot+xe,Ge.max()),Ge.min()),Pt=fe-ot;K-=Pt,Ge.setSz(fe)}}return K}function We(){var Ce;if(!y)return;const{children:K}=y;let ke=0,qe=!1;for(let $=0;$<K.length;$++){const xe=K.item($),Pe=xe.classList.contains("splitpanes__pane"),Ge=xe.classList.contains("splitpanes__splitter");if(!Pe&&!Ge){(Ce=xe.parentNode)==null||Ce.removeChild(xe),console.warn("Splitpanes: Only <Pane> elements are allowed at the root of <Splitpanes>. One of your DOM nodes was removed.");return}else Pe&&(!qe&&O[ke].element!==xe&&(qe=!0),ke++)}if(qe){const $=[];for(let xe=0;xe<K.length;xe++){const Pe=K.item(xe);if(Pe==null?void 0:Pe.classList.contains("splitpanes__pane")){const ot=O.find(fe=>fe.element===Pe);ot!=null?(ot.index=$.length,$.push(ot)):console.warn("Splitpanes: Internal error - found a <Pane> elements which isn't tracked.")}}O=$,Ql(F,i=O.length>0?O[0].key:void 0,i)}}function ct(K){it[K?"unshift":"push"](()=>{y=K,t(5,y)})}return n.$$set=K=>{"id"in K&&t(0,a=K.id),"horizontal"in K&&t(1,c=K.horizontal),"pushOtherPanes"in K&&t(12,f=K.pushOtherPanes),"dblClickSplitter"in K&&t(13,u=K.dblClickSplitter),"rtl"in K&&t(14,h=K.rtl),"firstSplitter"in K&&t(15,d=K.firstSplitter),"style"in K&&t(2,g=K.style),"theme"in K&&t(3,m=K.theme),"class"in K&&t(4,p=K.class),"$$scope"in K&&t(18,l=K.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&2&&Ql(I,o=c,o),n.$$.dirty[0]&32768&&Ql(N,s=d,s)},[a,c,g,m,p,y,_,S,x,I,N,F,f,u,h,d,r,ct,l]}class nX extends ze{constructor(e){super(),Fe(this,e,tX,eX,Qt,{id:0,horizontal:1,pushOtherPanes:12,dblClickSplitter:13,rtl:14,firstSplitter:15,style:2,theme:3,class:4},null,[-1,-1,-1])}}const iX=(n,e)=>t=>{const i=n();i!==null&&i[e](t)},sX=n=>iX.bind(null,n);function oX(n){let e,t,i,s,o,r,l=(n[4]!==n[9]||n[5])&&kS(n);const a=n[20].default,c=jt(a,n,n[19],null);return{c(){l&&l.c(),e=G(),t=R("div"),c&&c.c(),w(t,"class",i=`splitpanes__pane ${n[0]||""}`),w(t,"style",n[3])},m(f,u){l&&l.m(f,u),j(f,e,u),j(f,t,u),c&&c.m(t,null),n[21](t),s=!0,o||(r=he(t,"click",n[11]("onPaneClick")),o=!0)},p(f,u){f[4]!==f[9]||f[5]?l?l.p(f,u):(l=kS(f),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),c&&c.p&&(!s||u&524288)&&zt(c,a,f,f[19],s?Ft(a,f[19],u,null):Vt(f[19]),null),(!s||u&1&&i!==(i=`splitpanes__pane ${f[0]||""}`))&&w(t,"class",i),(!s||u&8)&&w(t,"style",f[3])},i(f){s||(k(c,f),s=!0)},o(f){M(c,f),s=!1},d(f){f&&(B(e),B(t)),l&&l.d(f),c&&c.d(f),n[21](null),o=!1,r()}}}function kS(n){let e,t,i,s;return{c(){e=R("div"),w(e,"class",t="splitpanes__splitter "+(n[2]?"splitpanes__splitter__active":""))},m(o,r){j(o,e,r),i||(s=[he(e,"mousedown",n[11]("onSplitterDown")),he(e,"touchstart",n[11]("onSplitterDown")),he(e,"click",n[11]("onSplitterClick")),he(e,"dblclick",n[11]("onSplitterDblClick"))],i=!0)},p(o,r){r&4&&t!==(t="splitpanes__splitter "+(o[2]?"splitpanes__splitter__active":""))&&w(e,"class",t)},d(o){o&&B(e),i=!1,Et(s)}}}function rX(n){let e,t,i=!n[10]&&oX(n);return{c(){i&&i.c(),e=bt()},m(s,o){i&&i.m(s,o),j(s,e,o),t=!0},p(s,[o]){s[10]||i.p(s,o)},i(s){t||(k(i),t=!0)},o(s){M(i),t=!1},d(s){s&&B(e),i&&i.d(s)}}}function lX(n,e,t){let i,s,o,r,l,{$$slots:a={},$$scope:c}=e;const{ssrRegisterPaneSize:f,onPaneInit:u,clientOnly:h,isHorizontal:d,showFirstSplitter:g,veryFirstPaneKey:m}=jn(R6);gl(n,d,z=>t(18,o=z)),gl(n,g,z=>t(5,l=z)),gl(n,m,z=>t(4,r=z));let{size:p=null}=e,{minSize:b=0}=e,{maxSize:y=100}=e,{snapSize:v=0}=e,{class:C=""}=e;const _={},S=!T6,{undefinedPaneInitSize:x}=u(_);let D,P=p??x,E=!1,O;const I=sX(()=>O),N=z=>{z!=P&&I("reportGivenSizeChange")(z)};Ai(()=>{const z={index:0,key:_,element:D,givenSize:p,sz:()=>P,setSz:q=>{t(16,P=q),p!=null&&p!=P&&t(12,p=P)},min:()=>b,max:()=>y,snap:()=>v,setSplitterActive:q=>{t(2,E=q)},isReady:!1};O=h==null?void 0:h.onPaneAdd(z)}),Ci(()=>{h==null||h.onPaneRemove(_)});function F(z){it[z?"unshift":"push"](()=>{D=z,t(1,D)})}return n.$$set=z=>{"size"in z&&t(12,p=z.size),"minSize"in z&&t(13,b=z.minSize),"maxSize"in z&&t(14,y=z.maxSize),"snapSize"in z&&t(15,v=z.snapSize),"class"in z&&t(0,C=z.class),"$$scope"in z&&t(19,c=z.$$scope)},n.$$.update=()=>{n.$$.dirty&4096&&p!=null&&N(p),n.$$.dirty&262144&&t(17,i=E6(o)),n.$$.dirty&196608&&t(3,s=`${i}: ${P}%;`)},[C,D,E,s,r,l,d,g,m,_,S,I,p,b,y,v,P,i,o,c,a,F]}class SS extends ze{constructor(e){super(),Fe(this,e,lX,rX,Qt,{size:12,minSize:13,maxSize:14,snapSize:15,class:0})}}/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function au(n){return n+.5|0}const mr=(n,e,t)=>Math.max(Math.min(n,t),e);function Fc(n){return mr(au(n*2.55),0,255)}function Sr(n){return mr(au(n*255),0,255)}function xo(n){return mr(au(n/2.55)/100,0,1)}function CS(n){return mr(au(n*100),0,100)}const Zi={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},O1=[..."0123456789ABCDEF"],aX=n=>O1[n&15],cX=n=>O1[(n&240)>>4]+O1[n&15],th=n=>(n&240)>>4===(n&15),fX=n=>th(n.r)&&th(n.g)&&th(n.b)&&th(n.a);function uX(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&Zi[n[1]]*17,g:255&Zi[n[2]]*17,b:255&Zi[n[3]]*17,a:e===5?Zi[n[4]]*17:255}:(e===7||e===9)&&(t={r:Zi[n[1]]<<4|Zi[n[2]],g:Zi[n[3]]<<4|Zi[n[4]],b:Zi[n[5]]<<4|Zi[n[6]],a:e===9?Zi[n[7]]<<4|Zi[n[8]]:255})),t}const hX=(n,e)=>n<255?e(n):"";function dX(n){var e=fX(n)?aX:cX;return n?"#"+e(n.r)+e(n.g)+e(n.b)+hX(n.a,e):void 0}const gX=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function D6(n,e,t){const i=e*Math.min(t,1-t),s=(o,r=(o+n/30)%12)=>t-i*Math.max(Math.min(r-3,9-r,1),-1);return[s(0),s(8),s(4)]}function mX(n,e,t){const i=(s,o=(s+n/60)%6)=>t-t*e*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function pX(n,e,t){const i=D6(n,1,.5);let s;for(e+t>1&&(s=1/(e+t),e*=s,t*=s),s=0;s<3;s++)i[s]*=1-e-t,i[s]+=e;return i}function bX(n,e,t,i,s){return n===s?(e-t)/i+(e<t?6:0):e===s?(t-n)/i+2:(n-e)/i+4}function kb(n){const t=n.r/255,i=n.g/255,s=n.b/255,o=Math.max(t,i,s),r=Math.min(t,i,s),l=(o+r)/2;let a,c,f;return o!==r&&(f=o-r,c=l>.5?f/(2-o-r):f/(o+r),a=bX(t,i,s,f,o),a=a*60+.5),[a|0,c||0,l]}function Sb(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(Sr)}function Cb(n,e,t){return Sb(D6,n,e,t)}function yX(n,e,t){return Sb(pX,n,e,t)}function _X(n,e,t){return Sb(mX,n,e,t)}function L6(n){return(n%360+360)%360}function wX(n){const e=gX.exec(n);let t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?Fc(+e[5]):Sr(+e[5]));const s=L6(+e[2]),o=+e[3]/100,r=+e[4]/100;return e[1]==="hwb"?i=yX(s,o,r):e[1]==="hsv"?i=_X(s,o,r):i=Cb(s,o,r),{r:i[0],g:i[1],b:i[2],a:t}}function vX(n,e){var t=kb(n);t[0]=L6(t[0]+e),t=Cb(t),n.r=t[0],n.g=t[1],n.b=t[2]}function kX(n){if(!n)return;const e=kb(n),t=e[0],i=CS(e[1]),s=CS(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${s}%, ${xo(n.a)})`:`hsl(${t}, ${i}%, ${s}%)`}const MS={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},xS={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function SX(){const n={},e=Object.keys(xS),t=Object.keys(MS);let i,s,o,r,l;for(i=0;i<e.length;i++){for(r=l=e[i],s=0;s<t.length;s++)o=t[s],l=l.replace(o,MS[o]);o=parseInt(xS[r],16),n[l]=[o>>16&255,o>>8&255,o&255]}return n}let nh;function CX(n){nh||(nh=SX(),nh.transparent=[0,0,0,0]);const e=nh[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const MX=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function xX(n){const e=MX.exec(n);let t=255,i,s,o;if(e){if(e[7]!==i){const r=+e[7];t=e[8]?Fc(r):mr(r*255,0,255)}return i=+e[1],s=+e[3],o=+e[5],i=255&(e[2]?Fc(i):mr(i,0,255)),s=255&(e[4]?Fc(s):mr(s,0,255)),o=255&(e[6]?Fc(o):mr(o,0,255)),{r:i,g:s,b:o,a:t}}}function AX(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${xo(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const Bm=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,sa=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function OX(n,e,t){const i=sa(xo(n.r)),s=sa(xo(n.g)),o=sa(xo(n.b));return{r:Sr(Bm(i+t*(sa(xo(e.r))-i))),g:Sr(Bm(s+t*(sa(xo(e.g))-s))),b:Sr(Bm(o+t*(sa(xo(e.b))-o))),a:n.a+t*(e.a-n.a)}}function ih(n,e,t){if(n){let i=kb(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=Cb(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function I6(n,e){return n&&Object.assign(e||{},n)}function AS(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=Sr(n[3]))):(e=I6(n,{r:0,g:0,b:0,a:1}),e.a=Sr(e.a)),e}function PX(n){return n.charAt(0)==="r"?xX(n):wX(n)}class If{constructor(e){if(e instanceof If)return e;const t=typeof e;let i;t==="object"?i=AS(e):t==="string"&&(i=uX(e)||CX(e)||PX(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=I6(this._rgb);return e&&(e.a=xo(e.a)),e}set rgb(e){this._rgb=AS(e)}rgbString(){return this._valid?AX(this._rgb):void 0}hexString(){return this._valid?dX(this._rgb):void 0}hslString(){return this._valid?kX(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,s=e.rgb;let o;const r=t===o?.5:t,l=2*r-1,a=i.a-s.a,c=((l*a===-1?l:(l+a)/(1+l*a))+1)/2;o=1-c,i.r=255&c*i.r+o*s.r+.5,i.g=255&c*i.g+o*s.g+.5,i.b=255&c*i.b+o*s.b+.5,i.a=r*i.a+(1-r)*s.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=OX(this._rgb,e._rgb,t)),this}clone(){return new If(this.rgb)}alpha(e){return this._rgb.a=Sr(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=au(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return ih(this._rgb,2,e),this}darken(e){return ih(this._rgb,2,-e),this}saturate(e){return ih(this._rgb,1,e),this}desaturate(e){return ih(this._rgb,1,-e),this}rotate(e){return vX(this._rgb,e),this}}/*!
 * Chart.js v4.4.4
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function ko(){}const TX=(()=>{let n=0;return()=>n++})();function Lt(n){return n===null||typeof n>"u"}function bn(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ot(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Cn(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Wi(n,e){return Cn(n)?n:e}function gt(n,e){return typeof n>"u"?e:n}const EX=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,N6=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function rn(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function Gt(n,e,t,i){let s,o,r;if(bn(n))for(o=n.length,s=0;s<o;s++)e.call(t,n[s],s);else if(Ot(n))for(r=Object.keys(n),o=r.length,s=0;s<o;s++)e.call(t,n[r[s]],r[s])}function jd(n,e){let t,i,s,o;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(s=n[t],o=e[t],s.datasetIndex!==o.datasetIndex||s.index!==o.index)return!1;return!0}function Fd(n){if(bn(n))return n.map(Fd);if(Ot(n)){const e=Object.create(null),t=Object.keys(n),i=t.length;let s=0;for(;s<i;++s)e[t[s]]=Fd(n[t[s]]);return e}return n}function B6(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function RX(n,e,t,i){if(!B6(n))return;const s=e[n],o=t[n];Ot(s)&&Ot(o)?Nf(s,o,i):e[n]=Fd(o)}function Nf(n,e,t){const i=bn(e)?e:[e],s=i.length;if(!Ot(n))return n;t=t||{};const o=t.merger||RX;let r;for(let l=0;l<s;++l){if(r=i[l],!Ot(r))continue;const a=Object.keys(r);for(let c=0,f=a.length;c<f;++c)o(a[c],n,r,t)}return n}function tf(n,e){return Nf(n,e,{merger:DX})}function DX(n,e,t){if(!B6(n))return;const i=e[n],s=t[n];Ot(i)&&Ot(s)?tf(i,s):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=Fd(s))}const OS={"":n=>n,x:n=>n.x,y:n=>n.y};function LX(n){const e=n.split("."),t=[];let i="";for(const s of e)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function IX(n){const e=LX(n);return t=>{for(const i of e){if(i==="")break;t=t&&t[i]}return t}}function Br(n,e){return(OS[e]||(OS[e]=IX(e)))(n)}function Mb(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Bf=n=>typeof n<"u",jr=n=>typeof n=="function",PS=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function NX(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const dn=Math.PI,hn=2*dn,BX=hn+dn,zd=Number.POSITIVE_INFINITY,jX=dn/180,Tn=dn/2,$r=dn/4,TS=dn*2/3,pr=Math.log10,ao=Math.sign;function nf(n,e,t){return Math.abs(n-e)<t}function ES(n){const e=Math.round(n);n=nf(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(pr(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function FX(n){const e=[],t=Math.sqrt(n);let i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((s,o)=>s-o).pop(),e}function Za(n){return!isNaN(parseFloat(n))&&isFinite(n)}function zX(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function j6(n,e,t){let i,s,o;for(i=0,s=n.length;i<s;i++)o=n[i][t],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function Cs(n){return n*(dn/180)}function xb(n){return n*(180/dn)}function RS(n){if(!Cn(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function F6(n,e){const t=e.x-n.x,i=e.y-n.y,s=Math.sqrt(t*t+i*i);let o=Math.atan2(i,t);return o<-.5*dn&&(o+=hn),{angle:o,distance:s}}function P1(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function VX(n,e){return(n-e+BX)%hn-dn}function Ui(n){return(n%hn+hn)%hn}function jf(n,e,t,i){const s=Ui(n),o=Ui(e),r=Ui(t),l=Ui(o-s),a=Ui(r-s),c=Ui(s-o),f=Ui(s-r);return s===o||s===r||i&&o===r||l>a&&c<f}function Yn(n,e,t){return Math.max(e,Math.min(t,n))}function HX(n){return Yn(n,-32768,32767)}function Ro(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function Ab(n,e,t){t=t||(r=>n[r]<e);let i=n.length-1,s=0,o;for(;i-s>1;)o=s+i>>1,t(o)?s=o:i=o;return{lo:s,hi:i}}const Do=(n,e,t,i)=>Ab(n,t,i?s=>{const o=n[s][e];return o<t||o===t&&n[s+1][e]===t}:s=>n[s][e]<t),WX=(n,e,t)=>Ab(n,t,i=>n[i][e]>=t);function qX(n,e,t){let i=0,s=n.length;for(;i<s&&n[i]<e;)i++;for(;s>i&&n[s-1]>t;)s--;return i>0||s<n.length?n.slice(i,s):n}const z6=["push","pop","shift","splice","unshift"];function UX(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),z6.forEach(t=>{const i="_onData"+Mb(t),s=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...o){const r=s.apply(this,o);return n._chartjs.listeners.forEach(l=>{typeof l[i]=="function"&&l[i](...o)}),r}})})}function DS(n,e){const t=n._chartjs;if(!t)return;const i=t.listeners,s=i.indexOf(e);s!==-1&&i.splice(s,1),!(i.length>0)&&(z6.forEach(o=>{delete n[o]}),delete n._chartjs)}function V6(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const H6=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function W6(n,e){let t=[],i=!1;return function(...s){t=s,i||(i=!0,H6.call(window,()=>{i=!1,n.apply(e,t)}))}}function JX(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}const Ob=n=>n==="start"?"left":n==="end"?"right":"center",ri=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,KX=(n,e,t,i)=>n===(i?"left":"right")?t:n==="center"?(e+t)/2:e;function q6(n,e,t){const i=e.length;let s=0,o=i;if(n._sorted){const{iScale:r,_parsed:l}=n,a=r.axis,{min:c,max:f,minDefined:u,maxDefined:h}=r.getUserBounds();u&&(s=Yn(Math.min(Do(l,a,c).lo,t?i:Do(e,a,r.getPixelForValue(c)).lo),0,i-1)),h?o=Yn(Math.max(Do(l,r.axis,f,!0).hi+1,t?0:Do(e,a,r.getPixelForValue(f),!0).hi+1),s,i)-s:o=i-s}return{start:s,count:o}}function U6(n){const{xScale:e,yScale:t,_scaleRanges:i}=n,s={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=s,!0;const o=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,s),o}const sh=n=>n===0||n===1,LS=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*hn/t)),IS=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*hn/t)+1,sf={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Tn)+1,easeOutSine:n=>Math.sin(n*Tn),easeInOutSine:n=>-.5*(Math.cos(dn*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>sh(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>sh(n)?n:LS(n,.075,.3),easeOutElastic:n=>sh(n)?n:IS(n,.075,.3),easeInOutElastic(n){return sh(n)?n:n<.5?.5*LS(n*2,.1125,.45):.5+.5*IS(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-sf.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?sf.easeInBounce(n*2)*.5:sf.easeOutBounce(n*2-1)*.5+.5};function Pb(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function NS(n){return Pb(n)?n:new If(n)}function jm(n){return Pb(n)?n:new If(n).saturate(.5).darken(.1).hexString()}const YX=["x","y","borderWidth","radius","tension"],XX=["color","borderColor","backgroundColor"];function GX(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:XX},numbers:{type:"number",properties:YX}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function QX(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const BS=new Map;function ZX(n,e){e=e||{};const t=n+JSON.stringify(e);let i=BS.get(t);return i||(i=new Intl.NumberFormat(n,e),BS.set(t,i)),i}function cu(n,e,t){return ZX(e,t).format(n)}const J6={values(n){return bn(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const i=this.chart.options.locale;let s,o=n;if(t.length>1){const c=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),o=$X(n,t)}const r=pr(Math.abs(o)),l=isNaN(r)?1:Math.max(Math.min(-1*Math.floor(r),20),0),a={notation:s,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(a,this.options.ticks.format),cu(n,i,a)},logarithmic(n,e,t){if(n===0)return"0";const i=t[e].significand||n/Math.pow(10,Math.floor(pr(n)));return[1,2,3,5,10,15].includes(i)||e>.8*t.length?J6.numeric.call(this,n,e,t):""}};function $X(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var Bg={formatters:J6};function eG(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Bg.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Nl=Object.create(null),T1=Object.create(null);function of(n,e){if(!e)return n;const t=e.split(".");for(let i=0,s=t.length;i<s;++i){const o=t[i];n=n[o]||(n[o]=Object.create(null))}return n}function Fm(n,e,t){return typeof e=="string"?Nf(of(n,e),t):Nf(of(n,""),e)}class tG{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>jm(s.backgroundColor),this.hoverBorderColor=(i,s)=>jm(s.borderColor),this.hoverColor=(i,s)=>jm(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Fm(this,e,t)}get(e){return of(this,e)}describe(e,t){return Fm(T1,e,t)}override(e,t){return Fm(Nl,e,t)}route(e,t,i,s){const o=of(this,e),r=of(this,i),l="_"+t;Object.defineProperties(o,{[l]:{value:o[t],writable:!0},[t]:{enumerable:!0,get(){const a=this[l],c=r[s];return Ot(a)?Object.assign({},c,a):gt(a,c)},set(a){this[l]=a}}})}apply(e){e.forEach(t=>t(this))}}var Mn=new tG({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[GX,QX,eG]);function nG(n){return!n||Lt(n.size)||Lt(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Vd(n,e,t,i,s){let o=e[s];return o||(o=e[s]=n.measureText(s).width,t.push(s)),o>i&&(i=o),i}function iG(n,e,t,i){i=i||{};let s=i.data=i.data||{},o=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(s=i.data={},o=i.garbageCollect=[],i.font=e),n.save(),n.font=e;let r=0;const l=t.length;let a,c,f,u,h;for(a=0;a<l;a++)if(u=t[a],u!=null&&!bn(u))r=Vd(n,s,o,r,u);else if(bn(u))for(c=0,f=u.length;c<f;c++)h=u[c],h!=null&&!bn(h)&&(r=Vd(n,s,o,r,h));n.restore();const d=o.length/2;if(d>t.length){for(a=0;a<d;a++)delete s[o[a]];o.splice(0,d)}return r}function el(n,e,t){const i=n.currentDevicePixelRatio,s=t!==0?Math.max(t/2,.5):0;return Math.round((e-s)*i)/i+s}function jS(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function E1(n,e,t,i){K6(n,e,t,i,null)}function K6(n,e,t,i,s){let o,r,l,a,c,f,u,h;const d=e.pointStyle,g=e.rotation,m=e.radius;let p=(g||0)*jX;if(d&&typeof d=="object"&&(o=d.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(p),n.drawImage(d,-d.width/2,-d.height/2,d.width,d.height),n.restore();return}if(!(isNaN(m)||m<=0)){switch(n.beginPath(),d){default:s?n.ellipse(t,i,s/2,m,0,0,hn):n.arc(t,i,m,0,hn),n.closePath();break;case"triangle":f=s?s/2:m,n.moveTo(t+Math.sin(p)*f,i-Math.cos(p)*m),p+=TS,n.lineTo(t+Math.sin(p)*f,i-Math.cos(p)*m),p+=TS,n.lineTo(t+Math.sin(p)*f,i-Math.cos(p)*m),n.closePath();break;case"rectRounded":c=m*.516,a=m-c,r=Math.cos(p+$r)*a,u=Math.cos(p+$r)*(s?s/2-c:a),l=Math.sin(p+$r)*a,h=Math.sin(p+$r)*(s?s/2-c:a),n.arc(t-u,i-l,c,p-dn,p-Tn),n.arc(t+h,i-r,c,p-Tn,p),n.arc(t+u,i+l,c,p,p+Tn),n.arc(t-h,i+r,c,p+Tn,p+dn),n.closePath();break;case"rect":if(!g){a=Math.SQRT1_2*m,f=s?s/2:a,n.rect(t-f,i-a,2*f,2*a);break}p+=$r;case"rectRot":u=Math.cos(p)*(s?s/2:m),r=Math.cos(p)*m,l=Math.sin(p)*m,h=Math.sin(p)*(s?s/2:m),n.moveTo(t-u,i-l),n.lineTo(t+h,i-r),n.lineTo(t+u,i+l),n.lineTo(t-h,i+r),n.closePath();break;case"crossRot":p+=$r;case"cross":u=Math.cos(p)*(s?s/2:m),r=Math.cos(p)*m,l=Math.sin(p)*m,h=Math.sin(p)*(s?s/2:m),n.moveTo(t-u,i-l),n.lineTo(t+u,i+l),n.moveTo(t+h,i-r),n.lineTo(t-h,i+r);break;case"star":u=Math.cos(p)*(s?s/2:m),r=Math.cos(p)*m,l=Math.sin(p)*m,h=Math.sin(p)*(s?s/2:m),n.moveTo(t-u,i-l),n.lineTo(t+u,i+l),n.moveTo(t+h,i-r),n.lineTo(t-h,i+r),p+=$r,u=Math.cos(p)*(s?s/2:m),r=Math.cos(p)*m,l=Math.sin(p)*m,h=Math.sin(p)*(s?s/2:m),n.moveTo(t-u,i-l),n.lineTo(t+u,i+l),n.moveTo(t+h,i-r),n.lineTo(t-h,i+r);break;case"line":r=s?s/2:Math.cos(p)*m,l=Math.sin(p)*m,n.moveTo(t-r,i-l),n.lineTo(t+r,i+l);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(p)*(s?s/2:m),i+Math.sin(p)*m);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function Lo(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function jg(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function Fg(n){n.restore()}function sG(n,e,t,i,s){if(!e)return n.lineTo(t.x,t.y);if(s==="middle"){const o=(e.x+t.x)/2;n.lineTo(o,e.y),n.lineTo(o,t.y)}else s==="after"!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function oG(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function rG(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),Lt(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function lG(n,e,t,i,s){if(s.strikethrough||s.underline){const o=n.measureText(i),r=e-o.actualBoundingBoxLeft,l=e+o.actualBoundingBoxRight,a=t-o.actualBoundingBoxAscent,c=t+o.actualBoundingBoxDescent,f=s.strikethrough?(a+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(r,f),n.lineTo(l,f),n.stroke()}}function aG(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function Bl(n,e,t,i,s,o={}){const r=bn(e)?e:[e],l=o.strokeWidth>0&&o.strokeColor!=="";let a,c;for(n.save(),n.font=s.string,rG(n,o),a=0;a<r.length;++a)c=r[a],o.backdrop&&aG(n,o.backdrop),l&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),Lt(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(c,t,i,o.maxWidth)),n.fillText(c,t,i,o.maxWidth),lG(n,t,i,c,o),i+=Number(s.lineHeight);n.restore()}function Ff(n,e){const{x:t,y:i,w:s,h:o,radius:r}=e;n.arc(t+r.topLeft,i+r.topLeft,r.topLeft,1.5*dn,dn,!0),n.lineTo(t,i+o-r.bottomLeft),n.arc(t+r.bottomLeft,i+o-r.bottomLeft,r.bottomLeft,dn,Tn,!0),n.lineTo(t+s-r.bottomRight,i+o),n.arc(t+s-r.bottomRight,i+o-r.bottomRight,r.bottomRight,Tn,0,!0),n.lineTo(t+s,i+r.topRight),n.arc(t+s-r.topRight,i+r.topRight,r.topRight,0,-Tn,!0),n.lineTo(t+r.topLeft,i)}const cG=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,fG=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function uG(n,e){const t=(""+n).match(cG);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const hG=n=>+n||0;function Tb(n,e){const t={},i=Ot(e),s=i?Object.keys(e):e,o=Ot(n)?i?r=>gt(n[r],n[e[r]]):r=>n[r]:()=>n;for(const r of s)t[r]=hG(o(r));return t}function Y6(n){return Tb(n,{top:"y",right:"x",bottom:"y",left:"x"})}function bl(n){return Tb(n,["topLeft","topRight","bottomLeft","bottomRight"])}function yi(n){const e=Y6(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Bn(n,e){n=n||{},e=e||Mn.font;let t=gt(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=gt(n.style,e.style);i&&!(""+i).match(fG)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:gt(n.family,e.family),lineHeight:uG(gt(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:gt(n.weight,e.weight),string:""};return s.string=nG(s),s}function zc(n,e,t,i){let s,o,r;for(s=0,o=n.length;s<o;++s)if(r=n[s],r!==void 0&&r!==void 0)return r}function dG(n,e,t){const{min:i,max:s}=n,o=N6(e,(s-i)/2),r=(l,a)=>t&&l===0?0:l+a;return{min:r(i,-Math.abs(o)),max:r(s,o)}}function Wr(n,e){return Object.assign(Object.create(n),e)}function Eb(n,e=[""],t,i,s=()=>n[0]){const o=t||n;typeof i>"u"&&(i=Z6("_fallback",n));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:i,_getTarget:s,override:l=>Eb([l,...n],e,o,i)};return new Proxy(r,{deleteProperty(l,a){return delete l[a],delete l._keys,delete n[0][a],!0},get(l,a){return G6(l,a,()=>vG(a,e,n,l))},getOwnPropertyDescriptor(l,a){return Reflect.getOwnPropertyDescriptor(l._scopes[0],a)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(l,a){return zS(l).includes(a)},ownKeys(l){return zS(l)},set(l,a,c){const f=l._storage||(l._storage=s());return l[a]=f[a]=c,delete l._keys,!0}})}function $a(n,e,t,i){const s={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:X6(n,i),setContext:o=>$a(n,o,t,i),override:o=>$a(n.override(o),e,t,i)};return new Proxy(s,{deleteProperty(o,r){return delete o[r],delete n[r],!0},get(o,r,l){return G6(o,r,()=>mG(o,r,l))},getOwnPropertyDescriptor(o,r){return o._descriptors.allKeys?Reflect.has(n,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,r)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,r){return Reflect.has(n,r)},ownKeys(){return Reflect.ownKeys(n)},set(o,r,l){return n[r]=l,delete o[r],!0}})}function X6(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:s=e.allKeys}=n;return{allKeys:s,scriptable:t,indexable:i,isScriptable:jr(t)?t:()=>t,isIndexable:jr(i)?i:()=>i}}const gG=(n,e)=>n?n+Mb(e):e,Rb=(n,e)=>Ot(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function G6(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const i=t();return n[e]=i,i}function mG(n,e,t){const{_proxy:i,_context:s,_subProxy:o,_descriptors:r}=n;let l=i[e];return jr(l)&&r.isScriptable(e)&&(l=pG(e,l,n,t)),bn(l)&&l.length&&(l=bG(e,l,n,r.isIndexable)),Rb(e,l)&&(l=$a(l,s,o&&o[e],r)),l}function pG(n,e,t,i){const{_proxy:s,_context:o,_subProxy:r,_stack:l}=t;if(l.has(n))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+n);l.add(n);let a=e(o,r||i);return l.delete(n),Rb(n,a)&&(a=Db(s._scopes,s,n,a)),a}function bG(n,e,t,i){const{_proxy:s,_context:o,_subProxy:r,_descriptors:l}=t;if(typeof o.index<"u"&&i(n))return e[o.index%e.length];if(Ot(e[0])){const a=e,c=s._scopes.filter(f=>f!==a);e=[];for(const f of a){const u=Db(c,s,n,f);e.push($a(u,o,r&&r[n],l))}}return e}function Q6(n,e,t){return jr(n)?n(e,t):n}const yG=(n,e)=>n===!0?e:typeof n=="string"?Br(e,n):void 0;function _G(n,e,t,i,s){for(const o of e){const r=yG(t,o);if(r){n.add(r);const l=Q6(r._fallback,t,s);if(typeof l<"u"&&l!==t&&l!==i)return l}else if(r===!1&&typeof i<"u"&&t!==i)return null}return!1}function Db(n,e,t,i){const s=e._rootScopes,o=Q6(e._fallback,t,i),r=[...n,...s],l=new Set;l.add(i);let a=FS(l,r,t,o||t,i);return a===null||typeof o<"u"&&o!==t&&(a=FS(l,r,o,a,i),a===null)?!1:Eb(Array.from(l),[""],s,o,()=>wG(e,t,i))}function FS(n,e,t,i,s){for(;t;)t=_G(n,e,t,i,s);return t}function wG(n,e,t){const i=n._getTarget();e in i||(i[e]={});const s=i[e];return bn(s)&&Ot(t)?t:s||{}}function vG(n,e,t,i){let s;for(const o of e)if(s=Z6(gG(o,n),t),typeof s<"u")return Rb(n,s)?Db(t,i,n,s):s}function Z6(n,e){for(const t of e){if(!t)continue;const i=t[n];if(typeof i<"u")return i}}function zS(n){let e=n._keys;return e||(e=n._keys=kG(n._scopes)),e}function kG(n){const e=new Set;for(const t of n)for(const i of Object.keys(t).filter(s=>!s.startsWith("_")))e.add(i);return Array.from(e)}function $6(n,e,t,i){const{iScale:s}=n,{key:o="r"}=this._parsing,r=new Array(i);let l,a,c,f;for(l=0,a=i;l<a;++l)c=l+t,f=e[c],r[l]={r:s.parse(Br(f,o),c)};return r}const SG=Number.EPSILON||1e-14,ec=(n,e)=>e<n.length&&!n[e].skip&&n[e],e5=n=>n==="x"?"y":"x";function CG(n,e,t,i){const s=n.skip?e:n,o=e,r=t.skip?e:t,l=P1(o,s),a=P1(r,o);let c=l/(l+a),f=a/(l+a);c=isNaN(c)?0:c,f=isNaN(f)?0:f;const u=i*c,h=i*f;return{previous:{x:o.x-u*(r.x-s.x),y:o.y-u*(r.y-s.y)},next:{x:o.x+h*(r.x-s.x),y:o.y+h*(r.y-s.y)}}}function MG(n,e,t){const i=n.length;let s,o,r,l,a,c=ec(n,0);for(let f=0;f<i-1;++f)if(a=c,c=ec(n,f+1),!(!a||!c)){if(nf(e[f],0,SG)){t[f]=t[f+1]=0;continue}s=t[f]/e[f],o=t[f+1]/e[f],l=Math.pow(s,2)+Math.pow(o,2),!(l<=9)&&(r=3/Math.sqrt(l),t[f]=s*r*e[f],t[f+1]=o*r*e[f])}}function xG(n,e,t="x"){const i=e5(t),s=n.length;let o,r,l,a=ec(n,0);for(let c=0;c<s;++c){if(r=l,l=a,a=ec(n,c+1),!l)continue;const f=l[t],u=l[i];r&&(o=(f-r[t])/3,l[`cp1${t}`]=f-o,l[`cp1${i}`]=u-o*e[c]),a&&(o=(a[t]-f)/3,l[`cp2${t}`]=f+o,l[`cp2${i}`]=u+o*e[c])}}function AG(n,e="x"){const t=e5(e),i=n.length,s=Array(i).fill(0),o=Array(i);let r,l,a,c=ec(n,0);for(r=0;r<i;++r)if(l=a,a=c,c=ec(n,r+1),!!a){if(c){const f=c[e]-a[e];s[r]=f!==0?(c[t]-a[t])/f:0}o[r]=l?c?ao(s[r-1])!==ao(s[r])?0:(s[r-1]+s[r])/2:s[r-1]:s[r]}MG(n,s,o),xG(n,o,e)}function oh(n,e,t){return Math.max(Math.min(n,t),e)}function OG(n,e){let t,i,s,o,r,l=Lo(n[0],e);for(t=0,i=n.length;t<i;++t)r=o,o=l,l=t<i-1&&Lo(n[t+1],e),o&&(s=n[t],r&&(s.cp1x=oh(s.cp1x,e.left,e.right),s.cp1y=oh(s.cp1y,e.top,e.bottom)),l&&(s.cp2x=oh(s.cp2x,e.left,e.right),s.cp2y=oh(s.cp2y,e.top,e.bottom)))}function PG(n,e,t,i,s){let o,r,l,a;if(e.spanGaps&&(n=n.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")AG(n,s);else{let c=i?n[n.length-1]:n[0];for(o=0,r=n.length;o<r;++o)l=n[o],a=CG(c,l,n[Math.min(o+1,r-(i?0:1))%r],e.tension),l.cp1x=a.previous.x,l.cp1y=a.previous.y,l.cp2x=a.next.x,l.cp2y=a.next.y,c=l}e.capBezierPoints&&OG(n,t)}function Lb(){return typeof window<"u"&&typeof document<"u"}function Ib(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Hd(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}const zg=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function TG(n,e){return zg(n).getPropertyValue(e)}const EG=["top","right","bottom","left"];function yl(n,e,t){const i={};t=t?"-"+t:"";for(let s=0;s<4;s++){const o=EG[s];i[o]=parseFloat(n[e+"-"+o+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const RG=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function DG(n,e){const t=n.touches,i=t&&t.length?t[0]:n,{offsetX:s,offsetY:o}=i;let r=!1,l,a;if(RG(s,o,n.target))l=s,a=o;else{const c=e.getBoundingClientRect();l=i.clientX-c.left,a=i.clientY-c.top,r=!0}return{x:l,y:a,box:r}}function il(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:i}=e,s=zg(t),o=s.boxSizing==="border-box",r=yl(s,"padding"),l=yl(s,"border","width"),{x:a,y:c,box:f}=DG(n,t),u=r.left+(f&&l.left),h=r.top+(f&&l.top);let{width:d,height:g}=e;return o&&(d-=r.width+l.width,g-=r.height+l.height),{x:Math.round((a-u)/d*t.width/i),y:Math.round((c-h)/g*t.height/i)}}function LG(n,e,t){let i,s;if(e===void 0||t===void 0){const o=n&&Ib(n);if(!o)e=n.clientWidth,t=n.clientHeight;else{const r=o.getBoundingClientRect(),l=zg(o),a=yl(l,"border","width"),c=yl(l,"padding");e=r.width-c.width-a.width,t=r.height-c.height-a.height,i=Hd(l.maxWidth,o,"clientWidth"),s=Hd(l.maxHeight,o,"clientHeight")}}return{width:e,height:t,maxWidth:i||zd,maxHeight:s||zd}}const rh=n=>Math.round(n*10)/10;function IG(n,e,t,i){const s=zg(n),o=yl(s,"margin"),r=Hd(s.maxWidth,n,"clientWidth")||zd,l=Hd(s.maxHeight,n,"clientHeight")||zd,a=LG(n,e,t);let{width:c,height:f}=a;if(s.boxSizing==="content-box"){const h=yl(s,"border","width"),d=yl(s,"padding");c-=d.width+h.width,f-=d.height+h.height}return c=Math.max(0,c-o.width),f=Math.max(0,i?c/i:f-o.height),c=rh(Math.min(c,r,a.maxWidth)),f=rh(Math.min(f,l,a.maxHeight)),c&&!f&&(f=rh(c/2)),(e!==void 0||t!==void 0)&&i&&a.height&&f>a.height&&(f=a.height,c=rh(Math.floor(f*i))),{width:c,height:f}}function VS(n,e,t){const i=e||1,s=Math.floor(n.height*i),o=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const r=n.canvas;return r.style&&(t||!r.style.height&&!r.style.width)&&(r.style.height=`${n.height}px`,r.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||r.height!==s||r.width!==o?(n.currentDevicePixelRatio=i,r.height=s,r.width=o,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const NG=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};Lb()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function HS(n,e){const t=TG(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function sl(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function BG(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:i==="middle"?t<.5?n.y:e.y:i==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function jG(n,e,t,i){const s={x:n.cp2x,y:n.cp2y},o={x:e.cp1x,y:e.cp1y},r=sl(n,s,t),l=sl(s,o,t),a=sl(o,e,t),c=sl(r,l,t),f=sl(l,a,t);return sl(c,f,t)}const FG=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},zG=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function La(n,e,t){return n?FG(e,t):zG()}function t5(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function n5(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function i5(n){return n==="angle"?{between:jf,compare:VX,normalize:Ui}:{between:Ro,compare:(e,t)=>e-t,normalize:e=>e}}function WS({start:n,end:e,count:t,loop:i,style:s}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t===0,style:s}}function VG(n,e,t){const{property:i,start:s,end:o}=t,{between:r,normalize:l}=i5(i),a=e.length;let{start:c,end:f,loop:u}=n,h,d;if(u){for(c+=a,f+=a,h=0,d=a;h<d&&r(l(e[c%a][i]),s,o);++h)c--,f--;c%=a,f%=a}return f<c&&(f+=a),{start:c,end:f,loop:u,style:n.style}}function s5(n,e,t){if(!t)return[n];const{property:i,start:s,end:o}=t,r=e.length,{compare:l,between:a,normalize:c}=i5(i),{start:f,end:u,loop:h,style:d}=VG(n,e,t),g=[];let m=!1,p=null,b,y,v;const C=()=>a(s,v,b)&&l(s,v)!==0,_=()=>l(o,b)===0||a(o,v,b),S=()=>m||C(),x=()=>!m||_();for(let D=f,P=f;D<=u;++D)y=e[D%r],!y.skip&&(b=c(y[i]),b!==v&&(m=a(b,s,o),p===null&&S()&&(p=l(b,s)===0?D:P),p!==null&&x()&&(g.push(WS({start:p,end:D,loop:h,count:r,style:d})),p=null),P=D,v=b));return p!==null&&g.push(WS({start:p,end:u,loop:h,count:r,style:d})),g}function o5(n,e){const t=[],i=n.segments;for(let s=0;s<i.length;s++){const o=s5(i[s],n.points,e);o.length&&t.push(...o)}return t}function HG(n,e,t,i){let s=0,o=e-1;if(t&&!i)for(;s<e&&!n[s].skip;)s++;for(;s<e&&n[s].skip;)s++;for(s%=e,t&&(o+=s);o>s&&n[o%e].skip;)o--;return o%=e,{start:s,end:o}}function WG(n,e,t,i){const s=n.length,o=[];let r=e,l=n[e],a;for(a=e+1;a<=t;++a){const c=n[a%s];c.skip||c.stop?l.skip||(i=!1,o.push({start:e%s,end:(a-1)%s,loop:i}),e=r=c.stop?a:null):(r=a,l.skip&&(e=a)),l=c}return r!==null&&o.push({start:e%s,end:r%s,loop:i}),o}function qG(n,e){const t=n.points,i=n.options.spanGaps,s=t.length;if(!s)return[];const o=!!n._loop,{start:r,end:l}=HG(t,s,o,i);if(i===!0)return qS(n,[{start:r,end:l,loop:o}],t,e);const a=l<r?l+s:l,c=!!n._fullLoop&&r===0&&l===s-1;return qS(n,WG(t,r,a,c),t,e)}function qS(n,e,t,i){return!i||!i.setContext||!t?e:UG(n,e,t,i)}function UG(n,e,t,i){const s=n._chart.getContext(),o=US(n.options),{_datasetIndex:r,options:{spanGaps:l}}=n,a=t.length,c=[];let f=o,u=e[0].start,h=u;function d(g,m,p,b){const y=l?-1:1;if(g!==m){for(g+=a;t[g%a].skip;)g-=y;for(;t[m%a].skip;)m+=y;g%a!==m%a&&(c.push({start:g%a,end:m%a,loop:p,style:b}),f=b,u=m%a)}}for(const g of e){u=l?u:g.start;let m=t[u%a],p;for(h=u+1;h<=g.end;h++){const b=t[h%a];p=US(i.setContext(Wr(s,{type:"segment",p0:m,p1:b,p0DataIndex:(h-1)%a,p1DataIndex:h%a,datasetIndex:r}))),JG(p,f)&&d(u,h-1,g.loop,f),m=b,f=p}u<h-1&&d(u,h-1,g.loop,f)}return c}function US(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function JG(n,e){if(!e)return!1;const t=[],i=function(s,o){return Pb(o)?(t.includes(o)||t.push(o),t.indexOf(o)):o};return JSON.stringify(n,i)!==JSON.stringify(e,i)}/*!
 * Chart.js v4.4.4
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class KG{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,s){const o=t.listeners[s],r=t.duration;o.forEach(l=>l({chart:e,initial:t.initial,numSteps:r,currentStep:Math.min(i-t.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=H6.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const o=i.items;let r=o.length-1,l=!1,a;for(;r>=0;--r)a=o[r],a._active?(a._total>i.duration&&(i.duration=a._total),a.tick(e),l=!0):(o[r]=o[o.length-1],o.pop());l&&(s.draw(),this._notify(s,i,e,"progress")),o.length||(i.running=!1,this._notify(s,i,e,"complete"),i.initial=!1),t+=o.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var So=new KG;const JS="transparent",YG={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const i=NS(n||JS),s=i.valid&&NS(e||JS);return s&&s.valid?s.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class XG{constructor(e,t,i,s){const o=t[i];s=zc([e.to,s,o,e.from]);const r=zc([e.from,o,s]);this._active=!0,this._fn=e.fn||YG[e.type||typeof r],this._easing=sf[e.easing]||sf.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=r,this._to=s,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const s=this._target[this._prop],o=i-this._start,r=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(r,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=zc([e.to,t,s,e.from]),this._from=zc([e.from,s,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,s=this._prop,o=this._from,r=this._loop,l=this._to;let a;if(this._active=o!==l&&(r||t<i),!this._active){this._target[s]=l,this._notify(!0);return}if(t<0){this._target[s]=o;return}a=t/i%2,a=r&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[s]=this._fn(o,l,a)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][t]()}}class r5{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Ot(e))return;const t=Object.keys(Mn.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const o=e[s];if(!Ot(o))return;const r={};for(const l of t)r[l]=o[l];(bn(o.properties)&&o.properties||[s]).forEach(l=>{(l===s||!i.has(l))&&i.set(l,r)})})}_animateOptions(e,t){const i=t.options,s=QG(e,i);if(!s)return[];const o=this._createAnimations(s,i);return i.$shared&&GG(e.options.$animations,i).then(()=>{e.options=i},()=>{}),o}_createAnimations(e,t){const i=this._properties,s=[],o=e.$animations||(e.$animations={}),r=Object.keys(t),l=Date.now();let a;for(a=r.length-1;a>=0;--a){const c=r[a];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,t));continue}const f=t[c];let u=o[c];const h=i.get(c);if(u)if(h&&u.active()){u.update(h,f,l);continue}else u.cancel();if(!h||!h.duration){e[c]=f;continue}o[c]=u=new XG(h,e,c,f),s.push(u)}return s}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const i=this._createAnimations(e,t);if(i.length)return So.add(this._chart,i),!0}}function GG(n,e){const t=[],i=Object.keys(e);for(let s=0;s<i.length;s++){const o=n[i[s]];o&&o.active()&&t.push(o.wait())}return Promise.all(t)}function QG(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function KS(n,e){const t=n&&n.options||{},i=t.reverse,s=t.min===void 0?e:0,o=t.max===void 0?e:0;return{start:i?o:s,end:i?s:o}}function ZG(n,e,t){if(t===!1)return!1;const i=KS(n,t),s=KS(e,t);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function $G(n){let e,t,i,s;return Ot(n)?(e=n.top,t=n.right,i=n.bottom,s=n.left):e=t=i=s=n,{top:e,right:t,bottom:i,left:s,disabled:n===!1}}function l5(n,e){const t=[],i=n._getSortedDatasetMetas(e);let s,o;for(s=0,o=i.length;s<o;++s)t.push(i[s].index);return t}function YS(n,e,t,i={}){const s=n.keys,o=i.mode==="single";let r,l,a,c;if(e!==null){for(r=0,l=s.length;r<l;++r){if(a=+s[r],a===t){if(i.all)continue;break}c=n.values[a],Cn(c)&&(o||e===0||ao(e)===ao(c))&&(e+=c)}return e}}function eQ(n,e){const{iScale:t,vScale:i}=e,s=t.axis==="x"?"x":"y",o=i.axis==="x"?"x":"y",r=Object.keys(n),l=new Array(r.length);let a,c,f;for(a=0,c=r.length;a<c;++a)f=r[a],l[a]={[s]:f,[o]:n[f]};return l}function XS(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function tQ(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function nQ(n){const{min:e,max:t,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:s?t:Number.POSITIVE_INFINITY}}function iQ(n,e,t){const i=n[e]||(n[e]={});return i[t]||(i[t]={})}function GS(n,e,t,i){for(const s of e.getMatchingVisibleMetas(i).reverse()){const o=n[s.index];if(t&&o>0||!t&&o<0)return s.index}return null}function QS(n,e){const{chart:t,_cachedMeta:i}=n,s=t._stacks||(t._stacks={}),{iScale:o,vScale:r,index:l}=i,a=o.axis,c=r.axis,f=tQ(o,r,i),u=e.length;let h;for(let d=0;d<u;++d){const g=e[d],{[a]:m,[c]:p}=g,b=g._stacks||(g._stacks={});h=b[c]=iQ(s,f,m),h[l]=p,h._top=GS(h,r,!0,i.type),h._bottom=GS(h,r,!1,i.type);const y=h._visualValues||(h._visualValues={});y[l]=p}}function zm(n,e){const t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function sQ(n,e){return Wr(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function oQ(n,e,t){return Wr(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Ac(n,e){const t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(const s of e){const o=s._stacks;if(!o||o[i]===void 0||o[i][t]===void 0)return;delete o[i][t],o[i]._visualValues!==void 0&&o[i]._visualValues[t]!==void 0&&delete o[i]._visualValues[t]}}}const Vm=n=>n==="reset"||n==="none",ZS=(n,e)=>e?n:Object.assign({},n),rQ=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:l5(t,!0),values:null};class Os{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=XS(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Ac(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),s=(u,h,d,g)=>u==="x"?h:u==="r"?g:d,o=t.xAxisID=gt(i.xAxisID,zm(e,"x")),r=t.yAxisID=gt(i.yAxisID,zm(e,"y")),l=t.rAxisID=gt(i.rAxisID,zm(e,"r")),a=t.indexAxis,c=t.iAxisID=s(a,o,r,l),f=t.vAxisID=s(a,r,o,l);t.xScale=this.getScaleForId(o),t.yScale=this.getScaleForId(r),t.rScale=this.getScaleForId(l),t.iScale=this.getScaleForId(c),t.vScale=this.getScaleForId(f)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&DS(this._data,this),e._stacked&&Ac(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(Ot(t)){const s=this._cachedMeta;this._data=eQ(t,s)}else if(i!==t){if(i){DS(i,this);const s=this._cachedMeta;Ac(s),s._parsed=[]}t&&Object.isExtensible(t)&&UX(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const o=t._stacked;t._stacked=XS(t.vScale,t),t.stack!==i.stack&&(s=!0,Ac(t),t.stack=i.stack),this._resyncElements(e),(s||o!==t._stacked)&&QS(this,t._parsed)}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:s}=this,{iScale:o,_stacked:r}=i,l=o.axis;let a=e===0&&t===s.length?!0:i._sorted,c=e>0&&i._parsed[e-1],f,u,h;if(this._parsing===!1)i._parsed=s,i._sorted=!0,h=s;else{bn(s[e])?h=this.parseArrayData(i,s,e,t):Ot(s[e])?h=this.parseObjectData(i,s,e,t):h=this.parsePrimitiveData(i,s,e,t);const d=()=>u[l]===null||c&&u[l]<c[l];for(f=0;f<t;++f)i._parsed[f+e]=u=h[f],a&&(d()&&(a=!1),c=u);i._sorted=a}r&&QS(this,h)}parsePrimitiveData(e,t,i,s){const{iScale:o,vScale:r}=e,l=o.axis,a=r.axis,c=o.getLabels(),f=o===r,u=new Array(s);let h,d,g;for(h=0,d=s;h<d;++h)g=h+i,u[h]={[l]:f||o.parse(c[g],g),[a]:r.parse(t[g],g)};return u}parseArrayData(e,t,i,s){const{xScale:o,yScale:r}=e,l=new Array(s);let a,c,f,u;for(a=0,c=s;a<c;++a)f=a+i,u=t[f],l[a]={x:o.parse(u[0],f),y:r.parse(u[1],f)};return l}parseObjectData(e,t,i,s){const{xScale:o,yScale:r}=e,{xAxisKey:l="x",yAxisKey:a="y"}=this._parsing,c=new Array(s);let f,u,h,d;for(f=0,u=s;f<u;++f)h=f+i,d=t[h],c[f]={x:o.parse(Br(d,l),h),y:r.parse(Br(d,a),h)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const s=this.chart,o=this._cachedMeta,r=t[e.axis],l={keys:l5(s,!0),values:t._stacks[e.axis]._visualValues};return YS(l,r,o.index,{mode:i})}updateRangeFromParsed(e,t,i,s){const o=i[t.axis];let r=o===null?NaN:o;const l=s&&i._stacks[t.axis];s&&l&&(s.values=l,r=YS(s,o,this._cachedMeta.index)),e.min=Math.min(e.min,r),e.max=Math.max(e.max,r)}getMinMax(e,t){const i=this._cachedMeta,s=i._parsed,o=i._sorted&&e===i.iScale,r=s.length,l=this._getOtherScale(e),a=rQ(t,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:f,max:u}=nQ(l);let h,d;function g(){d=s[h];const m=d[l.axis];return!Cn(d[e.axis])||f>m||u<m}for(h=0;h<r&&!(!g()&&(this.updateRangeFromParsed(c,e,d,a),o));++h);if(o){for(h=r-1;h>=0;--h)if(!g()){this.updateRangeFromParsed(c,e,d,a);break}}return c}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let s,o,r;for(s=0,o=t.length;s<o;++s)r=t[s][e.axis],Cn(r)&&i.push(r);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,s=t.vScale,o=this.getParsed(e);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=$G(gt(this.options.clip,ZG(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,s=i.data||[],o=t.chartArea,r=[],l=this._drawStart||0,a=this._drawCount||s.length-l,c=this.options.drawActiveElementsOnTop;let f;for(i.dataset&&i.dataset.draw(e,o,l,a),f=l;f<l+a;++f){const u=s[f];u.hidden||(u.active&&c?r.push(u):u.draw(e,o))}for(f=0;f<r.length;++f)r[f].draw(e,o)}getStyle(e,t){const i=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const s=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const r=this._cachedMeta.data[e];o=r.$context||(r.$context=oQ(this.getContext(),e,r)),o.parsed=this.getParsed(e),o.raw=s.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=sQ(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!t,o.mode=i,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const s=t==="active",o=this._cachedDataOpts,r=e+"-"+t,l=o[r],a=this.enableOptionSharing&&Bf(i);if(l)return ZS(l,a);const c=this.chart.config,f=c.datasetElementScopeKeys(this._type,e),u=s?[`${e}Hover`,"hover",e,""]:[e,""],h=c.getOptionScopes(this.getDataset(),f),d=Object.keys(Mn.elements[e]),g=()=>this.getContext(i,s,t),m=c.resolveNamedOptions(h,d,g,u);return m.$shared&&(m.$shared=a,o[r]=Object.freeze(ZS(m,a))),m}_resolveAnimations(e,t,i){const s=this.chart,o=this._cachedDataOpts,r=`animation-${t}`,l=o[r];if(l)return l;let a;if(s.options.animation!==!1){const f=this.chart.config,u=f.datasetAnimationScopeKeys(this._type,t),h=f.getOptionScopes(this.getDataset(),u);a=f.createResolver(h,this.getContext(e,i,t))}const c=new r5(s,a&&a.animations);return a&&a._cacheable&&(o[r]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Vm(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const i=this.resolveDataElementOptions(e,t),s=this._sharedOptions,o=this.getSharedOptions(i),r=this.includeOptions(t,o)||o!==s;return this.updateSharedOptions(o,t,i),{sharedOptions:o,includeOptions:r}}updateElement(e,t,i,s){Vm(s)?Object.assign(e,i):this._resolveAnimations(t,s).update(e,i)}updateSharedOptions(e,t,i){e&&!Vm(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,s){e.active=s;const o=this.getStyle(t,s);this._resolveAnimations(t,i,s).update(e,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[l,a,c]of this._syncList)this[l](a,c);this._syncList=[];const s=i.length,o=t.length,r=Math.min(o,s);r&&this.parse(0,r),o>s?this._insertElements(s,o-s,e):o<s&&this._removeElements(o,s-o)}_insertElements(e,t,i=!0){const s=this._cachedMeta,o=s.data,r=e+t;let l;const a=c=>{for(c.length+=t,l=c.length-1;l>=r;l--)c[l]=c[l-t]};for(a(o),l=e;l<r;++l)o[l]=new this.dataElementType;this._parsing&&a(s._parsed),this.parse(e,t),i&&this.updateElements(o,e,t,"reset")}updateElements(e,t,i,s){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(e,t);i._stacked&&Ac(i,s)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,s]=e;this[t](i,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Ae(Os,"defaults",{}),Ae(Os,"datasetElementType",null),Ae(Os,"dataElementType",null);function lQ(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let i=[];for(let s=0,o=t.length;s<o;s++)i=i.concat(t[s].controller.getAllParsedValues(n));n._cache.$bar=V6(i.sort((s,o)=>s-o))}return n._cache.$bar}function aQ(n){const e=n.iScale,t=lQ(e,n.type);let i=e._length,s,o,r,l;const a=()=>{r===32767||r===-32768||(Bf(l)&&(i=Math.min(i,Math.abs(r-l)||i)),l=r)};for(s=0,o=t.length;s<o;++s)r=e.getPixelForValue(t[s]),a();for(l=void 0,s=0,o=e.ticks.length;s<o;++s)r=e.getPixelForTick(s),a();return i}function cQ(n,e,t,i){const s=t.barThickness;let o,r;return Lt(s)?(o=e.min*t.categoryPercentage,r=t.barPercentage):(o=s*i,r=1),{chunk:o/i,ratio:r,start:e.pixels[n]-o/2}}function fQ(n,e,t,i){const s=e.pixels,o=s[n];let r=n>0?s[n-1]:null,l=n<s.length-1?s[n+1]:null;const a=t.categoryPercentage;r===null&&(r=o-(l===null?e.end-e.start:l-o)),l===null&&(l=o+o-r);const c=o-(o-Math.min(r,l))/2*a;return{chunk:Math.abs(l-r)/2*a/i,ratio:t.barPercentage,start:c}}function uQ(n,e,t,i){const s=t.parse(n[0],i),o=t.parse(n[1],i),r=Math.min(s,o),l=Math.max(s,o);let a=r,c=l;Math.abs(r)>Math.abs(l)&&(a=l,c=r),e[t.axis]=c,e._custom={barStart:a,barEnd:c,start:s,end:o,min:r,max:l}}function a5(n,e,t,i){return bn(n)?uQ(n,e,t,i):e[t.axis]=t.parse(n,i),e}function $S(n,e,t,i){const s=n.iScale,o=n.vScale,r=s.getLabels(),l=s===o,a=[];let c,f,u,h;for(c=t,f=t+i;c<f;++c)h=e[c],u={},u[s.axis]=l||s.parse(r[c],c),a.push(a5(h,u,o,c));return a}function Hm(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function hQ(n,e,t){return n!==0?ao(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function dQ(n){let e,t,i,s,o;return n.horizontal?(e=n.base>n.x,t="left",i="right"):(e=n.base<n.y,t="bottom",i="top"),e?(s="end",o="start"):(s="start",o="end"),{start:t,end:i,reverse:e,top:s,bottom:o}}function gQ(n,e,t,i){let s=e.borderSkipped;const o={};if(!s){n.borderSkipped=o;return}if(s===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:r,end:l,reverse:a,top:c,bottom:f}=dQ(n);s==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===i?s=c:(t._bottom||0)===i?s=f:(o[eC(f,r,l,a)]=!0,s=c)),o[eC(s,r,l,a)]=!0,n.borderSkipped=o}function eC(n,e,t,i){return i?(n=mQ(n,e,t),n=tC(n,t,e)):n=tC(n,e,t),n}function mQ(n,e,t){return n===e?t:n===t?e:n}function tC(n,e,t){return n==="start"?e:n==="end"?t:n}function pQ(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}class Rh extends Os{parsePrimitiveData(e,t,i,s){return $S(e,t,i,s)}parseArrayData(e,t,i,s){return $S(e,t,i,s)}parseObjectData(e,t,i,s){const{iScale:o,vScale:r}=e,{xAxisKey:l="x",yAxisKey:a="y"}=this._parsing,c=o.axis==="x"?l:a,f=r.axis==="x"?l:a,u=[];let h,d,g,m;for(h=i,d=i+s;h<d;++h)m=t[h],g={},g[o.axis]=o.parse(Br(m,c),h),u.push(a5(Br(m,f),g,r,h));return u}updateRangeFromParsed(e,t,i,s){super.updateRangeFromParsed(e,t,i,s);const o=i._custom;o&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:i,vScale:s}=t,o=this.getParsed(e),r=o._custom,l=Hm(r)?"["+r.start+", "+r.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+i.getLabelForValue(o[i.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,i,s){const o=s==="reset",{index:r,_cachedMeta:{vScale:l}}=this,a=l.getBasePixel(),c=l.isHorizontal(),f=this._getRuler(),{sharedOptions:u,includeOptions:h}=this._getSharedOptions(t,s);for(let d=t;d<t+i;d++){const g=this.getParsed(d),m=o||Lt(g[l.axis])?{base:a,head:a}:this._calculateBarValuePixels(d),p=this._calculateBarIndexPixels(d,f),b=(g._stacks||{})[l.axis],y={horizontal:c,base:m.base,enableBorderRadius:!b||Hm(g._custom)||r===b._top||r===b._bottom,x:c?m.head:p.center,y:c?p.center:m.head,height:c?p.size:Math.abs(m.size),width:c?Math.abs(m.size):p.size};h&&(y.options=u||this.resolveDataElementOptions(d,e[d].active?"active":s));const v=y.options||e[d].options;gQ(y,v,b,r),pQ(y,v,f.ratio),this.updateElement(e[d],d,y,s)}}_getStacks(e,t){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(f=>f.controller.options.grouped),o=i.options.stacked,r=[],l=this._cachedMeta.controller.getParsed(t),a=l&&l[i.axis],c=f=>{const u=f._parsed.find(d=>d[i.axis]===a),h=u&&u[f.vScale.axis];if(Lt(h)||isNaN(h))return!0};for(const f of s)if(!(t!==void 0&&c(f))&&((o===!1||r.indexOf(f.stack)===-1||o===void 0&&f.stack===void 0)&&r.push(f.stack),f.index===e))break;return r.length||r.push(void 0),r}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,i){const s=this._getStacks(e,i),o=t!==void 0?s.indexOf(t):-1;return o===-1?s.length-1:o}_getRuler(){const e=this.options,t=this._cachedMeta,i=t.iScale,s=[];let o,r;for(o=0,r=t.data.length;o<r;++o)s.push(i.getPixelForValue(this.getParsed(o)[i.axis],o));const l=e.barThickness;return{min:l||aQ(t),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:i,index:s},options:{base:o,minBarLength:r}}=this,l=o||0,a=this.getParsed(e),c=a._custom,f=Hm(c);let u=a[t.axis],h=0,d=i?this.applyStack(t,a,i):u,g,m;d!==u&&(h=d-u,d=u),f&&(u=c.barStart,d=c.barEnd-c.barStart,u!==0&&ao(u)!==ao(c.barEnd)&&(h=0),h+=u);const p=!Lt(o)&&!f?o:h;let b=t.getPixelForValue(p);if(this.chart.getDataVisibility(e)?g=t.getPixelForValue(h+d):g=b,m=g-b,Math.abs(m)<r){m=hQ(m,t,l)*r,u===l&&(b-=m/2);const y=t.getPixelForDecimal(0),v=t.getPixelForDecimal(1),C=Math.min(y,v),_=Math.max(y,v);b=Math.max(Math.min(b,_),C),g=b+m,i&&!f&&(a._stacks[t.axis]._visualValues[s]=t.getValueForPixel(g)-t.getValueForPixel(b))}if(b===t.getPixelForValue(l)){const y=ao(m)*t.getLineWidthForValue(l)/2;b+=y,m-=y}return{size:m,base:b,head:g,center:g+m/2}}_calculateBarIndexPixels(e,t){const i=t.scale,s=this.options,o=s.skipNull,r=gt(s.maxBarThickness,1/0);let l,a;if(t.grouped){const c=o?this._getStackCount(e):t.stackCount,f=s.barThickness==="flex"?fQ(e,t,s,c):cQ(e,t,s,c),u=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);l=f.start+f.chunk*u+f.chunk/2,a=Math.min(r,f.chunk*f.ratio)}else l=i.getPixelForValue(this.getParsed(e)[i.axis],e),a=Math.min(r,t.min*t.ratio);return{base:l-a/2,head:l+a/2,center:l,size:a}}draw(){const e=this._cachedMeta,t=e.vScale,i=e.data,s=i.length;let o=0;for(;o<s;++o)this.getParsed(o)[t.axis]!==null&&!i[o].hidden&&i[o].draw(this._ctx)}}Ae(Rh,"id","bar"),Ae(Rh,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Ae(Rh,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Dh extends Os{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,i,s){const o=super.parsePrimitiveData(e,t,i,s);for(let r=0;r<o.length;r++)o[r]._custom=this.resolveDataElementOptions(r+i).radius;return o}parseArrayData(e,t,i,s){const o=super.parseArrayData(e,t,i,s);for(let r=0;r<o.length;r++){const l=t[i+r];o[r]._custom=gt(l[2],this.resolveDataElementOptions(r+i).radius)}return o}parseObjectData(e,t,i,s){const o=super.parseObjectData(e,t,i,s);for(let r=0;r<o.length;r++){const l=t[i+r];o[r]._custom=gt(l&&l.r&&+l.r,this.resolveDataElementOptions(r+i).radius)}return o}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let i=e.length-1;i>=0;--i)t=Math.max(t,e[i].size(this.resolveDataElementOptions(i))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:o}=t,r=this.getParsed(e),l=s.getLabelForValue(r.x),a=o.getLabelForValue(r.y),c=r._custom;return{label:i[e]||"",value:"("+l+", "+a+(c?", "+c:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,i,s){const o=s==="reset",{iScale:r,vScale:l}=this._cachedMeta,{sharedOptions:a,includeOptions:c}=this._getSharedOptions(t,s),f=r.axis,u=l.axis;for(let h=t;h<t+i;h++){const d=e[h],g=!o&&this.getParsed(h),m={},p=m[f]=o?r.getPixelForDecimal(.5):r.getPixelForValue(g[f]),b=m[u]=o?l.getBasePixel():l.getPixelForValue(g[u]);m.skip=isNaN(p)||isNaN(b),c&&(m.options=a||this.resolveDataElementOptions(h,d.active?"active":s),o&&(m.options.radius=0)),this.updateElement(d,h,m,s)}}resolveDataElementOptions(e,t){const i=this.getParsed(e);let s=super.resolveDataElementOptions(e,t);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const o=s.radius;return t!=="active"&&(s.radius=0),s.radius+=gt(i&&i._custom,o),s}}Ae(Dh,"id","bubble"),Ae(Dh,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Ae(Dh,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function bQ(n,e,t){let i=1,s=1,o=0,r=0;if(e<hn){const l=n,a=l+e,c=Math.cos(l),f=Math.sin(l),u=Math.cos(a),h=Math.sin(a),d=(v,C,_)=>jf(v,l,a,!0)?1:Math.max(C,C*t,_,_*t),g=(v,C,_)=>jf(v,l,a,!0)?-1:Math.min(C,C*t,_,_*t),m=d(0,c,u),p=d(Tn,f,h),b=g(dn,c,u),y=g(dn+Tn,f,h);i=(m-b)/2,s=(p-y)/2,o=-(m+b)/2,r=-(p+y)/2}return{ratioX:i,ratioY:s,offsetX:o,offsetY:r}}class dl extends Os{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let o=a=>+i[a];if(Ot(i[e])){const{key:a="value"}=this._parsing;o=c=>+Br(i[c],a)}let r,l;for(r=e,l=e+t;r<l;++r)s._parsed[r]=o(r)}}_getRotation(){return Cs(this.options.rotation-90)}_getCircumference(){return Cs(this.options.circumference)}_getRotationExtents(){let e=hn,t=-hn;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,o=s._getRotation(),r=s._getCircumference();e=Math.min(e,o),t=Math.max(t,o+r)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:i}=t,s=this._cachedMeta,o=s.data,r=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,l=Math.max((Math.min(i.width,i.height)-r)/2,0),a=Math.min(EX(this.options.cutout,l),1),c=this._getRingWeight(this.index),{circumference:f,rotation:u}=this._getRotationExtents(),{ratioX:h,ratioY:d,offsetX:g,offsetY:m}=bQ(u,f,a),p=(i.width-r)/h,b=(i.height-r)/d,y=Math.max(Math.min(p,b)/2,0),v=N6(this.options.radius,y),C=Math.max(v*a,0),_=(v-C)/this._getVisibleDatasetWeightTotal();this.offsetX=g*v,this.offsetY=m*v,s.total=this.calculateTotal(),this.outerRadius=v-_*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-_*c,0),this.updateElements(o,0,o.length,e)}_circumference(e,t){const i=this.options,s=this._cachedMeta,o=this._getCircumference();return t&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*o/hn)}updateElements(e,t,i,s){const o=s==="reset",r=this.chart,l=r.chartArea,c=r.options.animation,f=(l.left+l.right)/2,u=(l.top+l.bottom)/2,h=o&&c.animateScale,d=h?0:this.innerRadius,g=h?0:this.outerRadius,{sharedOptions:m,includeOptions:p}=this._getSharedOptions(t,s);let b=this._getRotation(),y;for(y=0;y<t;++y)b+=this._circumference(y,o);for(y=t;y<t+i;++y){const v=this._circumference(y,o),C=e[y],_={x:f+this.offsetX,y:u+this.offsetY,startAngle:b,endAngle:b+v,circumference:v,outerRadius:g,innerRadius:d};p&&(_.options=m||this.resolveDataElementOptions(y,C.active?"active":s)),b+=v,this.updateElement(C,y,_,s)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let i=0,s;for(s=0;s<t.length;s++){const o=e._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!t[s].hidden&&(i+=Math.abs(o))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?hn*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,s=i.data.labels||[],o=cu(t._parsed[e],i.options.locale);return{label:s[e]||"",value:o}}getMaxBorderWidth(e){let t=0;const i=this.chart;let s,o,r,l,a;if(!e){for(s=0,o=i.data.datasets.length;s<o;++s)if(i.isDatasetVisible(s)){r=i.getDatasetMeta(s),e=r.data,l=r.controller;break}}if(!e)return 0;for(s=0,o=e.length;s<o;++s)a=l.resolveDataElementOptions(s),a.borderAlign!=="inner"&&(t=Math.max(t,a.borderWidth||0,a.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let i=0,s=e.length;i<s;++i){const o=this.resolveDataElementOptions(i);t=Math.max(t,o.offset||0,o.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t}_getRingWeight(e){return Math.max(gt(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Ae(dl,"id","doughnut"),Ae(dl,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Ae(dl,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Ae(dl,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i,color:s}}=e.legend.options;return t.labels.map((o,r)=>{const a=e.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:s,lineWidth:a.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}}});class Lh extends Os{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:i,data:s=[],_dataset:o}=t,r=this.chart._animationsDisabled;let{start:l,count:a}=q6(t,s,r);this._drawStart=l,this._drawCount=a,U6(t)&&(l=0,a=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:c},e),this.updateElements(s,l,a,e)}updateElements(e,t,i,s){const o=s==="reset",{iScale:r,vScale:l,_stacked:a,_dataset:c}=this._cachedMeta,{sharedOptions:f,includeOptions:u}=this._getSharedOptions(t,s),h=r.axis,d=l.axis,{spanGaps:g,segment:m}=this.options,p=Za(g)?g:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||o||s==="none",y=t+i,v=e.length;let C=t>0&&this.getParsed(t-1);for(let _=0;_<v;++_){const S=e[_],x=b?S:{};if(_<t||_>=y){x.skip=!0;continue}const D=this.getParsed(_),P=Lt(D[d]),E=x[h]=r.getPixelForValue(D[h],_),O=x[d]=o||P?l.getBasePixel():l.getPixelForValue(a?this.applyStack(l,D,a):D[d],_);x.skip=isNaN(E)||isNaN(O)||P,x.stop=_>0&&Math.abs(D[h]-C[h])>p,m&&(x.parsed=D,x.raw=c.data[_]),u&&(x.options=f||this.resolveDataElementOptions(_,S.active?"active":s)),b||this.updateElement(S,_,x,s),C=D}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,i=t.options&&t.options.borderWidth||0,s=e.data||[];if(!s.length)return i;const o=s[0].size(this.resolveDataElementOptions(0)),r=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,o,r)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Ae(Lh,"id","line"),Ae(Lh,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Ae(Lh,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class rf extends Os{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,s=i.data.labels||[],o=cu(t._parsed[e].r,i.options.locale);return{label:s[e]||"",value:o}}parseObjectData(e,t,i,s){return $6.bind(this)(e,t,i,s)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((i,s)=>{const o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<t.min&&(t.min=o),o>t.max&&(t.max=o))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,i=e.options,s=Math.min(t.right-t.left,t.bottom-t.top),o=Math.max(s/2,0),r=Math.max(i.cutoutPercentage?o/100*i.cutoutPercentage:1,0),l=(o-r)/e.getVisibleDatasetCount();this.outerRadius=o-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(e,t,i,s){const o=s==="reset",r=this.chart,a=r.options.animation,c=this._cachedMeta.rScale,f=c.xCenter,u=c.yCenter,h=c.getIndexAngle(0)-.5*dn;let d=h,g;const m=360/this.countVisibleElements();for(g=0;g<t;++g)d+=this._computeAngle(g,s,m);for(g=t;g<t+i;g++){const p=e[g];let b=d,y=d+this._computeAngle(g,s,m),v=r.getDataVisibility(g)?c.getDistanceFromCenterForValue(this.getParsed(g).r):0;d=y,o&&(a.animateScale&&(v=0),a.animateRotate&&(b=y=h));const C={x:f,y:u,innerRadius:0,outerRadius:v,startAngle:b,endAngle:y,options:this.resolveDataElementOptions(g,p.active?"active":s)};this.updateElement(p,g,C,s)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((i,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&t++}),t}_computeAngle(e,t,i){return this.chart.getDataVisibility(e)?Cs(this.resolveDataElementOptions(e,t).angle||i):0}}Ae(rf,"id","polarArea"),Ae(rf,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Ae(rf,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i,color:s}}=e.legend.options;return t.labels.map((o,r)=>{const a=e.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:s,lineWidth:a.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class R1 extends dl{}Ae(R1,"id","pie"),Ae(R1,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Ih extends Os{getLabelAndValue(e){const t=this._cachedMeta.vScale,i=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(i[t.axis])}}parseObjectData(e,t,i,s){return $6.bind(this)(e,t,i,s)}update(e){const t=this._cachedMeta,i=t.dataset,s=t.data||[],o=t.iScale.getLabels();if(i.points=s,e!=="resize"){const r=this.resolveDatasetElementOptions(e);this.options.showLine||(r.borderWidth=0);const l={_loop:!0,_fullLoop:o.length===s.length,options:r};this.updateElement(i,void 0,l,e)}this.updateElements(s,0,s.length,e)}updateElements(e,t,i,s){const o=this._cachedMeta.rScale,r=s==="reset";for(let l=t;l<t+i;l++){const a=e[l],c=this.resolveDataElementOptions(l,a.active?"active":s),f=o.getPointPositionForValue(l,this.getParsed(l).r),u=r?o.xCenter:f.x,h=r?o.yCenter:f.y,d={x:u,y:h,angle:f.angle,skip:isNaN(u)||isNaN(h),options:c};this.updateElement(a,l,d,s)}}}Ae(Ih,"id","radar"),Ae(Ih,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Ae(Ih,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Nh extends Os{getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:o}=t,r=this.getParsed(e),l=s.getLabelForValue(r.x),a=o.getLabelForValue(r.y);return{label:i[e]||"",value:"("+l+", "+a+")"}}update(e){const t=this._cachedMeta,{data:i=[]}=t,s=this.chart._animationsDisabled;let{start:o,count:r}=q6(t,i,s);if(this._drawStart=o,this._drawCount=r,U6(t)&&(o=0,r=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:l,_dataset:a}=t;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!a._decimated,l.points=i;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(l,void 0,{animated:!s,options:c},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(i,o,r,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,i,s){const o=s==="reset",{iScale:r,vScale:l,_stacked:a,_dataset:c}=this._cachedMeta,f=this.resolveDataElementOptions(t,s),u=this.getSharedOptions(f),h=this.includeOptions(s,u),d=r.axis,g=l.axis,{spanGaps:m,segment:p}=this.options,b=Za(m)?m:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||o||s==="none";let v=t>0&&this.getParsed(t-1);for(let C=t;C<t+i;++C){const _=e[C],S=this.getParsed(C),x=y?_:{},D=Lt(S[g]),P=x[d]=r.getPixelForValue(S[d],C),E=x[g]=o||D?l.getBasePixel():l.getPixelForValue(a?this.applyStack(l,S,a):S[g],C);x.skip=isNaN(P)||isNaN(E)||D,x.stop=C>0&&Math.abs(S[d]-v[d])>b,p&&(x.parsed=S,x.raw=c.data[C]),h&&(x.options=u||this.resolveDataElementOptions(C,_.active?"active":s)),y||this.updateElement(_,C,x,s),v=S}this.updateSharedOptions(u,s,f)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let l=0;for(let a=t.length-1;a>=0;--a)l=Math.max(l,t[a].size(this.resolveDataElementOptions(a))/2);return l>0&&l}const i=e.dataset,s=i.options&&i.options.borderWidth||0;if(!t.length)return s;const o=t[0].size(this.resolveDataElementOptions(0)),r=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(s,o,r)/2}}Ae(Nh,"id","scatter"),Ae(Nh,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Ae(Nh,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var yQ=Object.freeze({__proto__:null,BarController:Rh,BubbleController:Dh,DoughnutController:dl,LineController:Lh,PieController:R1,PolarAreaController:rf,RadarController:Ih,ScatterController:Nh});function tl(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Nb{constructor(e){Ae(this,"options");this.options=e||{}}static override(e){Object.assign(Nb.prototype,e)}init(){}formats(){return tl()}parse(){return tl()}format(){return tl()}add(){return tl()}diff(){return tl()}startOf(){return tl()}endOf(){return tl()}}var _Q={_date:Nb};function wQ(n,e,t,i){const{controller:s,data:o,_sorted:r}=n,l=s._cachedMeta.iScale;if(l&&e===l.axis&&e!=="r"&&r&&o.length){const a=l._reversePixels?WX:Do;if(i){if(s._sharedOptions){const c=o[0],f=typeof c.getRange=="function"&&c.getRange(e);if(f){const u=a(o,e,t-f),h=a(o,e,t+f);return{lo:u.lo,hi:h.hi}}}}else return a(o,e,t)}return{lo:0,hi:o.length-1}}function fu(n,e,t,i,s){const o=n.getSortedVisibleDatasetMetas(),r=t[e];for(let l=0,a=o.length;l<a;++l){const{index:c,data:f}=o[l],{lo:u,hi:h}=wQ(o[l],e,r,s);for(let d=u;d<=h;++d){const g=f[d];g.skip||i(g,c,d)}}}function vQ(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,s){const o=e?Math.abs(i.x-s.x):0,r=t?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}function Wm(n,e,t,i,s){const o=[];return!s&&!n.isPointInArea(e)||fu(n,t,e,function(l,a,c){!s&&!Lo(l,n.chartArea,0)||l.inRange(e.x,e.y,i)&&o.push({element:l,datasetIndex:a,index:c})},!0),o}function kQ(n,e,t,i){let s=[];function o(r,l,a){const{startAngle:c,endAngle:f}=r.getProps(["startAngle","endAngle"],i),{angle:u}=F6(r,{x:e.x,y:e.y});jf(u,c,f)&&s.push({element:r,datasetIndex:l,index:a})}return fu(n,t,e,o),s}function SQ(n,e,t,i,s,o){let r=[];const l=vQ(t);let a=Number.POSITIVE_INFINITY;function c(f,u,h){const d=f.inRange(e.x,e.y,s);if(i&&!d)return;const g=f.getCenterPoint(s);if(!(!!o||n.isPointInArea(g))&&!d)return;const p=l(e,g);p<a?(r=[{element:f,datasetIndex:u,index:h}],a=p):p===a&&r.push({element:f,datasetIndex:u,index:h})}return fu(n,t,e,c),r}function qm(n,e,t,i,s,o){return!o&&!n.isPointInArea(e)?[]:t==="r"&&!i?kQ(n,e,t,s):SQ(n,e,t,i,s,o)}function nC(n,e,t,i,s){const o=[],r=t==="x"?"inXRange":"inYRange";let l=!1;return fu(n,t,e,(a,c,f)=>{a[r]&&a[r](e[t],s)&&(o.push({element:a,datasetIndex:c,index:f}),l=l||a.inRange(e.x,e.y,s))}),i&&!l?[]:o}var CQ={evaluateInteractionItems:fu,modes:{index(n,e,t,i){const s=il(e,n),o=t.axis||"x",r=t.includeInvisible||!1,l=t.intersect?Wm(n,s,o,i,r):qm(n,s,o,!1,i,r),a=[];return l.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{const f=l[0].index,u=c.data[f];u&&!u.skip&&a.push({element:u,datasetIndex:c.index,index:f})}),a):[]},dataset(n,e,t,i){const s=il(e,n),o=t.axis||"xy",r=t.includeInvisible||!1;let l=t.intersect?Wm(n,s,o,i,r):qm(n,s,o,!1,i,r);if(l.length>0){const a=l[0].datasetIndex,c=n.getDatasetMeta(a).data;l=[];for(let f=0;f<c.length;++f)l.push({element:c[f],datasetIndex:a,index:f})}return l},point(n,e,t,i){const s=il(e,n),o=t.axis||"xy",r=t.includeInvisible||!1;return Wm(n,s,o,i,r)},nearest(n,e,t,i){const s=il(e,n),o=t.axis||"xy",r=t.includeInvisible||!1;return qm(n,s,o,t.intersect,i,r)},x(n,e,t,i){const s=il(e,n);return nC(n,s,"x",t.intersect,i)},y(n,e,t,i){const s=il(e,n);return nC(n,s,"y",t.intersect,i)}}};const c5=["left","top","right","bottom"];function Oc(n,e){return n.filter(t=>t.pos===e)}function iC(n,e){return n.filter(t=>c5.indexOf(t.pos)===-1&&t.box.axis===e)}function Pc(n,e){return n.sort((t,i)=>{const s=e?i:t,o=e?t:i;return s.weight===o.weight?s.index-o.index:s.weight-o.weight})}function MQ(n){const e=[];let t,i,s,o,r,l;for(t=0,i=(n||[]).length;t<i;++t)s=n[t],{position:o,options:{stack:r,stackWeight:l=1}}=s,e.push({index:t,box:s,pos:o,horizontal:s.isHorizontal(),weight:s.weight,stack:r&&o+r,stackWeight:l});return e}function xQ(n){const e={};for(const t of n){const{stack:i,pos:s,stackWeight:o}=t;if(!i||!c5.includes(s))continue;const r=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=o}return e}function AQ(n,e){const t=xQ(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=e;let o,r,l;for(o=0,r=n.length;o<r;++o){l=n[o];const{fullSize:a}=l.box,c=t[l.stack],f=c&&l.stackWeight/c.weight;l.horizontal?(l.width=f?f*i:a&&e.availableWidth,l.height=s):(l.width=i,l.height=f?f*s:a&&e.availableHeight)}return t}function OQ(n){const e=MQ(n),t=Pc(e.filter(c=>c.box.fullSize),!0),i=Pc(Oc(e,"left"),!0),s=Pc(Oc(e,"right")),o=Pc(Oc(e,"top"),!0),r=Pc(Oc(e,"bottom")),l=iC(e,"x"),a=iC(e,"y");return{fullSize:t,leftAndTop:i.concat(o),rightAndBottom:s.concat(a).concat(r).concat(l),chartArea:Oc(e,"chartArea"),vertical:i.concat(s).concat(a),horizontal:o.concat(r).concat(l)}}function sC(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function f5(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function PQ(n,e,t,i){const{pos:s,box:o}=t,r=n.maxPadding;if(!Ot(s)){t.size&&(n[s]-=t.size);const u=i[t.stack]||{size:0,count:1};u.size=Math.max(u.size,t.horizontal?o.height:o.width),t.size=u.size/u.count,n[s]+=t.size}o.getPadding&&f5(r,o.getPadding());const l=Math.max(0,e.outerWidth-sC(r,n,"left","right")),a=Math.max(0,e.outerHeight-sC(r,n,"top","bottom")),c=l!==n.w,f=a!==n.h;return n.w=l,n.h=a,t.horizontal?{same:c,other:f}:{same:f,other:c}}function TQ(n){const e=n.maxPadding;function t(i){const s=Math.max(e[i]-n[i],0);return n[i]+=s,s}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function EQ(n,e){const t=e.maxPadding;function i(s){const o={left:0,top:0,right:0,bottom:0};return s.forEach(r=>{o[r]=Math.max(e[r],t[r])}),o}return i(n?["left","right"]:["top","bottom"])}function Vc(n,e,t,i){const s=[];let o,r,l,a,c,f;for(o=0,r=n.length,c=0;o<r;++o){l=n[o],a=l.box,a.update(l.width||e.w,l.height||e.h,EQ(l.horizontal,e));const{same:u,other:h}=PQ(e,t,l,i);c|=u&&s.length,f=f||h,a.fullSize||s.push(l)}return c&&Vc(s,e,t,i)||f}function lh(n,e,t,i,s){n.top=t,n.left=e,n.right=e+i,n.bottom=t+s,n.width=i,n.height=s}function oC(n,e,t,i){const s=t.padding;let{x:o,y:r}=e;for(const l of n){const a=l.box,c=i[l.stack]||{count:1,placed:0,weight:1},f=l.stackWeight/c.weight||1;if(l.horizontal){const u=e.w*f,h=c.size||a.height;Bf(c.start)&&(r=c.start),a.fullSize?lh(a,s.left,r,t.outerWidth-s.right-s.left,h):lh(a,e.left+c.placed,r,u,h),c.start=r,c.placed+=u,r=a.bottom}else{const u=e.h*f,h=c.size||a.width;Bf(c.start)&&(o=c.start),a.fullSize?lh(a,o,s.top,h,t.outerHeight-s.bottom-s.top):lh(a,o,e.top+c.placed,h,u),c.start=o,c.placed+=u,o=a.right}}e.x=o,e.y=r}var ui={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;const s=yi(n.options.layout.padding),o=Math.max(e-s.width,0),r=Math.max(t-s.height,0),l=OQ(n.boxes),a=l.vertical,c=l.horizontal;Gt(n.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});const f=a.reduce((m,p)=>p.box.options&&p.box.options.display===!1?m:m+1,0)||1,u=Object.freeze({outerWidth:e,outerHeight:t,padding:s,availableWidth:o,availableHeight:r,vBoxMaxWidth:o/2/f,hBoxMaxHeight:r/2}),h=Object.assign({},s);f5(h,yi(i));const d=Object.assign({maxPadding:h,w:o,h:r,x:s.left,y:s.top},s),g=AQ(a.concat(c),u);Vc(l.fullSize,d,u,g),Vc(a,d,u,g),Vc(c,d,u,g)&&Vc(a,d,u,g),TQ(d),oC(l.leftAndTop,d,u,g),d.x+=d.w,d.y+=d.h,oC(l.rightAndBottom,d,u,g),n.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h,height:d.h,width:d.w},Gt(l.chartArea,m=>{const p=m.box;Object.assign(p,n.chartArea),p.update(d.w,d.h,{left:0,top:0,right:0,bottom:0})})}};class u5{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,s){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,s?Math.floor(t/s):i)}}isAttached(e){return!0}updateConfig(e){}}class RQ extends u5{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Bh="$chartjs",DQ={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},rC=n=>n===null||n==="";function LQ(n,e){const t=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[Bh]={initial:{height:i,width:s,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",rC(s)){const o=HS(n,"width");o!==void 0&&(n.width=o)}if(rC(i))if(n.style.height==="")n.height=n.width/(e||2);else{const o=HS(n,"height");o!==void 0&&(n.height=o)}return n}const h5=NG?{passive:!0}:!1;function IQ(n,e,t){n&&n.addEventListener(e,t,h5)}function NQ(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,h5)}function BQ(n,e){const t=DQ[n.type]||n.type,{x:i,y:s}=il(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:s!==void 0?s:null}}function Wd(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function jQ(n,e,t){const i=n.canvas,s=new MutationObserver(o=>{let r=!1;for(const l of o)r=r||Wd(l.addedNodes,i),r=r&&!Wd(l.removedNodes,i);r&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}function FQ(n,e,t){const i=n.canvas,s=new MutationObserver(o=>{let r=!1;for(const l of o)r=r||Wd(l.removedNodes,i),r=r&&!Wd(l.addedNodes,i);r&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}const zf=new Map;let lC=0;function d5(){const n=window.devicePixelRatio;n!==lC&&(lC=n,zf.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function zQ(n,e){zf.size||window.addEventListener("resize",d5),zf.set(n,e)}function VQ(n){zf.delete(n),zf.size||window.removeEventListener("resize",d5)}function HQ(n,e,t){const i=n.canvas,s=i&&Ib(i);if(!s)return;const o=W6((l,a)=>{const c=s.clientWidth;t(l,a),c<s.clientWidth&&t()},window),r=new ResizeObserver(l=>{const a=l[0],c=a.contentRect.width,f=a.contentRect.height;c===0&&f===0||o(c,f)});return r.observe(s),zQ(n,o),r}function Um(n,e,t){t&&t.disconnect(),e==="resize"&&VQ(n)}function WQ(n,e,t){const i=n.canvas,s=W6(o=>{n.ctx!==null&&t(BQ(o,n))},n);return IQ(i,e,s),s}class qQ extends u5{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(LQ(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[Bh])return!1;const i=t[Bh].initial;["height","width"].forEach(o=>{const r=i[o];Lt(r)?t.removeAttribute(o):t.setAttribute(o,r)});const s=i.style||{};return Object.keys(s).forEach(o=>{t.style[o]=s[o]}),t.width=t.width,delete t[Bh],!0}addEventListener(e,t,i){this.removeEventListener(e,t);const s=e.$proxies||(e.$proxies={}),r={attach:jQ,detach:FQ,resize:HQ}[t]||WQ;s[t]=r(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),s=i[t];if(!s)return;({attach:Um,detach:Um,resize:Um}[t]||NQ)(e,t,s),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,s){return IG(e,t,i,s)}isAttached(e){const t=e&&Ib(e);return!!(t&&t.isConnected)}}function UQ(n){return!Lb()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?RQ:qQ}var mh;let Zo=(mh=class{constructor(){Ae(this,"x");Ae(this,"y");Ae(this,"active",!1);Ae(this,"options");Ae(this,"$animations")}tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return Za(this.x)&&Za(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const s={};return e.forEach(o=>{s[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),s}},Ae(mh,"defaults",{}),Ae(mh,"defaultRoutes"),mh);function JQ(n,e){const t=n.options.ticks,i=KQ(n),s=Math.min(t.maxTicksLimit||i,i),o=t.major.enabled?XQ(e):[],r=o.length,l=o[0],a=o[r-1],c=[];if(r>s)return GQ(e,c,o,r/s),c;const f=YQ(o,e,s);if(r>0){let u,h;const d=r>1?Math.round((a-l)/(r-1)):null;for(ah(e,c,f,Lt(d)?0:l-d,l),u=0,h=r-1;u<h;u++)ah(e,c,f,o[u],o[u+1]);return ah(e,c,f,a,Lt(d)?e.length:a+d),c}return ah(e,c,f),c}function KQ(n){const e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),s=n._maxLength/t;return Math.floor(Math.min(i,s))}function YQ(n,e,t){const i=QQ(n),s=e.length/t;if(!i)return Math.max(s,1);const o=FX(i);for(let r=0,l=o.length-1;r<l;r++){const a=o[r];if(a>s)return a}return Math.max(s,1)}function XQ(n){const e=[];let t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function GQ(n,e,t,i){let s=0,o=t[0],r;for(i=Math.ceil(i),r=0;r<n.length;r++)r===o&&(e.push(n[r]),s++,o=t[s*i])}function ah(n,e,t,i,s){const o=gt(i,0),r=Math.min(gt(s,n.length),n.length);let l=0,a,c,f;for(t=Math.ceil(t),s&&(a=s-i,t=a/Math.floor(a/t)),f=o;f<0;)l++,f=Math.round(o+l*t);for(c=Math.max(o,0);c<r;c++)c===f&&(e.push(n[c]),l++,f=Math.round(o+l*t))}function QQ(n){const e=n.length;let t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}const ZQ=n=>n==="left"?"right":n==="right"?"left":n,aC=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,cC=(n,e)=>Math.min(e||n,n);function fC(n,e){const t=[],i=n.length/e,s=n.length;let o=0;for(;o<s;o+=i)t.push(n[Math.floor(o)]);return t}function $Q(n,e,t){const i=n.ticks.length,s=Math.min(e,i-1),o=n._startPixel,r=n._endPixel,l=1e-6;let a=n.getPixelForTick(s),c;if(!(t&&(i===1?c=Math.max(a-o,r-a):e===0?c=(n.getPixelForTick(1)-a)/2:c=(a-n.getPixelForTick(s-1))/2,a+=s<e?c:-c,a<o-l||a>r+l)))return a}function eZ(n,e){Gt(n,t=>{const i=t.gc,s=i.length/2;let o;if(s>e){for(o=0;o<s;++o)delete t.data[i[o]];i.splice(0,s)}})}function Tc(n){return n.drawTicks?n.tickLength:0}function uC(n,e){if(!n.display)return 0;const t=Bn(n.font,e),i=yi(n.padding);return(bn(n.text)?n.text.length:1)*t.lineHeight+i.height}function tZ(n,e){return Wr(n,{scale:e,type:"scale"})}function nZ(n,e,t){return Wr(n,{tick:t,index:e,type:"tick"})}function iZ(n,e,t){let i=Ob(n);return(t&&e!=="right"||!t&&e==="right")&&(i=ZQ(i)),i}function sZ(n,e,t,i){const{top:s,left:o,bottom:r,right:l,chart:a}=n,{chartArea:c,scales:f}=a;let u=0,h,d,g;const m=r-s,p=l-o;if(n.isHorizontal()){if(d=ri(i,o,l),Ot(t)){const b=Object.keys(t)[0],y=t[b];g=f[b].getPixelForValue(y)+m-e}else t==="center"?g=(c.bottom+c.top)/2+m-e:g=aC(n,t,e);h=l-o}else{if(Ot(t)){const b=Object.keys(t)[0],y=t[b];d=f[b].getPixelForValue(y)-p+e}else t==="center"?d=(c.left+c.right)/2-p+e:d=aC(n,t,e);g=ri(i,r,s),u=t==="left"?-Tn:Tn}return{titleX:d,titleY:g,maxWidth:h,rotation:u}}class Ul extends Zo{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:s}=this;return e=Wi(e,Number.POSITIVE_INFINITY),t=Wi(t,Number.NEGATIVE_INFINITY),i=Wi(i,Number.POSITIVE_INFINITY),s=Wi(s,Number.NEGATIVE_INFINITY),{min:Wi(e,i),max:Wi(t,s),minDefined:Cn(e),maxDefined:Cn(t)}}getMinMax(e){let{min:t,max:i,minDefined:s,maxDefined:o}=this.getUserBounds(),r;if(s&&o)return{min:t,max:i};const l=this.getMatchingVisibleMetas();for(let a=0,c=l.length;a<c;++a)r=l[a].controller.getMinMax(this,e),s||(t=Math.min(t,r.min)),o||(i=Math.max(i,r.max));return t=o&&t>i?i:t,i=s&&t>i?t:i,{min:Wi(t,Wi(i,t)),max:Wi(i,Wi(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){rn(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:s,grace:o,ticks:r}=this.options,l=r.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=dG(this,o,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=l<this.ticks.length;this._convertTicksToLabels(a?fC(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||r.source==="auto")&&(this.ticks=JQ(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){rn(this.options.afterUpdate,[this])}beforeSetDimensions(){rn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){rn(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),rn(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){rn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,s,o;for(i=0,s=e.length;i<s;i++)o=e[i],o.label=rn(t.callback,[o.value,i,e],this)}afterTickToLabelConversion(){rn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){rn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=cC(this.ticks.length,e.ticks.maxTicksLimit),s=t.minRotation||0,o=t.maxRotation;let r=s,l,a,c;if(!this._isVisible()||!t.display||s>=o||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const f=this._getLabelSizes(),u=f.widest.width,h=f.highest.height,d=Yn(this.chart.width-u,0,this.maxWidth);l=e.offset?this.maxWidth/i:d/(i-1),u+6>l&&(l=d/(i-(e.offset?.5:1)),a=this.maxHeight-Tc(e.grid)-t.padding-uC(e.title,this.chart.options.font),c=Math.sqrt(u*u+h*h),r=xb(Math.min(Math.asin(Yn((f.highest.height+6)/l,-1,1)),Math.asin(Yn(a/c,-1,1))-Math.asin(Yn(h/c,-1,1)))),r=Math.max(s,Math.min(o,r))),this.labelRotation=r}afterCalculateLabelRotation(){rn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){rn(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:s,grid:o}}=this,r=this._isVisible(),l=this.isHorizontal();if(r){const a=uC(s,t.options.font);if(l?(e.width=this.maxWidth,e.height=Tc(o)+a):(e.height=this.maxHeight,e.width=Tc(o)+a),i.display&&this.ticks.length){const{first:c,last:f,widest:u,highest:h}=this._getLabelSizes(),d=i.padding*2,g=Cs(this.labelRotation),m=Math.cos(g),p=Math.sin(g);if(l){const b=i.mirror?0:p*u.width+m*h.height;e.height=Math.min(this.maxHeight,e.height+b+d)}else{const b=i.mirror?0:m*u.width+p*h.height;e.width=Math.min(this.maxWidth,e.width+b+d)}this._calculatePadding(c,f,p,m)}}this._handleMargins(),l?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,s){const{ticks:{align:o,padding:r},position:l}=this.options,a=this.labelRotation!==0,c=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const f=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,d=0;a?c?(h=s*e.width,d=i*t.height):(h=i*e.height,d=s*t.width):o==="start"?d=t.width:o==="end"?h=e.width:o!=="inner"&&(h=e.width/2,d=t.width/2),this.paddingLeft=Math.max((h-f+r)*this.width/(this.width-f),0),this.paddingRight=Math.max((d-u+r)*this.width/(this.width-u),0)}else{let f=t.height/2,u=e.height/2;o==="start"?(f=0,u=e.height):o==="end"&&(f=t.height,u=0),this.paddingTop=f+r,this.paddingBottom=u+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){rn(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)Lt(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=fC(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){const{ctx:s,_longestTextCache:o}=this,r=[],l=[],a=Math.floor(t/cC(t,i));let c=0,f=0,u,h,d,g,m,p,b,y,v,C,_;for(u=0;u<t;u+=a){if(g=e[u].label,m=this._resolveTickFontOptions(u),s.font=p=m.string,b=o[p]=o[p]||{data:{},gc:[]},y=m.lineHeight,v=C=0,!Lt(g)&&!bn(g))v=Vd(s,b.data,b.gc,v,g),C=y;else if(bn(g))for(h=0,d=g.length;h<d;++h)_=g[h],!Lt(_)&&!bn(_)&&(v=Vd(s,b.data,b.gc,v,_),C+=y);r.push(v),l.push(C),c=Math.max(v,c),f=Math.max(C,f)}eZ(o,t);const S=r.indexOf(c),x=l.indexOf(f),D=P=>({width:r[P]||0,height:l[P]||0});return{first:D(0),last:D(t-1),widest:D(S),highest:D(x),widths:r,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return HX(this._alignToPixels?el(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=nZ(this.getContext(),e,i))}return this.$context||(this.$context=tZ(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=Cs(this.labelRotation),i=Math.abs(Math.cos(t)),s=Math.abs(Math.sin(t)),o=this._getLabelSizes(),r=e.autoSkipPadding||0,l=o?o.widest.width+r:0,a=o?o.highest.height+r:0;return this.isHorizontal()?a*i>l*s?l/i:a/s:a*s<l*i?a/i:l/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,s=this.options,{grid:o,position:r,border:l}=s,a=o.offset,c=this.isHorizontal(),u=this.ticks.length+(a?1:0),h=Tc(o),d=[],g=l.setContext(this.getContext()),m=g.display?g.width:0,p=m/2,b=function(q){return el(i,q,m)};let y,v,C,_,S,x,D,P,E,O,I,N;if(r==="top")y=b(this.bottom),x=this.bottom-h,P=y-p,O=b(e.top)+p,N=e.bottom;else if(r==="bottom")y=b(this.top),O=e.top,N=b(e.bottom)-p,x=y+p,P=this.top+h;else if(r==="left")y=b(this.right),S=this.right-h,D=y-p,E=b(e.left)+p,I=e.right;else if(r==="right")y=b(this.left),E=e.left,I=b(e.right)-p,S=y+p,D=this.left+h;else if(t==="x"){if(r==="center")y=b((e.top+e.bottom)/2+.5);else if(Ot(r)){const q=Object.keys(r)[0],Q=r[q];y=b(this.chart.scales[q].getPixelForValue(Q))}O=e.top,N=e.bottom,x=y+p,P=x+h}else if(t==="y"){if(r==="center")y=b((e.left+e.right)/2);else if(Ot(r)){const q=Object.keys(r)[0],Q=r[q];y=b(this.chart.scales[q].getPixelForValue(Q))}S=y-p,D=S-h,E=e.left,I=e.right}const F=gt(s.ticks.maxTicksLimit,u),z=Math.max(1,Math.ceil(u/F));for(v=0;v<u;v+=z){const q=this.getContext(v),Q=o.setContext(q),X=l.setContext(q),T=Q.lineWidth,U=Q.color,Y=X.dash||[],le=X.dashOffset,Z=Q.tickWidth,ue=Q.tickColor,W=Q.tickBorderDash||[],we=Q.tickBorderDashOffset;C=$Q(this,v,a),C!==void 0&&(_=el(i,C,T),c?S=D=E=I=_:x=P=O=N=_,d.push({tx1:S,ty1:x,tx2:D,ty2:P,x1:E,y1:O,x2:I,y2:N,width:T,color:U,borderDash:Y,borderDashOffset:le,tickWidth:Z,tickColor:ue,tickBorderDash:W,tickBorderDashOffset:we}))}return this._ticksLength=u,this._borderValue=y,d}_computeLabelItems(e){const t=this.axis,i=this.options,{position:s,ticks:o}=i,r=this.isHorizontal(),l=this.ticks,{align:a,crossAlign:c,padding:f,mirror:u}=o,h=Tc(i.grid),d=h+f,g=u?-f:d,m=-Cs(this.labelRotation),p=[];let b,y,v,C,_,S,x,D,P,E,O,I,N="middle";if(s==="top")S=this.bottom-g,x=this._getXAxisLabelAlignment();else if(s==="bottom")S=this.top+g,x=this._getXAxisLabelAlignment();else if(s==="left"){const z=this._getYAxisLabelAlignment(h);x=z.textAlign,_=z.x}else if(s==="right"){const z=this._getYAxisLabelAlignment(h);x=z.textAlign,_=z.x}else if(t==="x"){if(s==="center")S=(e.top+e.bottom)/2+d;else if(Ot(s)){const z=Object.keys(s)[0],q=s[z];S=this.chart.scales[z].getPixelForValue(q)+d}x=this._getXAxisLabelAlignment()}else if(t==="y"){if(s==="center")_=(e.left+e.right)/2-d;else if(Ot(s)){const z=Object.keys(s)[0],q=s[z];_=this.chart.scales[z].getPixelForValue(q)}x=this._getYAxisLabelAlignment(h).textAlign}t==="y"&&(a==="start"?N="top":a==="end"&&(N="bottom"));const F=this._getLabelSizes();for(b=0,y=l.length;b<y;++b){v=l[b],C=v.label;const z=o.setContext(this.getContext(b));D=this.getPixelForTick(b)+o.labelOffset,P=this._resolveTickFontOptions(b),E=P.lineHeight,O=bn(C)?C.length:1;const q=O/2,Q=z.color,X=z.textStrokeColor,T=z.textStrokeWidth;let U=x;r?(_=D,x==="inner"&&(b===y-1?U=this.options.reverse?"left":"right":b===0?U=this.options.reverse?"right":"left":U="center"),s==="top"?c==="near"||m!==0?I=-O*E+E/2:c==="center"?I=-F.highest.height/2-q*E+E:I=-F.highest.height+E/2:c==="near"||m!==0?I=E/2:c==="center"?I=F.highest.height/2-q*E:I=F.highest.height-O*E,u&&(I*=-1),m!==0&&!z.showLabelBackdrop&&(_+=E/2*Math.sin(m))):(S=D,I=(1-O)*E/2);let Y;if(z.showLabelBackdrop){const le=yi(z.backdropPadding),Z=F.heights[b],ue=F.widths[b];let W=I-le.top,we=0-le.left;switch(N){case"middle":W-=Z/2;break;case"bottom":W-=Z;break}switch(x){case"center":we-=ue/2;break;case"right":we-=ue;break;case"inner":b===y-1?we-=ue:b>0&&(we-=ue/2);break}Y={left:we,top:W,width:ue+le.width,height:Z+le.height,color:z.backdropColor}}p.push({label:C,font:P,textOffset:I,options:{rotation:m,color:Q,strokeColor:X,strokeWidth:T,textAlign:U,textBaseline:N,translation:[_,S],backdrop:Y}})}return p}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Cs(this.labelRotation))return e==="top"?"left":"right";let s="center";return t.align==="start"?s="left":t.align==="end"?s="right":t.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:s,padding:o}}=this.options,r=this._getLabelSizes(),l=e+o,a=r.widest.width;let c,f;return t==="left"?s?(f=this.right+o,i==="near"?c="left":i==="center"?(c="center",f+=a/2):(c="right",f+=a)):(f=this.right-l,i==="near"?c="right":i==="center"?(c="center",f-=a/2):(c="left",f=this.left)):t==="right"?s?(f=this.left+o,i==="near"?c="right":i==="center"?(c="center",f-=a/2):(c="left",f-=a)):(f=this.left+l,i==="near"?c="left":i==="center"?(c="center",f+=a/2):(c="right",f=this.right)):c="right",{textAlign:c,x:f}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:s,width:o,height:r}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,s,o,r),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const s=this.ticks.findIndex(o=>o.value===e);return s>=0?t.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const t=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,r;const l=(a,c,f)=>{!f.width||!f.color||(i.save(),i.lineWidth=f.width,i.strokeStyle=f.color,i.setLineDash(f.borderDash||[]),i.lineDashOffset=f.borderDashOffset,i.beginPath(),i.moveTo(a.x,a.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(t.display)for(o=0,r=s.length;o<r;++o){const a=s[o];t.drawOnChartArea&&l({x:a.x1,y:a.y1},{x:a.x2,y:a.y2},a),t.drawTicks&&l({x:a.tx1,y:a.ty1},{x:a.tx2,y:a.ty2},{color:a.tickColor,width:a.tickWidth,borderDash:a.tickBorderDash,borderDashOffset:a.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:s}}=this,o=i.setContext(this.getContext()),r=i.display?o.width:0;if(!r)return;const l=s.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let c,f,u,h;this.isHorizontal()?(c=el(e,this.left,r)-r/2,f=el(e,this.right,l)+l/2,u=h=a):(u=el(e,this.top,r)-r/2,h=el(e,this.bottom,l)+l/2,c=f=a),t.save(),t.lineWidth=o.width,t.strokeStyle=o.color,t.beginPath(),t.moveTo(c,u),t.lineTo(f,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&jg(i,s);const o=this.getLabelItems(e);for(const r of o){const l=r.options,a=r.font,c=r.label,f=r.textOffset;Bl(i,c,0,f,a,l)}s&&Fg(i)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:s}}=this;if(!i.display)return;const o=Bn(i.font),r=yi(i.padding),l=i.align;let a=o.lineHeight/2;t==="bottom"||t==="center"||Ot(t)?(a+=r.bottom,bn(i.text)&&(a+=o.lineHeight*(i.text.length-1))):a+=r.top;const{titleX:c,titleY:f,maxWidth:u,rotation:h}=sZ(this,a,t,l);Bl(e,i.text,0,0,o,{color:i.color,maxWidth:u,rotation:h,textAlign:iZ(l,t,s),textBaseline:"middle",translation:[c,f]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=gt(e.grid&&e.grid.z,-1),s=gt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Ul.prototype.draw?[{z:t,draw:o=>{this.draw(o)}}]:[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:t,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let o,r;for(o=0,r=t.length;o<r;++o){const l=t[o];l[i]===this.id&&(!e||l.type===e)&&s.push(l)}return s}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return Bn(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class ch{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;lZ(t)&&(i=this.register(t));const s=this.items,o=e.id,r=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in s||(s[o]=e,oZ(e,r,i),this.override&&Mn.override(e.id,e.overrides)),r}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,s=this.scope;i in t&&delete t[i],s&&i in Mn[s]&&(delete Mn[s][i],this.override&&delete Nl[i])}}function oZ(n,e,t){const i=Nf(Object.create(null),[t?Mn.get(t):{},Mn.get(e),n.defaults]);Mn.set(e,i),n.defaultRoutes&&rZ(e,n.defaultRoutes),n.descriptors&&Mn.describe(e,n.descriptors)}function rZ(n,e){Object.keys(e).forEach(t=>{const i=t.split("."),s=i.pop(),o=[n].concat(i).join("."),r=e[t].split("."),l=r.pop(),a=r.join(".");Mn.route(o,s,a,l)})}function lZ(n){return"id"in n&&"defaults"in n}class aZ{constructor(){this.controllers=new ch(Os,"datasets",!0),this.elements=new ch(Zo,"elements"),this.plugins=new ch(Object,"plugins"),this.scales=new ch(Ul,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(s=>{const o=i||this._getRegistryForType(s);i||o.isForType(s)||o===this.plugins&&s.id?this._exec(e,o,s):Gt(s,r=>{const l=i||this._getRegistryForType(r);this._exec(e,l,r)})})}_exec(e,t,i){const s=Mb(e);rn(i["before"+s],[],i),t[e](i),rn(i["after"+s],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const s=t.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return s}}var Qs=new aZ;class cZ{constructor(){this._init=[]}notify(e,t,i,s){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const o=s?this._descriptors(e).filter(s):this._descriptors(e),r=this._notify(o,e,t,i);return t==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall")),r}_notify(e,t,i,s){s=s||{};for(const o of e){const r=o.plugin,l=r[i],a=[t,s,o.options];if(rn(l,a,r)===!1&&s.cancelable)return!1}return!0}invalidate(){Lt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,s=gt(i.options&&i.options.plugins,{}),o=fZ(i);return s===!1&&!t?[]:hZ(e,o,s,t)}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,s=(o,r)=>o.filter(l=>!r.some(a=>l.plugin.id===a.plugin.id));this._notify(s(t,i),e,"stop"),this._notify(s(i,t),e,"start")}}function fZ(n){const e={},t=[],i=Object.keys(Qs.plugins.items);for(let o=0;o<i.length;o++)t.push(Qs.getPlugin(i[o]));const s=n.plugins||[];for(let o=0;o<s.length;o++){const r=s[o];t.indexOf(r)===-1&&(t.push(r),e[r.id]=!0)}return{plugins:t,localIds:e}}function uZ(n,e){return!e&&n===!1?null:n===!0?{}:n}function hZ(n,{plugins:e,localIds:t},i,s){const o=[],r=n.getContext();for(const l of e){const a=l.id,c=uZ(i[a],s);c!==null&&o.push({plugin:l,options:dZ(n.config,{plugin:l,local:t[a]},c,r)})}return o}function dZ(n,{plugin:e,local:t},i,s){const o=n.pluginScopeKeys(e),r=n.getOptionScopes(i,o);return t&&e.defaults&&r.push(e.defaults),n.createResolver(r,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function D1(n,e){const t=Mn.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function gZ(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function mZ(n,e){return n===e?"_index_":"_value_"}function hC(n){if(n==="x"||n==="y"||n==="r")return n}function pZ(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function L1(n,...e){if(hC(n))return n;for(const t of e){const i=t.axis||pZ(t.position)||n.length>1&&hC(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function dC(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function bZ(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return dC(n,"x",t[0])||dC(n,"y",t[0])}return{}}function yZ(n,e){const t=Nl[n.type]||{scales:{}},i=e.scales||{},s=D1(n.type,e),o=Object.create(null);return Object.keys(i).forEach(r=>{const l=i[r];if(!Ot(l))return console.error(`Invalid scale configuration for scale: ${r}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${r}`);const a=L1(r,l,bZ(r,n),Mn.scales[l.type]),c=mZ(a,s),f=t.scales||{};o[r]=tf(Object.create(null),[{axis:a},l,f[a],f[c]])}),n.data.datasets.forEach(r=>{const l=r.type||n.type,a=r.indexAxis||D1(l,e),f=(Nl[l]||{}).scales||{};Object.keys(f).forEach(u=>{const h=gZ(u,a),d=r[h+"AxisID"]||h;o[d]=o[d]||Object.create(null),tf(o[d],[{axis:h},i[d],f[u]])})}),Object.keys(o).forEach(r=>{const l=o[r];tf(l,[Mn.scales[l.type],Mn.scale])}),o}function g5(n){const e=n.options||(n.options={});e.plugins=gt(e.plugins,{}),e.scales=yZ(n,e)}function m5(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function _Z(n){return n=n||{},n.data=m5(n.data),g5(n),n}const gC=new Map,p5=new Set;function fh(n,e){let t=gC.get(n);return t||(t=e(),gC.set(n,t),p5.add(t)),t}const Ec=(n,e,t)=>{const i=Br(e,t);i!==void 0&&n.add(i)};class wZ{constructor(e){this._config=_Z(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=m5(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),g5(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return fh(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return fh(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return fh(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,i=this.type;return fh(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const i=this._scopeCache;let s=i.get(e);return(!s||t)&&(s=new Map,i.set(e,s)),s}getOptionScopes(e,t,i){const{options:s,type:o}=this,r=this._cachedScopes(e,i),l=r.get(t);if(l)return l;const a=new Set;t.forEach(f=>{e&&(a.add(e),f.forEach(u=>Ec(a,e,u))),f.forEach(u=>Ec(a,s,u)),f.forEach(u=>Ec(a,Nl[o]||{},u)),f.forEach(u=>Ec(a,Mn,u)),f.forEach(u=>Ec(a,T1,u))});const c=Array.from(a);return c.length===0&&c.push(Object.create(null)),p5.has(t)&&r.set(t,c),c}chartOptionScopes(){const{options:e,type:t}=this;return[e,Nl[t]||{},Mn.datasets[t]||{},{type:t},Mn,T1]}resolveNamedOptions(e,t,i,s=[""]){const o={$shared:!0},{resolver:r,subPrefixes:l}=mC(this._resolverCache,e,s);let a=r;if(kZ(r,t)){o.$shared=!1,i=jr(i)?i():i;const c=this.createResolver(e,i,l);a=$a(r,i,c)}for(const c of t)o[c]=a[c];return o}createResolver(e,t,i=[""],s){const{resolver:o}=mC(this._resolverCache,e,i);return Ot(t)?$a(o,t,void 0,s):o}}function mC(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));const s=t.join();let o=i.get(s);return o||(o={resolver:Eb(e,t),subPrefixes:t.filter(l=>!l.toLowerCase().includes("hover"))},i.set(s,o)),o}const vZ=n=>Ot(n)&&Object.getOwnPropertyNames(n).some(e=>jr(n[e]));function kZ(n,e){const{isScriptable:t,isIndexable:i}=X6(n);for(const s of e){const o=t(s),r=i(s),l=(r||o)&&n[s];if(o&&(jr(l)||vZ(l))||r&&bn(l))return!0}return!1}var SZ="4.4.4";const CZ=["top","bottom","left","right","chartArea"];function pC(n,e){return n==="top"||n==="bottom"||CZ.indexOf(n)===-1&&e==="x"}function bC(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function yC(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),rn(t&&t.onComplete,[n],e)}function MZ(n){const e=n.chart,t=e.options.animation;rn(t&&t.onProgress,[n],e)}function b5(n){return Lb()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const jh={},_C=n=>{const e=b5(n);return Object.values(jh).filter(t=>t.canvas===e).pop()};function xZ(n,e,t){const i=Object.keys(n);for(const s of i){const o=+s;if(o>=e){const r=n[s];delete n[s],(t>0||o>e)&&(n[o+t]=r)}}}function AZ(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}function uh(n,e,t){return n.options.clip?n[t]:e[t]}function OZ(n,e){const{xScale:t,yScale:i}=n;return t&&i?{left:uh(t,e,"left"),right:uh(t,e,"right"),top:uh(i,e,"top"),bottom:uh(i,e,"bottom")}:e}class Ao{static register(...e){Qs.add(...e),wC()}static unregister(...e){Qs.remove(...e),wC()}constructor(e,t){const i=this.config=new wZ(t),s=b5(e),o=_C(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const r=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||UQ(s)),this.platform.updateConfig(i);const l=this.platform.acquireContext(s,r.aspectRatio),a=l&&l.canvas,c=a&&a.height,f=a&&a.width;if(this.id=TX(),this.ctx=l,this.canvas=a,this.width=f,this.height=c,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new cZ,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=JX(u=>this.update(u),r.resizeDelay||0),this._dataChanges=[],jh[this.id]=this,!l||!a){console.error("Failed to create chart: can't acquire context from the given item");return}So.listen(this,"complete",yC),So.listen(this,"progress",MZ),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:s,_aspectRatio:o}=this;return Lt(e)?t&&o?o:s?i/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Qs}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():VS(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return jS(this.canvas,this.ctx),this}stop(){return So.stop(this),this}resize(e,t){So.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,s=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(s,e,t,o),l=i.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,VS(this,l,!0)&&(this.notifyPlugins("resize",{size:r}),rn(i.onResize,[this,r],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};Gt(t,(i,s)=>{i.id=s})}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,s=Object.keys(i).reduce((r,l)=>(r[l]=!1,r),{});let o=[];t&&(o=o.concat(Object.keys(t).map(r=>{const l=t[r],a=L1(r,l),c=a==="r",f=a==="x";return{options:l,dposition:c?"chartArea":f?"bottom":"left",dtype:c?"radialLinear":f?"category":"linear"}}))),Gt(o,r=>{const l=r.options,a=l.id,c=L1(a,l),f=gt(l.type,r.dtype);(l.position===void 0||pC(l.position,c)!==pC(r.dposition))&&(l.position=r.dposition),s[a]=!0;let u=null;if(a in i&&i[a].type===f)u=i[a];else{const h=Qs.getScale(f);u=new h({id:a,type:f,ctx:this.ctx,chart:this}),i[u.id]=u}u.init(l,e)}),Gt(s,(r,l)=>{r||delete i[l]}),Gt(i,r=>{ui.configure(this,r,r.options),ui.addBox(this,r)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((s,o)=>s.index-o.index),i>t){for(let s=t;s<i;++s)this._destroyDatasetMeta(s);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(bC("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((i,s)=>{t.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=t.length;i<s;i++){const o=t[i];let r=this.getDatasetMeta(i);const l=o.type||this.config.type;if(r.type&&r.type!==l&&(this._destroyDatasetMeta(i),r=this.getDatasetMeta(i)),r.type=l,r.indexAxis=o.indexAxis||D1(l,this.options),r.order=o.order||0,r.index=i,r.label=""+o.label,r.visible=this.isDatasetVisible(i),r.controller)r.controller.updateIndex(i),r.controller.linkScales();else{const a=Qs.getController(l),{datasetElementType:c,dataElementType:f}=Mn.datasets[l];Object.assign(a,{dataElementType:Qs.getElement(f),datasetElementType:c&&Qs.getElement(c)}),r.controller=new a(this,i),e.push(r.controller)}}return this._updateMetasets(),e}_resetElements(){Gt(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let c=0,f=this.data.datasets.length;c<f;c++){const{controller:u}=this.getDatasetMeta(c),h=!s&&o.indexOf(u)===-1;u.buildOrUpdateElements(h),r=Math.max(+u.getMaxOverflow(),r)}r=this._minPadding=i.layout.autoPadding?r:0,this._updateLayout(r),s||Gt(o,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(bC("z","_idx"));const{_active:l,_lastEvent:a}=this;a?this._eventHandler(a,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Gt(this.scales,e=>{ui.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!PS(t,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:o}of t){const r=i==="_removeElements"?-o:o;xZ(e,s,r)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=o=>new Set(e.filter(r=>r[0]===o).map((r,l)=>l+","+r.splice(1).join(","))),s=i(0);for(let o=1;o<t;o++)if(!PS(s,i(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ui.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],Gt(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,i=this.data.datasets.length;t<i;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,jr(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),s={meta:i,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(t),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(So.has(this)?this.attached&&!So.running(this)&&So.start(this):(this.draw(),yC({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let s,o;for(s=0,o=t.length;s<o;++s){const r=t[s];(!e||r.visible)&&i.push(r)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i=e._clip,s=!i.disabled,o=OZ(e,this.chartArea),r={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&jg(t,{left:i.left===!1?0:o.left-i.left,right:i.right===!1?this.width:o.right+i.right,top:i.top===!1?0:o.top-i.top,bottom:i.bottom===!1?this.height:o.bottom+i.bottom}),e.controller.draw(),s&&Fg(t),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Lo(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,s){const o=CQ.modes[t];return typeof o=="function"?o(this,e,i,s):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let s=i.filter(o=>o&&o._dataset===t).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=Wr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!t.hidden}setDatasetVisibility(e,t){const i=this.getDatasetMeta(e);i.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const s=i?"show":"hide",o=this.getDatasetMeta(e),r=o.controller._resolveAnimations(void 0,s);Bf(t)?(o.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),r.update(o,{visible:i}),this.update(l=>l.datasetIndex===e?s:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),So.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),jS(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete jh[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(o,r)=>{t.addEventListener(this,o,r),e[o]=r},s=(o,r,l)=>{o.offsetX=r,o.offsetY=l,this._eventHandler(o)};Gt(this.options.events,o=>i(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(a,c)=>{t.addEventListener(this,a,c),e[a]=c},s=(a,c)=>{e[a]&&(t.removeEventListener(this,a,c),delete e[a])},o=(a,c)=>{this.canvas&&this.resize(a,c)};let r;const l=()=>{s("attach",l),this.attached=!0,this.resize(),i("resize",o),i("detach",r)};r=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),i("attach",l)},t.isAttached(this.canvas)?l():r()}unbindEvents(){Gt(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Gt(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const s=i?"set":"remove";let o,r,l,a;for(t==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),l=0,a=e.length;l<a;++l){r=e[l];const c=r&&this.getDatasetMeta(r.datasetIndex).controller;c&&c[s+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map(({datasetIndex:o,index:r})=>{const l=this.getDatasetMeta(o);if(!l)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:l.data[r],index:r}});!jd(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,i){const s=this.options.hover,o=(a,c)=>a.filter(f=>!c.some(u=>f.datasetIndex===u.datasetIndex&&f.index===u.index)),r=o(t,e),l=i?e:o(e,t);r.length&&this.updateHoverStyle(r,s.mode,!1),l.length&&s.mode&&this.updateHoverStyle(l,s.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},s=r=>(r.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const o=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(o||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:s=[],options:o}=this,r=t,l=this._getActiveElements(e,s,i,r),a=NX(e),c=AZ(e,this._lastEvent,i,a);i&&(this._lastEvent=null,rn(o.onHover,[e,l,this],this),a&&rn(o.onClick,[e,l,this],this));const f=!jd(l,s);return(f||t)&&(this._active=l,this._updateHoverStyles(l,s,t)),this._lastEvent=c,f}_getActiveElements(e,t,i,s){if(e.type==="mouseout")return[];if(!i)return t;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,s)}}Ae(Ao,"defaults",Mn),Ae(Ao,"instances",jh),Ae(Ao,"overrides",Nl),Ae(Ao,"registry",Qs),Ae(Ao,"version",SZ),Ae(Ao,"getChart",_C);function wC(){return Gt(Ao.instances,n=>n._plugins.invalidate())}function PZ(n,e,t){const{startAngle:i,pixelMargin:s,x:o,y:r,outerRadius:l,innerRadius:a}=e;let c=s/l;n.beginPath(),n.arc(o,r,l,i-c,t+c),a>s?(c=s/a,n.arc(o,r,a,t+c,i-c,!0)):n.arc(o,r,s,t+Tn,i-Tn),n.closePath(),n.clip()}function TZ(n){return Tb(n,["outerStart","outerEnd","innerStart","innerEnd"])}function EZ(n,e,t,i){const s=TZ(n.options.borderRadius),o=(t-e)/2,r=Math.min(o,i*e/2),l=a=>{const c=(t-Math.min(o,a))*i/2;return Yn(a,0,Math.min(o,c))};return{outerStart:l(s.outerStart),outerEnd:l(s.outerEnd),innerStart:Yn(s.innerStart,0,r),innerEnd:Yn(s.innerEnd,0,r)}}function oa(n,e,t,i){return{x:t+n*Math.cos(e),y:i+n*Math.sin(e)}}function qd(n,e,t,i,s,o){const{x:r,y:l,startAngle:a,pixelMargin:c,innerRadius:f}=e,u=Math.max(e.outerRadius+i+t-c,0),h=f>0?f+i+t+c:0;let d=0;const g=s-a;if(i){const z=f>0?f-i:0,q=u>0?u-i:0,Q=(z+q)/2,X=Q!==0?g*Q/(Q+i):g;d=(g-X)/2}const m=Math.max(.001,g*u-t/dn)/u,p=(g-m)/2,b=a+p+d,y=s-p-d,{outerStart:v,outerEnd:C,innerStart:_,innerEnd:S}=EZ(e,h,u,y-b),x=u-v,D=u-C,P=b+v/x,E=y-C/D,O=h+_,I=h+S,N=b+_/O,F=y-S/I;if(n.beginPath(),o){const z=(P+E)/2;if(n.arc(r,l,u,P,z),n.arc(r,l,u,z,E),C>0){const T=oa(D,E,r,l);n.arc(T.x,T.y,C,E,y+Tn)}const q=oa(I,y,r,l);if(n.lineTo(q.x,q.y),S>0){const T=oa(I,F,r,l);n.arc(T.x,T.y,S,y+Tn,F+Math.PI)}const Q=(y-S/h+(b+_/h))/2;if(n.arc(r,l,h,y-S/h,Q,!0),n.arc(r,l,h,Q,b+_/h,!0),_>0){const T=oa(O,N,r,l);n.arc(T.x,T.y,_,N+Math.PI,b-Tn)}const X=oa(x,b,r,l);if(n.lineTo(X.x,X.y),v>0){const T=oa(x,P,r,l);n.arc(T.x,T.y,v,b-Tn,P)}}else{n.moveTo(r,l);const z=Math.cos(P)*u+r,q=Math.sin(P)*u+l;n.lineTo(z,q);const Q=Math.cos(E)*u+r,X=Math.sin(E)*u+l;n.lineTo(Q,X)}n.closePath()}function RZ(n,e,t,i,s){const{fullCircles:o,startAngle:r,circumference:l}=e;let a=e.endAngle;if(o){qd(n,e,t,i,a,s);for(let c=0;c<o;++c)n.fill();isNaN(l)||(a=r+(l%hn||hn))}return qd(n,e,t,i,a,s),n.fill(),a}function DZ(n,e,t,i,s){const{fullCircles:o,startAngle:r,circumference:l,options:a}=e,{borderWidth:c,borderJoinStyle:f,borderDash:u,borderDashOffset:h}=a,d=a.borderAlign==="inner";if(!c)return;n.setLineDash(u||[]),n.lineDashOffset=h,d?(n.lineWidth=c*2,n.lineJoin=f||"round"):(n.lineWidth=c,n.lineJoin=f||"bevel");let g=e.endAngle;if(o){qd(n,e,t,i,g,s);for(let m=0;m<o;++m)n.stroke();isNaN(l)||(g=r+(l%hn||hn))}d&&PZ(n,e,g),o||(qd(n,e,t,i,g,s),n.stroke())}class Hc extends Zo{constructor(t){super();Ae(this,"circumference");Ae(this,"endAngle");Ae(this,"fullCircles");Ae(this,"innerRadius");Ae(this,"outerRadius");Ae(this,"pixelMargin");Ae(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,i,s){const o=this.getProps(["x","y"],s),{angle:r,distance:l}=F6(o,{x:t,y:i}),{startAngle:a,endAngle:c,innerRadius:f,outerRadius:u,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),d=(this.options.spacing+this.options.borderWidth)/2,g=gt(h,c-a),m=jf(r,a,c)&&a!==c,p=g>=hn||m,b=Ro(l,f+d,u+d);return p&&b}getCenterPoint(t){const{x:i,y:s,startAngle:o,endAngle:r,innerRadius:l,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:c,spacing:f}=this.options,u=(o+r)/2,h=(l+a+f+c)/2;return{x:i+Math.cos(u)*h,y:s+Math.sin(u)*h}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:i,circumference:s}=this,o=(i.offset||0)/4,r=(i.spacing||0)/2,l=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=s>hn?Math.floor(s/hn):0,s===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*o,Math.sin(a)*o);const c=1-Math.sin(Math.min(dn,s||0)),f=o*c;t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,RZ(t,this,f,r,l),DZ(t,this,f,r,l),t.restore()}}Ae(Hc,"id","arc"),Ae(Hc,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Ae(Hc,"defaultRoutes",{backgroundColor:"backgroundColor"}),Ae(Hc,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"});function y5(n,e,t=e){n.lineCap=gt(t.borderCapStyle,e.borderCapStyle),n.setLineDash(gt(t.borderDash,e.borderDash)),n.lineDashOffset=gt(t.borderDashOffset,e.borderDashOffset),n.lineJoin=gt(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=gt(t.borderWidth,e.borderWidth),n.strokeStyle=gt(t.borderColor,e.borderColor)}function LZ(n,e,t){n.lineTo(t.x,t.y)}function IZ(n){return n.stepped?sG:n.tension||n.cubicInterpolationMode==="monotone"?oG:LZ}function _5(n,e,t={}){const i=n.length,{start:s=0,end:o=i-1}=t,{start:r,end:l}=e,a=Math.max(s,r),c=Math.min(o,l),f=s<r&&o<r||s>l&&o>l;return{count:i,start:a,loop:e.loop,ilen:c<a&&!f?i+c-a:c-a}}function NZ(n,e,t,i){const{points:s,options:o}=e,{count:r,start:l,loop:a,ilen:c}=_5(s,t,i),f=IZ(o);let{move:u=!0,reverse:h}=i||{},d,g,m;for(d=0;d<=c;++d)g=s[(l+(h?c-d:d))%r],!g.skip&&(u?(n.moveTo(g.x,g.y),u=!1):f(n,m,g,h,o.stepped),m=g);return a&&(g=s[(l+(h?c:0))%r],f(n,m,g,h,o.stepped)),!!a}function BZ(n,e,t,i){const s=e.points,{count:o,start:r,ilen:l}=_5(s,t,i),{move:a=!0,reverse:c}=i||{};let f=0,u=0,h,d,g,m,p,b;const y=C=>(r+(c?l-C:C))%o,v=()=>{m!==p&&(n.lineTo(f,p),n.lineTo(f,m),n.lineTo(f,b))};for(a&&(d=s[y(0)],n.moveTo(d.x,d.y)),h=0;h<=l;++h){if(d=s[y(h)],d.skip)continue;const C=d.x,_=d.y,S=C|0;S===g?(_<m?m=_:_>p&&(p=_),f=(u*f+C)/++u):(v(),n.lineTo(C,_),g=S,u=0,m=p=_),b=_}v()}function I1(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?BZ:NZ}function jZ(n){return n.stepped?BG:n.tension||n.cubicInterpolationMode==="monotone"?jG:sl}function FZ(n,e,t,i){let s=e._path;s||(s=e._path=new Path2D,e.path(s,t,i)&&s.closePath()),y5(n,e.options),n.stroke(s)}function zZ(n,e,t,i){const{segments:s,options:o}=e,r=I1(e);for(const l of s)y5(n,o,l.style),n.beginPath(),r(n,e,l,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}const VZ=typeof Path2D=="function";function HZ(n,e,t,i){VZ&&!e.options.segment?FZ(n,e,t,i):zZ(n,e,t,i)}class br extends Zo{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;PG(this._points,i,e,s,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=qG(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){const i=this.options,s=e[t],o=this.points,r=o5(this,{property:t,start:s,end:s});if(!r.length)return;const l=[],a=jZ(i);let c,f;for(c=0,f=r.length;c<f;++c){const{start:u,end:h}=r[c],d=o[u],g=o[h];if(d===g){l.push(d);continue}const m=Math.abs((s-d[t])/(g[t]-d[t])),p=a(d,g,m,i.stepped);p[t]=e[t],l.push(p)}return l.length===1?l[0]:l}pathSegment(e,t,i){return I1(this)(e,this,t,i)}path(e,t,i){const s=this.segments,o=I1(this);let r=this._loop;t=t||0,i=i||this.points.length-t;for(const l of s)r&=o(e,this,l,{start:t,end:t+i-1});return!!r}draw(e,t,i,s){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),HZ(e,this,i,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Ae(br,"id","line"),Ae(br,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Ae(br,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Ae(br,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function vC(n,e,t,i){const s=n.options,{[t]:o}=n.getProps([t],i);return Math.abs(e-o)<s.radius+s.hitRadius}class Fh extends Zo{constructor(t){super();Ae(this,"parsed");Ae(this,"skip");Ae(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,s){const o=this.options,{x:r,y:l}=this.getProps(["x","y"],s);return Math.pow(t-r,2)+Math.pow(i-l,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(t,i){return vC(this,t,"x",i)}inYRange(t,i){return vC(this,t,"y",i)}getCenterPoint(t){const{x:i,y:s}=this.getProps(["x","y"],t);return{x:i,y:s}}size(t){t=t||this.options||{};let i=t.radius||0;i=Math.max(i,i&&t.hoverRadius||0);const s=i&&t.borderWidth||0;return(i+s)*2}draw(t,i){const s=this.options;this.skip||s.radius<.1||!Lo(this,i,this.size(s)/2)||(t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.fillStyle=s.backgroundColor,E1(t,s,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}Ae(Fh,"id","point"),Ae(Fh,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Ae(Fh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function w5(n,e){const{x:t,y:i,base:s,width:o,height:r}=n.getProps(["x","y","base","width","height"],e);let l,a,c,f,u;return n.horizontal?(u=r/2,l=Math.min(t,s),a=Math.max(t,s),c=i-u,f=i+u):(u=o/2,l=t-u,a=t+u,c=Math.min(i,s),f=Math.max(i,s)),{left:l,top:c,right:a,bottom:f}}function yr(n,e,t,i){return n?0:Yn(e,t,i)}function WZ(n,e,t){const i=n.options.borderWidth,s=n.borderSkipped,o=Y6(i);return{t:yr(s.top,o.top,0,t),r:yr(s.right,o.right,0,e),b:yr(s.bottom,o.bottom,0,t),l:yr(s.left,o.left,0,e)}}function qZ(n,e,t){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),s=n.options.borderRadius,o=bl(s),r=Math.min(e,t),l=n.borderSkipped,a=i||Ot(s);return{topLeft:yr(!a||l.top||l.left,o.topLeft,0,r),topRight:yr(!a||l.top||l.right,o.topRight,0,r),bottomLeft:yr(!a||l.bottom||l.left,o.bottomLeft,0,r),bottomRight:yr(!a||l.bottom||l.right,o.bottomRight,0,r)}}function UZ(n){const e=w5(n),t=e.right-e.left,i=e.bottom-e.top,s=WZ(n,t/2,i/2),o=qZ(n,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:o},inner:{x:e.left+s.l,y:e.top+s.t,w:t-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,o.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(s.b,s.r))}}}}function Jm(n,e,t,i){const s=e===null,o=t===null,l=n&&!(s&&o)&&w5(n,i);return l&&(s||Ro(e,l.left,l.right))&&(o||Ro(t,l.top,l.bottom))}function JZ(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function KZ(n,e){n.rect(e.x,e.y,e.w,e.h)}function Km(n,e,t={}){const i=n.x!==t.x?-e:0,s=n.y!==t.y?-e:0,o=(n.x+n.w!==t.x+t.w?e:0)-i,r=(n.y+n.h!==t.y+t.h?e:0)-s;return{x:n.x+i,y:n.y+s,w:n.w+o,h:n.h+r,radius:n.radius}}class zh extends Zo{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:i,backgroundColor:s}}=this,{inner:o,outer:r}=UZ(this),l=JZ(r.radius)?Ff:KZ;e.save(),(r.w!==o.w||r.h!==o.h)&&(e.beginPath(),l(e,Km(r,t,o)),e.clip(),l(e,Km(o,-t,r)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),l(e,Km(o,t)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,t,i){return Jm(this,e,t,i)}inXRange(e,t){return Jm(this,e,null,t)}inYRange(e,t){return Jm(this,null,e,t)}getCenterPoint(e){const{x:t,y:i,base:s,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(t+s)/2:t,y:o?i:(i+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Ae(zh,"id","bar"),Ae(zh,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Ae(zh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var YZ=Object.freeze({__proto__:null,ArcElement:Hc,BarElement:zh,LineElement:br,PointElement:Fh});const N1=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],kC=N1.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function v5(n){return N1[n%N1.length]}function k5(n){return kC[n%kC.length]}function XZ(n,e){return n.borderColor=v5(e),n.backgroundColor=k5(e),++e}function GZ(n,e){return n.backgroundColor=n.data.map(()=>v5(e++)),e}function QZ(n,e){return n.backgroundColor=n.data.map(()=>k5(e++)),e}function ZZ(n){let e=0;return(t,i)=>{const s=n.getDatasetMeta(i).controller;s instanceof dl?e=GZ(t,e):s instanceof rf?e=QZ(t,e):s&&(e=XZ(t,e))}}function SC(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}function $Z(n){return n&&(n.borderColor||n.backgroundColor)}var e$={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;const{data:{datasets:i},options:s}=n.config,{elements:o}=s;if(!t.forceOverride&&(SC(i)||$Z(s)||o&&SC(o)))return;const r=ZZ(n);i.forEach(r)}};function t$(n,e,t,i,s){const o=s.samples||i;if(o>=t)return n.slice(e,e+t);const r=[],l=(t-2)/(o-2);let a=0;const c=e+t-1;let f=e,u,h,d,g,m;for(r[a++]=n[f],u=0;u<o-2;u++){let p=0,b=0,y;const v=Math.floor((u+1)*l)+1+e,C=Math.min(Math.floor((u+2)*l)+1,t)+e,_=C-v;for(y=v;y<C;y++)p+=n[y].x,b+=n[y].y;p/=_,b/=_;const S=Math.floor(u*l)+1+e,x=Math.min(Math.floor((u+1)*l)+1,t)+e,{x:D,y:P}=n[f];for(d=g=-1,y=S;y<x;y++)g=.5*Math.abs((D-p)*(n[y].y-P)-(D-n[y].x)*(b-P)),g>d&&(d=g,h=n[y],m=y);r[a++]=h,f=m}return r[a++]=n[c],r}function n$(n,e,t,i){let s=0,o=0,r,l,a,c,f,u,h,d,g,m;const p=[],b=e+t-1,y=n[e].x,C=n[b].x-y;for(r=e;r<e+t;++r){l=n[r],a=(l.x-y)/C*i,c=l.y;const _=a|0;if(_===f)c<g?(g=c,u=r):c>m&&(m=c,h=r),s=(o*s+l.x)/++o;else{const S=r-1;if(!Lt(u)&&!Lt(h)){const x=Math.min(u,h),D=Math.max(u,h);x!==d&&x!==S&&p.push({...n[x],x:s}),D!==d&&D!==S&&p.push({...n[D],x:s})}r>0&&S!==d&&p.push(n[S]),p.push(l),f=_,o=0,g=m=c,u=h=d=r}}return p}function S5(n){if(n._decimated){const e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function CC(n){n.data.datasets.forEach(e=>{S5(e)})}function i$(n,e){const t=e.length;let i=0,s;const{iScale:o}=n,{min:r,max:l,minDefined:a,maxDefined:c}=o.getUserBounds();return a&&(i=Yn(Do(e,o.axis,r).lo,0,t-1)),c?s=Yn(Do(e,o.axis,l).hi+1,i,t)-i:s=t-i,{start:i,count:s}}var s$={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled){CC(n);return}const i=n.width;n.data.datasets.forEach((s,o)=>{const{_data:r,indexAxis:l}=s,a=n.getDatasetMeta(o),c=r||s.data;if(zc([l,n.options.indexAxis])==="y"||!a.controller.supportsDecimation)return;const f=n.scales[a.xAxisID];if(f.type!=="linear"&&f.type!=="time"||n.options.parsing)return;let{start:u,count:h}=i$(a,c);const d=t.threshold||4*i;if(h<=d){S5(s);return}Lt(r)&&(s._data=c,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(m){this._data=m}}));let g;switch(t.algorithm){case"lttb":g=t$(c,u,h,i,t);break;case"min-max":g=n$(c,u,h,i);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}s._decimated=g})},destroy(n){CC(n)}};function o$(n,e,t){const i=n.segments,s=n.points,o=e.points,r=[];for(const l of i){let{start:a,end:c}=l;c=Bb(a,c,s);const f=B1(t,s[a],s[c],l.loop);if(!e.segments){r.push({source:l,target:f,start:s[a],end:s[c]});continue}const u=o5(e,f);for(const h of u){const d=B1(t,o[h.start],o[h.end],h.loop),g=s5(l,s,d);for(const m of g)r.push({source:m,target:h,start:{[t]:MC(f,d,"start",Math.max)},end:{[t]:MC(f,d,"end",Math.min)}})}}return r}function B1(n,e,t,i){if(i)return;let s=e[n],o=t[n];return n==="angle"&&(s=Ui(s),o=Ui(o)),{property:n,start:s,end:o}}function r$(n,e){const{x:t=null,y:i=null}=n||{},s=e.points,o=[];return e.segments.forEach(({start:r,end:l})=>{l=Bb(r,l,s);const a=s[r],c=s[l];i!==null?(o.push({x:a.x,y:i}),o.push({x:c.x,y:i})):t!==null&&(o.push({x:t,y:a.y}),o.push({x:t,y:c.y}))}),o}function Bb(n,e,t){for(;e>n;e--){const i=t[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function MC(n,e,t,i){return n&&e?i(n[t],e[t]):n?n[t]:e?e[t]:0}function C5(n,e){let t=[],i=!1;return bn(n)?(i=!0,t=n):t=r$(n,e),t.length?new br({points:t,options:{tension:0},_loop:i,_fullLoop:i}):null}function xC(n){return n&&n.fill!==!1}function l$(n,e,t){let s=n[e].fill;const o=[e];let r;if(!t)return s;for(;s!==!1&&o.indexOf(s)===-1;){if(!Cn(s))return s;if(r=n[s],!r)return!1;if(r.visible)return s;o.push(s),s=r.fill}return!1}function a$(n,e,t){const i=h$(n);if(Ot(i))return isNaN(i.value)?!1:i;let s=parseFloat(i);return Cn(s)&&Math.floor(s)===s?c$(i[0],e,s,t):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function c$(n,e,t,i){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=i?!1:t}function f$(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:Ot(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function u$(n,e,t){let i;return n==="start"?i=t:n==="end"?i=e.options.reverse?e.min:e.max:Ot(n)?i=n.value:i=e.getBaseValue(),i}function h$(n){const e=n.options,t=e.fill;let i=gt(t&&t.target,t);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function d$(n){const{scale:e,index:t,line:i}=n,s=[],o=i.segments,r=i.points,l=g$(e,t);l.push(C5({x:null,y:e.bottom},i));for(let a=0;a<o.length;a++){const c=o[a];for(let f=c.start;f<=c.end;f++)m$(s,r[f],l)}return new br({points:s,options:{}})}function g$(n,e){const t=[],i=n.getMatchingVisibleMetas("line");for(let s=0;s<i.length;s++){const o=i[s];if(o.index===e)break;o.hidden||t.unshift(o.dataset)}return t}function m$(n,e,t){const i=[];for(let s=0;s<t.length;s++){const o=t[s],{first:r,last:l,point:a}=p$(o,e,"x");if(!(!a||r&&l)){if(r)i.unshift(a);else if(n.push(a),!l)break}}n.push(...i)}function p$(n,e,t){const i=n.interpolate(e,t);if(!i)return{};const s=i[t],o=n.segments,r=n.points;let l=!1,a=!1;for(let c=0;c<o.length;c++){const f=o[c],u=r[f.start][t],h=r[f.end][t];if(Ro(s,u,h)){l=s===u,a=s===h;break}}return{first:l,last:a,point:i}}class M5{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){const{x:s,y:o,radius:r}=this;return t=t||{start:0,end:hn},e.arc(s,o,r,t.end,t.start,!0),!i.bounds}interpolate(e){const{x:t,y:i,radius:s}=this,o=e.angle;return{x:t+Math.cos(o)*s,y:i+Math.sin(o)*s,angle:o}}}function b$(n){const{chart:e,fill:t,line:i}=n;if(Cn(t))return y$(e,t);if(t==="stack")return d$(n);if(t==="shape")return!0;const s=_$(n);return s instanceof M5?s:C5(s,i)}function y$(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function _$(n){return(n.scale||{}).getPointPositionForValue?v$(n):w$(n)}function w$(n){const{scale:e={},fill:t}=n,i=f$(t,e);if(Cn(i)){const s=e.isHorizontal();return{x:s?i:null,y:s?null:i}}return null}function v$(n){const{scale:e,fill:t}=n,i=e.options,s=e.getLabels().length,o=i.reverse?e.max:e.min,r=u$(t,e,o),l=[];if(i.grid.circular){const a=e.getPointPositionForValue(0,o);return new M5({x:a.x,y:a.y,radius:e.getDistanceFromCenterForValue(r)})}for(let a=0;a<s;++a)l.push(e.getPointPositionForValue(a,r));return l}function Ym(n,e,t){const i=b$(e),{line:s,scale:o,axis:r}=e,l=s.options,a=l.fill,c=l.backgroundColor,{above:f=c,below:u=c}=a||{};i&&s.points.length&&(jg(n,t),k$(n,{line:s,target:i,above:f,below:u,area:t,scale:o,axis:r}),Fg(n))}function k$(n,e){const{line:t,target:i,above:s,below:o,area:r,scale:l}=e,a=t._loop?"angle":e.axis;n.save(),a==="x"&&o!==s&&(AC(n,i,r.top),OC(n,{line:t,target:i,color:s,scale:l,property:a}),n.restore(),n.save(),AC(n,i,r.bottom)),OC(n,{line:t,target:i,color:o,scale:l,property:a}),n.restore()}function AC(n,e,t){const{segments:i,points:s}=e;let o=!0,r=!1;n.beginPath();for(const l of i){const{start:a,end:c}=l,f=s[a],u=s[Bb(a,c,s)];o?(n.moveTo(f.x,f.y),o=!1):(n.lineTo(f.x,t),n.lineTo(f.x,f.y)),r=!!e.pathSegment(n,l,{move:r}),r?n.closePath():n.lineTo(u.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function OC(n,e){const{line:t,target:i,property:s,color:o,scale:r}=e,l=o$(t,i,s);for(const{source:a,target:c,start:f,end:u}of l){const{style:{backgroundColor:h=o}={}}=a,d=i!==!0;n.save(),n.fillStyle=h,S$(n,r,d&&B1(s,f,u)),n.beginPath();const g=!!t.pathSegment(n,a);let m;if(d){g?n.closePath():PC(n,i,u,s);const p=!!i.pathSegment(n,c,{move:g,reverse:!0});m=g&&p,m||PC(n,i,f,s)}n.closePath(),n.fill(m?"evenodd":"nonzero"),n.restore()}}function S$(n,e,t){const{top:i,bottom:s}=e.chart.chartArea,{property:o,start:r,end:l}=t||{};o==="x"&&(n.beginPath(),n.rect(r,i,l-r,s-i),n.clip())}function PC(n,e,t,i){const s=e.interpolate(t,i);s&&n.lineTo(s.x,s.y)}var C$={id:"filler",afterDatasetsUpdate(n,e,t){const i=(n.data.datasets||[]).length,s=[];let o,r,l,a;for(r=0;r<i;++r)o=n.getDatasetMeta(r),l=o.dataset,a=null,l&&l.options&&l instanceof br&&(a={visible:n.isDatasetVisible(r),index:r,fill:a$(l,r,i),chart:n,axis:o.controller.options.indexAxis,scale:o.vScale,line:l}),o.$filler=a,s.push(a);for(r=0;r<i;++r)a=s[r],!(!a||a.fill===!1)&&(a.fill=l$(s,r,t.propagate))},beforeDraw(n,e,t){const i=t.drawTime==="beforeDraw",s=n.getSortedVisibleDatasetMetas(),o=n.chartArea;for(let r=s.length-1;r>=0;--r){const l=s[r].$filler;l&&(l.line.updateControlPoints(o,l.axis),i&&l.fill&&Ym(n.ctx,l,o))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const i=n.getSortedVisibleDatasetMetas();for(let s=i.length-1;s>=0;--s){const o=i[s].$filler;xC(o)&&Ym(n.ctx,o,n.chartArea)}},beforeDatasetDraw(n,e,t){const i=e.meta.$filler;!xC(i)||t.drawTime!=="beforeDatasetDraw"||Ym(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const TC=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},M$=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class EC extends Zo{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=rn(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,s)=>e.sort(i,s,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,s=Bn(i.font),o=s.size,r=this._computeTitleHeight(),{boxWidth:l,itemHeight:a}=TC(i,o);let c,f;t.font=s.string,this.isHorizontal()?(c=this.maxWidth,f=this._fitRows(r,o,l,a)+10):(f=this.maxHeight,c=this._fitCols(r,s,l,a)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(f,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,s){const{ctx:o,maxWidth:r,options:{labels:{padding:l}}}=this,a=this.legendHitBoxes=[],c=this.lineWidths=[0],f=s+l;let u=e;o.textAlign="left",o.textBaseline="middle";let h=-1,d=-f;return this.legendItems.forEach((g,m)=>{const p=i+t/2+o.measureText(g.text).width;(m===0||c[c.length-1]+p+2*l>r)&&(u+=f,c[c.length-(m>0?0:1)]=0,d+=f,h++),a[m]={left:0,top:d,row:h,width:p,height:s},c[c.length-1]+=p+l}),u}_fitCols(e,t,i,s){const{ctx:o,maxHeight:r,options:{labels:{padding:l}}}=this,a=this.legendHitBoxes=[],c=this.columnSizes=[],f=r-e;let u=l,h=0,d=0,g=0,m=0;return this.legendItems.forEach((p,b)=>{const{itemWidth:y,itemHeight:v}=x$(i,t,o,p,s);b>0&&d+v+2*l>f&&(u+=h+l,c.push({width:h,height:d}),g+=h+l,m++,h=d=0),a[b]={left:g,top:d,col:m,width:y,height:v},h=Math.max(h,y),d+=v+l}),u+=h,c.push({width:h,height:d}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:s},rtl:o}}=this,r=La(o,this.left,this.width);if(this.isHorizontal()){let l=0,a=ri(i,this.left+s,this.right-this.lineWidths[l]);for(const c of t)l!==c.row&&(l=c.row,a=ri(i,this.left+s,this.right-this.lineWidths[l])),c.top+=this.top+e+s,c.left=r.leftForLtr(r.x(a),c.width),a+=c.width+s}else{let l=0,a=ri(i,this.top+e+s,this.bottom-this.columnSizes[l].height);for(const c of t)c.col!==l&&(l=c.col,a=ri(i,this.top+e+s,this.bottom-this.columnSizes[l].height)),c.top=a,c.left+=this.left+s,c.left=r.leftForLtr(r.x(c.left),c.width),a+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;jg(e,this),this._draw(),Fg(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:i,ctx:s}=this,{align:o,labels:r}=e,l=Mn.color,a=La(e.rtl,this.left,this.width),c=Bn(r.font),{padding:f}=r,u=c.size,h=u/2;let d;this.drawTitle(),s.textAlign=a.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:g,boxHeight:m,itemHeight:p}=TC(r,u),b=function(S,x,D){if(isNaN(g)||g<=0||isNaN(m)||m<0)return;s.save();const P=gt(D.lineWidth,1);if(s.fillStyle=gt(D.fillStyle,l),s.lineCap=gt(D.lineCap,"butt"),s.lineDashOffset=gt(D.lineDashOffset,0),s.lineJoin=gt(D.lineJoin,"miter"),s.lineWidth=P,s.strokeStyle=gt(D.strokeStyle,l),s.setLineDash(gt(D.lineDash,[])),r.usePointStyle){const E={radius:m*Math.SQRT2/2,pointStyle:D.pointStyle,rotation:D.rotation,borderWidth:P},O=a.xPlus(S,g/2),I=x+h;K6(s,E,O,I,r.pointStyleWidth&&g)}else{const E=x+Math.max((u-m)/2,0),O=a.leftForLtr(S,g),I=bl(D.borderRadius);s.beginPath(),Object.values(I).some(N=>N!==0)?Ff(s,{x:O,y:E,w:g,h:m,radius:I}):s.rect(O,E,g,m),s.fill(),P!==0&&s.stroke()}s.restore()},y=function(S,x,D){Bl(s,D.text,S,x+p/2,c,{strikethrough:D.hidden,textAlign:a.textAlign(D.textAlign)})},v=this.isHorizontal(),C=this._computeTitleHeight();v?d={x:ri(o,this.left+f,this.right-i[0]),y:this.top+f+C,line:0}:d={x:this.left+f,y:ri(o,this.top+C+f,this.bottom-t[0].height),line:0},t5(this.ctx,e.textDirection);const _=p+f;this.legendItems.forEach((S,x)=>{s.strokeStyle=S.fontColor,s.fillStyle=S.fontColor;const D=s.measureText(S.text).width,P=a.textAlign(S.textAlign||(S.textAlign=r.textAlign)),E=g+h+D;let O=d.x,I=d.y;a.setWidth(this.width),v?x>0&&O+E+f>this.right&&(I=d.y+=_,d.line++,O=d.x=ri(o,this.left+f,this.right-i[d.line])):x>0&&I+_>this.bottom&&(O=d.x=O+t[d.line].width+f,d.line++,I=d.y=ri(o,this.top+C+f,this.bottom-t[d.line].height));const N=a.x(O);if(b(N,I,S),O=KX(P,O+g+h,v?O+E:this.right,e.rtl),y(a.x(O),I,S),v)d.x+=E+f;else if(typeof S.text!="string"){const F=c.lineHeight;d.y+=x5(S,F)+f}else d.y+=_}),n5(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,i=Bn(t.font),s=yi(t.padding);if(!t.display)return;const o=La(e.rtl,this.left,this.width),r=this.ctx,l=t.position,a=i.size/2,c=s.top+a;let f,u=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),f=this.top+c,u=ri(e.align,u,this.right-h);else{const g=this.columnSizes.reduce((m,p)=>Math.max(m,p.height),0);f=c+ri(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}const d=ri(l,u,u+h);r.textAlign=o.textAlign(Ob(l)),r.textBaseline="middle",r.strokeStyle=t.color,r.fillStyle=t.color,r.font=i.string,Bl(r,t.text,d,f,i)}_computeTitleHeight(){const e=this.options.title,t=Bn(e.font),i=yi(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,s,o;if(Ro(e,this.left,this.right)&&Ro(t,this.top,this.bottom)){for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(s=o[i],Ro(e,s.left,s.left+s.width)&&Ro(t,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(e){const t=this.options;if(!P$(e.type,t))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,o=M$(s,i);s&&!o&&rn(t.onLeave,[e,s,this],this),this._hoveredItem=i,i&&!o&&rn(t.onHover,[e,i,this],this)}else i&&rn(t.onClick,[e,i,this],this)}}function x$(n,e,t,i,s){const o=A$(i,n,e,t),r=O$(s,i,e.lineHeight);return{itemWidth:o,itemHeight:r}}function A$(n,e,t,i){let s=n.text;return s&&typeof s!="string"&&(s=s.reduce((o,r)=>o.length>r.length?o:r)),e+t.size/2+i.measureText(s).width}function O$(n,e,t){let i=n;return typeof e.text!="string"&&(i=x5(e,t)),i}function x5(n,e){const t=n.text?n.text.length:0;return e*t}function P$(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var T$={id:"legend",_element:EC,start(n,e,t){const i=n.legend=new EC({ctx:n.ctx,options:t,chart:n});ui.configure(n,i,t),ui.addBox(n,i)},stop(n){ui.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const i=n.legend;ui.configure(n,i,t),i.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const i=e.datasetIndex,s=t.chart;s.isDatasetVisible(i)?(s.hide(i),e.hidden=!0):(s.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:s,color:o,useBorderRadius:r,borderRadius:l}}=n.legend.options;return n._getSortedDatasetMetas().map(a=>{const c=a.controller.getStyle(t?0:void 0),f=yi(c.borderWidth);return{text:e[a.index].label,fillStyle:c.backgroundColor,fontColor:o,hidden:!a.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(f.width+f.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:r&&(l||c.borderRadius),datasetIndex:a.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class jb extends Zo{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const s=bn(i.text)?i.text.length:1;this._padding=yi(i.padding);const o=s*Bn(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:i,bottom:s,right:o,options:r}=this,l=r.align;let a=0,c,f,u;return this.isHorizontal()?(f=ri(l,i,o),u=t+e,c=o-i):(r.position==="left"?(f=i+e,u=ri(l,s,t),a=dn*-.5):(f=o-e,u=ri(l,t,s),a=dn*.5),c=s-t),{titleX:f,titleY:u,maxWidth:c,rotation:a}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const i=Bn(t.font),o=i.lineHeight/2+this._padding.top,{titleX:r,titleY:l,maxWidth:a,rotation:c}=this._drawArgs(o);Bl(e,t.text,0,0,i,{color:t.color,maxWidth:a,rotation:c,textAlign:Ob(t.align),textBaseline:"middle",translation:[r,l]})}}function E$(n,e){const t=new jb({ctx:n.ctx,options:e,chart:n});ui.configure(n,t,e),ui.addBox(n,t),n.titleBlock=t}var R$={id:"title",_element:jb,start(n,e,t){E$(n,t)},stop(n){const e=n.titleBlock;ui.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const i=n.titleBlock;ui.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const hh=new WeakMap;var D$={id:"subtitle",start(n,e,t){const i=new jb({ctx:n.ctx,options:t,chart:n});ui.configure(n,i,t),ui.addBox(n,i),hh.set(n,i)},stop(n){ui.removeBox(n,hh.get(n)),hh.delete(n)},beforeUpdate(n,e,t){const i=hh.get(n);ui.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Wc={average(n){if(!n.length)return!1;let e,t,i=new Set,s=0,o=0;for(e=0,t=n.length;e<t;++e){const l=n[e].element;if(l&&l.hasValue()){const a=l.tooltipPosition();i.add(a.x),s+=a.y,++o}}return o===0||i.size===0?!1:{x:[...i].reduce((l,a)=>l+a)/i.size,y:s/o}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,s=Number.POSITIVE_INFINITY,o,r,l;for(o=0,r=n.length;o<r;++o){const a=n[o].element;if(a&&a.hasValue()){const c=a.getCenterPoint(),f=P1(e,c);f<s&&(s=f,l=a)}}if(l){const a=l.tooltipPosition();t=a.x,i=a.y}return{x:t,y:i}}};function Gs(n,e){return e&&(bn(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function Co(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function L$(n,e){const{element:t,datasetIndex:i,index:s}=e,o=n.getDatasetMeta(i).controller,{label:r,value:l}=o.getLabelAndValue(s);return{chart:n,label:r,parsed:o.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:l,dataset:o.getDataset(),dataIndex:s,datasetIndex:i,element:t}}function RC(n,e){const t=n.chart.ctx,{body:i,footer:s,title:o}=n,{boxWidth:r,boxHeight:l}=e,a=Bn(e.bodyFont),c=Bn(e.titleFont),f=Bn(e.footerFont),u=o.length,h=s.length,d=i.length,g=yi(e.padding);let m=g.height,p=0,b=i.reduce((C,_)=>C+_.before.length+_.lines.length+_.after.length,0);if(b+=n.beforeBody.length+n.afterBody.length,u&&(m+=u*c.lineHeight+(u-1)*e.titleSpacing+e.titleMarginBottom),b){const C=e.displayColors?Math.max(l,a.lineHeight):a.lineHeight;m+=d*C+(b-d)*a.lineHeight+(b-1)*e.bodySpacing}h&&(m+=e.footerMarginTop+h*f.lineHeight+(h-1)*e.footerSpacing);let y=0;const v=function(C){p=Math.max(p,t.measureText(C).width+y)};return t.save(),t.font=c.string,Gt(n.title,v),t.font=a.string,Gt(n.beforeBody.concat(n.afterBody),v),y=e.displayColors?r+2+e.boxPadding:0,Gt(i,C=>{Gt(C.before,v),Gt(C.lines,v),Gt(C.after,v)}),y=0,t.font=f.string,Gt(n.footer,v),t.restore(),p+=g.width,{width:p,height:m}}function I$(n,e){const{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function N$(n,e,t,i){const{x:s,width:o}=i,r=t.caretSize+t.caretPadding;if(n==="left"&&s+o+r>e.width||n==="right"&&s-o-r<0)return!0}function B$(n,e,t,i){const{x:s,width:o}=t,{width:r,chartArea:{left:l,right:a}}=n;let c="center";return i==="center"?c=s<=(l+a)/2?"left":"right":s<=o/2?c="left":s>=r-o/2&&(c="right"),N$(c,n,e,t)&&(c="center"),c}function DC(n,e,t){const i=t.yAlign||e.yAlign||I$(n,t);return{xAlign:t.xAlign||e.xAlign||B$(n,e,t,i),yAlign:i}}function j$(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function F$(n,e,t){let{y:i,height:s}=n;return e==="top"?i+=t:e==="bottom"?i-=s+t:i-=s/2,i}function LC(n,e,t,i){const{caretSize:s,caretPadding:o,cornerRadius:r}=n,{xAlign:l,yAlign:a}=t,c=s+o,{topLeft:f,topRight:u,bottomLeft:h,bottomRight:d}=bl(r);let g=j$(e,l);const m=F$(e,a,c);return a==="center"?l==="left"?g+=c:l==="right"&&(g-=c):l==="left"?g-=Math.max(f,h)+s:l==="right"&&(g+=Math.max(u,d)+s),{x:Yn(g,0,i.width-e.width),y:Yn(m,0,i.height-e.height)}}function dh(n,e,t){const i=yi(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function IC(n){return Gs([],Co(n))}function z$(n,e,t){return Wr(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function NC(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const A5={beforeTitle:ko,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:ko,beforeBody:ko,beforeLabel:ko,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return Lt(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:ko,afterBody:ko,beforeFooter:ko,footer:ko,afterFooter:ko};function Oi(n,e,t,i){const s=n[e].call(t,i);return typeof s>"u"?A5[e].call(t,i):s}class j1 extends Zo{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&t.options.animation&&i.animations,o=new r5(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=z$(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:i}=t,s=Oi(i,"beforeTitle",this,e),o=Oi(i,"title",this,e),r=Oi(i,"afterTitle",this,e);let l=[];return l=Gs(l,Co(s)),l=Gs(l,Co(o)),l=Gs(l,Co(r)),l}getBeforeBody(e,t){return IC(Oi(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:i}=t,s=[];return Gt(e,o=>{const r={before:[],lines:[],after:[]},l=NC(i,o);Gs(r.before,Co(Oi(l,"beforeLabel",this,o))),Gs(r.lines,Oi(l,"label",this,o)),Gs(r.after,Co(Oi(l,"afterLabel",this,o))),s.push(r)}),s}getAfterBody(e,t){return IC(Oi(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:i}=t,s=Oi(i,"beforeFooter",this,e),o=Oi(i,"footer",this,e),r=Oi(i,"afterFooter",this,e);let l=[];return l=Gs(l,Co(s)),l=Gs(l,Co(o)),l=Gs(l,Co(r)),l}_createItems(e){const t=this._active,i=this.chart.data,s=[],o=[],r=[];let l=[],a,c;for(a=0,c=t.length;a<c;++a)l.push(L$(this.chart,t[a]));return e.filter&&(l=l.filter((f,u,h)=>e.filter(f,u,h,i))),e.itemSort&&(l=l.sort((f,u)=>e.itemSort(f,u,i))),Gt(l,f=>{const u=NC(e.callbacks,f);s.push(Oi(u,"labelColor",this,f)),o.push(Oi(u,"labelPointStyle",this,f)),r.push(Oi(u,"labelTextColor",this,f))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=r,this.dataPoints=l,l}update(e,t){const i=this.options.setContext(this.getContext()),s=this._active;let o,r=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{const l=Wc[i.position].call(this,s,this._eventPosition);r=this._createItems(i),this.title=this.getTitle(r,i),this.beforeBody=this.getBeforeBody(r,i),this.body=this.getBody(r,i),this.afterBody=this.getAfterBody(r,i),this.footer=this.getFooter(r,i);const a=this._size=RC(this,i),c=Object.assign({},l,a),f=DC(this.chart,i,c),u=LC(i,c,f,this.chart);this.xAlign=f.xAlign,this.yAlign=f.yAlign,o={opacity:1,x:u.x,y:u.y,width:a.width,height:a.height,caretX:l.x,caretY:l.y}}this._tooltipItems=r,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,s){const o=this.getCaretPosition(e,i,s);t.lineTo(o.x1,o.y1),t.lineTo(o.x2,o.y2),t.lineTo(o.x3,o.y3)}getCaretPosition(e,t,i){const{xAlign:s,yAlign:o}=this,{caretSize:r,cornerRadius:l}=i,{topLeft:a,topRight:c,bottomLeft:f,bottomRight:u}=bl(l),{x:h,y:d}=e,{width:g,height:m}=t;let p,b,y,v,C,_;return o==="center"?(C=d+m/2,s==="left"?(p=h,b=p-r,v=C+r,_=C-r):(p=h+g,b=p+r,v=C-r,_=C+r),y=p):(s==="left"?b=h+Math.max(a,f)+r:s==="right"?b=h+g-Math.max(c,u)-r:b=this.caretX,o==="top"?(v=d,C=v-r,p=b-r,y=b+r):(v=d+m,C=v+r,p=b+r,y=b-r),_=v),{x1:p,x2:b,x3:y,y1:v,y2:C,y3:_}}drawTitle(e,t,i){const s=this.title,o=s.length;let r,l,a;if(o){const c=La(i.rtl,this.x,this.width);for(e.x=dh(this,i.titleAlign,i),t.textAlign=c.textAlign(i.titleAlign),t.textBaseline="middle",r=Bn(i.titleFont),l=i.titleSpacing,t.fillStyle=i.titleColor,t.font=r.string,a=0;a<o;++a)t.fillText(s[a],c.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+l,a+1===o&&(e.y+=i.titleMarginBottom-l)}}_drawColorBox(e,t,i,s,o){const r=this.labelColors[i],l=this.labelPointStyles[i],{boxHeight:a,boxWidth:c}=o,f=Bn(o.bodyFont),u=dh(this,"left",o),h=s.x(u),d=a<f.lineHeight?(f.lineHeight-a)/2:0,g=t.y+d;if(o.usePointStyle){const m={radius:Math.min(c,a)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},p=s.leftForLtr(h,c)+c/2,b=g+a/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,E1(e,m,p,b),e.strokeStyle=r.borderColor,e.fillStyle=r.backgroundColor,E1(e,m,p,b)}else{e.lineWidth=Ot(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,e.strokeStyle=r.borderColor,e.setLineDash(r.borderDash||[]),e.lineDashOffset=r.borderDashOffset||0;const m=s.leftForLtr(h,c),p=s.leftForLtr(s.xPlus(h,1),c-2),b=bl(r.borderRadius);Object.values(b).some(y=>y!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,Ff(e,{x:m,y:g,w:c,h:a,radius:b}),e.fill(),e.stroke(),e.fillStyle=r.backgroundColor,e.beginPath(),Ff(e,{x:p,y:g+1,w:c-2,h:a-2,radius:b}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(m,g,c,a),e.strokeRect(m,g,c,a),e.fillStyle=r.backgroundColor,e.fillRect(p,g+1,c-2,a-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:s}=this,{bodySpacing:o,bodyAlign:r,displayColors:l,boxHeight:a,boxWidth:c,boxPadding:f}=i,u=Bn(i.bodyFont);let h=u.lineHeight,d=0;const g=La(i.rtl,this.x,this.width),m=function(D){t.fillText(D,g.x(e.x+d),e.y+h/2),e.y+=h+o},p=g.textAlign(r);let b,y,v,C,_,S,x;for(t.textAlign=r,t.textBaseline="middle",t.font=u.string,e.x=dh(this,p,i),t.fillStyle=i.bodyColor,Gt(this.beforeBody,m),d=l&&p!=="right"?r==="center"?c/2+f:c+2+f:0,C=0,S=s.length;C<S;++C){for(b=s[C],y=this.labelTextColors[C],t.fillStyle=y,Gt(b.before,m),v=b.lines,l&&v.length&&(this._drawColorBox(t,e,C,g,i),h=Math.max(u.lineHeight,a)),_=0,x=v.length;_<x;++_)m(v[_]),h=u.lineHeight;Gt(b.after,m)}d=0,h=u.lineHeight,Gt(this.afterBody,m),e.y-=o}drawFooter(e,t,i){const s=this.footer,o=s.length;let r,l;if(o){const a=La(i.rtl,this.x,this.width);for(e.x=dh(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=a.textAlign(i.footerAlign),t.textBaseline="middle",r=Bn(i.footerFont),t.fillStyle=i.footerColor,t.font=r.string,l=0;l<o;++l)t.fillText(s[l],a.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+i.footerSpacing}}drawBackground(e,t,i,s){const{xAlign:o,yAlign:r}=this,{x:l,y:a}=e,{width:c,height:f}=i,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:g}=bl(s.cornerRadius);t.fillStyle=s.backgroundColor,t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.beginPath(),t.moveTo(l+u,a),r==="top"&&this.drawCaret(e,t,i,s),t.lineTo(l+c-h,a),t.quadraticCurveTo(l+c,a,l+c,a+h),r==="center"&&o==="right"&&this.drawCaret(e,t,i,s),t.lineTo(l+c,a+f-g),t.quadraticCurveTo(l+c,a+f,l+c-g,a+f),r==="bottom"&&this.drawCaret(e,t,i,s),t.lineTo(l+d,a+f),t.quadraticCurveTo(l,a+f,l,a+f-d),r==="center"&&o==="left"&&this.drawCaret(e,t,i,s),t.lineTo(l,a+u),t.quadraticCurveTo(l,a,l+u,a),t.closePath(),t.fill(),s.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,s=i&&i.x,o=i&&i.y;if(s||o){const r=Wc[e.position].call(this,this._active,this._eventPosition);if(!r)return;const l=this._size=RC(this,e),a=Object.assign({},r,this._size),c=DC(t,e,a),f=LC(e,a,c,t);(s._to!==f.x||o._to!==f.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=l.width,this.height=l.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,f))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const s={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const r=yi(t.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&l&&(e.save(),e.globalAlpha=i,this.drawBackground(o,e,s,t),t5(e,t.textDirection),o.y+=r.top,this.drawTitle(o,e,t),this.drawBody(o,e,t),this.drawFooter(o,e,t),n5(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,s=e.map(({datasetIndex:l,index:a})=>{const c=this.chart.getDatasetMeta(l);if(!c)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:c.data[a],index:a}}),o=!jd(i,s),r=this._positionChanged(s,t);(o||r)&&(this._active=s,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,o=this._active||[],r=this._getActiveElements(e,o,t,i),l=this._positionChanged(r,e),a=t||!jd(r,o)||l;return a&&(this._active=r,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),a}_getActiveElements(e,t,i,s){const o=this.options;if(e.type==="mouseout")return[];if(!s)return t.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const r=this.chart.getElementsAtEventForMode(e,o.mode,o,i);return o.reverse&&r.reverse(),r}_positionChanged(e,t){const{caretX:i,caretY:s,options:o}=this,r=Wc[o.position].call(this,e,t);return r!==!1&&(i!==r.x||s!==r.y)}}Ae(j1,"positioners",Wc);var V$={id:"tooltip",_element:j1,positioners:Wc,afterInit(n,e,t){t&&(n.tooltip=new j1({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:A5},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},H$=Object.freeze({__proto__:null,Colors:e$,Decimation:s$,Filler:C$,Legend:T$,SubTitle:D$,Title:R$,Tooltip:V$});const W$=(n,e,t,i)=>(typeof e=="string"?(t=n.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function q$(n,e,t,i){const s=n.indexOf(e);if(s===-1)return W$(n,e,t,i);const o=n.lastIndexOf(e);return s!==o?t:s}const U$=(n,e)=>n===null?null:Yn(Math.round(n),0,e);function BC(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class F1 extends Ul{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const i=this.getLabels();for(const{index:s,label:o}of t)i[s]===o&&i.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Lt(e))return null;const i=this.getLabels();return t=isFinite(t)&&i[t]===e?t:q$(i,e,gt(t,e),this._addedLabels),U$(t,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),t||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const e=this.min,t=this.max,i=this.options.offset,s=[];let o=this.getLabels();o=e===0&&t===o.length-1?o:o.slice(e,t+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let r=e;r<=t;r++)s.push({value:r});return s}getLabelForValue(e){return BC.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Ae(F1,"id","category"),Ae(F1,"defaults",{ticks:{callback:BC}});function J$(n,e){const t=[],{bounds:s,step:o,min:r,max:l,precision:a,count:c,maxTicks:f,maxDigits:u,includeBounds:h}=n,d=o||1,g=f-1,{min:m,max:p}=e,b=!Lt(r),y=!Lt(l),v=!Lt(c),C=(p-m)/(u+1);let _=ES((p-m)/g/d)*d,S,x,D,P;if(_<1e-14&&!b&&!y)return[{value:m},{value:p}];P=Math.ceil(p/_)-Math.floor(m/_),P>g&&(_=ES(P*_/g/d)*d),Lt(a)||(S=Math.pow(10,a),_=Math.ceil(_*S)/S),s==="ticks"?(x=Math.floor(m/_)*_,D=Math.ceil(p/_)*_):(x=m,D=p),b&&y&&o&&zX((l-r)/o,_/1e3)?(P=Math.round(Math.min((l-r)/_,f)),_=(l-r)/P,x=r,D=l):v?(x=b?r:x,D=y?l:D,P=c-1,_=(D-x)/P):(P=(D-x)/_,nf(P,Math.round(P),_/1e3)?P=Math.round(P):P=Math.ceil(P));const E=Math.max(RS(_),RS(x));S=Math.pow(10,Lt(a)?E:a),x=Math.round(x*S)/S,D=Math.round(D*S)/S;let O=0;for(b&&(h&&x!==r?(t.push({value:r}),x<r&&O++,nf(Math.round((x+O*_)*S)/S,r,jC(r,C,n))&&O++):x<r&&O++);O<P;++O){const I=Math.round((x+O*_)*S)/S;if(y&&I>l)break;t.push({value:I})}return y&&h&&D!==l?t.length&&nf(t[t.length-1].value,l,jC(l,C,n))?t[t.length-1].value=l:t.push({value:l}):(!y||D===l)&&t.push({value:D}),t}function jC(n,e,{horizontal:t,minRotation:i}){const s=Cs(i),o=(t?Math.sin(s):Math.cos(s))||.001,r=.75*e*(""+n).length;return Math.min(e/o,r)}class Ud extends Ul{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Lt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:s,max:o}=this;const r=a=>s=t?s:a,l=a=>o=i?o:a;if(e){const a=ao(s),c=ao(o);a<0&&c<0?l(0):a>0&&c>0&&r(0)}if(s===o){let a=o===0?1:Math.abs(o*.05);l(o+a),e||r(s-a)}this.min=s,this.max=o}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:i}=e,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),t=t||11),t&&(s=Math.min(t,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},o=this._range||this,r=J$(s,o);return e.bounds==="ticks"&&j6(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const s=(i-t)/Math.max(e.length-1,1)/2;t-=s,i+=s}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return cu(e,this.chart.options.locale,this.options.ticks.format)}}class z1 extends Ud{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Cn(e)?e:0,this.max=Cn(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=Cs(this.options.ticks.minRotation),s=(e?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,o.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Ae(z1,"id","linear"),Ae(z1,"defaults",{ticks:{callback:Bg.formatters.numeric}});const Vf=n=>Math.floor(pr(n)),nl=(n,e)=>Math.pow(10,Vf(n)+e);function FC(n){return n/Math.pow(10,Vf(n))===1}function zC(n,e,t){const i=Math.pow(10,t),s=Math.floor(n/i);return Math.ceil(e/i)-s}function K$(n,e){const t=e-n;let i=Vf(t);for(;zC(n,e,i)>10;)i++;for(;zC(n,e,i)<10;)i--;return Math.min(i,Vf(n))}function Y$(n,{min:e,max:t}){e=Wi(n.min,e);const i=[],s=Vf(e);let o=K$(e,t),r=o<0?Math.pow(10,Math.abs(o)):1;const l=Math.pow(10,o),a=s>o?Math.pow(10,s):0,c=Math.round((e-a)*r)/r,f=Math.floor((e-a)/l/10)*l*10;let u=Math.floor((c-f)/Math.pow(10,o)),h=Wi(n.min,Math.round((a+f+u*Math.pow(10,o))*r)/r);for(;h<t;)i.push({value:h,major:FC(h),significand:u}),u>=10?u=u<15?15:20:u++,u>=20&&(o++,u=2,r=o>=0?1:r),h=Math.round((a+f+u*Math.pow(10,o))*r)/r;const d=Wi(n.max,h);return i.push({value:d,major:FC(d),significand:u}),i}class V1 extends Ul{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const i=Ud.prototype.parse.apply(this,[e,t]);if(i===0){this._zero=!0;return}return Cn(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Cn(e)?Math.max(0,e):null,this.max=Cn(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Cn(this._userMin)&&(this.min=e===nl(this.min,0)?nl(this.min,-1):nl(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let i=this.min,s=this.max;const o=l=>i=e?i:l,r=l=>s=t?s:l;i===s&&(i<=0?(o(1),r(10)):(o(nl(i,-1)),r(nl(s,1)))),i<=0&&o(nl(s,-1)),s<=0&&r(nl(i,1)),this.min=i,this.max=s}buildTicks(){const e=this.options,t={min:this._userMin,max:this._userMax},i=Y$(t,this);return e.bounds==="ticks"&&j6(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":cu(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=pr(e),this._valueRange=pr(this.max)-pr(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(pr(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}Ae(V1,"id","logarithmic"),Ae(V1,"defaults",{ticks:{callback:Bg.formatters.logarithmic,major:{enabled:!0}}});function H1(n){const e=n.ticks;if(e.display&&n.display){const t=yi(e.backdropPadding);return gt(e.font&&e.font.size,Mn.font.size)+t.height}return 0}function X$(n,e,t){return t=bn(t)?t:[t],{w:iG(n,e.string,t),h:t.length*e.lineHeight}}function VC(n,e,t,i,s){return n===i||n===s?{start:e-t/2,end:e+t/2}:n<i||n>s?{start:e-t,end:e}:{start:e,end:e+t}}function G$(n){const e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),i=[],s=[],o=n._pointLabels.length,r=n.options.pointLabels,l=r.centerPointLabels?dn/o:0;for(let a=0;a<o;a++){const c=r.setContext(n.getPointLabelContext(a));s[a]=c.padding;const f=n.getPointPosition(a,n.drawingArea+s[a],l),u=Bn(c.font),h=X$(n.ctx,u,n._pointLabels[a]);i[a]=h;const d=Ui(n.getIndexAngle(a)+l),g=Math.round(xb(d)),m=VC(g,f.x,h.w,0,180),p=VC(g,f.y,h.h,90,270);Q$(t,e,d,m,p)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=eee(n,i,s)}function Q$(n,e,t,i,s){const o=Math.abs(Math.sin(t)),r=Math.abs(Math.cos(t));let l=0,a=0;i.start<e.l?(l=(e.l-i.start)/o,n.l=Math.min(n.l,e.l-l)):i.end>e.r&&(l=(i.end-e.r)/o,n.r=Math.max(n.r,e.r+l)),s.start<e.t?(a=(e.t-s.start)/r,n.t=Math.min(n.t,e.t-a)):s.end>e.b&&(a=(s.end-e.b)/r,n.b=Math.max(n.b,e.b+a))}function Z$(n,e,t){const i=n.drawingArea,{extra:s,additionalAngle:o,padding:r,size:l}=t,a=n.getPointPosition(e,i+s+r,o),c=Math.round(xb(Ui(a.angle+Tn))),f=iee(a.y,l.h,c),u=tee(c),h=nee(a.x,l.w,u);return{visible:!0,x:a.x,y:f,textAlign:u,left:h,top:f,right:h+l.w,bottom:f+l.h}}function $$(n,e){if(!e)return!0;const{left:t,top:i,right:s,bottom:o}=n;return!(Lo({x:t,y:i},e)||Lo({x:t,y:o},e)||Lo({x:s,y:i},e)||Lo({x:s,y:o},e))}function eee(n,e,t){const i=[],s=n._pointLabels.length,o=n.options,{centerPointLabels:r,display:l}=o.pointLabels,a={extra:H1(o)/2,additionalAngle:r?dn/s:0};let c;for(let f=0;f<s;f++){a.padding=t[f],a.size=e[f];const u=Z$(n,f,a);i.push(u),l==="auto"&&(u.visible=$$(u,c),u.visible&&(c=u))}return i}function tee(n){return n===0||n===180?"center":n<180?"left":"right"}function nee(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function iee(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function see(n,e,t){const{left:i,top:s,right:o,bottom:r}=t,{backdropColor:l}=e;if(!Lt(l)){const a=bl(e.borderRadius),c=yi(e.backdropPadding);n.fillStyle=l;const f=i-c.left,u=s-c.top,h=o-i+c.width,d=r-s+c.height;Object.values(a).some(g=>g!==0)?(n.beginPath(),Ff(n,{x:f,y:u,w:h,h:d,radius:a}),n.fill()):n.fillRect(f,u,h,d)}}function oee(n,e){const{ctx:t,options:{pointLabels:i}}=n;for(let s=e-1;s>=0;s--){const o=n._pointLabelItems[s];if(!o.visible)continue;const r=i.setContext(n.getPointLabelContext(s));see(t,r,o);const l=Bn(r.font),{x:a,y:c,textAlign:f}=o;Bl(t,n._pointLabels[s],a,c+l.lineHeight/2,l,{color:r.color,textAlign:f,textBaseline:"middle"})}}function O5(n,e,t,i){const{ctx:s}=n;if(t)s.arc(n.xCenter,n.yCenter,e,0,hn);else{let o=n.getPointPosition(0,e);s.moveTo(o.x,o.y);for(let r=1;r<i;r++)o=n.getPointPosition(r,e),s.lineTo(o.x,o.y)}}function ree(n,e,t,i,s){const o=n.ctx,r=e.circular,{color:l,lineWidth:a}=e;!r&&!i||!l||!a||t<0||(o.save(),o.strokeStyle=l,o.lineWidth=a,o.setLineDash(s.dash),o.lineDashOffset=s.dashOffset,o.beginPath(),O5(n,t,r,i),o.closePath(),o.stroke(),o.restore())}function lee(n,e,t){return Wr(n,{label:t,index:e,type:"pointLabel"})}class qc extends Ud{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=yi(H1(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=Cn(e)&&!isNaN(e)?e:0,this.max=Cn(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/H1(this.options))}generateTickLabels(e){Ud.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,i)=>{const s=rn(this.options.pointLabels.callback,[t,i],this);return s||s===0?s:""}).filter((t,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?G$(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,s){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,s))}getIndexAngle(e){const t=hn/(this._pointLabels.length||1),i=this.options.startAngle||0;return Ui(e*t+Cs(i))}getDistanceFromCenterForValue(e){if(Lt(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Lt(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const i=t[e];return lee(this.getContext(),e,i)}}getPointPosition(e,t,i=0){const s=this.getIndexAngle(e)-Tn+i;return{x:Math.cos(s)*t+this.xCenter,y:Math.sin(s)*t+this.yCenter,angle:s}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:i,right:s,bottom:o}=this._pointLabelItems[e];return{left:t,top:i,right:s,bottom:o}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),O5(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:i,grid:s,border:o}=t,r=this._pointLabels.length;let l,a,c;if(t.pointLabels.display&&oee(this,r),s.display&&this.ticks.forEach((f,u)=>{if(u!==0||u===0&&this.min<0){a=this.getDistanceFromCenterForValue(f.value);const h=this.getContext(u),d=s.setContext(h),g=o.setContext(h);ree(this,d,a,r,g)}}),i.display){for(e.save(),l=r-1;l>=0;l--){const f=i.setContext(this.getPointLabelContext(l)),{color:u,lineWidth:h}=f;!h||!u||(e.lineWidth=h,e.strokeStyle=u,e.setLineDash(f.borderDash),e.lineDashOffset=f.borderDashOffset,a=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),c=this.getPointPosition(l,a),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;const s=this.getIndexAngle(0);let o,r;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((l,a)=>{if(a===0&&this.min>=0&&!t.reverse)return;const c=i.setContext(this.getContext(a)),f=Bn(c.font);if(o=this.getDistanceFromCenterForValue(this.ticks[a].value),c.showLabelBackdrop){e.font=f.string,r=e.measureText(l.label).width,e.fillStyle=c.backdropColor;const u=yi(c.backdropPadding);e.fillRect(-r/2-u.left,-o-f.size/2-u.top,r+u.width,f.size+u.height)}Bl(e,l.label,0,-o,f,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}Ae(qc,"id","radialLinear"),Ae(qc,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Bg.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),Ae(qc,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Ae(qc,"descriptors",{angleLines:{_fallback:"grid"}});const Vg={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ei=Object.keys(Vg);function HC(n,e){return n-e}function WC(n,e){if(Lt(e))return null;const t=n._adapter,{parser:i,round:s,isoWeekday:o}=n._parseOpts;let r=e;return typeof i=="function"&&(r=i(r)),Cn(r)||(r=typeof i=="string"?t.parse(r,i):t.parse(r)),r===null?null:(s&&(r=s==="week"&&(Za(o)||o===!0)?t.startOf(r,"isoWeek",o):t.startOf(r,s)),+r)}function qC(n,e,t,i){const s=Ei.length;for(let o=Ei.indexOf(n);o<s-1;++o){const r=Vg[Ei[o]],l=r.steps?r.steps:Number.MAX_SAFE_INTEGER;if(r.common&&Math.ceil((t-e)/(l*r.size))<=i)return Ei[o]}return Ei[s-1]}function aee(n,e,t,i,s){for(let o=Ei.length-1;o>=Ei.indexOf(t);o--){const r=Ei[o];if(Vg[r].common&&n._adapter.diff(s,i,r)>=e-1)return r}return Ei[t?Ei.indexOf(t):0]}function cee(n){for(let e=Ei.indexOf(n)+1,t=Ei.length;e<t;++e)if(Vg[Ei[e]].common)return Ei[e]}function UC(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:i,hi:s}=Ab(t,e),o=t[i]>=e?t[i]:t[s];n[o]=!0}}function fee(n,e,t,i){const s=n._adapter,o=+s.startOf(e[0].value,i),r=e[e.length-1].value;let l,a;for(l=o;l<=r;l=+s.add(l,1,i))a=t[l],a>=0&&(e[a].major=!0);return e}function JC(n,e,t){const i=[],s={},o=e.length;let r,l;for(r=0;r<o;++r)l=e[r],s[l]=r,i.push({value:l,major:!1});return o===0||!t?i:fee(n,i,s,t)}class Hf extends Ul{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const i=e.time||(e.time={}),s=this._adapter=new _Q._date(e.adapters.date);s.init(t),tf(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:WC(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,i=e.time.unit||"day";let{min:s,max:o,minDefined:r,maxDefined:l}=this.getUserBounds();function a(c){!r&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!l&&!isNaN(c.max)&&(o=Math.max(o,c.max))}(!r||!l)&&(a(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&a(this.getMinMax(!1))),s=Cn(s)&&!isNaN(s)?s:+t.startOf(Date.now(),i),o=Cn(o)&&!isNaN(o)?o:+t.endOf(Date.now(),i)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){const e=this.options,t=e.time,i=e.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const o=this.min,r=this.max,l=qX(s,o,r);return this._unit=t.unit||(i.autoSkip?qC(t.minUnit,this.min,this.max,this._getLabelCapacity(o)):aee(this,l.length,t.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:cee(this._unit),this.initOffsets(s),e.reverse&&l.reverse(),JC(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,i=0,s,o;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?t=1-s:t=(this.getDecimalForValue(e[1])-s)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?i=o:i=(o-this.getDecimalForValue(e[e.length-2]))/2);const r=e.length<3?.5:.25;t=Yn(t,0,r),i=Yn(i,0,r),this._offsets={start:t,end:i,factor:1/(t+1+i)}}_generate(){const e=this._adapter,t=this.min,i=this.max,s=this.options,o=s.time,r=o.unit||qC(o.minUnit,t,i,this._getLabelCapacity(t)),l=gt(s.ticks.stepSize,1),a=r==="week"?o.isoWeekday:!1,c=Za(a)||a===!0,f={};let u=t,h,d;if(c&&(u=+e.startOf(u,"isoWeek",a)),u=+e.startOf(u,c?"day":r),e.diff(i,t,r)>1e5*l)throw new Error(t+" and "+i+" are too far apart with stepSize of "+l+" "+r);const g=s.ticks.source==="data"&&this.getDataTimestamps();for(h=u,d=0;h<i;h=+e.add(h,l,r),d++)UC(f,h,g);return(h===i||s.bounds==="ticks"||d===1)&&UC(f,h,g),Object.keys(f).sort(HC).map(m=>+m)}getLabelForValue(e){const t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){const s=this.options.time.displayFormats,o=this._unit,r=t||s[o];return this._adapter.format(e,r)}_tickFormatFunction(e,t,i,s){const o=this.options,r=o.ticks.callback;if(r)return rn(r,[e,t,i],this);const l=o.time.displayFormats,a=this._unit,c=this._majorUnit,f=a&&l[a],u=c&&l[c],h=i[t],d=c&&u&&h&&h.major;return this._adapter.format(e,s||(d?u:f))}generateTickLabels(e){let t,i,s;for(t=0,i=e.length;t<i;++t)s=e[t],s.label=this._tickFormatFunction(s.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,i=this.ctx.measureText(e).width,s=Cs(this.isHorizontal()?t.maxRotation:t.minRotation),o=Math.cos(s),r=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:i*o+l*r,h:i*r+l*o}}_getLabelCapacity(e){const t=this.options.time,i=t.displayFormats,s=i[t.unit]||i.millisecond,o=this._tickFormatFunction(e,0,JC(this,[e],this._majorUnit),s),r=this._getLabelSize(o),l=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],t,i;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(t=0,i=s.length;t<i;++t)e=e.concat(s[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,i;if(e.length)return e;const s=this.getLabels();for(t=0,i=s.length;t<i;++t)e.push(WC(this,s[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return V6(e.sort(HC))}}Ae(Hf,"id","time"),Ae(Hf,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function gh(n,e,t){let i=0,s=n.length-1,o,r,l,a;t?(e>=n[i].pos&&e<=n[s].pos&&({lo:i,hi:s}=Do(n,"pos",e)),{pos:o,time:l}=n[i],{pos:r,time:a}=n[s]):(e>=n[i].time&&e<=n[s].time&&({lo:i,hi:s}=Do(n,"time",e)),{time:o,pos:l}=n[i],{time:r,pos:a}=n[s]);const c=r-o;return c?l+(a-l)*(e-o)/c:l}class W1 extends Hf{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=gh(t,this.min),this._tableRange=gh(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,s=[],o=[];let r,l,a,c,f;for(r=0,l=e.length;r<l;++r)c=e[r],c>=t&&c<=i&&s.push(c);if(s.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(r=0,l=s.length;r<l;++r)f=s[r+1],a=s[r-1],c=s[r],Math.round((f+a)/2)!==c&&o.push({time:c,pos:r/(l-1)});return o}_generate(){const e=this.min,t=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((s,o)=>s-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(gh(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return gh(this._table,i*this._tableRange+this._minPos,!0)}}Ae(W1,"id","timeseries"),Ae(W1,"defaults",Hf.defaults);var uee=Object.freeze({__proto__:null,CategoryScale:F1,LinearScale:z1,LogarithmicScale:V1,RadialLinearScale:qc,TimeScale:Hf,TimeSeriesScale:W1});const hee=[yQ,YZ,H$,uee];Ao.register(...hee);function dee(n){let e,t;return e=new kO({}),{c(){se(e.$$.fragment)},m(i,s){ne(e,i,s),t=!0},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){M(e.$$.fragment,i),t=!1},d(i){ie(e,i)}}}function gee(n){let e,t,i;function s(r){n[5](r)}let o={mode:Wn.text,onChange:n[3]};return n[1]!==void 0&&(o.content=n[1]),e=new QY({props:o}),it.push(()=>Jn(e,"content",s)),{c(){se(e.$$.fragment)},m(r,l){ne(e,r,l),i=!0},p(r,l){const a={};!t&&l&2&&(t=!0,a.content=r[1],Un(()=>t=!1)),e.$set(a)},i(r){i||(k(e.$$.fragment,r),i=!0)},o(r){M(e.$$.fragment,r),i=!1},d(r){ie(e,r)}}}function mee(n){let e;return{c(){e=R("div"),w(e,"class","chart svelte-1xjzbkg")},m(t,i){j(t,e,i),n[6](e)},p:ge,d(t){t&&B(e),n[6](null)}}}function pee(n){let e,t,i,s;return e=new SS({props:{$$slots:{default:[gee]},$$scope:{ctx:n}}}),i=new SS({props:{$$slots:{default:[mee]},$$scope:{ctx:n}}}),{c(){se(e.$$.fragment),t=G(),se(i.$$.fragment)},m(o,r){ne(e,o,r),j(o,t,r),ne(i,o,r),s=!0},p(o,r){const l={};r&8194&&(l.$$scope={dirty:r,ctx:o}),e.$set(l);const a={};r&8196&&(a.$$scope={dirty:r,ctx:o}),i.$set(a)},i(o){s||(k(e.$$.fragment,o),k(i.$$.fragment,o),s=!0)},o(o){M(e.$$.fragment,o),M(i.$$.fragment,o),s=!1},d(o){o&&B(t),ie(e,o),ie(i,o)}}}function bee(n){let e,t,i,s,o,r;function l(c){n[4](c)}let a={platformName:"Chart.js Viewer",$$slots:{"skip-to-content":[dee]},$$scope:{ctx:n}};return n[0]!==void 0&&(a.isSideNavOpen=n[0]),e=new yO({props:a}),it.push(()=>Jn(e,"isSideNavOpen",l)),o=new nX({props:{$$slots:{default:[pee]},$$scope:{ctx:n}}}),{c(){se(e.$$.fragment),i=G(),s=R("div"),se(o.$$.fragment),w(s,"class","content svelte-1xjzbkg")},m(c,f){ne(e,c,f),j(c,i,f),j(c,s,f),ne(o,s,null),r=!0},p(c,[f]){const u={};f&8192&&(u.$$scope={dirty:f,ctx:c}),!t&&f&1&&(t=!0,u.isSideNavOpen=c[0],Un(()=>t=!1)),e.$set(u);const h={};f&8198&&(h.$$scope={dirty:f,ctx:c}),o.$set(h)},i(c){r||(k(e.$$.fragment,c),k(o.$$.fragment,c),r=!0)},o(c){M(e.$$.fragment,c),M(o.$$.fragment,c),r=!1},d(c){c&&(B(i),B(s)),ie(e,c),ie(o)}}}function yee(n,e,t){const i={type:"bar",data:{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul"],datasets:[{label:"My First Dataset",data:[65,59,80,81,56,55,40]}]},options:{scales:{y:{beginAtZero:!0}}}};let s=!1,o={json:i},r,l,a;Ai(()=>{r&&c(o,o,{contentErrors:null,patchResult:null})});function c(p,b,y){if(t(1,o=p),y.contentErrors===null){const v=f();u(v)}else h()}function f(){const p=o;return p.json!==void 0?p.json:JSON.parse(o.text)}function u(p){if(r!==void 0){h(),l=document.createElement("canvas"),r.appendChild(l);try{a=new Ao(l,p)}catch(b){console.error(b),h()}}}function h(){a!==void 0&&(a.destroy(),a=void 0),l!==void 0&&(l.remove(),l=void 0)}function d(p){s=p,t(0,s)}function g(p){o=p,t(1,o)}function m(p){it[p?"unshift":"push"](()=>{r=p,t(2,r)})}return[s,o,r,c,d,g,m]}class _ee extends ze{constructor(e){super(),Fe(this,e,yee,bee,Qt,{})}}new _ee({target:document.body})});export default wee();
//# sourceMappingURL=index-CQGmpO46.js.map
